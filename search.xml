<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å®Œå–„å…¬ä¼—å·åŠŸèƒ½</title>
      <link href="/%E5%AE%8C%E5%96%84%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8A%9F%E8%83%BD/"/>
      <url>/%E5%AE%8C%E5%96%84%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ideaæ’ä»¶å¼€å‘</title>
      <link href="/idea%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/"/>
      <url>/idea%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å¸ƒéš†è¿‡æ»¤å™¨</title>
      <link href="/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/"/>
      <url>/%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æˆ‘ä»¬å®é™…å¼€å‘è¿‡ç¨‹ä¸­,Redis ä½¿ç”¨è¶Šæ¥è¶Šå¹¿æ³›,éšä¹‹è€Œæ¥å¾ˆå¤šé—®é¢˜,æ¯”å¦‚ Redis ç¼“å­˜ç©¿é€é—®é¢˜(å¤§é‡è¯·æ±‚æ ¹æœ¬ä¸å­˜åœ¨çš„key),å¾ˆå¤šäººéƒ½çŸ¥é“ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯å¸ƒéš†è¿‡æ»¤å™¨ï¼Ÿå¸ƒéš†è¿‡æ»¤å™¨åŸç†æ˜¯ä»€ä¹ˆå‘¢?</p><span id="more"></span><h4 id="ä½å›¾"><a href="#ä½å›¾" class="headerlink" title="ä½å›¾"></a>ä½å›¾</h4><p>è®²å¸ƒéš†è¿‡æ»¤å™¨å‰,å…ˆäº†è§£ä¸€ä¸‹ä½å›¾(Bitmap),å³ä½(Bit)çš„é›†åˆ,æ˜¯ä¸€ç§æ•°æ®ç»“æ„,å¯ç”¨äºè®°å½•å¤§é‡çš„0-1çŠ¶æ€,åœ¨å¾ˆå¤šåœ°æ–¹éƒ½ä¼šç”¨åˆ°,å…¶ä¼˜åŠ¿æ˜¯å¯ä»¥åœ¨ä¸€ä¸ªéå¸¸é«˜çš„ç©ºé—´åˆ©ç”¨ç‡ä¸‹ä¿å­˜å¤§é‡0-1çŠ¶æ€,é€šå¸¸æ˜¯ç”¨æ¥åˆ¤æ–­æŸä¸ªæ•°æ®å­˜ä¸å­˜åœ¨çš„ã€‚</p><h4 id="ä½å›¾æ³•çš„åŸºæœ¬åŸç†"><a href="#ä½å›¾æ³•çš„åŸºæœ¬åŸç†" class="headerlink" title="ä½å›¾æ³•çš„åŸºæœ¬åŸç†"></a>ä½å›¾æ³•çš„åŸºæœ¬åŸç†</h4><p>ä½å›¾æ³•çš„åŸç†ä¸»è¦å°±æ˜¯åˆ©ç”¨intç±»å‹æ•°æ®ï¼Œä¸€ä¸ªintç±»å‹å 4ä¸ªå­—èŠ‚ï¼Œè€Œä¸€ä¸ªå­—èŠ‚æœ‰8ä¸ªbitä½ï¼Œå› æ­¤ä¸€ä¸ªintæ•°æ®å°±å¯ä»¥è¡¨ç¤º0-31çš„æ•°æ˜¯å¦å­˜åœ¨(æ•°å€¼æ˜¯å¤šå°‘å°±ç”¨ç¬¬å‡ ä½Bitä½ï¼Œ0å’Œ1è¡¨ç¤ºè¿™ä¸ªæ•°å€¼æ˜¯å¦å­˜åœ¨)ã€‚å¦‚æœè¦æŸ¥æ‰¾æ€»æ•°ä¸º N çš„æ•°æ®å­˜åœ¨æ€§ï¼Œåªéœ€è¦ç”³è¯·ä¸€ä¸ªé•¿åº¦ä¸º<code>N/32+1</code>çš„intæ•°ç»„å³å¯å®Œæˆè¿™äº›æ•°æ®çš„å­˜å‚¨,å…¶ä¸­æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å¯æ ‡è¯†32ä¸ªæ•°æ®çš„çŠ¶æ€ã€‚</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ä¸¾ä¸ªæ —å­ğŸŒ°:ç°è¦å­˜æ”¾3ã€6ã€11ã€37ã€48ã€64ã€71ã€97ç­‰æ•°å€¼å­˜åœ¨çš„çŠ¶æ€ã€‚</span><br><span class="line">1:ç”³è¯·ä¸€ä¸ªé•¿åº¦ä¸º97/32+1=4çš„æ•°ç»„ã€‚</span><br><span class="line">2:å°†è¦å­˜æ”¾çš„æ•°å­—é™¤ä»¥32å–æ•´æ•°éƒ¨åˆ†,æ¯”å¦‚3/32=0,6/32=0,11/32=0,37/32=1,48/32=1,64/32=2,71/32=2,97/32=3</span><br><span class="line">3:å°†è¦å­˜æ”¾çš„æ•°å­—é™¤ä»¥32å–ä½™æ•°,æ¯”å¦‚3%32=3,6%32=6,11%32=11,37%32=5,48%32=16,64%32=0,71%32=7,97%32=1</span><br><span class="line">4:ä¾¿å¯å¾—åˆ°:æ•°å­—3å­˜æ”¾äºç¬¬0ä¸ªintçš„ç¬¬3ä¸ªbitä½</span><br><span class="line">          æ•°å­—6å­˜æ”¾äºç¬¬0ä¸ªintçš„ç¬¬6ä¸ªbitä½</span><br><span class="line">          æ•°å­—11å­˜æ”¾äºç¬¬0ä¸ªintçš„ç¬¬11ä¸ªbitä½</span><br><span class="line">          æ•°å­—37å­˜æ”¾äºç¬¬1ä¸ªintçš„ç¬¬5ä¸ªbitä½</span><br><span class="line">          æ•°å­—48å­˜æ”¾äºç¬¬1ä¸ªintçš„ç¬¬16ä¸ªbitä½</span><br><span class="line">          æ•°å­—64å­˜æ”¾äºç¬¬2ä¸ªintçš„ç¬¬0ä¸ªbitä½</span><br><span class="line">          æ•°å­—71å­˜æ”¾äºç¬¬2ä¸ªintçš„ç¬¬7ä¸ªbitä½</span><br><span class="line">          æ•°å­—97å­˜æ”¾äºç¬¬3ä¸ªintçš„ç¬¬1ä¸ªbitä½</span><br></pre></td></tr></table></figure><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304242207336.png" style="zoom:50%;" /><h4 id="å¸ƒéš†è¿‡æ»¤å™¨"><a href="#å¸ƒéš†è¿‡æ»¤å™¨" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨"></a>å¸ƒéš†è¿‡æ»¤å™¨</h4><p>å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰æ˜¯1970å¹´ç”±å¸ƒéš†æå‡ºçš„ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•°ã€‚å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ç©ºé—´æ•ˆç‡å’ŒæŸ¥è¯¢æ—¶é—´éƒ½æ¯”ä¸€èˆ¬çš„ç®—æ³•è¦å¥½çš„å¤šï¼Œç¼ºç‚¹æ˜¯æœ‰ä¸€å®šçš„è¯¯è¯†åˆ«ç‡å’Œåˆ é™¤å›°éš¾ã€‚</p><h4 id="å¸ƒéš†è¿‡æ»¤å™¨çš„åŸºæœ¬åŸç†"><a href="#å¸ƒéš†è¿‡æ»¤å™¨çš„åŸºæœ¬åŸç†" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨çš„åŸºæœ¬åŸç†"></a>å¸ƒéš†è¿‡æ»¤å™¨çš„åŸºæœ¬åŸç†</h4><p>å¸ƒéš†è¿‡æ»¤å™¨å°±æ˜¯é€šè¿‡å°†å…ƒç´ è¿›è¡Œå¤šä¸ªHashç®—æ³•è®¡ç®—ï¼Œéƒ½å­˜å…¥ä½å›¾ä¸­ï¼ŒæŸ¥è¯¢æ—¶ä½¿ç”¨åŒæ ·çš„Hashç®—æ³•è®¡ç®—ï¼Œ<strong>åªè¦æœ‰ä¸€ä¸ªæ¯”ç‰¹ä½ä¸ºé›¶ï¼Œ ä»£è¡¨è¯¥å…ƒç´ ä¸€å®šä¸åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œå¦åˆ™å¯èƒ½åœ¨å“ˆå¸Œè¡¨ä¸­ã€‚</strong></p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304262141686.png" style="zoom:50%;" /><p><strong>æ³¨æ„:å¸ƒéš†è¿‡æ»¤å™¨å¦‚æœè¯´æŸä¸ªå…ƒç´ ä¸å­˜åœ¨æ—¶ï¼Œè¯¥å…ƒç´ ä¸€å®šä¸å­˜åœ¨ï¼Œå¦‚æœè¯¥å…ƒç´ å­˜åœ¨æ—¶ï¼Œè¯¥å…ƒç´ å¯èƒ½å­˜åœ¨ï¼Œå› ä¸ºæœ‰äº›å“ˆå¸Œå‡½æ•°å­˜åœ¨ä¸€å®šçš„è¯¯åˆ¤ã€‚</strong></p><p>æ¯”å¦‚:åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­æŸ¥æ‰¾â€HEIHEIHEIâ€æ—¶ï¼Œå‡è®¾3ä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—çš„å“ˆå¸Œå€¼ä¸º:1ã€13ã€16ï¼Œåˆšå¥½å’Œå…¶ä»–å…ƒç´ çš„æ¯”ç‰¹ä½é‡å ï¼Œæ­¤æ—¶å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­è¯¥å…ƒç´ æ˜¯å­˜åœ¨çš„ï¼Œä½†å®é™…ä¸Šè¯¥å…ƒç´ æ˜¯ä¸å­˜åœ¨çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisä¸MySQLæ•°æ®ä¸€è‡´æ€§</title>
      <link href="/Redis%E4%B8%8EMySQL%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7/"/>
      <url>/Redis%E4%B8%8EMySQL%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<p>Rediså’ŒMySQLæ•°æ®çš„ä¸€è‡´æ€§,è¿™æ˜¯ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜,ä¸»è¦åŸå› æ˜¯ä¸ºäº†å‡å°‘æ•°æ®åº“çš„IO,æé«˜æ•°æ®æŸ¥è¯¢çš„æ€§èƒ½,ç»å¸¸å°†Redisåšä¸ºåº”ç”¨ç¨‹åºä¸æ•°æ®åº“ä¹‹é—´çš„ç¼“å­˜,ä½†æ˜¯éšä¹‹è€Œæ¥å°±å‡ºç°å„ç§å„æ ·çš„é—®é¢˜,è¿™æ¬¡å°±æ¥æ·±åº¦å‰–æä¸€ä¸‹ã€‚</p><span id="more"></span><h4 id="é—®é¢˜åŸå› "><a href="#é—®é¢˜åŸå› " class="headerlink" title="é—®é¢˜åŸå› "></a>é—®é¢˜åŸå› </h4><blockquote><p>åœ¨ä¼ ç»Ÿçš„åº”ç”¨ç¨‹åºä¸­,å½“å¤§é‡çš„ç”¨æˆ·å»è¯·æ±‚ä¸€äº›çƒ­ç‚¹æ•°æ®çš„æ—¶å€™,åº”ç”¨ç¨‹åºä¼šé¢‘ç¹å»æ“ä½œå¯¹åº”çš„æ•°æ®åº“,ä¸ä»…é€ æˆæ•°æ®åº“å‹åŠ›å¤ªå¤§,è€Œä¸”æ€§èƒ½åŠå®æ•ˆæ€§ä¸å¥½ã€‚æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,å¼•å…¥Redisä½œä¸ºç¼“å­˜,å½“åº”ç”¨ç¨‹åºéœ€è¦å»è¯»å–æ•°æ®åº“çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå…ˆå°è¯•å» Redis ä¸­åŠ è½½ï¼Œå¦‚æœå‘½ä¸­å°±ç›´æ¥å°†æ•°æ®è¿”å›ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­åˆ™å»ä»æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢,æŸ¥è¯¢åˆ°æ•°æ®ä¹‹å,æŠŠè¿™ä¸ªæ•°æ®é‡æ–°ç¼“å­˜åˆ° Redis é‡Œé¢,ç„¶åè¿”å›ç»™ç”¨æˆ·ã€‚</p></blockquote><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304142215938.png" style="zoom:50%;" /><p>åªæ˜¯æŸ¥è¯¢çš„è¯,çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜,ä½†æ˜¯å¦‚æœæœ‰è¯·æ±‚å»ä¿®æ”¹æ•°æ®åº“æ•°æ®çš„æ—¶å€™,é—®é¢˜å°±æµ®ç°å‡ºæ¥äº†,å› ä¸ºæ•°æ®åº“æ›´æ–°å’Œ Redis æ›´æ–°å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œ,æœ‰å…ˆåé¡ºåº,å…¶ä¸­çš„ä¸€ä¸ªæ“ä½œä¹Ÿå¯èƒ½ä¼šå¤±è´¥,è¿™æ ·çš„è¯å°±ä¼šå‡ºç° Redis å’Œ MySQL ä¸­çš„æ•°æ®æœ‰ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><h4 id="é—®é¢˜å‰–æ"><a href="#é—®é¢˜å‰–æ" class="headerlink" title="é—®é¢˜å‰–æ"></a>é—®é¢˜å‰–æ</h4><ul><li><p>å…ˆæ›´æ–° MySQL ,å†æ›´æ–° Redis</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304151715157.png" style="zoom:50%;" /><p>å¦‚å›¾,åœ¨é«˜å¹¶å‘æƒ…å†µä¸‹ï¼Œå¦‚æœç”¨æˆ· A çš„è¯·æ±‚åœ¨å†™ Redis æ—¶ç½‘ç»œé˜»å¡äº†ä¸€ä¸‹,è€Œç”¨æˆ· B çš„è¯·æ±‚åå‘å…ˆè‡³ä¾æ¬¡å®Œæˆäº†æ•°æ®çš„æ›´æ–°,æ­¤æ—¶å°±ä¼šå‡ºç°MySQLä¸­stock&#x3D;5,è€ŒRedisä¸­stock&#x3D;10çš„æƒ…å†µ,æ‰€ä»¥å…ˆæ›´æ–° MySQL ,å†æ›´æ–° Redisçš„æ–¹æ¡ˆæ˜¯ä¸å¯è¡Œçš„ã€‚</p></li><li><p>å…ˆæ›´æ–° Redis ,å†æ›´æ–° MySQL</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304151725342.png" style="zoom:50%;" /><p>ä¸ä¸Šä¸€ç§æƒ…å†µç±»ä¼¼,å¦‚æœç”¨æˆ· A çš„è¯·æ±‚åœ¨å†™ MySQL æ—¶ç½‘ç»œé˜»å¡äº†ä¸€ä¸‹,è€Œç”¨æˆ· B çš„è¯·æ±‚åå‘å…ˆè‡³ä¾æ¬¡å®Œæˆäº†æ•°æ®çš„æ›´æ–°,æ­¤æ—¶å°±ä¼šå‡ºç° MySQ Lä¸­ stock&#x3D;10,è€Œ Redis ä¸­ stock&#x3D;5çš„æƒ…å†µ,æ‰€ä»¥å…ˆæ›´æ–° Redis ,å†æ›´æ–° MySQL çš„æ–¹æ¡ˆä¹Ÿæ˜¯ä¸å¯è¡Œçš„ã€‚</p></li><li><p>å…ˆåˆ é™¤ Redis ,å†æ›´æ–° MySQL</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304151744427.png" style="zoom:50%;" /><p>è¿™ç§æƒ…å†µå¾ˆå®¹æ˜“å‘ç”Ÿ,å› ä¸ºä¸€èˆ¬æ›´æ–°æ•°æ®èŠ±è´¹çš„æ—¶é—´è¾ƒé•¿,è€Œè¯·æ±‚æ•°æ®èŠ±è´¹çš„æ—¶é—´è¾ƒçŸ­,æ‰€ä»¥ä¼šå‡ºç°å³ä½¿æ›´æ–° MySQL å‰åˆ é™¤äº† Redis ,ä½†ä¾æ—§è¢«å†™å…¥äº†ä¸ä¸€è‡´çš„æ•°æ®,æ•…æ­¤ç§æ–¹æ¡ˆä¾æ—§ä¸å¯è¡Œã€‚</p></li><li><p>å…ˆåˆ é™¤ Redis ,å†æ›´æ–° MySQL ,å†åˆ é™¤ Redis</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304152205788.png" style="zoom:50%;" /><p>è¿™ç§æ–¹æ¡ˆæ˜¯é’ˆå¯¹ä¸Šä¸ªæ–¹æ¡ˆæå‡ºçš„,ä½†æ˜¯è¿™ç§æ–¹æ¡ˆæœ‰ä¸ªå…³é”®å°±æ˜¯,å›¾ä¸­çš„8æ“ä½œå¿…é¡»è¦åœ¨6æ“ä½œä¹‹å,è€Œä¸”8åˆ é™¤æ“ä½œä¸€å®šè¦æˆåŠŸ,å¦åˆ™çš„è¯ä»æ—§ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚å› æ­¤æœ‰äººæå‡ºå»¶æ—¶åŒåˆ (ç¡®ä¿èƒ½åˆ é™¤å…¶ä»–çº¿ç¨‹å›å†™åˆ°Redisçš„æ•°æ®),ä½†æ˜¯è¿™ä¸ªå»¶æ—¶çš„æ—¶é—´ä¸å¥½æŠŠæ¡,ä¸å¯æ§ã€‚è¿˜æœ‰å¤±è´¥é‡è¯•æœºåˆ¶,å¦åˆ™ç¬¬äºŒæ¬¡åˆ é™¤å¤±è´¥çš„è¯,ä»ç„¶ä¸è¡Œã€‚è¿™ç§æ–¹æ¡ˆèƒ½ç”¨æ˜¯èƒ½ç”¨,ä½†æ˜¯å­˜åœ¨é£é™©,æ…ç”¨ã€‚</p></li><li><p>å…ˆæ›´æ–° MySQL ,å†åˆ é™¤ Redis</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304152239449.png" style="zoom:50%;" /><p>è¿™ç§æ–¹æ¡ˆåœ¨ä¸€èˆ¬æƒ…å†µä¸‹éƒ½å¯ä»¥ä½¿ç”¨,åªæ˜¯ä¼šå­˜åœ¨ä¸€éƒ¨åˆ†æŸ¥è¯¢è¯·æ±‚ä¼šè¿”å›ä¸ä¸€è‡´çš„æ•°æ®,ä½†æ˜¯è¿˜æ˜¯èƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§çš„,ä½†åœ¨æç«¯æƒ…å†µä¸‹è¿˜æ˜¯ä¼šæœ‰ä¸€ç‚¹é—®é¢˜ã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304152242878.png" style="zoom:50%;" /><p>å¦‚ä¸Šå›¾,ç¼“å­˜æ­£å¥½å¤±æ•ˆçš„æ—¶å€™è¿˜æ˜¯ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ,ä½†æ¯•ç«Ÿæ¯”è¾ƒæç«¯ã€‚æ‰€ä»¥è¿™ç§æ–¹æ¡ˆçš„å¯è¡Œæ€§è¿˜æ˜¯å¯ä»¥çš„ã€‚</p></li><li><p>å…ˆå†™ MySQL ,é€šè¿‡ Binlog ,å¼‚æ­¥æ›´æ–° Redis</p><p>è¿™ç§æ–¹æ¡ˆæ˜¯é€šè¿‡æ‹‰å–MySQL master èŠ‚ç‚¹çš„ binlog ,ç„¶åé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å»æ›´æ–° Redis ,è¿™æ ·æ˜¯èƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§çš„ã€‚ä½†æ˜¯å¯¹ä»£ç ä¸šåŠ¡å…¥ä¾µå¤ªå¤§,å¯æ–Ÿé…Œä½¿ç”¨ã€‚</p></li></ul><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>ä»¥ä¸Šå°±æ˜¯å¯¹ Redis å’Œ MySQL ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„åˆ†æã€‚ä¸€èˆ¬æƒ…å†µä¸‹<code>å…ˆæ›´æ–° MySQL ,å†åˆ é™¤ Redis</code>è¿™ç§æ–¹æ¡ˆè¾ƒä¼˜,èƒ½æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Prometheus+Grafanaæ­å»ºçº¿ä¸Šç›‘æ§</title>
      <link href="/Prometheus+Grafana%E6%90%AD%E5%BB%BA%E7%BA%BF%E4%B8%8A%E7%9B%91%E6%8E%A7/"/>
      <url>/Prometheus+Grafana%E6%90%AD%E5%BB%BA%E7%BA%BF%E4%B8%8A%E7%9B%91%E6%8E%A7/</url>
      
        <content type="html"><![CDATA[<p>â€œçº¿ä¸Šå‡ºäº†é—®é¢˜ï¼Œä½ ä»¬æ˜¯æ€ä¹ˆæ’æŸ¥çš„ï¼Ÿæ’æŸ¥çš„æ€è·¯æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿâ€,ä½ æœ‰è¢«é—®è¿‡è¿™ä¸ªé—®é¢˜å—ï¼Ÿåƒæˆ‘ä»¬ä¸€èˆ¬æŸ¥ç”Ÿäº§é—®é¢˜éƒ½æ˜¯ä»ç”Ÿäº§ç¯å¢ƒå°†æ—¥å¿—æ‹‰ä¸‹æ¥æŸ¥çœ‹,å¦‚æœJVMå¼‚å¸¸ä¹Ÿåªèƒ½åˆ†ædumpæ–‡ä»¶ã€‚ä½†è¿™è¿œè¿œä¸å¤Ÿï¼Œå¦‚æœæœ‰ä¸ªçº¿ä¸ŠJVMç›‘æ§ç³»ç»Ÿï¼Œå‡ºäº†é—®é¢˜å¯ä»¥å¿«é€Ÿå®šä½é—®é¢˜ï¼Œæ‰€ä»¥è¿™æ¬¡è¯•ç€æ­å»ºä¸€ä¸ªçº¿ä¸ŠJVMç›‘æ§ã€‚ä½¿ç”¨çš„æ˜¯ä¸šç•Œæ¯”è¾ƒå‡ºåçš„Prometheus(æ™®ç½—ç±³ä¿®æ–¯)+Grafnaçœ‹æ¿ã€‚</p><span id="more"></span><h4 id="éƒ¨ç½²Prometheusã€Grafana"><a href="#éƒ¨ç½²Prometheusã€Grafana" class="headerlink" title="éƒ¨ç½²Prometheusã€Grafana"></a>éƒ¨ç½²Prometheusã€Grafana</h4><ul><li><p>ç¼–å†™DockerFileæ–‡ä»¶,å‘½åä¸º<code>monitor.yml</code></p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">    <span class="attr">monitor:</span></span><br><span class="line">        <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">    <span class="attr">prometheus:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">prom/prometheus</span></span><br><span class="line">        <span class="attr">container_name:</span> <span class="string">prometheus</span></span><br><span class="line">        <span class="attr">hostname:</span> <span class="string">prometheus</span></span><br><span class="line">        <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">        <span class="attr">volumes:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/Users/mizhuo/Path/docker/prometheus/config:/etc/prometheus</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;9090:9090&quot;</span></span><br><span class="line">        <span class="attr">networks:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">monitor</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">grafana:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">grafana/grafana</span></span><br><span class="line">        <span class="attr">container_name:</span> <span class="string">grafana</span></span><br><span class="line">        <span class="attr">hostname:</span> <span class="string">grafana</span></span><br><span class="line">        <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;3000:3000&quot;</span></span><br><span class="line">        <span class="attr">networks:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">monitor</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">node-exporter:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">quay.io/prometheus/node-exporter</span></span><br><span class="line">        <span class="attr">container_name:</span> <span class="string">node-exporter</span></span><br><span class="line">        <span class="attr">hostname:</span> <span class="string">node-exporter</span></span><br><span class="line">        <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;9100:9100&quot;</span></span><br><span class="line">        <span class="attr">networks:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">monitor</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">mysqld-exporter:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">prom/mysqld-exporter</span></span><br><span class="line">        <span class="attr">container_name:</span> <span class="string">mysqld-exporter</span></span><br><span class="line">        <span class="attr">hostname:</span> <span class="string">mysqld-exporter</span></span><br><span class="line">        <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;9104:9104&quot;</span></span><br><span class="line">        <span class="attr">environment:</span></span><br><span class="line">            <span class="comment">#- DATA_SOURCE_NAME=root:mizhuo123@(host.docker.internal:3306)/  ##è¿æ¥å®¿ä¸»æœºmysql</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">DATA_SOURCE_NAME=root:mizhuo123@(mysql:3306)/</span>                  <span class="comment">##è¿æ¥dockerçš„mysqlå®¹å™¨</span></span><br><span class="line">        <span class="attr">networks:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">monitor</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">cadvisor:</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">gcr.io/google/cadvisor:latest</span></span><br><span class="line">        <span class="attr">container_name:</span> <span class="string">cadvisor</span></span><br><span class="line">        <span class="attr">hostname:</span> <span class="string">cadvisor</span></span><br><span class="line">        <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">        <span class="attr">volumes:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/:/rootfs:ro</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/var/run:/var/run:rw</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/sys:/sys:ro</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/var/lib/docker/:/var/lib/docker:ro</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;8899:8080&quot;</span></span><br><span class="line">        <span class="attr">networks:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">monitor</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™<code>prometheus.yml</code>é…ç½®æ–‡ä»¶(è·¯å¾„è¦ä¸dockerFileä¸­é…ç½®çš„è·¯å¾„ä¸€è‡´)</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># my global config</span></span><br><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">scrape_interval:</span> <span class="string">15s</span> <span class="comment"># Set the scrape interval to every 15 seconds. Default is every 1 minute.</span></span><br><span class="line">  <span class="attr">evaluation_interval:</span> <span class="string">15s</span> <span class="comment"># Evaluate rules every 15 seconds. The default is every 1 minute.</span></span><br><span class="line">  <span class="comment"># scrape_timeout is set to the global default (10s).</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Alertmanager configuration</span></span><br><span class="line"><span class="attr">alerting:</span></span><br><span class="line">  <span class="attr">alertmanagers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">static_configs:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">targets:</span></span><br><span class="line">          <span class="comment"># - alertmanager:9093</span></span><br><span class="line"></span><br><span class="line"><span class="attr">rule_files:</span></span><br><span class="line">  <span class="comment"># - &quot;first_rules.yml&quot;</span></span><br><span class="line">  <span class="comment"># - &quot;second_rules.yml&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;prometheus&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;prometheus:9090&#x27;</span>]</span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;cadvisor&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;cadvisor:8080&#x27;</span>]</span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;node&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;node-exporter:9100&#x27;</span>]</span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;mysql&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;mysqld-exporter:9104&#x27;</span>]</span><br></pre></td></tr></table></figure>  <div class="note red icon-padding flat"><i class="note-icon fas fa-triangle-exclamation"></i><p>å…¶ä¸­<code>targets</code>åä¸ºé“¾æ¥çš„å„å®¹å™¨åœ°å€åŠç«¯å£,ipè¦ä¸dockerfileä¸­hostnameä¿æŒä¸€è‡´,ç«¯å£è¦ä¸å®¹å™¨åŸç«¯å£ä¸€è‡´,<strong>ä¸èƒ½å†™æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£</strong>ï¼</p></div></li><li><p>ä½¿ç”¨å‘½ä»¤<code>docker-compose -f monitor.yml up -d</code>ç¼–æ’å®¹å™¨ã€‚</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@Mac-mini î‚° ~/Path/docker/dockerFiles/prometheus î‚° docker-compose -f prometheus.yml up -d</span><br><span class="line">[+] Running 6/6</span><br><span class="line">â ¿ Network prometheus_monitor  Created                                                                                                                                                                                                                                     0.1s</span><br><span class="line">â ¿ Container node-exporter     Started                                                                                                                                                                                                                                     1.8s</span><br><span class="line">â ¿ Container mysqld-exporter   Started                                                                                                                                                                                                                                     1.2s</span><br><span class="line">â ¿ Container cadvisor          Started                                                                                                                                                                                                                                     1.7s</span><br><span class="line">â ¿ Container prometheus        Started                                                                                                                                                                                                                                     1.8s</span><br><span class="line">â ¿ Container grafana           Started                                                                                                                                                                                                                                     1.5s</span><br></pre></td></tr></table></figure></li></ul><h4 id="è®¿é—®Prometheus"><a href="#è®¿é—®Prometheus" class="headerlink" title="è®¿é—®Prometheus"></a>è®¿é—®Prometheus</h4>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304072140358.png" style="zoom:50%;" /><p>  å¯ä»¥çœ‹åˆ°<code>prometheus</code>å·²ç»æˆåŠŸè¿æ¥åˆ°äº†å„ä¸ªexporter,å¹¶ä¸”èƒ½å¤Ÿç›‘æ§åˆ°mysqlã€linuxã€dockerå®¹å™¨ç­‰çŠ¶æ€,ä½†æ˜¯æ˜¯ä»¥æ–‡æœ¬çš„å½¢å¼å±•ç¤ºçš„,æ‰€ä»¥éœ€è¦<code>Grafana</code>é¢æ¿å°†è¿™äº›æ•°æ®è½¬åŒ–ä¸ºå›¾å½¢åŒ–ç•Œé¢ã€‚</p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304072208944.png" style="zoom:50%;" /><h4 id="Grafanaå›¾å½¢åŒ–é¢æ¿"><a href="#Grafanaå›¾å½¢åŒ–é¢æ¿" class="headerlink" title="Grafanaå›¾å½¢åŒ–é¢æ¿"></a>Grafanaå›¾å½¢åŒ–é¢æ¿</h4><ul><li><p>ç™»å½•Grafanaåæ·»åŠ æ•°æ®æº</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304072230215.png" style="zoom:50%;" /></li><li><p>å»å®˜ç½‘<a href="https://grafana.com/grafana/dashboards/">Dashboards | Grafana Labs</a>ä¸‹è½½æ¨¡æ¿æˆ–è€…æ‹·è´ID</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304081531454.png"></p></li><li><p>Grafana å±•ç¤ºç›‘æ§æ•°æ®</p><ul><li><p>å¯¼å…¥ä»ªè¡¨ç›˜,æ‹¿MySQLä¸ºä¾‹,IDä¸º7362</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304072232883.png"  /></li><li><p>è¿æ¥prometheusæ•°æ®æºå¹¶å¯¼å…¥</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304072233168.png"  /></li></ul></li><li><p>æŸ¥çœ‹MySQLç›‘æ§é¢æ¿</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304072235155.png"  /></li><li><p>æŸ¥çœ‹Linuxç›‘æ§é¢æ¿</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304081607759.png"></p></li></ul><h4 id="ç›‘æ§SpringCloud"><a href="#ç›‘æ§SpringCloud" class="headerlink" title="ç›‘æ§SpringCloud"></a>ç›‘æ§SpringCloud</h4><p>å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯Nacosåšä¸ºæ³¨å†Œä¸­å¿ƒ,è¦æƒ³è¢«ç›‘æ§åªèƒ½å°†Nacosä¼ªè£…æˆConsul<a href="https://github.com/weixiaohui-1/nacos-consul-adapter">Releases Â· weixiaohui-1&#x2F;nacos-consul-adapter (github.com)</a>,å¦‚æœæ˜¯Consulæˆ–è€…æ˜¯Eurekaå¯ä»¥æŸ¥çœ‹å®˜æ–¹çš„é…ç½®<a href="https://blog.csdn.net/qq_33257527/article/details/88388278">https://prometheus.io/docs/prometheus/latest/configuration/configuration/</a></p><ul><li><p>åœ¨GateWayä¸­å¼•å…¥ä¾èµ–<code>implementation &#39;io.github.chen-gliu:nacos-consul-adapter:0.0.5.M&#39;</code></p></li><li><p>åœ¨æ¯ä¸ªæœåŠ¡ä¸­å¼•å…¥ä¾èµ–<code>implementation &#39;io.micrometer:micrometer-registry-prometheus:1.10.5&#39;</code></p></li><li><p>æ³¨å†ŒBean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">MeterRegistryCustomizer&lt;MeterRegistry&gt; <span class="title function_">configurer</span><span class="params">(</span></span><br><span class="line"><span class="params">  <span class="meta">@Value(&quot;$&#123;spring.application.name&#125;&quot;)</span> String applicationName)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (registry) -&gt; registry.config().commonTags(<span class="string">&quot;application&quot;</span>, applicationName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯æœåŠ¡å¹¶è®¿é—®<code>http://localhost:8848/nacos/actuator/prometheus</code>å°±èƒ½çœ‹åˆ°é‡‡é›†çš„æŒ‡æ ‡æ•°æ®äº†ã€‚<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304111515870.png" style="zoom:50%;" /></p></li><li><p>ä¿®æ”¹prometheus.yml</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&quot;nacos&quot;</span></span><br><span class="line">    <span class="attr">scrape_interval:</span> <span class="string">2s</span>    </span><br><span class="line">    <span class="attr">metrics_path:</span> <span class="string">&#x27;/nacos/actuator/prometheus&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;host.docker.internal:8848&#x27;</span>] <span class="comment">##å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯Dockerä¸­çš„prometheuså»ç›‘æ§å®¿ä¸»æœºçš„å¾®æœåŠ¡,æ‰€ä»¥ipæ˜¯host.docker.internal</span></span><br></pre></td></tr></table></figure></li><li><p>Grafanaä¸­æ·»åŠ ä»ªè¡¨ç›˜,æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯4701</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304111512392.png"></p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304111512573.png"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> JVM </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysqld-exporteræ— æ³•è¿æ¥åˆ°mysqlçš„é—®é¢˜</title>
      <link href="/mysqld-exporter%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E5%88%B0mysql%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/mysqld-exporter%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E5%88%B0mysql%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨æ­å»ºPrometheus+Grafanaçº¿ä¸Šç›‘æ§çš„æ—¶å€™,åœ¨ä½¿ç”¨Mysqld-exporteræ—¶å‡ºç°è¿æ¥ä¸ä¸ŠMysqlçš„é—®é¢˜,å°è¯•äº†å¾ˆå¤šæ–¹æ³•ç»ˆäºè§£å†³äº†,è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><p>æœ€å¼€å§‹ä½¿ç”¨çš„DockerFileç‰ˆæœ¬:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mysqld-exporter:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">prom/mysqld-exporter</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysqld-exporter</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">mysqld-exporter</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;9104:9104&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">DATA_SOURCE_NAME=&quot;root:mizhuo123@(mysql:3306)/&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">monitor</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨åå‘ç°æ²¡æœ‰è¿ä¸ŠMysql,æŸ¥çœ‹æ—¥å¿—å‘ç°å¦‚ä¸‹å†…å®¹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2022-12-20 21:44:13 level=error ts=2022-12-20T13:44:13.508Z caller=exporter.go:149 msg=&quot;Error pinging mysqld&quot; err=&quot;dial tcp: lookup mysql on 192.168.65.7:53: no such host&quot;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨äº†&#96;docker inspectå‘½ä»¤æŸ¥çœ‹äº†ä¸€ä¸‹ä¸¤ä¸ªå®¹å™¨çš„ç½‘ç»œæƒ…å†µã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@Mac-mini î‚° ~/Path/docker/dockerFiles î‚° docker inspect --format=&#x27;&#123;&#123;.Name&#125;&#125; - &#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125; &#123;&#123;end&#125;&#125;&#x27; $(docker ps -aq)</span><br><span class="line">/cadvisor - 172.31.0.3</span><br><span class="line">/prometheus - 172.31.0.5</span><br><span class="line">/mysqld-exporter - 172.31.0.6</span><br><span class="line">/grafana - 172.31.0.4</span><br><span class="line">/node-exporter - 172.31.0.2</span><br><span class="line">/mysql - 172.17.0.2</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°ä¸¤ä¸ªå®¹å™¨æ˜¯ä¸åœ¨ä¸€ä¸ªç½‘æ®µçš„,æ‰€ä»¥ä½¿ç”¨å®¹å™¨åç§°å’Œdockerå†…çš„ipè¿æ¥æ˜¯è¿æ¥ä¸ä¸Šçš„ã€‚äºæ˜¯æˆ‘åˆ›å»ºäº†ä¸€ä¸ªç½‘ç»œ,å¹¶æŠŠmysqlå’Œmysqld-exporterä¸¤ä¸ªå®¹å™¨éƒ½åŠ å…¥åˆ°è¿™ä¸ªç½‘ç»œä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@Mac-mini î‚° ~/Path/docker/dockerFiles î‚° docker network create -d bridge common</span><br><span class="line">mizhuo@Mac-mini î‚° ~/Path/docker/dockerFiles î‚° docker network connect common mysql</span><br><span class="line">mizhuo@Mac-mini î‚° ~/Path/docker/dockerFiles î‚° docker network connect common mysqld-exporter</span><br></pre></td></tr></table></figure><p>é‡æ–°æŸ¥çœ‹ä¸€ä¸‹ä¸¤ä¸ªå®¹å™¨çš„ç½‘ç»œæƒ…å†µ,ä¸¤ä¸ªå®¹å™¨å¯ä»¥ç›¸äº’è®¿é—®äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@Mac-mini î‚° ~/Path/docker/dockerFiles î‚°  docker inspect --format=&#x27;&#123;&#123;.Name&#125;&#125; - &#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125; &#123;&#123;end&#125;&#125;&#x27; $(docker ps -aq)</span><br><span class="line">/cadvisor - 172.31.0.3</span><br><span class="line">/prometheus - 172.31.0.5</span><br><span class="line">/mysqld-exporter - 172.27.0.3 172.31.0.6</span><br><span class="line">/grafana - 172.31.0.4</span><br><span class="line">/node-exporter - 172.31.0.2</span><br><span class="line">/nacos -</span><br><span class="line">/mysql - 172.17.0.2 172.27.0.2</span><br></pre></td></tr></table></figure><p>æœ¬ä»¥ä¸ºé—®é¢˜å·²ç»è§£å†³äº†,ä½†æ˜¯é‡å¯å®¹å™¨ååˆæŠ¥é”™äº†ï¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">level=error msg=&quot;Error pinging mysqld: Error 1045: Access denied for user &#x27;\&quot;root&#x27;@&#x27;172.27.0.3&#x27; (using password: YES)&quot; source=&quot;exporter.go:146&quot;</span><br></pre></td></tr></table></figure><p>æˆ‘å°è¯•ä½¿ç”¨æˆ‘é…ç½®çš„è´¦å·å¯†ç å»ç™»å½•æ•°æ®åº“,å‘ç°å¹¶æ²¡æœ‰é”™è¯¯,ä¹Ÿå¼€å¯äº†è¿œç¨‹è¿æ¥,ä½¿ç”¨æœ¬åœ°navicatå¯ä»¥æˆåŠŸè¿æ¥,ç”šè‡³æˆ‘ä¸ä½¿ç”¨DockerFile,ä½¿ç”¨<code>docker run -d --name mysqld_exporter2 -p 9105:9104 -e DATA_SOURCE_NAME=&quot;root:mizhuo123@(mysql:3306)/&quot; --network common prom/mysqld-exporter</code>å•ç‹¬åˆ›å»ºä¸€ä¸ªmysqld-exporter2å®¹å™¨ä¹Ÿèƒ½æˆåŠŸè¿æ¥,å®Œå…¨æ’é™¤æ•°æ®åº“çš„é—®é¢˜ã€‚æœ€ååœ¨Githubæºç çš„issuesä¸­æ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆ:<a href="https://github.com/prometheus/mysqld_exporter/issues/440">é”™è¯¯ 1045ï¼šæ‹’ç»ç”¨æˆ·è®¿é—® Â·é—®é¢˜ #440 Â·æ™®ç½—ç±³ä¿®æ–¯&#x2F;mysqld_exporter (github.com)</a>,é—®é¢˜ç«Ÿç„¶å‡ºç°åœ¨<code>- DATA_SOURCE_NAME=&quot;root:mizhuo123@(mysql:3306)/&quot;</code>ä¸­ä¸èƒ½ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·!å»é™¤åæœç„¶æˆåŠŸè¿æ¥mysqlå¹¶ç›‘æ§mysqlçŠ¶æ€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›½å†…æ— æ³•æ‹‰å–gcr.ioé•œåƒçš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="/%E5%9B%BD%E5%86%85%E6%97%A0%E6%B3%95%E6%8B%89%E5%8F%96gcr-io%E9%95%9C%E5%83%8F%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/%E5%9B%BD%E5%86%85%E6%97%A0%E6%B3%95%E6%8B%89%E5%8F%96gcr-io%E9%95%9C%E5%83%8F%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨ä½¿ç”¨Dokceræ‹‰å–ä¸€ä¸ªé•œåƒçš„æ—¶å€™,æ§åˆ¶å°æŠ¥äº†å¦‚ä¸‹é”™è¯¯:<code>Error response from daemon: Get &quot;https://gcr.io/v2/&quot;: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)</code>,ä¸»è¦æ˜¯éœ€è¦ç§‘å­¦ä¸Šç½‘,ä½†ä¹Ÿå¯ä»¥æ›²çº¿æ•‘å›½,è¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><h4 id="ä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡"><a href="#ä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡" class="headerlink" title="ä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡"></a>ä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡</h4><ul><li><p>ç™»é™†é˜¿é‡Œäº‘,è¿›å…¥åˆ°å®¹å™¨é•œåƒæœåŠ¡,å¦‚æœæ²¡æœ‰å®ä¾‹åˆ—è¡¨å°±æ–°å»ºä¸€ä¸ª,å¦‚æœæœ‰çš„è¯å°±ç›´æ¥è¿›å…¥ã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304032155556.png" style="zoom:50%;" /></li><li><p>åˆ›å»ºä¸€ä¸ªé•œåƒä»“åº“,è¿™ä¸ªåç§°å¯ä»¥éšæ„</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304032156372.png" style="zoom:50%;" /></li><li><p>ç‚¹å‡»ä¸‹ä¸€æ­¥åé€‰æ‹©Github,å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒä»£ç æº,åˆšè¿›æ¥çš„æ—¶å€™éœ€è¦ç»‘å®šæˆæƒ,ç„¶åé€‰æ‹©å¯¹åº”çš„ä»“åº“,åƒæˆ‘è¿™æ˜¯åœ¨githubæ–°å»ºäº†ä¸€ä¸ªgrc.ioçš„ä»“åº“,æœ€åé€‰æ‹©æµ·å¤–æœºå™¨æ„å»ºã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304041032328.png" style="zoom:50%;" /></li><li><p>åœ¨githubä»“åº“ä¸­æ–°å»ºä¸€ä¸ªdockerfileæ–‡ä»¶ï¼Œå†…å®¹æ˜¯ä½ æƒ³è¦æ‹‰å–çš„é•œåƒã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304041129682.png" style="zoom:50%;" /></li><li><p>è¿”å›é•œåƒä»“åº“,ç‚¹å‡»ç®¡ç†,ç„¶åæ„å»ºè§„åˆ™,å®ƒä¼šæ ¹æ®ä¸Šé¢é€‰æ‹©çš„ä»“åº“å»è·å–,é€‰æ‹©åˆ†æ”¯åŠæ–‡ä»¶å,å¡«å¥½è¦æ‹‰å–çš„é•œåƒåç§°ã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304041141505.png" style="zoom:50%;" /></li><li><p>é€‰æ‹©ç«‹å³æ„å»º,ç„¶åæŸ¥çœ‹æ—¥å¿—ã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304041142626.png" style="zoom:50%;" /><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304041143855.png" style="zoom:50%;" /></li><li><p>æ ¹æ®ä»“åº“åŸºæœ¬ä¿¡æ¯ä¸Šé¢çš„æ“ä½œ,è¿æ¥è¿œç¨‹ä»“åº“,å¹¶å°†é•œåƒæ‹‰å–åˆ°æœ¬åœ°ã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202304041145666.png" style="zoom:50%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@MacBook-Pro î‚° ~/Path/docker/dockerfiles/prometheus î‚° docker login --username=xxxxxxxxx registry.cn-hangzhou.aliyuncs.com</span><br><span class="line">Password:</span><br><span class="line">Login Succeeded</span><br><span class="line"></span><br><span class="line">Logging in with your password grants your terminal complete access to your account.</span><br><span class="line">For better security, log in with a limited-privilege personal access token. Learn more at https://docs.docker.com/go/access-tokens/</span><br><span class="line">mizhuo@MacBook-Pro î‚° ~/Path/docker/dockerfiles/prometheus î‚° docker pull registry.cn-hangzhou.aliyuncs.com/mizhuo/gcr.io:latest</span><br><span class="line">latest: Pulling from mizhuo/gcr.io</span><br><span class="line">188c0c94c7c5: Pull complete</span><br><span class="line">2d4828968d6c: Pull complete</span><br><span class="line">b28a9b13dc6d: Pull complete</span><br><span class="line">031224e6222c: Pull complete</span><br><span class="line">Digest: sha256:32c7931328521a182b34718b943fed35d91ca403a85faa7ad271bfd2c2504c69</span><br><span class="line">Status: Downloaded newer image for registry.cn-hangzhou.aliyuncs.com/mizhuo/gcr.io:latest</span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/mizhuo/gcr.io:latest</span><br><span class="line">mizhuo@MacBook-Pro î‚° ~/Path/docker/dockerfiles/prometheus î‚° docker tag registry.cn-hangzhou.aliyuncs.com/mizhuo/gcr.io gcr.io/google/cadvisor</span><br><span class="line">mizhuo@MacBook-Pro î‚° ~/Path/docker/dockerfiles/prometheus î‚° docker images gcr.io/google/cadvisor</span><br><span class="line">REPOSITORY               TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">gcr.io/google/cadvisor   latest    96d423e05772   2 years ago   163MB</span><br><span class="line">mizhuo@MacBook-Pro î‚° ~/Path/docker/dockerfiles/prometheus î‚°</span><br></pre></td></tr></table></figure></li></ul><p>å¯ä»¥çœ‹åˆ°,é•œåƒæˆåŠŸæ‹‰å–åˆ°æœ¬åœ°äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é—®é¢˜é›†é”¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²SpringCloudé¡¹ç›®</title>
      <link href="/%E4%BD%BF%E7%94%A8Jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2SpringCloud%E9%A1%B9%E7%9B%AE/"/>
      <url>/%E4%BD%BF%E7%94%A8Jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2SpringCloud%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<p><code>Jenkins</code>æ˜¯ä¸€ä¸ªæŒç»­é›†æˆå·¥å…·,ä¸»è¦æ˜¯é€šè¿‡æ‹‰å–è¿œç¨‹gitä»“åº“çš„ä»£ç åˆ°æœ¬åœ°,ç„¶åä½¿ç”¨ç¼–è¯‘å·¥å…·ç¼–è¯‘æ‹‰å–çš„ä»£ç ,æœ€åå°†ç¼–è¯‘çš„ç»“æœéƒ¨ç½²åˆ°æŒ‡å®šæœºå™¨ä¸Šã€‚è¿™æ ·å¤§å¤§çš„å‡å°‘äº†å¼€å‘äººå‘˜çš„å·¥ä½œ,å¼€å‘äººå‘˜åªéœ€è¦å°†ä»£ç ä¸Šä¼ è‡³ä»“åº“ä¸­,å…¶ä½™çš„å·¥ä½œJenkinsä¼šè‡ªåŠ¨å®Œæˆã€‚</p><span id="more"></span><h3 id="å®‰è£…Jenkins"><a href="#å®‰è£…Jenkins" class="headerlink" title="å®‰è£…Jenkins"></a>å®‰è£…Jenkins</h3><h4 id="å®˜æ–¹ç½‘ç«™"><a href="#å®˜æ–¹ç½‘ç«™" class="headerlink" title="å®˜æ–¹ç½‘ç«™"></a>å®˜æ–¹ç½‘ç«™</h4><p>Jenkinsä¸­æ–‡å®˜ç½‘ï¼š<a href="https://www.jenkins.io/zh/">https://www.jenkins.io/zh/</a></p><h4 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h4><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202212052159317.png" style="zoom:50%;" /><h4 id="å¯åŠ¨Jenkins"><a href="#å¯åŠ¨Jenkins" class="headerlink" title="å¯åŠ¨Jenkins"></a>å¯åŠ¨Jenkins</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name jenkins -d -p 18080:8080 -p 50000:50000 -v /Users/mizhuo/Path/docker/jenkins:/var/jenkins_home -v /var/run/docker.sock:/var/run/docker.sock jenkins/jenkins:2.375.1-lts</span><br></pre></td></tr></table></figure><h4 id="è®¿é—®Jenkins"><a href="#è®¿é—®Jenkins" class="headerlink" title="è®¿é—®Jenkins"></a>è®¿é—®Jenkins</h4><p>æ ¹æ®æ˜ å°„çš„ç«¯å£å·è®¿é—®Jenkins,æç¤ºéœ€è¦è§£é”ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202212052218983.png" style="zoom:30%;" /></p><p>æ ¹æ®æç¤ºåˆ°å®¹å™¨ä¸­æ‰¾åˆ°å¯†ç ,ä¾¿å¯ä»¥æˆåŠŸè®¿é—®Jenkinsã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202212052211818.png" style="zoom:50%;" /></p><h4 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h4><p>è¿™é‡Œç›´æ¥é€‰æ‹©å®‰è£…æ¨èçš„æ’ä»¶äº†,å«Œå®‰è£…é€Ÿåº¦æ…¢çš„ä¹Ÿå¯ä»¥æŒ‰éœ€å®‰è£…ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202212052213358.png" style="zoom:30%;" /></p><p>å®‰è£…å®Œæˆå,ä¼šæ–°å»ºä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·,ç„¶åå°±ä¼šè¿›å…¥åˆ°Jenkinsçš„ä¸»é¡µã€‚è¿›å…¥æ’ä»¶ç®¡ç†,å®‰è£…ä¸‹é¢å‡ ä¸ªæ’ä»¶ã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202212052240054.png" style="zoom:30%;" /><ul><li>å®‰è£…Maven Integration</li><li>å®‰è£…Gradle Plugins(æ¨èçš„æ’ä»¶ä¸­æœ‰)</li><li>å®‰è£…Publish Over SSH(å¦‚æœä¸éœ€è¦è¿œç¨‹æ¨é€ï¼Œä¸ç”¨å®‰è£…)</li></ul><h4 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h4><p>è¿›å…¥<code>Dashboard</code>-&gt;<code>ç³»ç»Ÿç®¡ç†</code>-&gt;<code>å…¨å±€å·¥å…·é…ç½®</code>,é…ç½®JDKã€Gitã€Mavenç­‰ç¯å¢ƒ,å¯ä»¥ä¸‹è½½åä¸Šä¼ åˆ°jenkinsä¸­,ä¹Ÿå¯ä»¥é€‰æ‹©è‡ªåŠ¨å®‰è£…ã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202212052308411.png" style="zoom:33%;" />]]></content>
      
      
      <categories>
          
          <category> Jenkins </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Feignä¼ é€’token</title>
      <link href="/Feign%E4%BC%A0%E9%80%92token/"/>
      <url>/Feign%E4%BC%A0%E9%80%92token/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åšé¡¹ç›®çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜,é¡¹ç›®ä¸­ä½¿ç”¨çš„å®‰å…¨æ¡†æ¶æ˜¯Oauth2+Security,ä½¿ç”¨JWTæ¥è¿›è¡Œé‰´æƒ,æ­£å¸¸è¯·æ±‚è°ƒç”¨æœåŠ¡æ˜¯æ²¡æœ‰é—®é¢˜çš„,ä½†æ˜¯ä½¿ç”¨Feignè¿œç¨‹è°ƒç”¨å…¶å®ƒå¾®æœåŠ¡å,ç›®æ ‡æœåŠ¡ä¸­æ— æ³•è·å–è¿™ä¸ªheaderä¸­çš„ä¿¡æ¯,è¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><h4 id="é—®é¢˜å‰–æ"><a href="#é—®é¢˜å‰–æ" class="headerlink" title="é—®é¢˜å‰–æ"></a>é—®é¢˜å‰–æ</h4><p>headerä¸¢å¤±çš„åŸå› æ˜¯å› ä¸ºFeignè¿œç¨‹è°ƒç”¨çš„æ—¶å€™,ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„è¯·æ±‚,å…¶ä¸­åŒ…å«è·¯å¾„å’Œå‚æ•°,ä½†ä¸ä¼šæºå¸¦è¯·æ±‚å¤´ã€‚å…·ä½“ä»£ç åœ¨<code>SynchronousMethodHandler</code>ä¸­:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object[] argv)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">    <span class="type">RequestTemplate</span> <span class="variable">template</span> <span class="operator">=</span> buildTemplateFromArgs.create(argv);</span><br><span class="line">    <span class="type">Options</span> <span class="variable">options</span> <span class="operator">=</span> findOptions(argv);</span><br><span class="line">    <span class="type">Retryer</span> <span class="variable">retryer</span> <span class="operator">=</span> <span class="built_in">this</span>.retryer.clone();</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> executeAndDecode(template, options);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (RetryableException e) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          retryer.continueOrPropagate(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RetryableException th) &#123;</span><br><span class="line">          <span class="type">Throwable</span> <span class="variable">cause</span> <span class="operator">=</span> th.getCause();</span><br><span class="line">          <span class="keyword">if</span> (propagationPolicy == UNWRAP &amp;&amp; cause != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> cause;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> th;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (logLevel != Logger.Level.NONE) &#123;</span><br><span class="line">          logger.logRetry(metadata.configKey(), logLevel);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>ä½¿ç”¨æ‹¦æˆªå™¨,æ‰‹åŠ¨å°†headerä¿¡æ¯æ·»åŠ åˆ°æ–°çš„è¯·æ±‚ä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * feignä¼ é€’tokenæ‹¦æˆªç»Ÿä¸€å¤„ç†</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mizhuo</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FeignConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RequestInterceptor <span class="title function_">requestInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> requestTemplate -&gt; &#123;</span><br><span class="line">            <span class="type">ServletRequestAttributes</span> <span class="variable">attributes</span> <span class="operator">=</span> (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">            <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> Optional.ofNullable(attributes).get().getRequest();</span><br><span class="line">            Enumeration&lt;String&gt; headerNames = request.getHeaderNames();</span><br><span class="line">            <span class="keyword">if</span> (headerNames != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">while</span> (headerNames.hasMoreElements()) &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> headerNames.nextElement();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">values</span> <span class="operator">=</span> request.getHeader(name);</span><br><span class="line">                    requestTemplate.header(name, values);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ·»åŠ æ‹¦æˆªå™¨å,ç›®æ ‡æœåŠ¡å¯ä»¥æˆåŠŸè·å–headerä¿¡æ¯äº†,ä½†è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜,æˆ‘åœ¨headerä¸­å­˜æ”¾äº†ä¸€ä¸ªç”¨æˆ·åŸºæœ¬ä¿¡æ¯çš„jsonä¸²,<code>requestTemplate.header(name, values);</code>æ·»åŠ æ—¶,å¯¹valueè¿›è¡Œè§£æ,ä¸¢å¤±äº†éƒ¨åˆ†å­—ç¬¦,å¯¼è‡´ç›®æ ‡æœåŠ¡è§£æè¿™ä¸ªheaderä¸­çš„jsonä¸²å¤±è´¥,å…·ä½“ä»£ç å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public static Expression create(String value) &#123;</span><br><span class="line">    String expression = stripBraces(value);</span><br><span class="line">    if (expression != null &amp;&amp; !expression.isEmpty()) &#123;</span><br><span class="line">        Optional&lt;Entry&lt;Pattern, Class&lt;? extends Expression&gt;&gt;&gt; matchedExpressionEntry = expressions.entrySet().stream().filter((entry) -&gt; &#123;</span><br><span class="line">            return ((Pattern)entry.getKey()).matcher(expression).matches();</span><br><span class="line">        &#125;).findFirst();</span><br><span class="line">        if (!matchedExpressionEntry.isPresent()) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            Entry&lt;Pattern, Class&lt;? extends Expression&gt;&gt; matchedExpression = (Entry)matchedExpressionEntry.get();</span><br><span class="line">            Pattern expressionPattern = (Pattern)matchedExpression.getKey();</span><br><span class="line">            String variableName = null;</span><br><span class="line">            String variablePattern = null;</span><br><span class="line">            Matcher matcher = expressionPattern.matcher(expression);</span><br><span class="line">            if (matcher.matches()) &#123;</span><br><span class="line">                variableName = matcher.group(2).trim();</span><br><span class="line">                if (variableName.contains(&quot;:&quot;)) &#123;</span><br><span class="line">                    String[] parts = variableName.split(&quot;:&quot;);</span><br><span class="line">                    variableName = parts[0];</span><br><span class="line">                    variablePattern = parts[1];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (variableName.contains(&quot;&#123;&quot;)) &#123;</span><br><span class="line">                    return null;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return new Expressions.SimpleExpression(variableName, variablePattern);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        throw new IllegalArgumentException(&quot;an expression is required.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,æˆ‘å°†ç”¨æˆ·è§£æçš„æ–¹æ³•å°è£…åˆ°äº†å…¬å…±å·¥å…·ç±»ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class CommonUtils &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static UserDto getCurrentUser(HttpServletRequest request) &#123;</span><br><span class="line">        String token = request.getHeader(AuthConstant.JWT_TOKEN_HEADER);</span><br><span class="line">        //ä»tokenä¸­è§£æç”¨æˆ·ä¿¡æ¯</span><br><span class="line">        String realToken = token.replace(AuthConstant.JWT_TOKEN_PREFIX, &quot;&quot;);</span><br><span class="line">        JWSObject jwsObject = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            jwsObject = JWSObject.parse(realToken);</span><br><span class="line">        &#125; catch (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        String userStr = jwsObject.getPayload().toString();</span><br><span class="line">        if(StrUtil.isEmpty(userStr))&#123;</span><br><span class="line">            Asserts.fail(ResultCode.UNAUTHORIZED);</span><br><span class="line">        &#125;</span><br><span class="line">        UserDto userDto = JSONUtil.toBean(userStr, UserDto.class);</span><br><span class="line">        return userDto;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶,ä¹Ÿå¯ä»¥å­˜æ”¾åˆ°Redisä¸­,è¿™æ ·ä½¿ç”¨Feignè¿œç¨‹è°ƒç”¨çš„æ—¶å€™,åªè¦ä¿è¯tokenæˆåŠŸä¼ é€’å°±å¥½äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é—®é¢˜é›†é”¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Feign </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gradleå¼•ç”¨Lombokç¼–è¯‘å¤±è´¥çš„é—®é¢˜</title>
      <link href="/Gradle%E5%BC%95%E7%94%A8Lombok%E7%BC%96%E8%AF%91%E5%A4%B1%E8%B4%A5%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/Gradle%E5%BC%95%E7%94%A8Lombok%E7%BC%96%E8%AF%91%E5%A4%B1%E8%B4%A5%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨æ­å»ºé¡¹ç›®çš„æ—¶å€™,é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„é—®é¢˜,ä½¿ç”¨Gradleæ„å»ºçš„é¡¹ç›®å¼•ç”¨äº†Lombokä¾èµ–,ä½†æ€ä¹ˆè®¾ç½®é¡¹ç›®éƒ½æ— æ³•ç¼–è¯‘æˆåŠŸ,è¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><h4 id="é—®é¢˜å›é¡¾"><a href="#é—®é¢˜å›é¡¾" class="headerlink" title="é—®é¢˜å›é¡¾"></a>é—®é¢˜å›é¡¾</h4><p>é¡¹ç›®ä½¿ç”¨Gradleæ„å»º,build.gradleä¸­å¼•ç”¨äº†lombokä¾èµ–:<code>implementation &quot;org.projectlombok:lombok:$&#123;lombokVersion&#125;&quot;</code>,Ideaä¸­ä¹Ÿå®‰è£…äº†Lombokæ’ä»¶ã€‚ä½†ç¼–è¯‘ä»£ç çš„æ—¶å€™è¿˜æ˜¯ä¼šæŠ¥<code>é”™è¯¯:æ‰¾ä¸åˆ°ç¬¦å·</code>çš„é—®é¢˜ã€‚</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202211031022887.png"></p><h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>æŸ¥é˜…å¤§é‡èµ„æ–™,ç»ˆäºæ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨:Gradleä¸­è¦ä½¿ç”¨<code>Annotation Processor(æ³¨è§£å¤„ç†å™¨)</code>,Annotation Processoræ˜¯javacçš„ä¸€ä¸ªå·¥å…·ï¼Œå®ƒç”¨æ¥åœ¨ç¼–è¯‘æ—¶æ‰«æå’Œå¤„ç†æ³¨è§£ã€‚é€šè¿‡Annotation Processorå¯ä»¥è·å–åˆ°æ³¨è§£å’Œè¢«æ³¨è§£å¯¹è±¡çš„ç›¸å…³ä¿¡æ¯ï¼Œç„¶åæ ¹æ®æ³¨è§£è‡ªåŠ¨ç”ŸæˆJavaä»£ç ã€‚äºæ˜¯åœ¨build.gradleä¸­æ·»åŠ ä»£ç :<code>annotationProcessor &quot;org.projectlombok:lombok:$&#123;lombokVersion&#125;&quot;</code>,é—®é¢˜è§£å†³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é—®é¢˜é›†é”¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gradle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç©è½¬Kafkaã€äºŒã€‘</title>
      <link href="/%E7%8E%A9%E8%BD%ACKafka%E3%80%90%E4%BA%8C%E3%80%91/"/>
      <url>/%E7%8E%A9%E8%BD%ACKafka%E3%80%90%E4%BA%8C%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ä¸ŠèŠ‚å†…å®¹,æˆ‘ä»¬å·²ç»ä½¿ç”¨ Docker å°† Zookeeper é›†ç¾¤ä¸ Kafka é›†ç¾¤æ­å»ºå¥½,è¿™èŠ‚å†…å®¹æˆ‘ä»¬å°±æ¥æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Kafka,ä»¥åŠKafkaçš„ä¸€äº›æºç åˆ†æã€‚</p><span id="more"></span><h3 id="Kafka-Controller"><a href="#Kafka-Controller" class="headerlink" title="Kafka Controller"></a>Kafka Controller</h3><div class="note orange icon-padding flat"><i class="note-icon fas fa-anchor"></i><p>Controlleræ˜¯ Apache Kafka çš„æ ¸å¿ƒç»„ä»¶ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯åœ¨ Apache ZooKeeper çš„å¸®åŠ©ä¸‹ç®¡ç†å’Œåè°ƒæ•´ä¸ª Kafka é›†ç¾¤ã€‚é›†ç¾¤ä¸­ä»»æ„ä¸€å° Broker éƒ½èƒ½å……å½“æ§åˆ¶å™¨çš„è§’è‰²ï¼Œä½†æ˜¯ï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œåªèƒ½æœ‰ä¸€ä¸ª Broker æˆä¸ºæ§åˆ¶å™¨ï¼Œè¡Œä½¿å…¶ç®¡ç†å’Œåè°ƒçš„èŒè´£ã€‚æ¢å¥è¯è¯´ï¼Œæ¯ä¸ªæ­£å¸¸è¿è½¬çš„ Kafka é›†ç¾¤ï¼Œåœ¨ä»»æ„æ—¶åˆ»éƒ½æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ§åˆ¶å™¨ã€‚å®˜ç½‘ä¸Šæœ‰ä¸ªåä¸º activeController çš„ JMX æŒ‡æ ‡ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®æ—¶ç›‘æ§æ§åˆ¶å™¨çš„å­˜æ´»çŠ¶æ€ã€‚è¿™ä¸ª JMX æŒ‡æ ‡éå¸¸å…³é”®ï¼Œåœ¨å®é™…è¿ç»´æ“ä½œè¿‡ç¨‹ä¸­ï¼Œä¸€å®šè¦å®æ—¶æŸ¥çœ‹è¿™ä¸ªæŒ‡æ ‡çš„å€¼ã€‚</p></div><h4 id="Controller-æ˜¯å¦‚ä½•è¢«é€‰å‡ºæ¥çš„"><a href="#Controller-æ˜¯å¦‚ä½•è¢«é€‰å‡ºæ¥çš„" class="headerlink" title="Controller æ˜¯å¦‚ä½•è¢«é€‰å‡ºæ¥çš„"></a>Controller æ˜¯å¦‚ä½•è¢«é€‰å‡ºæ¥çš„</h4><p>å®é™…ä¸Š,é›†ç¾¤ä¸­çš„æ¯å°Brokerå¯åŠ¨æ—¶,éƒ½ä¼šå‘Zookeeperä¸Šåˆ›å»ºä¸€ä¸ª<code>/controller</code>çš„èŠ‚ç‚¹,è€Œç¬¬ä¸€ä¸ªåˆ›å»ºæˆåŠŸçš„Brokeråˆ™ä¸ºLeaderã€‚å½“ä½œä¸ºLeaderçš„Brokerå‘ç”Ÿæ•…éšœå,å…¶ä½™çš„Followerä¼šå†æ¬¡ç«äº‰å»åˆ›å»º<code>/controller</code>çš„èŠ‚ç‚¹,ä»è€Œé€‰å‡ºæ–°çš„Leaderã€‚ä½†åœ¨å®é™…åº”ç”¨ä¸­,å¾ˆå¯èƒ½ç”±äºç½‘ç»œæ³¢åŠ¨é—®é¢˜,è®©Kafkaè¯¯ä»¥ä¸ºLeaderæŒ‚æ‰äº†,å¯¼è‡´äº§ç”Ÿæ–°ä¸€è½®é€‰ä¸¾,æ­¤æ—¶ä¼šå‡ºç°åŒæ—¶å­˜åœ¨ä¸¤ä¸ªLeader,å‰©ä¸‹çš„Followerå°±ä¸çŸ¥é“è¯¥å¬è°çš„äº†ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„è„‘è£‚é—®é¢˜ã€‚</p><h4 id="Kafkaå¦‚ä½•è§£å†³è„‘è£‚é—®é¢˜"><a href="#Kafkaå¦‚ä½•è§£å†³è„‘è£‚é—®é¢˜" class="headerlink" title="Kafkaå¦‚ä½•è§£å†³è„‘è£‚é—®é¢˜"></a>Kafkaå¦‚ä½•è§£å†³è„‘è£‚é—®é¢˜</h4><p>Kafkaåœ¨æ¯ä¸ªLeaderäº§ç”Ÿçš„æ—¶å€™,ä¼šåœ¨Zookeeperä¸­ç”Ÿæˆä¸€ä¸ªæ›´å¤§çš„<code>/controller_epoch</code>,å¹¶åŒæ­¥ç»™æ‰€æœ‰çš„Followerã€‚è¿™æ ·,åŸepochè¾ƒå°çš„Leaderå‘é€çš„å‘½ä»¤ä¼šè¢«å…¶ä½™Followerå¿½ç•¥æ‰ã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202210071739901.png" style="zoom:50%;" /><h3 id="Kafkaè„šæœ¬åŠæºç åˆ†æ"><a href="#Kafkaè„šæœ¬åŠæºç åˆ†æ" class="headerlink" title="Kafkaè„šæœ¬åŠæºç åˆ†æ"></a>Kafkaè„šæœ¬åŠæºç åˆ†æ</h3><ul><li><p>è¿›å…¥Kafkaçš„å®¹å™¨å†…éƒ¨</p><p><code>docker exec -it kafka1 /bin/bash</code></p></li><li><p>è·³è½¬Kafkaçš„binç›®å½•,<code>cd /opt/bitnami/kafka/bin</code>å¯ä»¥çœ‹åˆ°å¾ˆå¤šshellè„šæœ¬</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202210051541188.png"></p></li><li><p>è¿™äº›shellè„šæœ¬å°±æ˜¯å°è£…äº†ä¸€ç³»åˆ—ç”¨äºæ“ä½œkafkaçš„å‘½ä»¤,æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¼”ç¤ºä¸€ä¸‹kafkaå¸¸ç”¨çš„ä¸€äº›æ“ä½œ,å¹¶è·Ÿç€æºç ä¸€èµ·åˆ†æå…·ä½“æµç¨‹ã€‚</p></li></ul><h4 id="åˆ›å»ºTopic"><a href="#åˆ›å»ºTopic" class="headerlink" title="åˆ›å»ºTopic"></a>åˆ›å»ºTopic</h4><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªTopic,å‰¯æœ¬ä¸º3,åˆ†åŒºæ•°ä¸º5,åç§°ä¸º<code>FirstTopic</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it kafka1 /bin/bash</span><br><span class="line">kafka-topics.sh --create --zookeeper zk1:2181,zk2:2181,zk3:2181 --replication-factor 3 --partitions 5 --topic FirstTopic</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å°±æœ‰ä¸ªé—®é¢˜äº†,æˆ‘ä»¬é›†ç¾¤æœ‰3å°Broker,5ä¸ªPartitionå’Œä¸‰ä¸ªå‰¯æœ¬,é‚£ä¹ˆKafkaæ˜¯å¦‚ä½•ç®¡ç†è¿™äº›Partitionå’Œå‰¯æœ¬çš„å‘¢ï¼Ÿæ¯ä¸ªåˆ†åŒºçš„Leaderæ˜¯æ€ä¹ˆé€‰å‡ºæ¥çš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹æºç ,æ‰“å¼€<code>kafka-topics.sh</code>æ–‡ä»¶,å†…å®¹å¾ˆç®€å•,åªæœ‰ä¸€æ¡å‘½ä»¤:<code>exec $(dirname $0)/kafka-run-class.sh kafka.admin.TopicCommand &quot;$@&quot;</code>,å¯ä»¥çœ‹åˆ°æ˜¯è°ƒç”¨çš„<code>TopicCommand</code>ç±»çš„<code>main</code>æ–¹æ³•,æˆ‘ä»¬è·Ÿè¸ªä»£ç å¯æ‰¾åˆ°<code>assignReplicasToBrokersRackUnaware</code>æ–¹æ³•ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">assignReplicasToBrokersRackUnaware</span></span>(nPartitions: <span class="type">Int</span>, <span class="comment">//æœ¬ä¾‹åˆ†åŒºæ•°ä¸º5</span></span><br><span class="line">                                                 replicationFactor: <span class="type">Int</span>, <span class="comment">//æœ¬ä¾‹å‰¯æœ¬æ•°ä¸º3</span></span><br><span class="line">                                                 brokerList: <span class="type">Seq</span>[<span class="type">Int</span>], <span class="comment">// æœ¬ä¾‹çš„BrokerList ä¸º[1,2,3]</span></span><br><span class="line">                                                 fixedStartIndex: <span class="type">Int</span>, <span class="comment">//ç¼ºçœå€¼ä¸º -1</span></span><br><span class="line">                                                 startPartitionId: <span class="type">Int</span> <span class="comment">//ç¼ºçœå€¼ä¸º -1</span></span><br><span class="line">                                                ): <span class="type">Map</span>[<span class="type">Int</span>, <span class="type">Seq</span>[<span class="type">Int</span>]] = &#123;</span><br><span class="line">    <span class="keyword">val</span> ret = mutable.<span class="type">Map</span>[<span class="type">Int</span>, <span class="type">Seq</span>[<span class="type">Int</span>]]()</span><br><span class="line">    <span class="comment">// è·å–Brokeråˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">val</span> brokerArray = brokerList.toArray</span><br><span class="line">    <span class="comment">// éšæœºé€‰å–ä¸€ä¸ªBrokerä½œä¸ºèµ·å§‹ä½ç½®ã€‚æœ¬ä¾‹ä¸­ï¼Œèµ·å§‹ä½ç½®ä¸º1</span></span><br><span class="line">    <span class="keyword">val</span> startIndex = <span class="keyword">if</span> (fixedStartIndex &gt;= <span class="number">0</span>) fixedStartIndex <span class="keyword">else</span> rand.nextInt(brokerArray.length)</span><br><span class="line">    <span class="comment">// èµ‹å½“å‰åˆ†åŒºIDä¸º0</span></span><br><span class="line">    <span class="keyword">var</span> currentPartitionId = math.max(<span class="number">0</span>, startPartitionId)</span><br><span class="line">    <span class="comment">// éšæœºè·å–ä¸€ä¸ªæ•°å­—ä½œä¸ºä¸‹ä¸€ä¸ªå‰¯æœ¬çš„åç§»é‡ã€‚æœ¬ä¾‹ä¸­ï¼Œåç§»é‡ä¸º2</span></span><br><span class="line">    <span class="keyword">var</span> nextReplicaShift = <span class="keyword">if</span> (fixedStartIndex &gt;= <span class="number">0</span>) fixedStartIndex <span class="keyword">else</span> rand.nextInt(brokerArray.length)</span><br><span class="line">    <span class="comment">// éå†æ‰€æœ‰çš„åˆ†åŒºæ•°</span></span><br><span class="line">    <span class="keyword">for</span> (_ &lt;- <span class="number">0</span> until nPartitions) &#123;</span><br><span class="line">      <span class="comment">// ç¬¬ä¸€ä¸ªåˆ†åŒºä¸æ»¡è¶³è¯¥æ¡ä»¶</span></span><br><span class="line">      <span class="comment">// ç¬¬äºŒä¸ªåˆ†åŒºä¸æ»¡è¶³è¯¥æ¡ä»¶</span></span><br><span class="line">      <span class="comment">// ç¬¬ä¸‰ä¸ªåˆ†åŒºä¸æ»¡è¶³è¯¥æ¡ä»¶</span></span><br><span class="line">      <span class="comment">// ç¬¬å››ä¸ªåˆ†åŒºæ»¡è¶³è¯¥æ¡ä»¶,åç§»é‡+1=3</span></span><br><span class="line">      <span class="comment">// ç¬¬äº”ä¸ªåˆ†åŒºä¸æ»¡è¶³è¯¥æ¡ä»¶</span></span><br><span class="line">      <span class="keyword">if</span> (currentPartitionId &gt; <span class="number">0</span> &amp;&amp; (currentPartitionId % brokerArray.length == <span class="number">0</span>))</span><br><span class="line">        nextReplicaShift += <span class="number">1</span></span><br><span class="line">      <span class="comment">//å½“å‰åˆ†åŒºIDåŠ ä¸Šèµ·å§‹ä½ç½®ï¼Œå¯¹Brokeræ•°é‡å–ä½™å¾—åˆ°ç¬¬ä¸€ä¸ªå‰¯æœ¬çš„ä½ç½®ã€‚</span></span><br><span class="line">      <span class="comment">// ç¬¬ä¸€ä¸ªåˆ†åŒº,ç¬¬ä¸€ä¸ªå‰¯æœ¬ä½ç½®=(0+1)%3=1,å–brokerArray(1),å³IDä¸º2çš„Broker</span></span><br><span class="line">      <span class="comment">// ç¬¬äºŒä¸ªåˆ†åŒº,ç¬¬ä¸€ä¸ªå‰¯æœ¬ä½ç½®=(1+1)%3=2,å–brokerArray(2),å³IDä¸º3çš„Broker</span></span><br><span class="line">      <span class="comment">// ç¬¬ä¸‰ä¸ªåˆ†åŒº,ç¬¬ä¸€ä¸ªå‰¯æœ¬ä½ç½®=(2+1)%3=0,å–brokerArray(0),å³IDä¸º1çš„Broker</span></span><br><span class="line">      <span class="comment">// ç¬¬å››ä¸ªåˆ†åŒº,ç¬¬ä¸€ä¸ªå‰¯æœ¬ä½ç½®=(3+1)%3=1,å–brokerArray(1),å³IDä¸º2çš„Broker</span></span><br><span class="line">      <span class="comment">// ç¬¬äº”ä¸ªåˆ†åŒº,ç¬¬ä¸€ä¸ªå‰¯æœ¬ä½ç½®=(4+1)%3=2,å–brokerArray(2),å³IDä¸º3çš„Broker</span></span><br><span class="line">      <span class="keyword">val</span> firstReplicaIndex = (currentPartitionId + startIndex) % brokerArray.length</span><br><span class="line">      <span class="keyword">val</span> replicaBuffer = mutable.<span class="type">ArrayBuffer</span>(brokerArray(firstReplicaIndex))</span><br><span class="line">      <span class="comment">//è®¡ç®—å‡ºå‰©ä½™å‰¯æœ¬çš„ä½ç½®</span></span><br><span class="line">      <span class="keyword">for</span> (j &lt;- <span class="number">0</span> until replicationFactor - <span class="number">1</span>)</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªåˆ†åŒº,replicaIndex(1,2,0,3) ç¬¬äºŒä¸ªå‰¯æœ¬ä½ç½®=(1+1)%3=2,å–brokerArray(2),å³IDä¸º3çš„Broker</span></span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªåˆ†åŒº,replicaIndex(1,2,1,3) ç¬¬ä¸‰ä¸ªå‰¯æœ¬ä½ç½®=(1+2)%3=0,å–brokerArray(0),å³IDä¸º1çš„Broker</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬äºŒä¸ªåˆ†åŒº,replicaIndex(2,2,0,3) ç¬¬äºŒä¸ªå‰¯æœ¬ä½ç½®=(2+1)%3=0,å–brokerArray(0),å³IDä¸º1çš„Broker</span></span><br><span class="line">        <span class="comment">// ç¬¬äºŒä¸ªåˆ†åŒº,replicaIndex(2,2,1,3) ç¬¬ä¸‰ä¸ªå‰¯æœ¬ä½ç½®=(2+2)%3=1,å–brokerArray(1),å³IDä¸º2çš„Broker</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬ä¸‰ä¸ªåˆ†åŒº,replicaIndex(0,2,0,3) ç¬¬äºŒä¸ªå‰¯æœ¬ä½ç½®=(0+1)%3=1,å–brokerArray(1),å³IDä¸º2çš„Broker</span></span><br><span class="line">        <span class="comment">// ç¬¬ä¸‰ä¸ªåˆ†åŒº,replicaIndex(0,2,1,3) ç¬¬ä¸‰ä¸ªå‰¯æœ¬ä½ç½®=(0+2)%3=2,å–brokerArray(2),å³IDä¸º3çš„Broker</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬å››ä¸ªåˆ†åŒº,replicaIndex(1,3,0,3) ç¬¬äºŒä¸ªå‰¯æœ¬ä½ç½®=(1+2)%3=0,å–brokerArray(0),å³IDä¸º1çš„Broker</span></span><br><span class="line">        <span class="comment">// ç¬¬å››ä¸ªåˆ†åŒº,replicaIndex(1,3,1,3) ç¬¬ä¸‰ä¸ªå‰¯æœ¬ä½ç½®=(1+1)%3=2,å–brokerArray(2),å³IDä¸º3çš„Broker</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¬¬äº”ä¸ªåˆ†åŒº,replicaIndex(2,3,0,3) ç¬¬äºŒä¸ªå‰¯æœ¬ä½ç½®=(2+2)%3=1,å–brokerArray(1),å³IDä¸º2çš„Broker</span></span><br><span class="line">        <span class="comment">// ç¬¬äº”ä¸ªåˆ†åŒº,replicaIndex(2,3,1,3) ç¬¬ä¸‰ä¸ªå‰¯æœ¬ä½ç½®=(2+1)%3=0,å–brokerArray(0),å³IDä¸º1çš„Broker</span></span><br><span class="line">        replicaBuffer += brokerArray(replicaIndex(firstReplicaIndex, nextReplicaShift, j, brokerArray.length))</span><br><span class="line">      ret.put(currentPartitionId, replicaBuffer)</span><br><span class="line">      currentPartitionId += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    ret</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">replicaIndex</span></span>(firstReplicaIndex: <span class="type">Int</span>, secondReplicaShift: <span class="type">Int</span>, replicaIndex: <span class="type">Int</span>, nBrokers: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,shift=1+(2+0)%2=1</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,shift=1+(2+1)%2=2</span></span><br><span class="line">    <span class="comment">// ç¬¬äºŒä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,shift=1+(2+0)%2=1</span></span><br><span class="line">    <span class="comment">// ç¬¬äºŒä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,shift=1+(2+1)%2=2</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸‰ä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,shift=1+(2+0)%2=1</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸‰ä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,shift=1+(2+1)%2=2</span></span><br><span class="line">    <span class="comment">// ç¬¬å››ä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,shift=1+(3+0)%2=2</span></span><br><span class="line">    <span class="comment">// ç¬¬å››ä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,shift=1+(3+1)%2=1</span></span><br><span class="line">    <span class="comment">// ç¬¬äº”ä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,shift=1+(3+0)%2=2</span></span><br><span class="line">    <span class="comment">// ç¬¬äº”ä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,shift=1+(3+1)%2=1</span></span><br><span class="line">    <span class="keyword">val</span> shift = <span class="number">1</span> + (secondReplicaShift + replicaIndex) % (nBrokers - <span class="number">1</span>)</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,(1+1)%3=2</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,(1+2)%3=1</span></span><br><span class="line">    <span class="comment">// ç¬¬äºŒä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,(2+1)%3=0</span></span><br><span class="line">    <span class="comment">// ç¬¬äºŒä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,(2+2)%3=1</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸‰ä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,(0+1)%3=1</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸‰ä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,(0+2)%3=2</span></span><br><span class="line">    <span class="comment">// ç¬¬å››ä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,(1+2)%3=0</span></span><br><span class="line">    <span class="comment">// ç¬¬å››ä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,(1+1)%3=2</span></span><br><span class="line">    <span class="comment">// ç¬¬äº”ä¸ªåˆ†åŒºç¬¬äºŒä¸ªå‰¯æœ¬,(2+2)%3=1</span></span><br><span class="line">    <span class="comment">// ç¬¬äº”ä¸ªåˆ†åŒºç¬¬ä¸‰ä¸ªå‰¯æœ¬,(2+1)%3=0</span></span><br><span class="line">    (firstReplicaIndex + shift) % nBrokers</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å½“åˆ†åŒºå’Œå‰¯æœ¬ç¡®å®šå,Kafkaä¼šé»˜è®¤è®¾ç½®æ¯ä¸ªåˆ†åŒºç¬¬ä¸€ä¸ªå‰¯æœ¬ä¸ºLeaderã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>describe</code>å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦ä¸æˆ‘ä»¬åˆ†æçš„ä¸€è‡´ã€‚</p><h4 id="æŸ¥çœ‹Topicæè¿°ä¿¡æ¯"><a href="#æŸ¥çœ‹Topicæè¿°ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹Topicæè¿°ä¿¡æ¯"></a>æŸ¥çœ‹Topicæè¿°ä¿¡æ¯</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it kafka1 /bin/bash</span><br><span class="line">kafka-topics.sh --describe --zookeeper zk1:2181,zk2:2181,zk3:2181 --topic FirstTopic</span><br></pre></td></tr></table></figure><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202210062216077.png" style="zoom:50%;" />å¯ä»¥çœ‹å‡º,ä¸æˆ‘ä»¬åˆ†æä»£ç å®Œå…¨ä¸€è‡´,æ¯ä¸ªåˆ†åŒºçš„å‰¯æœ¬éƒ½è¢«å‡åŒ€æ•£å¸ƒåœ¨3å°Brokerä¸Šã€‚<h4 id="åˆ é™¤Topic"><a href="#åˆ é™¤Topic" class="headerlink" title="åˆ é™¤Topic"></a>åˆ é™¤Topic</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it kafka1 /bin/bash</span><br><span class="line">kafka-topics.sh --delete --zookeeper zk1:2181,zk2:2181,zk3:2181 --topic FirstTopic</span><br></pre></td></tr></table></figure><p>åˆ é™¤å‘½ä»¤æ‰§è¡Œå®Œ,ä¼šå‘ç°æ§åˆ¶å°æ‰“å°äº†ä¸¤å¥è¯:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I have no name!@kafka3:/$ kafka-topics.sh --delete --zookeeper zk1:2181,zk2:2181,zk3:2181 --topic FirstTopic</span><br><span class="line">Topic FirstTopic is marked for deletion.</span><br><span class="line">Note: This will have no impact if delete.topic.enable is not set to true.</span><br></pre></td></tr></table></figure><p>æç¤ºæˆ‘ä»¬Topicå·²ç»è¢«æ ‡è®°åˆ é™¤äº†,ä½†æ˜¯å¹¶æ²¡æœ‰ç«‹å³åˆ é™¤,å¹¶ä¸”éœ€è¦å¼€å¯<code>delete.topic.enable=true</code>çš„é…ç½®,æ‰å¯ä»¥åˆ é™¤Topicã€‚å½“ç„¶è¿™ä¸ª<code>delete.topic.enable=true</code>æ˜¯é»˜è®¤å¼€å¯çš„,è¿™ä¸ªæˆ‘ä»¬åœ¨kafkaå¯åŠ¨çš„æ—¶å€™å¯ä»¥çœ‹åˆ°ã€‚</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202210071529216.png" style="zoom:50%;" /><p>é‚£ä¹ˆè¿™ä¸ªTopicæ˜¯æ€ä¹ˆä»æ ‡è®°åˆ é™¤åˆ°çœŸæ­£è¢«Kafkaåˆ é™¤çš„å‘¢ï¼ŸåŒæ ·ä¸€èµ·æ¥çœ‹ä¸€ä¸‹æºç ,è¿›å…¥<code>TopicCommand</code>ç±»çš„<code>main</code>æ–¹æ³•,è¿™æ¬¡è·Ÿè¸ªçš„æ˜¯<code>  topicService.deleteTopic(opts)</code></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">deleteTopic</span></span>(opts: <span class="type">TopicCommandOptions</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      <span class="keyword">val</span> topics = getTopics(opts.topic, opts.excludeInternalTopics)</span><br><span class="line">      ensureTopicExists(topics, opts.topic, !opts.ifExists)</span><br><span class="line">      topics.foreach &#123; topic =&gt;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="type">Topic</span>.isInternal(topic)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">AdminOperationException</span>(<span class="string">s&quot;Topic <span class="subst">$topic</span> is a kafka internal topic and is not allowed to be marked for deletion.&quot;</span>)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//å¯ä»¥çœ‹åˆ°kafkaå‘zkå‘é€äº†åˆ›å»ºä¸€ä¸ªåˆ é™¤Topicçš„è·¯å¾„çš„å‘½ä»¤å,å°±æ‰“å°äº†æˆ‘ä»¬åœ¨æ§åˆ¶å°çœ‹åˆ°çš„é‚£ä¸¤å¥è¯ã€‚</span></span><br><span class="line">            zkClient.createDeleteTopicPath(topic)</span><br><span class="line">            println(<span class="string">s&quot;Topic <span class="subst">$topic</span> is marked for deletion.&quot;</span>)</span><br><span class="line">            println(<span class="string">&quot;Note: This will have no impact if delete.topic.enable is not set to true.&quot;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">          <span class="keyword">case</span> _: <span class="type">NodeExistsException</span> =&gt;</span><br><span class="line">            println(<span class="string">s&quot;Topic <span class="subst">$topic</span> is already marked for deletion.&quot;</span>)</span><br><span class="line">          <span class="keyword">case</span> e: <span class="type">AdminOperationException</span> =&gt;</span><br><span class="line">            <span class="keyword">throw</span> e</span><br><span class="line">          <span class="keyword">case</span> e: <span class="type">Throwable</span> =&gt;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">AdminOperationException</span>(<span class="string">s&quot;Error while deleting topic <span class="subst">$topic</span>&quot;</span>, e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">AdminZNode</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">path</span> </span>= <span class="string">&quot;/admin&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">DeleteTopicsZNode</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">path</span> </span>= <span class="string">s&quot;<span class="subst">$&#123;AdminZNode.path&#125;</span>/delete_topics&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">DeleteTopicsTopicZNode</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">path</span></span>(topic: <span class="type">String</span>) = <span class="string">s&quot;<span class="subst">$&#123;DeleteTopicsZNode.path&#125;</span>/<span class="subst">$topic</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Creates the delete topic znode.</span></span><br><span class="line"><span class="comment">   * @param topicName topic name</span></span><br><span class="line"><span class="comment">   * @throws KeeperException if there is an error while setting or creating the znode</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createDeleteTopicPath</span></span>(topicName: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">  createRecursive(<span class="type">DeleteTopicsTopicZNode</span>.path(topicName))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºKafkaæ˜¯åœ¨ZKçš„<code>/admin/delete_topics</code> ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªtopicNameçš„èŠ‚ç‚¹,ä¹Ÿå°±æ˜¯æ‰€è°“çš„æ ‡è®°åˆ é™¤ã€‚é‚£ä¹ˆçœŸæ­£åˆ é™¤çš„æ“ä½œåœ¨å“ªå‘¢ï¼Ÿä»Kafkaåœ¨ZKä¸­åˆ›å»ºäº†ä¸€ä¸ªèŠ‚ç‚¹,å¾ˆå®¹æ˜“çŒœåˆ°æ˜¯ä½¿ç”¨äº†ZKçš„ç›‘å¬å™¨,ç›‘å¬<code>admin/delete-topics</code>ä¸‹æ˜¯å¦å­˜åœ¨æ•°æ®, å…·ä½“æ“ä½œæˆ‘ä»¬å¯ä»¥åœ¨æºç ä¸­æ‰¾åˆ°<code>TopicDeletionManager</code>ç±»,ä»ç±»åå°±èƒ½çœ‹å‡ºæ¥è¿™æ˜¯ä¸€ä¸ªç®¡ç†åˆ é™¤Topicçš„ç±»ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TopicDeletionManager</span>(<span class="params">config: <span class="type">KafkaConfig</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                           controllerContext: <span class="type">ControllerContext</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                           replicaStateMachine: <span class="type">ReplicaStateMachine</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                           partitionStateMachine: <span class="type">PartitionStateMachine</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                           client: <span class="type">DeletionClient</span></span>) <span class="keyword">extends</span> <span class="title">Logging</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.logIdent = <span class="string">s&quot;[Topic Deletion Manager <span class="subst">$&#123;config.brokerId&#125;</span>] &quot;</span></span><br><span class="line">  <span class="comment">// è·å–&quot;delete.topic.enable&quot;çš„é…ç½®æ˜¯å¦ä¸ºtrue</span></span><br><span class="line">  <span class="keyword">val</span> isDeleteTopicEnabled: <span class="type">Boolean</span> = config.deleteTopicEnable</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">init</span></span>(initialTopicsToBeDeleted: <span class="type">Set</span>[<span class="type">String</span>], initialTopicsIneligibleForDeletion: <span class="type">Set</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    info(<span class="string">s&quot;Initializing manager with initial deletions: <span class="subst">$initialTopicsToBeDeleted</span>, &quot;</span> +</span><br><span class="line">      <span class="string">s&quot;initial ineligible deletions: <span class="subst">$initialTopicsIneligibleForDeletion</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (isDeleteTopicEnabled) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœ&quot;delete.topic.enable=true&quot;çš„è¯,åˆ™å°†è¦åˆ é™¤çš„TopicåŠ å…¥åˆ°åˆ é™¤é˜Ÿåˆ—ä¸­ã€‚</span></span><br><span class="line">      controllerContext.queueTopicDeletion(initialTopicsToBeDeleted)</span><br><span class="line">      controllerContext.topicsIneligibleForDeletion ++= initialTopicsIneligibleForDeletion &amp; controllerContext.topicsToBeDeleted</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœ&quot;delete.topic.enable=false&quot;çš„è¯,åˆ™å°† /admin/delete_topics ä¸‹çš„æ ‡è®°åˆ é™¤</span></span><br><span class="line">      info(<span class="string">s&quot;Removing <span class="subst">$initialTopicsToBeDeleted</span> since delete topic is disabled&quot;</span>)</span><br><span class="line">      client.deleteTopicDeletions(initialTopicsToBeDeleted.toSeq, controllerContext.epochZkVersion)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">tryTopicDeletion</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span> (isDeleteTopicEnabled) &#123;</span><br><span class="line">      resumeDeletions()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">resumeDeletions</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> topicsQueuedForDeletion = <span class="type">Set</span>.empty[<span class="type">String</span>] ++ controllerContext.topicsToBeDeleted</span><br><span class="line">    <span class="keyword">if</span> (topicsQueuedForDeletion.nonEmpty)</span><br><span class="line">      info(<span class="string">s&quot;Handling deletion for topics <span class="subst">$&#123;topicsQueuedForDeletion.mkString(&quot;,&quot;)&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment">// éå†é˜Ÿåˆ—è¿›è¡ŒTopicåˆ é™¤</span></span><br><span class="line">    topicsQueuedForDeletion.foreach &#123; topic =&gt;</span><br><span class="line">      <span class="comment">// åˆ¤æ–­æ‰€æœ‰å‰¯æœ¬æ˜¯å¦éƒ½æ ‡è®°ä¸ºå·²æˆåŠŸåˆ é™¤</span></span><br><span class="line">      <span class="keyword">if</span> (controllerContext.areAllReplicasInState(topic, <span class="type">ReplicaDeletionSuccessful</span>)) &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤ç¼“å­˜ä»¥åŠZKä¸­çš„Topicä¿¡æ¯,å…·ä½“ä¸º &quot;brokers/topics/topicName&quot;ã€&quot;config/topics/topicName&quot;ã€&quot;admin/delete-topics/topicName&quot;</span></span><br><span class="line">        completeDeleteTopic(topic)</span><br><span class="line">        info(<span class="string">s&quot;Deletion of topic <span class="subst">$topic</span> successfully completed&quot;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!controllerContext.isAnyReplicaInState(topic, <span class="type">ReplicaDeletionStarted</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (controllerContext.isAnyReplicaInState(topic, <span class="type">ReplicaDeletionIneligible</span>)) &#123;</span><br><span class="line">          retryDeletionForIneligibleReplicas(topic)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœç¬¦åˆè¦æ±‚,å°è¯•åˆ é™¤Topic</span></span><br><span class="line">      <span class="keyword">if</span> (isTopicEligibleForDeletion(topic)) &#123;</span><br><span class="line">        info(<span class="string">s&quot;Deletion of topic <span class="subst">$topic</span> (re)started&quot;</span>)</span><br><span class="line">        <span class="comment">// å¯åŠ¨Topicåˆ é™¤,å³åˆ é™¤Topicæ‰€æœ‰çš„åˆ†åŒºåŠå‰¯æœ¬æ•°æ®</span></span><br><span class="line">        onTopicDeletion(<span class="type">Set</span>(topic))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="ç”Ÿäº§æ¶ˆæ¯"><a href="#ç”Ÿäº§æ¶ˆæ¯" class="headerlink" title="ç”Ÿäº§æ¶ˆæ¯"></a>ç”Ÿäº§æ¶ˆæ¯</h4><ul><li><p>å¼€å¯kafka1ä½œä¸ºç”Ÿäº§è€…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it kafka1 /bin/bash</span><br><span class="line">kafka-console-producer.sh --broker-list docker.for.mac.host.internal:9091 --topic FirstTopic</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ¶ˆè´¹æ¶ˆæ¯"><a href="#æ¶ˆè´¹æ¶ˆæ¯" class="headerlink" title="æ¶ˆè´¹æ¶ˆæ¯"></a>æ¶ˆè´¹æ¶ˆæ¯</h4><ul><li><p>å¼€å¯kafka2ã€kafka3ä½œä¸ºæ¶ˆè´¹è€…,å…¶ä¸­<code>--from-beginning</code>ä»£è¡¨é‡å¤´å¼€å§‹æ¶ˆè´¹æ¶ˆæ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it kafka2 /bin/bash</span><br><span class="line">kafka-console-consumer.sh --bootstrap-server docker.for.mac.host.internal:9092 --topic FirstTopic --from-beginning</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it kafka3 /bin/bash</span><br><span class="line">kafka-console-consumer.sh --bootstrap-server docker.for.mac.host.internal:9093 --topic FirstTopic --from-beginning</span><br></pre></td></tr></table></figure></li></ul><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202210062229469.png" style="zoom: 25%;" />]]></content>
      
      
      <categories>
          
          <category> Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mq </tag>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç©è½¬Kafkaã€ä¸€ã€‘</title>
      <link href="/%E7%8E%A9%E8%BD%ACKafka%E3%80%90%E4%B8%80%E3%80%91/"/>
      <url>/%E7%8E%A9%E8%BD%ACKafka%E3%80%90%E4%B8%80%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆ,ä½•ä¸ºKafkaï¼Ÿ</p><blockquote><p>Kafkaæ˜¯ä¸€ç§é«˜ååé‡çš„åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…ç³»ç»Ÿ,æ”¯æŒåˆ†åŒºã€å¤šå‰¯æœ¬,å®ƒä»¥é«˜ååã€å¯æŒä¹…åŒ–ã€å¯æ°´å¹³æ‰©å±•ã€æ”¯æŒæµå¤„ç†ç­‰å¤šç§ç‰¹æ€§è€Œè¢«å¹¿æ³›åº”ç”¨ã€‚ä¸»è¦åº”ç”¨äº:æ—¥å¿—æ”¶é›†ã€æ¶ˆæ¯ç³»ç»Ÿã€ç”¨æˆ·æ´»åŠ¨è·Ÿè¸ªã€è¿è¥æŒ‡æ ‡ã€æµå¼å¤„ç†ç­‰ã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆé€‰æ‹©Kafkaï¼Ÿæˆ‘ä»¬çŸ¥é“æ¶ˆæ¯é˜Ÿåˆ—æœ‰å¾ˆå¤š,åƒæˆ‘ä»¬ç†ŸçŸ¥çš„mq,è¿˜æœ‰<code>RocketMQ</code>ã€<code>RabbitMQ</code>ã€<code>ActivityMQ</code>,é‚£ç›¸è¾ƒäºè¿™äº›MQæ¥è¯´,Kafkaä¼˜åŠ¿ä½“ç°åœ¨å“ªé‡Œå‘¢ï¼Ÿæˆ‘è®¤ä¸ºä¸»è¦è¡¨ç°ä¸º:æ€§èƒ½æè‡´çªå‡ºã€ç”Ÿæ€æˆç†Ÿã€‚æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€èµ·ç©è½¬Kafkaå§!</p><span id="more"></span><h3 id="Kafka-çš„åŸºæœ¬æ¦‚å¿µ"><a href="#Kafka-çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="Kafka çš„åŸºæœ¬æ¦‚å¿µ"></a>Kafka çš„åŸºæœ¬æ¦‚å¿µ</h3><table><thead><tr><th>åè¯</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>Producer</td><td>æ¶ˆæ¯ç”Ÿäº§è€…,å‘Brokerå‘é€æ¶ˆæ¯çš„å®¢æˆ·ç«¯</td></tr><tr><td>Broker</td><td>KafkaèŠ‚ç‚¹,å¤šä¸ªBrokerç»„æˆä¸€ä¸ªKafkaé›†ç¾¤</td></tr><tr><td>Topic</td><td>æ¶ˆæ¯ä¸»é¢˜,æ¯ä¸ªæ¶ˆæ¯éƒ½ä¼šæœ‰ä¸€ä¸ªTopic,ç”¨äºå¯¹æ¶ˆæ¯è¿›è¡Œå½’ç±»</td></tr><tr><td>Partition</td><td>æ¶ˆæ¯åˆ†åŒº,æ¯ä¸ªTopicæ•°æ®å¯ä»¥æ‹†åˆ†åˆ°å¤šä¸ªåˆ†åŒºä¸­,æ¯ä¸ªåˆ†åŒºä¸­çš„æ¶ˆæ¯æ˜¯æœ‰åºçš„</td></tr><tr><td>Consumer</td><td>æ¶ˆæ¯æ¶ˆè´¹è€…,å‘Brokeræ‹‰å–æ¶ˆæ¯çš„å®¢æˆ·ç«¯</td></tr><tr><td>ConsumerGroup</td><td>æ¶ˆè´¹è€…ç»„,æ¯ä¸ªæ¶ˆè´¹è€…éƒ½å±äºä¸€ä¸ªç‰¹å®šçš„æ¶ˆè´¹è€…,ä¸€æ¡æ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹ç»„æ¶ˆè´¹,ä½†ä¸€ä¸ªæ¶ˆè´¹ç»„ä¸­åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹è¿™æ¡æ¶ˆæ¯</td></tr></tbody></table><h3 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a><strong>Zookeeper</strong></h3><blockquote><p>Zookeeper æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡æ¡†æ¶,é€‚åˆå­˜å‚¨ä¸€äº›å…¬å…±çš„é…ç½®ä¿¡æ¯ï¼Œä»¥åŠé›†ç¾¤çš„ä¸€äº›å…ƒæ•°æ®ç­‰ã€‚</p></blockquote><ul><li><p>ä¸ºä»€ä¹ˆè¦æåˆ° Zookeeper å‘¢ï¼Ÿ</p><ul><li>å› ä¸ºåœ¨ Kafka2.8 ç‰ˆæœ¬ä¹‹å‰,Kafka æ˜¯å¼ºä¾èµ– Zookeeper çš„,æ²¡æœ‰ ZooKeeper çš„è¯ Kafka éƒ½æ— æ³•è¿è¡Œ,æ‰€ä»¥å­¦ä¹  Kafka ä¹‹å‰,å¾—æŒæ¡ Zookeeper çš„çŸ¥è¯†ã€‚</li><li>Zookeeper ä¸º Kafka æä¾›äº†å…ƒæ•°æ®ç®¡ç†,ä¾‹å¦‚: Borker çš„ä¿¡æ¯ã€ä¸»é¢˜æ•°æ®ã€åˆ†åŒºæ•°æ®ç­‰ç­‰ã€‚æ¯ä¸ª Broker å¯åŠ¨æ—¶,éƒ½ä¼šä¸ Zookeeper è¿›è¡Œäº¤äº’ï¼Œå°†é›†ç¾¤ä¸­æ‰€æœ‰çš„ä¸»é¢˜ã€é…ç½®ã€å‰¯æœ¬ç­‰ä¿¡æ¯ä¿å­˜åˆ° Zookeeper ä¸­ã€‚è¿˜æœ‰ä¸€äº›é€‰ä¸¾ã€æ‰©å®¹ç­‰æœºåˆ¶ä¹Ÿä¾èµ– Zookeeperã€‚</li></ul><p> </p></li><li><p>ä¸ºä»€ä¹ˆ Kafka è¦æŠ›å¼ƒ Zookeeper å‘¢ï¼Ÿ</p><ul><li>1): Kafka æ˜¯å¼ºä¾èµ– Zookeeper çš„,æ‰€ä»¥ä½ å¦‚æœè¦ä½¿ç”¨ Kafka,å°±å¿…é¡»è¦è·Ÿç€ä½¿ç”¨ Zookeeper,è€Œå¯¹äºä¼ä¸šæ¥è¯´,è¿™æ ·è¢«åŠ¨çš„å¢åŠ äº†è¿ç»´çš„æˆæœ¬ã€‚</li><li>2): Zookeeper é›†ç¾¤æ˜¯å¼ºä¸€è‡´æ€§çš„,å¦‚æœ Zookeeper é›†ç¾¤ä¸­æŸä¸ªèŠ‚ç‚¹æ•°æ®è¿›è¡Œäº†å˜æ›´,ä¼šé€šçŸ¥å…¶å®ƒçš„ Zookeeper èŠ‚ç‚¹è¿›è¡ŒåŒæ­¥,å¿…é¡»ç­‰åˆ°åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹åŒæ­¥å®Œæˆå,æ‰ä¼šè¿”å›æˆåŠŸã€‚è¿™æ ·æ€§èƒ½æ˜¯æœ‰ä¸€äº›æŸè€—çš„ã€‚</li><li>3): Zookeeper åªé€‚ç”¨äºå­˜å‚¨ä¸€äº›ç®€å•çš„æ•°æ®,å¦‚æœå†™å…¥é‡è¿‡å¤§çš„è¯, Zookeeper çš„æ€§èƒ½å’Œç¨³å®šæ€§ä¼šä¸‹é™,å½“Kafkaé›†ç¾¤ä»¥åŠåˆ†åŒºè¾ƒå¤§çš„æ—¶å€™,Zookeeper æ€§èƒ½å°±å¾ˆå·®äº†ã€‚</li><li>4): Zookeeper é›†ç¾¤é€‰ä¸¾æ—¶,æ˜¯ä¸å¯¹å¤–æä¾›æœåŠ¡çš„ï¼</li></ul></li><li><p>ç§»é™¤ Zookeeper çš„å¥½å¤„</p><ul><li>æ— éœ€ç»´æŠ¤ Zookeeper é›†ç¾¤äº†ï¼Œåªéœ€è¦ç»´æŠ¤ Kafka é›†ç¾¤å³å¯ã€‚</li><li>ä½¿ç”¨ KRaft ,ä¹Ÿå°±æ˜¯åŸºäº Raft åè®®æ¥å®ç°æ•…éšœè½¬ç§»å’ŒLeaderé€‰ä¸¾ã€‚æ•ˆç‡æ›´é«˜,å¯ä»¥æ”¯æŒæ›´å¤šçš„åˆ†åŒºã€‚</li></ul></li></ul><h3 id="ä½¿ç”¨Dockerå®‰è£…Kafkaé›†ç¾¤"><a href="#ä½¿ç”¨Dockerå®‰è£…Kafkaé›†ç¾¤" class="headerlink" title="ä½¿ç”¨Dockerå®‰è£…Kafkaé›†ç¾¤"></a><strong>ä½¿ç”¨Dockerå®‰è£…Kafkaé›†ç¾¤</strong></h3><blockquote><p>é‰´äºç›®å‰å·¥ä½œä¸­ä¸»è¦è¿˜æ˜¯ä½¿ç”¨çš„è¿˜æ˜¯ Kafka ä¾èµ– Zookeeper çš„ç‰ˆæœ¬,æ•…æ­¤æ¬¡å†…å®¹ä½¿ç”¨çš„ Zookeeper ç‰ˆæœ¬ä¸º3.5.7,Kafka çš„ç‰ˆæœ¬ä¸º 2.4.1</p></blockquote><ul><li><p>ä½¿ç”¨<code>docker-compose</code>ç¼–æ’ Zookeeper é›†ç¾¤</p><ul><li><p>æ–°å»º<code>ZookeeperDockerfile.yaml</code></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line">networks:</span><br><span class="line"> zk-kafka-cluster:</span><br><span class="line">  name: zk-kafka-cluster</span><br><span class="line">services:</span><br><span class="line"> zk1:</span><br><span class="line">  image: zookeeper:<span class="number">3.5</span>.<span class="number">7</span></span><br><span class="line">  hostname: zk1</span><br><span class="line">  container_name: zk1</span><br><span class="line">  ports:</span><br><span class="line">   - <span class="number">2182</span>:<span class="number">2181</span></span><br><span class="line">   - <span class="number">8090</span>:<span class="number">8080</span></span><br><span class="line">  environment:</span><br><span class="line">   ZOO_MY_ID: <span class="number">1</span></span><br><span class="line">   ZOO_SERVERS: server.<span class="number">1</span>=zk1:<span class="number">2888</span>:<span class="number">3888</span>;<span class="number">2181</span> server.<span class="number">2</span>=zk2:<span class="number">2888</span>:<span class="number">3888</span>;<span class="number">2181</span> server.<span class="number">3</span>=zk3:<span class="number">2888</span>:<span class="number">3888</span>;<span class="number">2181</span> </span><br><span class="line">  volumes:</span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk1/data:/data</span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk1/datalog:/datalog</span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk1/conf:/conf </span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk1/logs:/logs </span><br><span class="line">  networks:</span><br><span class="line">   - zk-kafka-cluster</span><br><span class="line"> zk2:</span><br><span class="line">  image: zookeeper:<span class="number">3.5</span>.<span class="number">7</span></span><br><span class="line">  hostname: zk2</span><br><span class="line">  container_name: zk2</span><br><span class="line">  ports:</span><br><span class="line">   - <span class="number">2183</span>:<span class="number">2181</span></span><br><span class="line">   - <span class="number">8091</span>:<span class="number">8080</span></span><br><span class="line">  environment:</span><br><span class="line">   ZOO_MY_ID: <span class="number">2</span></span><br><span class="line">   ZOO_SERVERS: server.<span class="number">1</span>=zk1:<span class="number">2888</span>:<span class="number">3888</span>;<span class="number">2181</span> server.<span class="number">2</span>=zk2:<span class="number">2888</span>:<span class="number">3888</span>;<span class="number">2181</span> server.<span class="number">3</span>=zk3:<span class="number">2888</span>:<span class="number">3888</span>;<span class="number">2181</span> </span><br><span class="line">  volumes:</span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk2/data:/data</span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk2/datalog:/datalog</span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk2/conf:/conf </span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk2/logs:/logs</span><br><span class="line">  networks:</span><br><span class="line">   - zk-kafka-cluster</span><br><span class="line"> zk3:</span><br><span class="line">  image: zookeeper:<span class="number">3.5</span>.<span class="number">7</span></span><br><span class="line">  hostname: zk3</span><br><span class="line">  container_name: zk3</span><br><span class="line">  ports:</span><br><span class="line">   - <span class="number">2184</span>:<span class="number">2181</span></span><br><span class="line">   - <span class="number">8092</span>:<span class="number">8080</span></span><br><span class="line">  environment:</span><br><span class="line">   ZOO_MY_ID: <span class="number">3</span></span><br><span class="line">   ZOO_SERVERS: server.<span class="number">1</span>=zk1:<span class="number">2888</span>:<span class="number">3888</span>;<span class="number">2181</span> server.<span class="number">2</span>=zk2:<span class="number">2888</span>:<span class="number">3888</span>;<span class="number">2181</span> server.<span class="number">3</span>=zk3:<span class="number">2888</span>:<span class="number">3888</span>;<span class="number">2181</span> </span><br><span class="line">  volumes:</span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk3/data:/data</span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk3/datalog:/datalog</span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk3/conf:/conf </span><br><span class="line">   - /Users/mizhuo/Path/docker/zookeeper/zk3/logs:/logs</span><br><span class="line">  networks:</span><br><span class="line">    - zk-kafka-cluster</span><br></pre></td></tr></table></figure></li><li><p>æ„å»º Zookeeper é›†ç¾¤</p><p><code>docker-compose -f zookeeperDokerfile.yaml up -d</code></p></li><li><p>æµè§ˆå™¨æŸ¥çœ‹ Zookeeper è¿è¡Œæƒ…å†µ</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202210041346579.png" style="zoom:50%;" /></li></ul></li><li><p>ä½¿ç”¨<code>docker-compose</code>ç¼–æ’ Kafka é›†ç¾¤</p><ul><li>æ–°å»º<code>KafkaDockerfile.yaml</code></li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line">networks:</span><br><span class="line"> zk-kafka-cluster:</span><br><span class="line">  name: zk-kafka-cluster</span><br><span class="line">services:</span><br><span class="line"> kafka1:</span><br><span class="line">  image: bitnami/kafka:<span class="number">2.4</span>.<span class="number">1</span></span><br><span class="line">  hostname: kafka1</span><br><span class="line">  container_name: kafka1</span><br><span class="line">  ports:</span><br><span class="line">   - <span class="number">9091</span>:<span class="number">9091</span></span><br><span class="line">  environment:</span><br><span class="line">   KAFKA_BROKER_ID: <span class="number">1</span></span><br><span class="line">   KAFKA_ADVERTISED_HOST_NAME: kafka1</span><br><span class="line">   KAFKA_ZOOKEEPER_CONNECT: zk1:<span class="number">2181</span>,zk2:<span class="number">2181</span>,zk3:<span class="number">2181</span></span><br><span class="line">   KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://docker.for.mac.host.internal:<span class="number">9091</span></span><br><span class="line">   KAFKA_LISTENERS: PLAINTEXT://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9091</span></span><br><span class="line">   ALLOW_PLAINTEXT_LISTENER: yes</span><br><span class="line">  volumes:</span><br><span class="line">   - /Users/mizhuo/Path/docker/kafka1/logs:/opt/bitnami/kafka/logs</span><br><span class="line">   - /Users/mizhuo/Path/docker/kafka1/data:/bitnami/kafka/data</span><br><span class="line">   - /etc/localtime:/etc/localtime:ro</span><br><span class="line">  external_links:</span><br><span class="line">   - zk1</span><br><span class="line">   - zk2</span><br><span class="line">   - zk3</span><br><span class="line">  networks:</span><br><span class="line">   - zk-kafka-cluster</span><br><span class="line">   </span><br><span class="line"> kafka2:</span><br><span class="line">  image: bitnami/kafka:<span class="number">2.4</span>.<span class="number">1</span></span><br><span class="line">  hostname: kafka2</span><br><span class="line">  container_name: kafka2</span><br><span class="line">  ports:</span><br><span class="line">   - <span class="number">9092</span>:<span class="number">9092</span></span><br><span class="line">  environment:</span><br><span class="line">   KAFKA_BROKER_ID: <span class="number">2</span></span><br><span class="line">   KAFKA_ADVERTISED_HOST_NAME: kafka2</span><br><span class="line">   KAFKA_ZOOKEEPER_CONNECT: zk1:<span class="number">2181</span>,zk2:<span class="number">2181</span>,zk3:<span class="number">2181</span></span><br><span class="line">   KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://docker.for.mac.host.internal:<span class="number">9092</span></span><br><span class="line">   KAFKA_LISTENERS: PLAINTEXT://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9092</span></span><br><span class="line">   ALLOW_PLAINTEXT_LISTENER: yes</span><br><span class="line">  volumes:</span><br><span class="line">   - /Users/mizhuo/Path/docker/kafka2/logs:/opt/bitnami/kafka/logs</span><br><span class="line">   - /Users/mizhuo/Path/docker/kafka2/data:/bitnami/kafka/data</span><br><span class="line">   - /etc/localtime:/etc/localtime:ro</span><br><span class="line">  external_links:</span><br><span class="line">   - zk1</span><br><span class="line">   - zk2</span><br><span class="line">   - zk3</span><br><span class="line">  networks:</span><br><span class="line">   - zk-kafka-cluster</span><br><span class="line">   </span><br><span class="line"> kafka3:</span><br><span class="line">  image: bitnami/kafka:<span class="number">2.4</span>.<span class="number">1</span></span><br><span class="line">  hostname: kafka3</span><br><span class="line">  container_name: kafka3</span><br><span class="line">  ports:</span><br><span class="line">   - <span class="number">9093</span>:<span class="number">9093</span></span><br><span class="line">  environment:</span><br><span class="line">   KAFKA_BROKER_ID: <span class="number">3</span></span><br><span class="line">   KAFKA_ADVERTISED_HOST_NAME: kafka3</span><br><span class="line">   KAFKA_ZOOKEEPER_CONNECT: zk1:<span class="number">2181</span>,zk2:<span class="number">2181</span>,zk3:<span class="number">2181</span></span><br><span class="line">   KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://docker.for.mac.host.internal:<span class="number">9093</span></span><br><span class="line">   KAFKA_LISTENERS: PLAINTEXT://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">9093</span></span><br><span class="line">   ALLOW_PLAINTEXT_LISTENER: yes</span><br><span class="line">  volumes:</span><br><span class="line">   - /Users/mizhuo/Path/docker/kafka3/logs:/opt/bitnami/kafka/logs</span><br><span class="line">   - /Users/mizhuo/Path/docker/kafka3/data:/bitnami/kafka/data</span><br><span class="line">   - /etc/localtime:/etc/localtime:ro</span><br><span class="line">  external_links:</span><br><span class="line">   - zk1</span><br><span class="line">   - zk2</span><br><span class="line">   - zk3</span><br><span class="line">  networks:</span><br><span class="line">   - zk-kafka-cluster</span><br><span class="line">   </span><br><span class="line"> kafka-manager:</span><br><span class="line">   image: sheepkiller/kafka-manager:latest</span><br><span class="line">   container_name: kafka-manager</span><br><span class="line">   hostname: kafka-manager</span><br><span class="line">   ports:</span><br><span class="line">     - <span class="number">9001</span>:<span class="number">9000</span></span><br><span class="line">   links:</span><br><span class="line">     - kafka1</span><br><span class="line">     - kafka2</span><br><span class="line">     - kafka3</span><br><span class="line">   external_links:</span><br><span class="line">     - zk1</span><br><span class="line">     - zk2</span><br><span class="line">     - zk3</span><br><span class="line">   environment:</span><br><span class="line">     ZK_HOSTS: zk1:<span class="number">2181</span>,zk2:<span class="number">2181</span>,zk3:<span class="number">2181</span></span><br><span class="line">   networks:</span><br><span class="line">    - zk-kafka-cluster</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>æ„å»º Kafka é›†ç¾¤</p><p><code>docker-compose -f kafkaDockerfile.yaml up -d</code></p></li><li><p>æµè§ˆå™¨æŸ¥çœ‹ kafka Manager</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202210042148973.png" style="zoom:50%;" /></li><li><p>æŸ¥çœ‹ Zookeeper,å¯ä»¥çœ‹åˆ° Kafka åˆ›å»ºçš„å¾ˆå¤šèŠ‚ç‚¹<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202210051535201.png"></p></li></ul></li></ul><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>è‡³æ­¤,Kafkaé›†ç¾¤å·²ç»æ­å»ºå®Œæˆäº†,åç»­ä¼šæ¼”ç¤ºå¦‚ä½•æ•´åˆSpringBoot,ç”Ÿäº§æ¶ˆæ¯ã€æ¶ˆè´¹æ¶ˆæ¯ä»¥åŠå¦‚ä½•è§£å†³æ¶ˆæ¯ä¸¢å¤±ã€æ¶ˆæ¯å †ç§¯ç­‰é—®é¢˜ã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> Kafka </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mq </tag>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆInnoDBè¦ä½¿ç”¨B+æ ‘</title>
      <link href="/%E4%B8%BA%E4%BB%80%E4%B9%88InnoDB%E8%A6%81%E4%BD%BF%E7%94%A8B+%E6%A0%91/"/>
      <url>/%E4%B8%BA%E4%BB%80%E4%B9%88InnoDB%E8%A6%81%E4%BD%BF%E7%94%A8B+%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ç ”ç©¶æ•°æ®åº“è°ƒä¼˜,æœ€å¸¸ç”¨çš„ä¼˜åŒ–æ‰‹æ®µå°±æ˜¯<code>ç¼©å°ç»“æœé›†</code>ã€<code>åˆ†é¡µ</code>ã€<code>ä¼˜åŒ–SQLé¿å…å‡ºç°ç´¢å¼•å¤±æ•ˆ</code>ã€<code>å»ºç´¢å¼•</code>ã€<code>åˆ†åº“åˆ†è¡¨</code>,ä½†ä¸ç®¡æ€ä¹ˆæ ·éƒ½ç»•ä¸å¼€ç´¢å¼•ã€‚è€Œè¯´åˆ°ç´¢å¼•,æŸ¥è¯¢å¾ˆå¿«ã€æœ‰åº,å°±ä¼šæƒ³åˆ°<code>æ ‘</code>è¿™ä¸ªæ•°æ®ç»“æ„ã€‚ä½†æ˜¯MySQLé»˜è®¤çš„InnoDBå¼•æ“ä¸ºä»€ä¹ˆä½¿ç”¨B+æ ‘ä½œä¸ºç´¢å¼•ç»“æ„,è€Œä¸æ˜¯Bæ ‘ã€å¹³è¡¡äºŒå‰æ ‘ã€çº¢é»‘æ ‘å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹å„ç§æ ‘å‹ç»“æ„ã€‚</p><span id="more"></span><h3 id="å¸¸è§çš„æ ‘å‹ç»“æ„"><a href="#å¸¸è§çš„æ ‘å‹ç»“æ„" class="headerlink" title="å¸¸è§çš„æ ‘å‹ç»“æ„"></a>å¸¸è§çš„æ ‘å‹ç»“æ„</h3><h4 id="äºŒå‰æŸ¥æ‰¾æ ‘-Binary-Search-Tree"><a href="#äºŒå‰æŸ¥æ‰¾æ ‘-Binary-Search-Tree" class="headerlink" title="äºŒå‰æŸ¥æ‰¾æ ‘(Binary Search Tree)"></a>äºŒå‰æŸ¥æ‰¾æ ‘(Binary Search Tree)</h4><p>ä½†å‡¡æ˜¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥å¾ˆç†Ÿæ‚‰äºŒå‰æŸ¥æ‰¾æ ‘äº†,æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„æ•°æ®ç»“æ„ã€‚å®ƒèƒ½å¤Ÿé«˜æ•ˆçš„è¿›è¡Œå¢åˆ æŸ¥æ“ä½œ,æ¯ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º<code>O(logn)</code>,ä½†æ˜¯åœ¨æç«¯æƒ…å†µä¸‹,æ¯”å¦‚:è‹¥ä¸€ç›´æ’å…¥é€’å¢çš„å…ƒç´ ,å®ƒå°±ä¼šé€€åŒ–æˆé“¾è¡¨,è€Œé“¾è¡¨æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(n)</code>,æŸ¥æ‰¾é€Ÿåº¦ä¼šå¤§å¹…ä¸‹é™ã€‚</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220823214631.png"></p><h4 id="AVLæ ‘-AVL-Tree"><a href="#AVLæ ‘-AVL-Tree" class="headerlink" title="AVLæ ‘(AVL Tree)"></a>AVLæ ‘(AVL Tree)</h4><p>ä¸ºäº†è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘é€€åŒ–æˆé“¾è¡¨çš„é—®é¢˜,<code>è‡ªå¹³è¡¡äºŒå‰æ ‘</code>è¯ç”Ÿäº†ã€‚è€Œ<code>AVLæ ‘</code>æ˜¯æœ€æ—©è¯ç”Ÿçš„è‡ªå¹³è¡¡äºŒå‰æ ‘,æ¯å¢åŠ å’Œåˆ é™¤å…ƒç´ æ—¶å®ƒä¼šé€šè¿‡ä¸€æ¬¡æˆ–å¤šæ¬¡æ ‘æ—‹è½¬æ¥å¹³è¡¡è¿™ä¸ªæ ‘,å› æ­¤å®ƒä¸ä»…æ‹¥æœ‰äºŒå‰æŸ¥æ‰¾æ ‘çš„å…¨éƒ¨ç‰¹æ€§,å¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦ä¸ä¼šç›¸å·®è¶…è¿‡1ã€‚ä½†æ˜¯å¦‚æœé¢‘ç¹çš„æ’å…¥å…ƒç´ ,è¿™é¢—æ ‘ä¼šä¸æ–­çš„è¿›è¡Œå·¦æ—‹å³æ—‹æ¥ç»´æŒå¹³è¡¡,æ•ˆç‡ä¼šè¶Šæ¥è¶Šä½ã€‚</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/avl.gif"></p><h4 id="çº¢é»‘æ ‘-Red-Black-Tree"><a href="#çº¢é»‘æ ‘-Red-Black-Tree" class="headerlink" title="çº¢é»‘æ ‘(Red Black Tree)"></a>çº¢é»‘æ ‘(Red Black Tree)</h4><p><code>çº¢é»‘æ ‘</code>ä¹Ÿæ˜¯<code>è‡ªå¹³è¡¡äºŒå‰æ ‘</code>çš„ä¸€ç§,å®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„<code>AVLæ ‘</code>,æ¯å½“æ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®çš„æ—¶å€™,å®ƒä¹Ÿä¼šé€šè¿‡ç‰¹å®šæ“ä½œä¿æŒæ ‘çš„å¹³è¡¡,ä½†ä¸<code>AVLæ ‘</code>ä¸åŒçš„æ˜¯,<code>çº¢é»‘æ ‘</code>çš„å·¦å³å­æ ‘é«˜åº¦å·®å¯èƒ½ä¼šå¤§äº1ã€‚åœ¨æœ€åæ¡ä»¶ä¸‹æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸º<code>O(logn)</code></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1:ç»“ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚</span><br><span class="line">2:æ ¹ç»“ç‚¹æ˜¯é»‘è‰²ã€‚</span><br><span class="line">3:æ‰€æœ‰å¶å­éƒ½æ˜¯é»‘è‰²ã€‚ï¼ˆå¶å­æ˜¯NILç»“ç‚¹ï¼‰</span><br><span class="line">4:æ¯ä¸ªçº¢è‰²ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹éƒ½æ˜¯é»‘è‰²ã€‚ï¼ˆä»æ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²ç»“ç‚¹ï¼‰</span><br><span class="line">5:ä»ä»»ä¸€ç»“ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²ç»“ç‚¹ã€‚ </span><br></pre></td></tr></table></figure><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202208232234864.gif"></p><h4 id="Bæ ‘-B-Tree"><a href="#Bæ ‘-B-Tree" class="headerlink" title="Bæ ‘(B Tree)"></a>Bæ ‘(B Tree)</h4><p>Bæ ‘æ˜¯ä»å¹³è¡¡äºŒå‰æ ‘æ¼”åŒ–è€Œæ¥ï¼ŒBæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨å¤šä¸ªå…³é”®å­—ï¼Œå®ƒå°†èŠ‚ç‚¹å¤§å°è®¾ç½®ä¸ºç£ç›˜é¡µçš„å¤§å°ï¼Œå……åˆ†åˆ©ç”¨äº†ç£ç›˜é¢„è¯»çš„åŠŸèƒ½ã€‚æ¯æ¬¡è¯»å–ç£ç›˜é¡µæ—¶å°±ä¼šè¯»å–ä¸€æ•´ä¸ªèŠ‚ç‚¹ã€‚ä¹Ÿæ­£å› æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨ç€éå¸¸å¤šä¸ªå…³é”®å­—ï¼Œæ ‘çš„æ·±åº¦å°±ä¼šéå¸¸çš„å°ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä¸€æ£µ m é˜¶çš„ B æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹å¾:</span><br><span class="line"></span><br><span class="line">1:æ ¹èŠ‚ç‚¹è‡³å°‘æœ‰2ä¸ªå­å¥³ï¼›</span><br><span class="line">2:æ¯ä¸ªä¸­é—´èŠ‚ç‚¹éƒ½åŒ…å« k-1 ä¸ªå…ƒç´ å’Œ k ä¸ªå­©å­ï¼Œå…¶ä¸­ m/2&lt;=k&lt;=mï¼›</span><br><span class="line">3:æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹éƒ½åŒ…å« k-1 ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ m/2&lt;=k&lt;=mï¼›</span><br><span class="line">4:æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹å‡ä½äºåŒä¸€å±‚ï¼›</span><br><span class="line">5:æ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å…ƒç´ ä»å°åˆ°å¤§æ’åˆ—ï¼ŒèŠ‚ç‚¹å½“ä¸­ k-1 ä¸ªå…ƒç´ æ­£å¥½æ˜¯ k ä¸ªå­©å­åŒ…å«çš„å…ƒç´ çš„å€¼åŸŸåˆ’åˆ†ã€‚</span><br></pre></td></tr></table></figure><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202208242207835.gif"></p><p>å¯¹äºBæ ‘æ¥è¯´,æ•°æ®å­˜åœ¨ç»“ç‚¹ä¸­,æ‰€ä»¥æŸ¥è¯¢ä¸å¤ªç¨³å®š,æœ€å¥½çš„æƒ…å†µæ˜¯æ ¹ç»“ç‚¹æŸ¥åˆ°äº†,æœ€åçš„æƒ…å†µæ˜¯æŸ¥åˆ°å¶å­ç»“ç‚¹ã€‚</p><h4 id="B-æ ‘-B-Tree"><a href="#B-æ ‘-B-Tree" class="headerlink" title="B+æ ‘(B+ Tree)"></a>B+æ ‘(B+ Tree)</h4><p>ä¸ºäº†è§£å†³Bæ ‘çš„å¼Šç«¯,B+æ ‘å‡ºç°äº†,å®ƒå°†æ‰€æœ‰çš„æ•°æ®å­˜æ”¾åœ¨å¶å­ç»“ç‚¹ä¸­,åœ¨éå¶å­ç»“ç‚¹ä¸­åªå­˜å‚¨ç´¢å¼•çš„æŒ‡é’ˆã€‚æ•…æ¯æ¬¡æŸ¥è¯¢éƒ½è¦æ‰¾å¶å­ç»“ç‚¹,æŸ¥è¯¢æ€§èƒ½ç›¸å¯¹ç¨³å®šã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">B+ æ ‘çš„å®šä¹‰ï¼š</span><br><span class="line"></span><br><span class="line">1:B+ æ ‘å†…å­˜åˆ†ä¸ºå¶å­ç»“ç‚¹ä»¥åŠéå¶å­ç»“ç‚¹ï¼š</span><br><span class="line">éå¶å­ç»“ç‚¹åªæ˜¯å­˜å‚¨ç´¢å¼•ï¼Œå¶å­ç»“ç‚¹å­˜å‚¨ç›¸å…³çš„æ•°æ®</span><br><span class="line">2:åº•å±‚çš„å¶å­ç»“ç‚¹ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œæ–¹ä¾¿äº†åŒºé—´æŸ¥è¯¢</span><br><span class="line">3:mé˜¶B+æ ‘éæ ¹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹çš„æ•°é‡æ˜¯ï¼šå–æ•´ï¼ˆm/2ï¼‰&lt;= x &lt;= m</span><br></pre></td></tr></table></figure><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/202208242210676.gif"></p><hr><h3 id="ä¸ºä»€ä¹ˆB-æ ‘è„±é¢–è€Œå‡º"><a href="#ä¸ºä»€ä¹ˆB-æ ‘è„±é¢–è€Œå‡º" class="headerlink" title="ä¸ºä»€ä¹ˆB+æ ‘è„±é¢–è€Œå‡º"></a>ä¸ºä»€ä¹ˆB+æ ‘è„±é¢–è€Œå‡º</h3><p>ä»‹ç»å®Œè¿™å‡ ç§æ ‘å,æˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜,å› ä¸ºæ•°æ®åº“è¡¨æ•°æ®å¾ˆå¤š,ä¸€èˆ¬éƒ½æ˜¯å­˜æ”¾åœ¨ç¡¬ç›˜ä¸Šçš„,è€Œç£ç›˜è¯»å–çš„æ•ˆç‡è¦æ¯”å†…å­˜ä½çš„å¤š,æ‰€ä»¥è¦æƒ³åŠ å¿«æ•°æ®åº“æŸ¥è¯¢çš„æ•ˆç‡,å°±å¿…é¡»è¦å‡å°‘ç£ç›˜çš„IO,é€šè¿‡å†…å­˜æ¥æé«˜æ•ˆç‡ã€‚é‚£ä¹ˆ,è¦å¦‚ä½•ä¿è¯æœ‰æ•ˆã€é«˜æ•ˆçš„ä»ç£ç›˜å°†å¤§é‡æ•°æ®æå–åˆ°å†…å­˜ä¸­å‘¢ï¼Ÿ<br>é¦–å…ˆ,äºŒå‰æ ‘å°±å¾—æ’é™¤æ‰äº†,å› ä¸ºå½“æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™,äºŒå‰æ ‘çš„æ ‘é«˜å°†ä¼šå¾ˆå¤§,åœ¨æŸ¥æ‰¾æ•°æ®çš„æ—¶å€™å°±ä¼šè¿›è¡Œå¾ˆå¤šæ¬¡ç£ç›˜IOï¼Œæ•ˆç‡å°†ä¼šæä½ã€‚è€ŒBæ ‘ä¸B+æ ‘ç›¸æ¯”è¾ƒ,B+æ ‘åªæœ‰å¶å­ç»“ç‚¹å­˜æ”¾æ•°æ®,å…¶ä»–ç»“ç‚¹åªå­˜æ”¾ç´¢å¼•,æ‰€ä»¥B+æ ‘æ¯”Bæ ‘æ›´åŠ <code>çŸ®èƒ–</code>ã€‚ç£ç›˜çš„IOä¼šæ›´å°‘,æ•ˆç‡ä¼šæ›´é«˜ã€‚è€Œä¸”B+æ ‘çš„å¶å­èŠ‚ç‚¹ä¸­çš„ç´¢å¼•æ•°æ®æ˜¯æŒ‰é¡ºåºæ’åˆ—çš„,å¹¶ä¸”å¶å­èŠ‚ç‚¹é—´æ˜¯é€šè¿‡åŒå‘é“¾è¡¨è¿›è¡Œè¿æ¥çš„ã€‚è¿™ä¸ªç‰¹ç‚¹ä½¿B+æ ‘åœ¨å®ç°èŒƒå›´æŸ¥æ‰¾ã€æ’åºæŸ¥æ‰¾ã€åˆ†ç»„æŸ¥æ‰¾ç­‰æ“ä½œæ—¶å˜å¾—å¼‚å¸¸ç®€å•ã€‚è€ŒBæ ‘ç”±äºæ•°æ®åˆ†æ•£åœ¨å„ä¸ªèŠ‚ç‚¹,è¦å®ç°è¿™äº›æ“ä½œå¾ˆä¸å®¹æ˜“ã€‚</p><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>æ‰€ä»¥,ç»¼åˆæ¯”è¾ƒ,B+æ ‘æ›´åŠ é€‚åˆä½œä¸ºæ•°æ®åº“çš„ç´¢å¼•ç»“æ„ã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆELFKå®ç°æŸ¥çœ‹æ—¥å¿—è‡ªç”±</title>
      <link href="/SpringBoot%E6%95%B4%E5%90%88ELFK%E5%AE%9E%E7%8E%B0%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97%E8%87%AA%E7%94%B1/"/>
      <url>/SpringBoot%E6%95%B4%E5%90%88ELFK%E5%AE%9E%E7%8E%B0%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97%E8%87%AA%E7%94%B1/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰è®²è¿‡å¦‚ä½•ä½¿ç”¨Dockerå®‰è£…ELK,æœ¬ç« æ¥è®²è®²å¦‚ä½•ä½¿ç”¨SpringBootæ•´åˆELKä»¥åŠELFK,ä»è€Œå®ç°æ—¥å¿—è‡ªç”±,å†ä¹Ÿä¸ç”¨è·‘æœåŠ¡å™¨ä¸Šææ—¥å¿—äº†ã€‚</p><span id="more"></span><h4 id="æ­å»ºELK"><a href="#æ­å»ºELK" class="headerlink" title="æ­å»ºELK"></a>æ­å»ºELK</h4><p>å¦‚æœè¿˜æ²¡æ­å»ºå¥½ELKçš„,å¯ä»¥çœ‹çœ‹ä¹‹å‰çš„åšå®¢ã€‚ä¼ é€é—¨:<a href="https://mizhuo.site/Docker%E5%AE%89%E8%A3%85ELK/">ğŸšªğŸšªğŸšª</a></p><h4 id="Logback"><a href="#Logback" class="headerlink" title="Logback"></a>Logback</h4><blockquote><p>è¦ä½¿ç”¨logstashæ”¶é›†SpringBootçš„æ—¥å¿—,ä¸»è¦æ˜¯é€šè¿‡Logbacké…ç½®æ¥å®ç°ã€‚</p></blockquote><ul><li><p>æ·»åŠ ä¾èµ–,æˆ‘è¿™é‡Œç”¨çš„æ˜¯gradleå·¥ç¨‹,mavençš„è¯å¯ä»¥æ‹¿ä¸‹é¢çš„åæ ‡è‡ªè¡Œè½¬æ¢ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">implementation &#x27;net.logstash.logback:logstash-logback-encoder:6.3&#x27;</span><br><span class="line">implementation &#x27;ch.qos.logback:logback-classic:1.2.3&#x27;</span><br><span class="line">implementation &#x27;ch.qos.logback:logback-core:1.2.3&#x27;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨resourcesä¸‹æ–°å»º<code>logback-spring.xml</code>é…ç½®æ–‡ä»¶ã€‚</p><div class="note red icon-padding flat"><i class="note-icon fas fa-triangle-exclamation"></i><p>æ³¨æ„:æ­¤å¤„ä¸èƒ½å‘½åä¸º<code>logback.xml</code>,å¦åˆ™logbackæ— æ³•åŠ è½½åˆ°<code>application.properties</code>é‡Œé¢çš„ä¸œè¥¿,å› ä¸ºåŠ è½½é¡ºåºæ˜¯è¿™æ ·çš„:<code>logback.xmlâ€”&gt;application.propertiesâ€”&gt;logback-spring.xml</code></p></div></li><li><p>é…ç½®<code>logback-spring.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼•ç”¨é»˜è®¤æ—¥å¿—é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">resource</span>=<span class="string">&quot;org/springframework/boot/logging/logback/defaults.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨é»˜è®¤çš„æ§åˆ¶å°æ—¥å¿—è¾“å‡ºå®ç°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">resource</span>=<span class="string">&quot;org/springframework/boot/logging/logback/console-appender.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åº”ç”¨åç§°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">&quot;context&quot;</span> <span class="attr">name</span>=<span class="string">&quot;APP_NAME&quot;</span> <span class="attr">source</span>=<span class="string">&quot;spring.application.name&quot;</span> <span class="attr">defaultValue</span>=<span class="string">&quot;springBoot&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--LogStashè®¿é—®host--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">name</span>=<span class="string">&quot;LOG_STASH_HOST&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;context&quot;</span> <span class="attr">source</span>=<span class="string">&quot;logstash.host&quot;</span> <span class="attr">defaultValue</span>=<span class="string">&quot;localhost&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--DEBUGæ—¥å¿—è¾“å‡ºåˆ°LogStash--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;LOG_STASH_DEBUG&quot;</span> <span class="attr">class</span>=<span class="string">&quot;net.logstash.logback.appender.LogstashTcpSocketAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">destination</span>&gt;</span>$&#123;LOG_STASH_HOST&#125;:6001<span class="tag">&lt;/<span class="name">destination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> <span class="attr">class</span>=<span class="string">&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">providers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">timestamp</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">timeZone</span>&gt;</span>Asia/Shanghai<span class="tag">&lt;/<span class="name">timeZone</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">timestamp</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">pattern</span>&gt;</span></span><br><span class="line">                        &#123;</span><br><span class="line">                        &quot;project&quot;: &quot;mizhuo-logstash-demo&quot;,</span><br><span class="line">                        &quot;level&quot;: &quot;%level&quot;,</span><br><span class="line">                        &quot;service&quot;: &quot;$&#123;APP_NAME:-&#125;&quot;,</span><br><span class="line">                        &quot;pid&quot;: &quot;$&#123;PID:-&#125;&quot;,</span><br><span class="line">                        &quot;thread&quot;: &quot;%thread&quot;,</span><br><span class="line">                        &quot;class&quot;: &quot;%logger&quot;,</span><br><span class="line">                        &quot;message&quot;: &quot;%message&quot;,</span><br><span class="line">                        &quot;stack_trace&quot;: &quot;%exception&#123;20&#125;&quot;</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">providers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å½“æœ‰å¤šä¸ªLogStashæœåŠ¡æ—¶ï¼Œè®¾ç½®è®¿é—®ç­–ç•¥ä¸ºè½®è¯¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connectionStrategy</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">roundRobin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">connectionTTL</span>&gt;</span>5 minutes<span class="tag">&lt;/<span class="name">connectionTTL</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">roundRobin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">connectionStrategy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ERRORæ—¥å¿—è¾“å‡ºåˆ°LogStash--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;LOG_STASH_ERROR&quot;</span> <span class="attr">class</span>=<span class="string">&quot;net.logstash.logback.appender.LogstashTcpSocketAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">destination</span>&gt;</span>$&#123;LOG_STASH_HOST&#125;:6002<span class="tag">&lt;/<span class="name">destination</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> <span class="attr">class</span>=<span class="string">&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">providers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">timestamp</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">timeZone</span>&gt;</span>Asia/Shanghai<span class="tag">&lt;/<span class="name">timeZone</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">timestamp</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºæ ¼å¼--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">pattern</span>&gt;</span></span><br><span class="line">                        &#123;</span><br><span class="line">                        &quot;project&quot;: &quot;mizhuo-logstash-demo&quot;,</span><br><span class="line">                        &quot;level&quot;: &quot;%level&quot;,</span><br><span class="line">                        &quot;service&quot;: &quot;$&#123;APP_NAME:-&#125;&quot;,</span><br><span class="line">                        &quot;pid&quot;: &quot;$&#123;PID:-&#125;&quot;,</span><br><span class="line">                        &quot;thread&quot;: &quot;%thread&quot;,</span><br><span class="line">                        &quot;class&quot;: &quot;%logger&quot;,</span><br><span class="line">                        &quot;message&quot;: &quot;%message&quot;,</span><br><span class="line">                        &quot;stack_trace&quot;: &quot;%exception&#123;20&#125;&quot;</span><br><span class="line">                        &#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">providers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å½“æœ‰å¤šä¸ªLogStashæœåŠ¡æ—¶ï¼Œè®¾ç½®è®¿é—®ç­–ç•¥ä¸ºè½®è¯¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connectionStrategy</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">roundRobin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">connectionTTL</span>&gt;</span>5 minutes<span class="tag">&lt;/<span class="name">connectionTTL</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">roundRobin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">connectionStrategy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ§åˆ¶æ¡†æ¶è¾“å‡ºæ—¥å¿—--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.slf4j&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.springframework&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;LOG_STASH_DEBUG&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;LOG_STASH_ERROR&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;site.mizhuo.springtransaction&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;LOG_STASH_DEBUG&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;site.mizhuo.springtransaction&quot;</span> <span class="attr">level</span>=<span class="string">&quot;ERROR&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;LOG_STASH_ERROR&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®<code>application.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8888</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span> <span class="string">transaction</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">mizhuo123</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/demo</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.slf4j.Slf4jImpl</span></span><br><span class="line"><span class="attr">logstash:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com:</span></span><br><span class="line">      <span class="attr">baomidou:</span></span><br><span class="line">        <span class="attr">mybatisplus:</span> <span class="string">DEBUG</span></span><br><span class="line">    <span class="attr">site:</span></span><br><span class="line">      <span class="attr">mizhuo:</span></span><br><span class="line">        <span class="attr">springtransaction:</span></span><br><span class="line">          <span class="attr">mapper:</span> <span class="string">DEBUG</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®<code>logstash.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    tcp &#123;</span><br><span class="line">    mode =&gt; &quot;server&quot;</span><br><span class="line">    host =&gt; &quot;0.0.0.0&quot;</span><br><span class="line">    port =&gt; 6001</span><br><span class="line">    codec =&gt; json_lines</span><br><span class="line">    type =&gt; &quot;debug&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    tcp &#123;</span><br><span class="line">    mode =&gt; &quot;server&quot;</span><br><span class="line">    host =&gt; &quot;0.0.0.0&quot;</span><br><span class="line">    port =&gt; 6002</span><br><span class="line">    codec =&gt; json_lines</span><br><span class="line">    type =&gt; &quot;error&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    tcp &#123;</span><br><span class="line">    mode =&gt; &quot;server&quot;</span><br><span class="line">    host =&gt; &quot;0.0.0.0&quot;</span><br><span class="line">    port =&gt; 6003</span><br><span class="line">    codec =&gt; json_lines</span><br><span class="line">    type =&gt; &quot;info&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">    hosts =&gt; &quot;es:9200&quot;</span><br><span class="line">    index =&gt; &quot;trans-%&#123;type&#125;-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰“å¼€kibanaæ§åˆ¶é¢æ¿<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220710091745.png"><br>å¯ä»¥çœ‹åˆ°å·²ç»åˆ›å»ºäº†ç´¢å¼•,å¯¹åº”çš„å°±æ˜¯logstashé…ç½®çš„ç´¢å¼•åç§°ã€‚</p></li><li><p>æ·»åŠ ç´¢å¼•åˆ°kibanaçš„ç´¢å¼•æ¨¡å¼<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220709233920.png"></p></li><li><p>è¿›å…¥<code>Discover</code><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220709234702.png"><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220709235335.png"><br>å¯ä»¥çœ‹åˆ°æ—¥å¿—å·²ç»å…¨éƒ¨å¯ä»¥åœ¨kibanaä¸ŠæŸ¥çœ‹äº†ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®å…¶ä¸­å…³é”®å­—æŸ¥è¯¢ã€‚</p></li></ul><div class="note red icon-padding flat"><i class="note-icon fa fa-triangle-exclamation"></i><p>â€‹ELKå·²ç»æ­å»ºå¥½äº†ï¼Œä½†æ˜¯æœ‰ä¸ªå¼Šç«¯å°±æ˜¯SpringBootè¿ç”¨logstash-logbak-encoderå°†æ—¥å¿—å‘é€ç»™logstashï¼Œç›¸å½“è€—è´¹æœåŠ¡å™¨èµ„æºï¼Œä¼šå¯¹CPUï¼Œå†…å­˜é€ æˆä¸€ä¸ªç›¸å½“é«˜çš„æŸè€—ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å¯¹æˆ‘ä»¬çš„æ¶æ„è¿›è¡Œå‡çº§ã€‚</p></div><h4 id="FileBeat"><a href="#FileBeat" class="headerlink" title="FileBeat"></a>FileBeat</h4><blockquote><p>FileBeatï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ—¥å¿—æ”¶é›†å¤„ç†å·¥å…·(Agent)ï¼ŒFilebeatå ç”¨èµ„æºå°‘ï¼Œé€‚åˆäºåœ¨å„ä¸ªæœåŠ¡å™¨ä¸Šæœé›†æ—¥å¿—åä¼ è¾“ç»™Logstashï¼Œå®˜æ–¹ä¹Ÿæ¨èæ­¤å·¥å…·ã€‚</p></blockquote><ul><li><p>æ–°å»º<code>filebeat.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filebeat.inputs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">log</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/usr/share/filebeat/test/logs/*.log</span></span><br><span class="line">    <span class="attr">fields_under_root:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># ç”¨æ¥å¤„ç†å°†å¤šè¡Œæ•°æ®å½“ä½œä¸€æ¡æ—¥å¿—çš„æƒ…å†µï¼Œæ ¹æ®è‡ªå·±çš„æ—¥å¿—çš„æ ¼å¼åšä¿®æ”¹</span></span><br><span class="line">    <span class="attr">multiline.pattern:</span> <span class="string">&#x27;[0-9]&#123;4&#125;-[0-9]&#123;2&#125;-[0-9]&#123;2&#125;&#x27;</span> <span class="comment">###   &#x27;^\[&#x27;</span></span><br><span class="line">    <span class="attr">multiline.negate:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">multiline.match:</span> <span class="string">after</span></span><br><span class="line">    <span class="attr">ignore_older:</span> <span class="string">168h</span></span><br><span class="line">    <span class="attr">tail_files:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">output.logstash:</span></span><br><span class="line">  <span class="attr">hosts:</span> [<span class="string">&quot;192.168.204.128:6001&quot;</span>]</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹<code>logstash.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">  beats &#123;</span><br><span class="line">    port =&gt; 6001 </span><br><span class="line">    codec =&gt; json &#123;charset =&gt; &quot;UTF-8&quot;&#125;</span><br><span class="line">    client_inactivity_timeout =&gt; 36000</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">filter&#123;</span><br><span class="line">    mutate&#123;</span><br><span class="line">        #åˆ é™¤æ— æ•ˆçš„å­—æ®µ</span><br><span class="line">        remove_field =&gt; [&quot;@version&quot;]</span><br><span class="line">        add_field =&gt; &#123; &quot;@fields&quot; =&gt; &quot;%&#123;fields&#125;&quot;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    #æ–°å¢timestampå­—æ®µï¼Œå°†@timestampæ—¶é—´å¢åŠ 8å°æ—¶</span><br><span class="line">    ruby &#123; code =&gt; &quot;event.set(&#x27;timestamp&#x27;, event.get(&#x27;@timestamp&#x27;).time.localtime + 8*60*60)&quot; &#125;</span><br><span class="line">    json &#123;</span><br><span class="line">        source =&gt; &quot;@fields&quot;</span><br><span class="line">        remove_field =&gt; [ &quot;@fields&quot;, &quot;fields&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">  elasticsearch &#123;</span><br><span class="line">    hosts =&gt; &quot;es:9200&quot;</span><br><span class="line">    index =&gt; &quot;beat-test-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹<code>logback-spring.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼•ç”¨é»˜è®¤æ—¥å¿—é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">resource</span>=<span class="string">&quot;org/springframework/boot/logging/logback/defaults.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨é»˜è®¤çš„æ§åˆ¶å°æ—¥å¿—è¾“å‡ºå®ç°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">resource</span>=<span class="string">&quot;org/springframework/boot/logging/logback/console-appender.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åº”ç”¨åç§°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">&quot;context&quot;</span> <span class="attr">name</span>=<span class="string">&quot;APP_NAME&quot;</span> <span class="attr">source</span>=<span class="string">&quot;spring.application.name&quot;</span> <span class="attr">defaultValue</span>=<span class="string">&quot;springBoot&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿å­˜è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;LOG_FILE_PATH&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/home/logs&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--DEBUGæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE_DEBUG&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è¾“å‡ºDEBUGä»¥ä¸Šçº§åˆ«æ—¥å¿—--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è®¾ç½®ä¸ºé»˜è®¤çš„æ–‡ä»¶æ—¥å¿—æ ¼å¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è®¾ç½®æ–‡ä»¶å‘½åæ ¼å¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_FILE_PATH&#125;/debug/$&#123;APP_NAME&#125;-%d&#123;yyyy-MM-dd&#125;-%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è®¾ç½®æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œè¶…è¿‡å°±é‡æ–°ç”Ÿæˆæ–‡ä»¶ï¼Œé»˜è®¤10M--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>$&#123;LOG_FILE_MAX_SIZE:-10MB&#125;<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°ï¼Œé»˜è®¤30å¤©--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;LOG_FILE_MAX_HISTORY:-30&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ERRORæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE_ERROR&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åªè¾“å‡ºERRORçº§åˆ«çš„æ—¥å¿—--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è®¾ç½®ä¸ºé»˜è®¤çš„æ–‡ä»¶æ—¥å¿—æ ¼å¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è®¾ç½®æ–‡ä»¶å‘½åæ ¼å¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_FILE_PATH&#125;/error/$&#123;APP_NAME&#125;-%d&#123;yyyy-MM-dd&#125;-%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--è®¾ç½®æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œè¶…è¿‡å°±é‡æ–°ç”Ÿæˆæ–‡ä»¶ï¼Œé»˜è®¤10M--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>$&#123;LOG_FILE_MAX_SIZE:-10MB&#125;<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°ï¼Œé»˜è®¤30å¤©--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>$&#123;LOG_FILE_MAX_HISTORY:-30&#125;<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ§åˆ¶æ¡†æ¶è¾“å‡ºæ—¥å¿—--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.slf4j&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;springfox&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;io.swagger&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.springframework&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE_DEBUG&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE_ERROR&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;site.mizhuo.springtransaction&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE_DEBUG&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;site.mizhuo.springtransaction&quot;</span> <span class="attr">level</span>=<span class="string">&quot;ERROR&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE_ERROR&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å°†SpringBootåº”ç”¨éƒ¨ç½²åˆ°docker<br>æ˜ å°„æ—¥å¿—ç›®å½•åˆ°å®¿ä¸»æœº</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> java:<span class="number">8</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> mizhuo</span><br><span class="line"><span class="comment"># VOLUME æŒ‡å®šäº†ä¸´æ—¶æ–‡ä»¶ç›®å½•ä¸º/springbootã€‚</span></span><br><span class="line"><span class="comment"># å…¶æ•ˆæœæ˜¯åœ¨ä¸»æœº /var/lib/docker ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶é“¾æ¥åˆ°å®¹å™¨çš„/springboot</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> /springboot</span></span><br><span class="line"><span class="comment"># å°†jaråŒ…æ·»åŠ åˆ°å®¹å™¨ä¸­å¹¶æ›´åä¸ºapp.jar</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> spring-transaction-0.0.1-SNAPSHOT.jar app.jar</span></span><br><span class="line"><span class="comment"># è¿è¡ŒjaråŒ…</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> bash -c <span class="string">&#x27;touch /app.jar&#x27;</span></span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-Djava.security.egd=file:/dev/./urandom&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;/app.jar&quot;</span>]</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8888</span></span><br></pre></td></tr></table></figure><p><code>docker run --name demo -v /root/logs:/home/logs -p 8888:8888 d é•œåƒID</code></p></li><li><p>å¯åŠ¨filebeat<br>å°†æ—¥å¿—ç›®å½•æ˜ å°„è‡³filebeatï¼Œè¿™æ ·filebeatå°±èƒ½è¯»åˆ°springbootçš„æ—¥å¿—æ–‡ä»¶äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name filebeat --net elk_network -d --link logstash:logstash -e &quot;TZ=Asia/Shanghai&quot; -v /root/docker/Filebeat/filebeat.yml:/usr/share/filebeat/filebeat.yml -v /root/logs:/usr/share/filebeat/test/logs elastic/filebeat:7.17.4</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹kibana<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/image-20220711065634659.png"></p></li></ul><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>â€‹è‡³æ­¤,ELFKå·²ç»æ­å»ºå¥½äº†ã€‚åç»­å¯ä»¥å†å°†kafkaæ¥å…¥è¿›æ¥ï¼Œè¿›ä¸€æ­¥æé«˜æ—¥å¿—æ”¶é›†å™¨çš„æ€§èƒ½ã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELK </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArthasçœŸçš„å¥½ç”¨å—</title>
      <link href="/Arthas%E7%9C%9F%E7%9A%84%E5%A5%BD%E7%94%A8%E5%90%97/"/>
      <url>/Arthas%E7%9C%9F%E7%9A%84%E5%A5%BD%E7%94%A8%E5%90%97/</url>
      
        <content type="html"><![CDATA[<h4 id="Arthasä»‹ç»"><a href="#Arthasä»‹ç»" class="headerlink" title="Arthasä»‹ç»"></a>Arthasä»‹ç»</h4><p><code>Arthas</code> æ˜¯Alibabaå¼€æºçš„Javaè¯Šæ–­å·¥å…·,ä¸€èˆ¬ç”¨äºæ’æŸ¥çº¿ä¸Šæ¯”è¾ƒéš¾ä»¥å®šä½ä»¥åŠçº¿ä¸‹éš¾ä»¥é‡ç°çš„é—®é¢˜,é‡‡ç”¨å‘½ä»¤å¼äº¤äº’æ¨¡å¼,ç®€å•æ˜“ä¸Šæ‰‹,å¯ä»¥å®æ—¶æ— ä¾µå…¥çš„ç›‘æ§JVMçŠ¶æ€,ä»¥åŠåŠ¨æ€è¿½è¸ªJAVAä»£ç ,å¹¶ä¸”å¯ä»¥åŠ¨æ€æ›¿æ¢classæ–‡ä»¶ã€‚</p><span id="more"></span><h4 id="åŸºç¡€æ•™ç¨‹"><a href="#åŸºç¡€æ•™ç¨‹" class="headerlink" title="åŸºç¡€æ•™ç¨‹"></a>åŸºç¡€æ•™ç¨‹</h4><p><code>Arthas</code>ç›¸å…³å‘½ä»¤ä½¿ç”¨åŠä¸‹è½½å®‰è£…è¯·æŸ¥å®˜æ–¹æ–‡æ¡£,ååˆ†è¯¦ç»†ã€‚ä¼ é€é—¨:<a href="https://arthas.aliyun.com/doc/">Arthas ç”¨æˆ·æ–‡æ¡£</a></p><h4 id="çº¿ä¸Šå®šä½é—®é¢˜"><a href="#çº¿ä¸Šå®šä½é—®é¢˜" class="headerlink" title="çº¿ä¸Šå®šä½é—®é¢˜"></a>çº¿ä¸Šå®šä½é—®é¢˜</h4><div class="note orange icon-padding flat"><i class="note-icon fas fa-anchor"></i><p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿™æ ·çš„é—®é¢˜:ç”Ÿäº§ç¯å¢ƒä»£ç æ‰§è¡Œç»“æœä¸ºä»€ä¹ˆå’Œæˆ‘æœ¬åœ°ä¸ä¸€è‡´?éš¾é“æˆ‘çš„ä»£ç æ²¡æœ‰éƒ¨ç½²æˆåŠŸ?é‡åˆ°é—®é¢˜å¼€å‘ç¯å¢ƒå¾ˆéš¾é‡ç°å‡ºæ¥,åªèƒ½ææ—¥å¿—æ…¢æ…¢åˆ†æ,ç³»ç»Ÿçªç„¶å˜å¾—å¡é¡¿,åªèƒ½dumpä¸‹æ¥,ä½¿ç”¨å·¥å…·æ…¢æ…¢åˆ†æ,è¿™æ ·è€—æ—¶è€—åŠ›,è€Œ<code>Arthas</code>ä¸ä»…å¯ä»¥å®æ—¶ç›‘æ§JVMçŠ¶æ€,åç¼–è¯‘ä»£ç ,è¿˜å¯ä»¥å¿«é€Ÿå®šä½åˆ°é—®é¢˜æ‰€åœ¨,è¿™æ¬¡æˆ‘ä»¬å°±ä¸€èµ·æ¥æ¢ç´¢ä¸€ä¸‹<code>Arthas</code>æ˜¯å¦‚ä½•åšåˆ°çš„ã€‚</p></div><ul><li><p>å¯åŠ¨ä¸€ä¸ªSpringBootçš„WEBé¡¹ç›®,å¹¶åœ¨é¡¹ç›®ä¸­å®šä¹‰äº†ä¸€å¤„å¼‚å¸¸,ç°åœ¨æ¢ç´¢ä¸€ä¸‹ä½¿ç”¨Arthaså¦‚ä½•å®šä½å¼‚å¸¸å¹¶è§£å†³ã€‚</p></li><li><p>è¿è¡Œarthas,æ ¹æ®åºå·é€‰æ‹©è¦ç›‘æ§çš„javaç¨‹åºã€‚</p><p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220717214442.png"></p></li><li><p><code>dashboard</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹ä»ªè¡¨ç›˜,çº¿ç¨‹ä¿¡æ¯ã€å †æ ˆä¿¡æ¯ã€gcæ¬¡æ•°åŠè€—æ—¶ç­‰ã€‚</p><p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220717225913.png"></p></li><li><p>ä½¿ç”¨<code> watch ç±»å æ–¹æ³•å -x 2</code>å‘½ä»¤æŸ¥çœ‹å‘ç”Ÿå¼‚å¸¸çš„æ¥å£</p><p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220717221457.png"></p><p>  å¯ä»¥çœ‹åˆ°æ¥å£æ¥æ”¶çš„å‚æ•°æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä»£ç å‘ç”Ÿäº†å¼‚å¸¸é€€å‡ºã€‚</p></li><li><p>ä½¿ç”¨<code>trace ç±»å æ–¹æ³•å</code>æŸ¥çœ‹æ–¹æ³•è°ƒç”¨è¿‡ç¨‹</p><p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220717222132.png"></p><p>  å¯ä»¥çœ‹åˆ°ä»£ç æŠ¥äº†<code>/by zero</code>çš„å¼‚å¸¸,å¹¶ä¸”æ˜¯åœ¨<code>ITransService</code>å®ç°ç±»çš„ç¬¬47è¡Œã€‚</p></li><li><p>ä½¿ç”¨<code>jad ç±»å</code>åç¼–è¯‘ä»£ç </p><p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220717222620.png"></p><p>  å¾ˆå¿«å•Šï¼Œå°±çœ‹åˆ°äº†ç¬¬47è¡Œï¼Œçš„ç¡®å‡ºç°äº†é”™è¯¯ä»£ç ã€‚ä½†æ˜¯ä¸´æ—¶ä¿®æ”¹ä»£ç ï¼Œé‡æ–°åœæœºå‘å¸ƒï¼Œä¸ä»…éº»çƒ¦è€Œä¸”å¾ˆå½±å“ç”¨æˆ·ä½“éªŒã€‚</p></li><li><p>ä¿®æ”¹ä»£ç å¹¶ç¼–è¯‘æˆclassæ–‡ä»¶</p><p>  å¯ä»¥ä½¿ç”¨jad&amp;mcå‘½ä»¤ç›´æ¥ä¿®æ”¹ä»£ç å¹¶ç¼–è¯‘</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jad --source-only ç±»å &gt; /è·¯å¾„/ç±»å.java</span><br><span class="line"></span><br><span class="line">mc /è·¯å¾„/ç±»å.java -d /è·¯å¾„</span><br><span class="line"></span><br><span class="line">retransform /è·¯å¾„/ç±»å.class</span><br></pre></td></tr></table></figure><p>  ä¹Ÿå¯ä»¥è‡ªè¡Œç¼–è¾‘ä»£ç å¹¶ç¼–è¯‘ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p></li><li><p>ä½¿ç”¨<code>redefine</code>æˆ–è€…<code>retransform</code>åŠ¨æ€åŠ è½½ä¿®æ”¹åçš„ä»£ç </p><p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220717223727.png"></p><p>  å¾ˆå¿«å•Šï¼Œä»£ç å°±è¢«åŠ¨æ€æ›¿æ¢æ‰äº†ï¼Œä¸ç”¨åœæœºï¼Œä¸ç”¨ç­‰å¾…ã€‚é‡æ–°è®¿é—®è¯¥æ¥å£ï¼ŒæˆåŠŸæ‰§è¡Œå¹¶è¿”å›ã€‚</p></li></ul><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>åˆæ¢<code>Arthas</code>ï¼Œååˆ†æ»¡æ„ã€‚ä½¿ç”¨ç®€å•çš„å‘½ä»¤å°±èƒ½æŸ¥å‡ºç»å¤§éƒ¨åˆ†ç”Ÿäº§é—®é¢˜ã€‚è¿˜æœ‰å¾ˆå¤šå‘½ä»¤å°±ä¸ä¸€ä¸€æ¼”ç¤ºäº†ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥è¯¢å®˜æ–¹æ–‡æ¡£ã€‚æœ‰äº†<code>Arthas</code>,å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘å‡ºç”Ÿäº§äº‹æ•…äº†ã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arthas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springäº‹åŠ¡çš„7ç§ä¼ æ’­è¡Œä¸º</title>
      <link href="/Spring%E4%BA%8B%E5%8A%A1%E7%9A%847%E7%A7%8D%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA/"/>
      <url>/Spring%E4%BA%8B%E5%8A%A1%E7%9A%847%E7%A7%8D%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA/</url>
      
        <content type="html"><![CDATA[<h4 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h4><p>è¯´åˆ°äº‹åŠ¡,å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰,äº‹åŠ¡æ˜¯æ•°æ®åº“é€»è¾‘å¤„ç†çš„åŸºæœ¬å•å…ƒ,ä¸€èˆ¬ç”±ä¸€æ¡æˆ–å¤šæ¡ç”šè‡³æ˜¯æ•´ä¸ªç¨‹åºç»„æˆ,äº‹åŠ¡ä¿è¯æˆæ‰¹çš„SQLè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œ,è¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚ä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€ä¸ªé—®é¢˜,å¦‚æœä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶,äº‹åŠ¡è¯¥å¦‚ä½•ç®¡ç†å‘¢?è¢«è°ƒç”¨çš„æ–¹æ³•æ˜¯åœ¨ç°æœ‰çš„äº‹åŠ¡ä¸­è¿è¡Œè¿˜æ˜¯åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡å¹¶è¿è¡Œå‘¢ï¼Ÿå› æ­¤åœ¨Springä¸­,å°†æ•°æ®åº“äº‹åŠ¡å®šä¹‰äº†7ä¸ªä¼ æ’­è¡Œä¸º,åˆ†åˆ«å¯¹åº”ç€7ç§ä¸åŒçš„æ–¹æ¡ˆã€‚</p><span id="more"></span><h4 id="7ç§ä¼ æ’­è¡Œä¸º"><a href="#7ç§ä¼ æ’­è¡Œä¸º" class="headerlink" title="7ç§ä¼ æ’­è¡Œä¸º"></a>7ç§ä¼ æ’­è¡Œä¸º</h4><p>æˆ‘ä»¬åœ¨<code>org.springframework.transaction</code>åŒ…ä¸­å¯ä»¥æ‰¾åˆ°<code>TransactionDefinition</code>æ¥å£ç±»ã€‚é‡Œé¢å®šä¹‰äº†springäº‹åŠ¡çš„5ç§éš”ç¦»çº§åˆ«ä»¥åŠ7ä¸­ä¼ æ’­è¡Œä¸ºã€‚</p><table><thead><tr><th align="center">åºå·</th><th align="center">ä¼ æ’­è¡Œä¸º</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">PROPAGATION_REQUIRED</td><td align="center">é»˜è®¤è¡Œä¸º,å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡,åˆ™åŠ å…¥,å¦åˆ™æ–°å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡å¹¶åŠ å…¥</td></tr><tr><td align="center">2</td><td align="center">PROPAGATION_SUPPORTS</td><td align="center">å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡,åˆ™åŠ å…¥,å¦åˆ™ä»¥éäº‹åŠ¡æ–¹æ³•æ‰§è¡Œ</td></tr><tr><td align="center">3</td><td align="center">PROPAGATION_MANDATORY</td><td align="center">å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡,åˆ™åŠ å…¥,å¦åˆ™æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td align="center">4</td><td align="center">PROPAGATION_REQUIRES_NEW</td><td align="center">æ–°å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡,åŠ å…¥æ–°äº‹åŠ¡,å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡,æš‚åœè¯¥äº‹åŠ¡</td></tr><tr><td align="center">5</td><td align="center">PROPAGATION_NOT_SUPPORTED</td><td align="center">å§‹ç»ˆä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œ</td></tr><tr><td align="center">6</td><td align="center">PROPAGATION_NEVER</td><td align="center">å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡,åˆ™æŠ›å¼‚å¸¸</td></tr><tr><td align="center">7</td><td align="center">PROPAGATION_NESTED</td><td align="center">å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡,åˆ™ä»¥åµŒå¥—äº‹åŠ¡çš„æ–¹å¼æ‰§è¡Œ</td></tr></tbody></table><h4 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h4><blockquote><p>æ¨¡æ‹Ÿä¸€ä¸ªçš„åº”ç”¨åœºæ™¯:é“¶è¡Œè½¬è´¦ã€‚å®¢æˆ·Aè½¬è´¦ç»™å®¢æˆ·B 100å…ƒ,é‚£ä¹ˆAçš„è´¦æˆ·å‡å°‘100,Bçš„è´¦æˆ·å¢åŠ 100å…ƒ,å¹¶ä¸”Aè¦æ‰£å‡åƒåˆ†ä¹‹ä¸€çš„æ‰‹ç»­è´¹ã€‚</p></blockquote><h5 id="åˆ›å»ºåº“è¡¨"><a href="#åˆ›å»ºåº“è¡¨" class="headerlink" title="åˆ›å»ºåº“è¡¨"></a>åˆ›å»ºåº“è¡¨</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> transdemo (</span><br><span class="line">`id` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">`name` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="keyword">null</span>,</span><br><span class="line">`amt` <span class="type">decimal</span>(<span class="number">32</span>,<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span></span><br><span class="line">) engine INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> transdemo <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="number">2000.00</span>),(<span class="number">2</span>,<span class="string">&#x27;jerry&#x27;</span>,<span class="number">2000.00</span>),(<span class="number">3</span>,<span class="string">&#x27;mizhuo&#x27;</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> free_info (</span><br><span class="line">`from_id` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">`amt` <span class="type">decimal</span>(<span class="number">32</span>,<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">    `tx_time` datetime</span><br><span class="line">) engine INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Mapper"><a href="#Mapper" class="headerlink" title="Mapper"></a>Mapper</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@InterfaceName</span> ITransMapper</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: å®šä¹‰ä¸€ä¸ªæ‰£å‡é‡‘é¢å’Œä¸€ä¸ªå¢åŠ é‡‘é¢çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Create</span>: 2022-06-30 22:08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ITransMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Update(&quot;update transdemo set amt = amt + #&#123;amt&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addMoney</span><span class="params">(String id,Double amt)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update transdemo set amt = amt - #&#123;amt&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">decrMoney</span><span class="params">(String id,Double amt)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@InterfaceName</span>: IFreeMapper</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2022/7/3 14:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: å®šä¹‰ä¸€ä¸ªæ‰£å‡é‡‘é¢å’Œä¸€ä¸ªå¢åŠ é‡‘é¢çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IFreeMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Update(&quot;insert into free_info values(#&#123;from_id&#125;,#&#123;amt&#125;,CURRENT_TIME)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addFreeInfo</span><span class="params">(String id,Double amt)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> TransService</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: è½¬è´¦æœåŠ¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Create</span>: 2022-06-30 22:04</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">ITransService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ITransMapper transMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IFreeService freeService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> MiZhuo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> è½¬è´¦</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 12:55 ä¸Šåˆ 2022/7/2</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [from_id, to_id, amt]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">trans</span><span class="params">(String from_id, String to_id, Double amt)</span> &#123;</span><br><span class="line">        transMapper.decrMoney(from_id,amt);</span><br><span class="line">        transMapper.addMoney(to_id,amt);</span><br><span class="line">        <span class="built_in">this</span>.deducFree(from_id,amt);</span><br><span class="line">        freeService.addFreeInfo(from_id,amt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deducFree</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">        <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">        transMapper.decrMoney(from_id,free);</span><br><span class="line">        transMapper.addMoney(<span class="string">&quot;3&quot;</span>,free);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: FreeServiceImpl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2022/7/3 13:31</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æ‰‹ç»­è´¹æœåŠ¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FreeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">IFreeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IFreeMapper freeMapper;</span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> MiZhuo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> æ–°å¢æ‰‹ç»­è´¹è®°å½•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 12:55 ä¸Šåˆ 2022/7/2</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [from_id, amt]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFreeInfo</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">        <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">        freeMapper.addFreeInfo(from_id,free);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> TransController</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Create</span>: 2022-06-30 21:57</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/trans&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ITransService transService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IFreeService freeService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/trade&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">trans</span><span class="params">(String from_id,String to_id,Double amt)</span>&#123;</span><br><span class="line">        transService.trans(from_id,to_id,amt);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success trans&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/free&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">free</span><span class="params">(String from_id,Double amt)</span>&#123;</span><br><span class="line">        freeService.addFreeInfo(from_id,amt);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success addFreeInfo&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h4><h5 id="PROPAGATION-REQUIRED"><a href="#PROPAGATION-REQUIRED" class="headerlink" title="PROPAGATION_REQUIRED"></a>PROPAGATION_REQUIRED</h5><p>1:ä¸¤ä¸ªServiceä¸­,æ–¹æ³•éƒ½ä½¿ç”¨äº†<code>@Transactional(propagation= Propagation.REQUIRED)</code><br>2:åœ¨<code>FreeServiceImpl.class</code>çš„<code>addFreeInfo</code>çš„æ–¹æ³•ä¸­è‡ªå®šä¹‰ä¸€ä¸ªé”™è¯¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFreeInfo</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">    freeMapper.addFreeInfo(from_id,free);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3:è®¿é—®è½¬è´¦æ¥å£:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>å¯ä»¥å‘ç°SQLæ‰§è¡Œäº†,å¹¶ä¸”é”™è¯¯ä¿¡æ¯ä¹Ÿæ‰“å°äº†å‡ºæ¥ã€‚</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703144602.png"></p><p>ä½†æ˜¯æ‰§è¡Œåæ•°æ®æ²¡æœ‰ä»»ä½•å˜åŒ–,è¯´æ˜ä¸»äº‹åŠ¡ä¸å­äº‹åŠ¡éƒ½è¿›è¡Œäº†å›æ»šã€‚</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703145043.png"></p><p>4:ä¿®æ”¹ä»£ç ,å°†é”™è¯¯æŒªåˆ°ä¸»äº‹åŠ¡ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å»é™¤int i = 1/0;</span></span><br><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFreeInfo</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">    freeMapper.addFreeInfo(from_id,free);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//deducFreeæ–°å¢int i = 1/0;</span></span><br><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">trans</span><span class="params">(String from_id, String to_id, Double amt)</span> &#123;</span><br><span class="line">    transMapper.decrMoney(from_id, amt);</span><br><span class="line">    transMapper.addMoney(to_id, amt);</span><br><span class="line">    freeService.addFreeInfo(from_id, amt);</span><br><span class="line">    <span class="built_in">this</span>.deducFree(from_id, amt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deducFree</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">    transMapper.decrMoney(from_id,free);</span><br><span class="line">    transMapper.addMoney(<span class="string">&quot;3&quot;</span>,free);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5:æŸ¥çœ‹æ•°æ®åº“,ä¾æ—§æ²¡æœ‰å‘ç”Ÿå˜åŒ–<br>6:ä¿®æ”¹ä»£ç ,ä½¿ç”¨try-catchå°†ä¸»äº‹åŠ¡æ–¹æ³•ä½“åŒ…è£¹èµ·æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å»é™¤int i = 1/0;</span></span><br><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFreeInfo</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">    freeMapper.addFreeInfo(from_id,free);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//deducFreeæ–°å¢int i = 1/0;å¹¶ä½¿ç”¨try-catchå°†æ–¹æ³•ä½“åŒ…è£¹èµ·æ¥</span></span><br><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">trans</span><span class="params">(String from_id, String to_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        transMapper.decrMoney(from_id, amt);</span><br><span class="line">        transMapper.addMoney(to_id, amt);</span><br><span class="line">        freeService.addFreeInfo(from_id, amt);</span><br><span class="line">        <span class="built_in">this</span>.deducFree(from_id, amt);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deducFree</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">    transMapper.decrMoney(from_id,free);</span><br><span class="line">    transMapper.addMoney(<span class="string">&quot;3&quot;</span>,free);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>7:æŸ¥çœ‹ç»“æœ,å‘ç°sqlå…¨éƒ¨æ‰§è¡Œäº†ï¼Œæ²¡æœ‰å‘ç”Ÿå›æ»šã€‚</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703173633.png"></p><p>8:ç»“è®º:</p><table><thead><tr><th>å­äº‹åŠ¡</th><th>ä¸»äº‹åŠ¡</th><th>ç»“æœ</th></tr></thead><tbody><tr><td>å¼‚å¸¸</td><td>æ­£å¸¸</td><td>å‡å›æ»š</td></tr><tr><td>æ­£å¸¸</td><td>å¼‚å¸¸</td><td>å‡å›æ»š</td></tr><tr><td>æ­£å¸¸</td><td>å¼‚å¸¸ï¼Œå¹¶try-catchå¼‚å¸¸</td><td>ä¸å›æ»š</td></tr></tbody></table><h5 id="PROPAGATION-SUPPORTS"><a href="#PROPAGATION-SUPPORTS" class="headerlink" title="PROPAGATION_SUPPORTS"></a>PROPAGATION_SUPPORTS</h5><p>1:å°†æ–¹æ³•<code>addFreeInfo</code>ä¸Šçš„æ³¨é‡Šä¿®æ”¹ä¸º<code> @Transactional(propagation= Propagation.SUPPORTS)</code><br>2:é‡å¯é¡¹ç›®,å†æ¬¡è®¿é—®:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>3:æŸ¥çœ‹ç»“æœ,æ•°æ®æ²¡æœ‰å‘ç”Ÿå˜åŒ–,è¯´æ˜è¯¥æ–¹æ³•åŠ å…¥äº†å½“å‰äº‹åŠ¡,å¹¶ä¸”è¿›è¡Œäº†å›æ»šã€‚<br>4:è¿™æ¬¡è®¿é—®<code>free</code>æ¥å£,åªè°ƒç”¨<code>addFreeInfo</code>æ–¹æ³•ã€‚<a href="http://localhost:8888/trans/free?from_id=1&amp;amt=100">http://localhost:8888/trans/free?from_id=1&amp;amt=100</a><br>5:æŸ¥çœ‹ç»“æœå‘ç°SQLæ‰§è¡ŒæˆåŠŸ,æŠ¥é”™äº†æ•°æ®å¹¶æ²¡æœ‰å‘ç”Ÿå›æ»šã€‚è¯´æ˜å½“å‰æ–¹æ³•æ˜¯æ²¡æœ‰è¢«äº‹åŠ¡ç®¡ç†çš„ã€‚</p><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703145440.png"></p><p>6:ç»“è®º:å½“äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸º<code>PROPAGATION_SUPPORTS</code>æ—¶,è‹¥å½“å‰å­˜åœ¨äº‹åŠ¡,åˆ™åŠ å…¥äº‹åŠ¡,å¦åˆ™ä»¥éäº‹åŠ¡çŠ¶æ€æ‰§è¡Œã€‚</p><h5 id="PROPAGATION-MANDATORY"><a href="#PROPAGATION-MANDATORY" class="headerlink" title="PROPAGATION_MANDATORY"></a>PROPAGATION_MANDATORY</h5><p>1:å°†æ–¹æ³•<code>addFreeInfo</code>ä¸Šçš„æ³¨é‡Šä¿®æ”¹ä¸º<code> @Transactional(propagation= Propagation.MANDATORY)</code><br>2:é‡å¯é¡¹ç›®,å†æ¬¡è®¿é—®:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>3:æŸ¥çœ‹ç»“æœ,æ•°æ®æ²¡æœ‰å‘ç”Ÿå˜åŒ–,è¯´æ˜è¯¥æ–¹æ³•åŠ å…¥äº†å½“å‰äº‹åŠ¡,å¹¶ä¸”è¿›è¡Œäº†å›æ»šã€‚<br>4:è¿™æ¬¡è®¿é—®<code>free</code>æ¥å£,åªè°ƒç”¨<code>deducFree</code>æ–¹æ³•ã€‚<a href="http://localhost:8888/trans/free?from_id=1&amp;amt=100">http://localhost:8888/trans/free?from_id=1&amp;amt=100</a><br>5:å‘ç°æ§åˆ¶å°ç›´æ¥æŠ¥é”™äº†,ä¸”æŠ¥é”™åŸå› å°±æ˜¯:<code>No existing transaction found for transaction marked with propagation &#39;mandatory&#39;</code>,æ„æ€å°±æ˜¯å½“å‰æ²¡æœ‰æ‰¾åˆ°äº‹åŠ¡ã€‚<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703145649.png">6:ç»“è®º:å½“äº‹åŠ¡ä¼ æ’­è¡Œä¸ºä¸º<code>PROPAGATION_MANDATORY</code>æ—¶,è‹¥å½“å‰å­˜åœ¨äº‹åŠ¡,åˆ™åŠ å…¥äº‹åŠ¡,å¦åˆ™ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚</p><h5 id="PROPAGATION-REQUIRES-NEW"><a href="#PROPAGATION-REQUIRES-NEW" class="headerlink" title="PROPAGATION_REQUIRES_NEW"></a>PROPAGATION_REQUIRES_NEW</h5><p>1:å°†æ–¹æ³•<code>addFreeInfo</code>ä¸Šçš„æ³¨é‡Šä¿®æ”¹ä¸º<code> @Transactional(propagation= Propagation.REQUIRES_NEW)</code><br>2:é‡å¯é¡¹ç›®,å†æ¬¡è®¿é—®:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>3:æŸ¥çœ‹ç»“æœ,æ•°æ®æ²¡æœ‰å‘ç”Ÿå˜åŒ–,è¯´æ˜è¯¥æ–¹æ³•æœ‰äº‹åŠ¡,å¹¶ä¸”è¿›è¡Œäº†å›æ»šã€‚<br>4:ä¿®æ”¹ä»£ç ,ä½¿ç”¨try-catchå°†ä¸»äº‹åŠ¡æ–¹æ³•ä½“åŒ…è£¹èµ·æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">trans</span><span class="params">(String from_id, String to_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        transMapper.decrMoney(from_id, amt);</span><br><span class="line">        transMapper.addMoney(to_id, amt);</span><br><span class="line">        freeService.addFreeInfo(from_id, amt);</span><br><span class="line">        <span class="built_in">this</span>.deducFree(from_id, amt);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5:é‡å¯é¡¹ç›®,å†æ¬¡è®¿é—®:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>6:æŸ¥çœ‹ç»“æœ,å¯ä»¥çœ‹å‡ºå­äº‹åŠ¡å›æ»šäº†,è€Œä¸»äº‹åŠ¡æ²¡æœ‰å›æ»š<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703181056.png"><br>7:ä¿®æ”¹ä»£ç ,å°†é”™è¯¯æŒªåˆ°ä¸»äº‹åŠ¡ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å»é™¤int i = 1/0;</span></span><br><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRES_NEW)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFreeInfo</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">    freeMapper.addFreeInfo(from_id,free);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//deducFreeæ–°å¢int i = 1/0;</span></span><br><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">trans</span><span class="params">(String from_id, String to_id, Double amt)</span> &#123;</span><br><span class="line">    transMapper.decrMoney(from_id,amt);</span><br><span class="line">    transMapper.addMoney(to_id,amt);</span><br><span class="line">    freeService.addFreeInfo(from_id,amt);</span><br><span class="line">    <span class="built_in">this</span>.deducFree(from_id,amt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deducFree</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">    transMapper.decrMoney(from_id,free);</span><br><span class="line">    transMapper.addMoney(<span class="string">&quot;3&quot;</span>,free);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>8:é‡å¯é¡¹ç›®,å†æ¬¡è®¿é—®:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>9:æŸ¥çœ‹æ•°æ®åº“ç»“æœ,å‘ç°ä¸»äº‹åŠ¡å›æ»šäº†,è€Œå­äº‹åŠ¡æ²¡æœ‰å›æ»šã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703150418.png"><br>10:ç»“è®º:</p><table><thead><tr><th>å­äº‹åŠ¡</th><th>ä¸»äº‹åŠ¡</th><th>ç»“æœ</th></tr></thead><tbody><tr><td>å¼‚å¸¸</td><td>æ­£å¸¸ï¼Œå¹¶try-catchå¼‚å¸¸</td><td>å­äº‹åŠ¡å›æ»šï¼Œä¸»äº‹åŠ¡ä¸å›æ»š</td></tr><tr><td>æ­£å¸¸</td><td>å¼‚å¸¸</td><td>å­äº‹åŠ¡ä¸å›æ»šï¼Œä¸»äº‹åŠ¡å›æ»š</td></tr><tr><td>å¼‚å¸¸</td><td>æ­£å¸¸</td><td>å‡å›æ»š</td></tr></tbody></table><h5 id="PROPAGATION-NOT-SUPPORTED"><a href="#PROPAGATION-NOT-SUPPORTED" class="headerlink" title="PROPAGATION_NOT_SUPPORTED"></a>PROPAGATION_NOT_SUPPORTED</h5><p>1:å°†æ–¹æ³•<code>addFreeInfo</code>ä¸Šçš„æ³¨é‡Šä¿®æ”¹ä¸º<code> @Transactional(propagation= Propagation.NOT_SUPPORTED)</code><br>2:é‡å¯é¡¹ç›®,è®¿é—®<code>free</code>æ¥å£,åªè°ƒç”¨<code>addFreeInfo</code>æ–¹æ³•ã€‚<a href="http://localhost:8888/trans/free?from_id=1&amp;amt=100">http://localhost:8888/trans/free?from_id=1&amp;amt=100</a><br>3:æŸ¥çœ‹ç»“æœå‘ç°SQLæ‰§è¡ŒæˆåŠŸ,æŠ¥é”™äº†æ•°æ®å¹¶æ²¡æœ‰å‘ç”Ÿå›æ»šã€‚è¯´æ˜å½“å‰æ–¹æ³•æ˜¯æ²¡æœ‰è¢«äº‹åŠ¡ç®¡ç†çš„ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703150418.png"><br>4:ç»“è®º:<code>PROPAGATION_NOT_SUPPORTED</code>ä¿®é¥°çš„æ–¹æ³•,éƒ½ä¼šä»¥éäº‹åŠ¡çŠ¶æ€æ‰§è¡Œã€‚</p><h5 id="PROPAGATION-NEVER"><a href="#PROPAGATION-NEVER" class="headerlink" title="PROPAGATION_NEVER"></a>PROPAGATION_NEVER</h5><p>1:å°†æ–¹æ³•<code>addFreeInfo</code>ä¸Šçš„æ³¨é‡Šä¿®æ”¹ä¸º<code> @Transactional(propagation= Propagation.NEVER)</code><br>2:é‡å¯é¡¹ç›®,å†æ¬¡è®¿é—®:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>3:æŸ¥çœ‹æ§åˆ¶å°å‘ç°ç›´æ¥æŠ¥é”™äº†,ä¸”æŠ¥é”™åŸå› å°±æ˜¯:<code> Existing transaction found for transaction marked with propagation &#39;never&#39;</code><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703213844.png"><br>4:è®¿é—®<code>free</code>æ¥å£,åªè°ƒç”¨<code>addFreeInfo</code>æ–¹æ³•ã€‚<a href="http://localhost:8888/trans/free?from_id=1&amp;amt=100">http://localhost:8888/trans/free?from_id=1&amp;amt=100</a><br>5:æŸ¥çœ‹ç»“æœ,è¯´æ˜åªæ‰§è¡Œè¯¥æ–¹æ³•æ—¶,æœªè¢«äº‹åŠ¡æ§åˆ¶ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703150418.png"><br>6:ç»“è®º:<code>PROPAGATION_NEVER</code>ä¿®é¥°,è‹¥å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚è‹¥å½“å‰ä¸å­˜åœ¨äº‹åŠ¡,åˆ™ä»¥éäº‹åŠ¡çŠ¶æ€æ‰§è¡Œã€‚</p><h5 id="PROPAGATION-NESTED"><a href="#PROPAGATION-NESTED" class="headerlink" title="PROPAGATION_NESTED"></a>PROPAGATION_NESTED</h5><p>1:å°†æ–¹æ³•<code>addFreeInfo</code>ä¸Šçš„æ³¨é‡Šä¿®æ”¹ä¸º<code> @Transactional(propagation= Propagation.NESTED)</code><br>2:é‡å¯é¡¹ç›®,å†æ¬¡è®¿é—®:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>3:æŸ¥çœ‹ç»“æœ,æ•°æ®æ²¡æœ‰å‘ç”Ÿå˜åŒ–,è¯´æ˜è¯¥æ–¹æ³•æœ‰äº‹åŠ¡,å¹¶ä¸”è¿›è¡Œäº†å›æ»šã€‚<br>4:ä¿®æ”¹<code>trans</code>æ–¹æ³•,ä½¿ç”¨try-catchæŠŠä»£ç ä½“åŒ…è£¹èµ·æ¥.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">trans</span><span class="params">(String from_id, String to_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        transMapper.decrMoney(from_id, amt);</span><br><span class="line">        transMapper.addMoney(to_id, amt);</span><br><span class="line">        <span class="built_in">this</span>.deducFree(from_id, amt);</span><br><span class="line">        freeService.addFreeInfo(from_id, amt);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5:é‡å¯é¡¹ç›®,å†æ¬¡è®¿é—®:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>6:æŸ¥çœ‹ç»“æœ,å­äº‹åŠ¡å›æ»šäº†,è€Œä¸»äº‹åŠ¡æ²¡æœ‰å›æ»š<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20220703160051.png"><br>7:ä¿®æ”¹ä»£ç ,å°†é”™è¯¯æŒªåˆ°ä¸»äº‹åŠ¡ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å»é™¤int i = 1/0;</span></span><br><span class="line"><span class="meta">@Transactional(propagation= Propagation.NESTED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFreeInfo</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">    freeMapper.addFreeInfo(from_id,free);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//deducFreeæ–°å¢int i = 1/0;</span></span><br><span class="line"><span class="meta">@Transactional(propagation= Propagation.REQUIRED)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">trans</span><span class="params">(String from_id, String to_id, Double amt)</span> &#123;</span><br><span class="line">    transMapper.decrMoney(from_id,amt);</span><br><span class="line">    transMapper.addMoney(to_id,amt);</span><br><span class="line">    freeService.addFreeInfo(from_id,amt);</span><br><span class="line">    <span class="built_in">this</span>.deducFree(from_id,amt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deducFree</span><span class="params">(String from_id, Double amt)</span> &#123;</span><br><span class="line">    <span class="type">Double</span> <span class="variable">free</span> <span class="operator">=</span> amt * <span class="number">0.001</span>;</span><br><span class="line">    transMapper.decrMoney(from_id,free);</span><br><span class="line">    transMapper.addMoney(<span class="string">&quot;3&quot;</span>,free);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>8:é‡å¯é¡¹ç›®,å†æ¬¡è®¿é—®:<a href="http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100">http://localhost:8888/trans/trade?from_id=1&amp;to_id=2&amp;amt=100</a><br>9:æŸ¥çœ‹æ•°æ®åº“ç»“æœ,å‘ç°ä¸»äº‹åŠ¡ä¸å­äº‹åŠ¡éƒ½å›æ»šäº†ã€‚<br>10:ç»“è®º:</p><table><thead><tr><th>å­äº‹åŠ¡</th><th>ä¸»äº‹åŠ¡</th><th>ç»“æœ</th></tr></thead><tbody><tr><td>å¼‚å¸¸</td><td>æ­£å¸¸ï¼Œå¹¶try-catchå¼‚å¸¸</td><td>å­å›æ»šï¼Œä¸»ä¸å›æ»š</td></tr><tr><td>æ­£å¸¸</td><td>å¼‚å¸¸</td><td>å‡å›æ»š</td></tr><tr><td>å¼‚å¸¸</td><td>æ­£å¸¸</td><td>å‡å›æ»š</td></tr></tbody></table><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>æœ¬æ–‡demoä»£ç :<a href="https://github.com/MiZhuo/Code/tree/main/StudyDemo/spring-transaction">https://github.com/MiZhuo/Code/tree/main/StudyDemo/spring-transaction</a></p></div>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Paxosç®—æ³•ä¸Raftç®—æ³•</title>
      <link href="/Paxos%E7%AE%97%E6%B3%95%E4%B8%8ERaft%E7%AE%97%E6%B3%95/"/>
      <url>/Paxos%E7%AE%97%E6%B3%95%E4%B8%8ERaft%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šç¯‡è®²åˆ°CAPå’ŒBASEç†è®º,è¿™ç« å°±æ¥èŠèŠPaxosç®—æ³•ä¸Raftç®—æ³•,è¿™ä¸¤ç§ç®—æ³•æ˜¯ç”¨æ¥è§£å†³åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜çš„,è¢«å¹¿æ³›çš„åº”ç”¨äºå„ç§åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚è¿™ä¸¤ç§ç®—æ³•æ˜¯æ€ä¹ˆè§£å†³ä¸€è‡´æ€§é—®é¢˜çš„å‘¢?æˆ‘ä»¬æ¥æ·±å…¥æ¢è®¨ä¸€ä¸‹ã€‚</p><span id="more"></span><h3 id="Paxosç®—æ³•"><a href="#Paxosç®—æ³•" class="headerlink" title="Paxosç®—æ³•"></a>Paxosç®—æ³•</h3><div class="note blue icon-padding flat"><i class="note-icon fas fa-tags"></i><p>Paxosç®—æ³•çš„åŸºæœ¬ä»‹ç»è¿™é‡Œå°±ä¸å¤šè¯´äº†,æ„Ÿå…´è¶£çš„å¯ä»¥ç™¾åº¦ä¸€ä¸‹,è¿™é‡Œç›´æ¥å¼€å§‹äº†è§£Paxosç®—æ³•çš„åŸºæœ¬åŸç†ã€‚Paxosç®—æ³•ä¸­æœ‰ç€ä¸‰ä¸ªè§’è‰²,åœ¨è®²è¿™ä¸‰ä¸ªè§’è‰²ä¹‹å‰,å…ˆä»‹ç»ä¸€ä¸‹ç¾å›½æ€»ç»Ÿç«é€‰çš„æµç¨‹,åƒå¥¥å·´é©¬å‘€ï¼Œå·æ™®å‘€ï¼Œæ‹œç™»å‘€ï¼Œä»–ä»¬åœ¨å‚åŠ ç«é€‰æ—¶,å¾—å…ˆæå‡ºææ¡ˆ,æ„æ€å°±æ˜¯é€šçŸ¥å¤§å®¶,æˆ‘è¦ç«é€‰æ€»ç»Ÿäº†,å¤§å®¶éƒ½æ¥ç»™æˆ‘æŠ•ç¥¨å‘€ï¼Œè€Œæ‹¥æœ‰æŠ•ç¥¨æƒçš„æ°‘ä¼—å°±æœ‰æƒåˆ©åŒæ„æˆ–è€…æ‹’ç»è¿™ä¸ªææ¡ˆã€‚å½“æ‰€æœ‰ç¥¨æ•°éƒ½è®¡ç®—å‡ºæ¥äº†,æ€»ç»Ÿç¡®å®šäº†,å„ä¸ªåª’ä½“å°±å¼€å§‹å‘å…¨ä¸–ç•Œä¼ æ’­è¿™åˆ™æ¶ˆæ¯ã€‚</p></div><ul><li><code>Proposer(ææ¡ˆè€…)</code>ï¼šå°±åƒæ˜¯æ€»ç»Ÿå‚é€‰äºº,ä¸»è¦èŒè´£å°±æ˜¯æå‡ºææ¡ˆã€‚</li><li><code>Acceptor(å†³ç­–è€…)</code>ï¼šå°±åƒæ˜¯æ‹¥æœ‰é€‰ä¸¾æƒçš„æ°‘ä¼—,ä¸»è¦èŒè´£å°±æ˜¯æ¥å—ææ¡ˆ,å¯¹ææ¡ˆè¿›è¡ŒæŠ•ç¥¨ã€‚</li><li><code>Learner(å­¦ä¹ è€…)</code>ï¼šå°±åƒæ˜¯åª’ä½“,ä¸»è¦èŒè´£å°±æ˜¯è·å–é€‰ä¸¾ç»“æœ,ç„¶åè¿›è¡Œä¼ æ’­,ä¸å‚ä¸æŠ•ç¥¨ã€‚</li></ul><p>è¿™ç§é€‰ä¸¾å‘¢,æ ¹æ®ç«é€‰äººæ•°ä¸æŠ•ç¥¨äººæ•°æ˜¯æ¯æ¯ç›¸å…³çš„,å°±æ¯”å¦‚ç°åœ¨åªæœ‰ä¸€ä¸ªäººå»å‚åŠ ç«é€‰,æ ¹æœ¬æ²¡æœ‰äººç«äº‰,é‚£è‚¯å®šæ˜¯è¿™ä¸ªäººå½“é€‰ã€‚æ‰€ä»¥è¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚</p><h4 id="å•ææ¡ˆä¸å¤šå†³ç­–"><a href="#å•ææ¡ˆä¸å¤šå†³ç­–" class="headerlink" title="å•ææ¡ˆä¸å¤šå†³ç­–"></a>å•ææ¡ˆä¸å¤šå†³ç­–</h4><p>è¿™ç§æƒ…å†µå¾ˆç®€å•,å› ä¸ºæ ¹æœ¬æ²¡å¾—é€‰,éä½ è«å±,æ‰€ä»¥å¾ˆå¿«å°±ç»“æŸé€‰ä¸¾äº†,ä½†æ˜¯å¦‚æœææ¡ˆè€…æŒ‚æ‰äº†,ç³»ç»Ÿå°±æ— æ³•å·¥ä½œäº†ã€‚æ‰€ä»¥ç³»ç»Ÿä¸­ä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆé€‰æ‹©å•ææ¡ˆè€…ã€‚</p><h4 id="å¤šææ¡ˆä¸å•å†³ç­–"><a href="#å¤šææ¡ˆä¸å•å†³ç­–" class="headerlink" title="å¤šææ¡ˆä¸å•å†³ç­–"></a>å¤šææ¡ˆä¸å•å†³ç­–</h4><p>è¿™ç§æƒ…å†µä¹Ÿä¸éš¾,å·æ™®å’Œæ‹œç™»åœ¨ç«äº‰,å°±ä¸€å¼ é€‰ç¥¨,è°æ‹¿åˆ°äº†,è°å°±å½“é€‰ã€‚å½“ç„¶,åœ¨ç³»ç»Ÿä¸­å¯æ²¡æœ‰ä»€ä¹ˆè´¿èµ‚å•Š,æˆ–è€…æˆ‘è·Ÿä½ å…³ç³»å¥½,æˆ‘å°±é€‰ä½ ã€‚åœ¨ç³»ç»Ÿä¸­,å…ˆæ”¶åˆ°å“ªä¸ªææ¡ˆè€…çš„ææ¡ˆ,å°±é€‰è°,æ²¡æœ‰ä»€ä¹ˆæƒ…åˆ†å¯è¨€çš„,å°±æ˜¯ä¸€ä¸ªæŠ•ç¥¨æœºå™¨ã€‚è¿™ç§æ¨¡å¼ä¹Ÿæœ‰ç›¸åŒçš„é—®é¢˜,ä¸ç¨³å®š,å½“å†³ç­–è€…å‘ç”Ÿæ•…éšœæˆ–è€…é¦–ä¸ªææ¡ˆè€…å‘ç”Ÿæ•…éšœ,ç³»ç»Ÿä¹Ÿå°±æ— æ³•å·¥ä½œäº†ã€‚</p><h4 id="å¤šææ¡ˆä¸å¤šå†³ç­–"><a href="#å¤šææ¡ˆä¸å¤šå†³ç­–" class="headerlink" title="å¤šææ¡ˆä¸å¤šå†³ç­–"></a>å¤šææ¡ˆä¸å¤šå†³ç­–</h4><p>ä¸Šé¢ä¸¤ç§æ¨¡å¼éƒ½ä¸ç¨³å®š,æ‰€ä»¥è¿˜æ˜¯å¾—çœ‹è¿™ç§å¤šææ¡ˆè€…å’Œå¤šä¸ªå†³ç­–è€…çš„æ¨¡å¼ã€‚ä½†å› ä¸ºå‚ä¸çš„è§’è‰²å¤šäº†èµ·æ¥,æµç¨‹ä¹Ÿå°±å˜å¾—å¤æ‚èµ·æ¥ã€‚</p><ul><li><p>æƒ…å†µä¸€:åŒä¸€æ—¶é—´å†…,åªæœ‰ä¸€ä¸ªææ¡ˆè€…æå‡ºææ¡ˆã€‚</p><p>è¿™ç§æƒ…å†µä¸‹,å†³ç­–è€…å…ˆæ”¶åˆ°è°å°±ä¼šé€‰è°,æ‰€ä»¥æœ€å¼€å§‹æå‡ºææ¡ˆçš„ææ¡ˆè€…å°±é€‰ä¸¾æˆåŠŸã€‚</p></li><li><p>æƒ…å†µäºŒ:åŒä¸€æ—¶é—´å†…,æœ‰å¤šä¸ªææ¡ˆè€…æå‡ºææ¡ˆã€‚</p><p>è¿™ç§æƒ…å†µä¸‹,å†³ç­–è€…ä¼šåŒæ—¶æ”¶åˆ°å¤šä¸ªææ¡ˆ,æ²¡æ³•åˆ¤æ–­æ˜¯è°å…ˆæ¥çš„,æ‰€ä»¥æ— æ³•å†³ç­–ã€‚ä¸ºæ­¤,ææ¡ˆè€…æå‡ºææ¡ˆçš„æ—¶å€™,ä¼šå¸¦ä¸Šä¸€ä¸ªåºå·,è°çš„åºå·å¤§å†³ç­–è€…å°±é€‰è°,è¿™ä¸ªåºå·ç”±IDåŠ ä¸Šæ—¶é—´æˆ³ç»„åˆ,ä½†è¿™ä¹Ÿæœ‰ä¸ªé—®é¢˜,å°±æ˜¯ç½‘ç»œå¯èƒ½æ³¢åŠ¨,å¯¼è‡´åºå·å¤§çš„æ™šæ¥å—åˆ°ã€‚å°±æ¯”å¦‚:æ°‘ä¼—æ¥å—å·æ™®(003å·é€‰æ‰‹)çš„ææ¡ˆæ˜¯2021å¹´09æœˆ09æ—¥11æ—¶32åˆ†50ç§’,è¿™ä¸ªæ—¶å€™æ°‘ä¼—ä¸çŸ¥é“è¿˜æœ‰äººä¹Ÿå‚åŠ äº†é€‰ä¸¾,å°±ç­”åº”äº†å·æ™®,åˆ°æ—¶å€™ä¸€å®šé€‰ä½ ,ä½†æ°‘ä¼—åˆåœ¨2021å¹´09æœˆ09æ—¥11æ—¶32åˆ†57ç§’æ¥å—æ‹œç™»(007å·é€‰æ‰‹)çš„ææ¡ˆ,è¿™ä¸ªæ—¶å€™æ€ä¹ˆåŠå‘¢?æ‹œç™»çš„åºå·æ¯”è¾ƒå¤§å‘€,ä½†æ˜¯æ°‘ä¼—å·²ç»ç­”åº”å°†æŠ•ç¥¨ç»™å·æ™®äº†å‘€ã€‚æ‰€ä»¥ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜,ç³»ç»Ÿå°†å…¶æ‹†åˆ†æˆäº†ä¸¤é˜¶æ®µæäº¤ã€‚</p></li></ul><h4 id="ä¸¤é˜¶æ®µæäº¤"><a href="#ä¸¤é˜¶æ®µæäº¤" class="headerlink" title="ä¸¤é˜¶æ®µæäº¤"></a>ä¸¤é˜¶æ®µæäº¤</h4><p>è¿˜æ˜¯åˆšåˆšé‚£ä¸ªé—®é¢˜,ä¸¤é˜¶æ®µæäº¤æ˜¯æ€ä¹ˆè§£å†³çš„å‘¢?</p><ul><li>å‡†å¤‡é˜¶æ®µ:å½“æ°‘ä¼—å…ˆç­”åº”å°†æŠ•ç¥¨å·æ™®å,åˆæ¥å—äº†åºå·è¾ƒå¤§çš„æ‹œç™»çš„ææ¡ˆ,è¿™ä¸ªæ—¶å€™ä¹Ÿä¼šç­”åº”å°†é€‰ç¥¨æŠ•ç»™æ‹œç™»ã€‚å½“ç„¶åé¢å¦‚æœåˆæ”¶åˆ°äº†åºå·æ›´å¤§çš„ææ¡ˆ,ä»ç„¶ä¼šç­”åº”ã€‚æ”¶åˆ°äº†åºå·å°çš„åˆ™ä¼šç›´æ¥æ‹’ç»ã€‚</li><li>æäº¤é˜¶æ®µ:å½“çœŸæ­£æŠ•ç¥¨çš„æ—¶å€™,å·æ™®å¼€å¼€å¿ƒå¿ƒçš„å»å‚åŠ ,å¿ƒæƒ³å¤§éƒ¨åˆ†äººéƒ½ç­”åº”æŠ•æˆ‘,è¿™æŠŠç¨³äº†,å¯æ˜¯è¿™äº›äººå…¨éƒ¨åæ°´äº†,éƒ½æŠ•åºå·å¤§çš„æ‹œç™»å»äº†ã€‚è€Œä¸€æ—¦å¤šæ•°äººéƒ½æŠ•æ‹œç™»äº†,è¿™åœºé€‰ä¸¾å°±ç»“æŸäº†,æ‹œç™»èƒœå‡ºã€‚</li></ul><h3 id="Raftç®—æ³•"><a href="#Raftç®—æ³•" class="headerlink" title="Raftç®—æ³•"></a>Raftç®—æ³•</h3><div class="note blue icon-padding flat"><i class="note-icon fas fa-tags"></i><p>Raftç®—æ³•æ˜¯åŸºäºPaxosç®—æ³•çš„æ€æƒ³,è¿›è¡Œäº†ç®€åŒ–å’Œé™åˆ¶ã€‚åœ¨Raftç®—æ³•ä¸­ä¹Ÿæœ‰ä¸‰ä¸ªè§’è‰²,åœ¨è®²è¿™ä¸‰ä¸ªè§’è‰²å‰,ä¹Ÿä¸¾ä¸ªä¾‹å­:å‡è®¾ç°åœ¨æœ‰äº”ä¸ªå°å…„å¼Ÿå¼€é»‘æ‰“ç‹è€…å†œè¯,äº”ä¸ªäººæ°´å¹³éƒ½å¾ˆå¼º,éƒ½æ˜¯æœ€å¼ºç‹è€…,ä½†æ²¡æœ‰æ€»æŒ‡æŒ¥,å„æ‰“å„çš„,è€Œå¯¹é¢å®åŠ›ä¹Ÿå¾ˆå¼º,ä¸”é…åˆå¾ˆå¥½,è¢«æ‰“çš„èŠ‚èŠ‚è´¥é€€ã€‚ä»–ä»¬ä¹Ÿéœ€è¦ä¸€ä¸ªæ€»æŒ‡æŒ¥,ä½†è°æ¥å½“å‘¢?ä»–ä»¬æ˜¯è¿™ä¹ˆè§£å†³çš„,ä»–ä»¬æ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªéšæœºæ—¶é—´çš„å€’è®¡æ—¶å™¨,æ—¶é—´å€’è®¡æ—¶ç»“æŸ,å°±æŠŠè‡ªå·±ä½œä¸ºæ€»æŒ‡æŒ¥å€™é€‰äºº,ç„¶åæ´¾ <code>å¾®ä¿¡</code> åŒå¿—å»é€šçŸ¥å…¶å®ƒå‡ ä½å…„å¼Ÿè¯´è‡ªå·±è¦å½“æ€»æŒ‡æŒ¥ã€‚è€Œå…¶å®ƒå…„å¼Ÿå€’è®¡æ—¶è¿˜æ²¡ç»“æŸ,ä¹Ÿæ²¡æœ‰æ¥å—ä»»ä½•çš„æ¶ˆæ¯,å°±ä¼šåŒæ„è¿™ä¸ªè¯·æ±‚ã€‚è·Ÿæ´¾æ¥çš„å¾®ä¿¡é€šçŸ¥è¯´â€œå¯ä»¥,å°±é€‰ä½ åšæ€»æŒ‡æŒ¥äº†â€,å½“æ¥æ”¶ä¸€åŠä»¥ä¸Šå…„å¼Ÿçš„è¿™ä¸ªæ¶ˆæ¯,å°±å¯ä»¥æˆåŠŸå‡ä»»æ€»æŒ‡æŒ¥ã€‚ç°åœ¨æ¯ä¸ªå†³ç­–éƒ½ç”±æ€»æŒ‡æŒ¥ç¡®å®š,ç¡®å®šå¥½ç­–ç•¥å°±æ´¾ <code>å¾®ä¿¡</code> åŒå¿—å»é€šçŸ¥å…¶å®ƒå‡ ä½å…„å¼Ÿ,å¦‚æœæœ‰å…„å¼Ÿæ²¡æœ‰æ”¶åˆ°æ¶ˆæ¯,å°±é‡æ–°æ´¾ä¸ªåŒå¿—ç»§ç»­åŒå¿—,ç›´åˆ°æ”¶åˆ°åº”ç­”ã€‚</p></div><ul><li><code>Leader</code>ï¼šå°±åƒæ˜¯æ€»æŒ‡æŒ¥,ä¸»è¦è´Ÿè´£å‘èµ·å¿ƒè·³ï¼Œå“åº”å®¢æˆ·ç«¯ï¼Œåˆ›å»ºæ—¥å¿—ï¼ŒåŒæ­¥æ—¥å¿—ã€‚</li><li><code>Candidate</code>ï¼šå°±åƒæ˜¯é€‰å‡ºæ€»æŒ‡æŒ¥å‰äº”ä¸ªå¼€é»‘çš„å…„å¼Ÿ,æ¯ä¸ªäººéƒ½å¯ä»¥å»ç«é€‰æ€»æŒ‡æŒ¥è¿™ä¸ªä½ç½®ã€‚Leader é€‰ä¸¾è¿‡ç¨‹ä¸­çš„ä¸´æ—¶è§’è‰²ï¼Œç”± Follower è½¬åŒ–è€Œæ¥ï¼Œå‘èµ·æŠ•ç¥¨å‚ä¸ç«é€‰ã€‚</li><li><code>Follower</code>ï¼šå°±åƒæ˜¯é€‰å‡ºæ€»æŒ‡æŒ¥å,é™¤äº†æ€»æŒ‡æŒ¥å¤–,å‰©ä½™çš„å…„å¼Ÿ,æ¥å—æ€»æŒ‡æŒ¥çš„å®‰æ’ã€‚æ¥å— Leader çš„å¿ƒè·³å’Œæ—¥å¿—åŒæ­¥æ•°æ®ï¼ŒæŠ•ç¥¨ç»™ Candidateã€‚</li></ul><p><em><strong>æƒ³æ¯”è¾ƒç›´è§‚çš„äº†è§£<a href="http://thesecretlivesofdata.com/raft/">Raft</a>,å¯ä»¥è®¿é—®è¿™ä¸ªç½‘ç«™:<a href="%60http://thesecretlivesofdata.com/raft/">http://thesecretlivesofdata.com/raft/</a>,å®ƒç”¨åŠ¨ç”»çš„æ¨¡å¼,å°†Rafté€‰ä¸¾è¿‡ç¨‹è®²çš„ååˆ†æ¸…æ¥šã€‚</strong></em></p>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CAPå’ŒBASEç†è®º</title>
      <link href="/CAP%E5%92%8CBASE%E7%90%86%E8%AE%BA/"/>
      <url>/CAP%E5%92%8CBASE%E7%90%86%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<p>ç°åœ¨å¤§å®¶å¤©å¤©åœ¨è¯´åˆ†å¸ƒå¼ç³»ç»Ÿ,é€šå¸¸æˆ‘ä»¬ç†è§£çš„åˆ†å¸ƒå¼ç³»ç»Ÿ,å°±æ˜¯å°†ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿæ‹†åˆ†æˆå¤šä¸ªç®€å•çš„å­ç³»ç»Ÿ,ç„¶åå°†è¿™äº›å­ç³»ç»Ÿåˆ†åˆ«éƒ¨ç½²åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸‹,è€Œè¿™äº›å­ç³»ç»Ÿå…±åŒæ„æˆçš„ç³»ç»Ÿ,å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚ä¸ä¼ ç»Ÿçš„å•ä½“åº”ç”¨æ¶æ„ç›¸æ¯”,åˆ†å¸ƒå¼æœ‰ç€æ›´å¼ºçš„æœºåŠ¨æ€§ã€å¯æ‹“å±•æ€§,ä½†æ˜¯åˆ†å¸ƒå¼ä¾é ç½‘ç»œé€šä¿¡,æ‰€ä»¥éšç€ç½‘ç»œé£é™©éƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå‡ºç°é—®é¢˜,å› æ­¤å°±æœ‰äº†CAPå’ŒBASEç†è®ºã€‚</p><span id="more"></span><h3 id="CAPç†è®º"><a href="#CAPç†è®º" class="headerlink" title="CAPç†è®º"></a>CAPç†è®º</h3><div class="note blue icon-padding flat"><i class="note-icon fas fa-tags"></i><p>æ‰€è°“CAPå®šç†å°±æ˜¯æŒ‡åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­,<code>ä¸€è‡´æ€§(Consistency)ã€å¯ç”¨æ€§(Availability)å’Œåˆ†åŒºå®¹é”™æ€§(Partition tolerance)</code>è¿™ä¸‰ä¸ªåŸºæœ¬éœ€æ±‚ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³å…¶ä¸­çš„2ä¸ªã€‚</p></div><ul><li>ä¸€è‡´æ€§:æŒ‡æ•°æ®åœ¨å¤šä¸ªå‰¯æœ¬ç›´æ¥è¦ä¿æŒä¸€è‡´ã€‚</li><li>å¯ç”¨æ€§:æŒ‡ä»»ä½•æ“ä½œéƒ½å¯ä»¥å¾—åˆ°å“åº”çš„ç»“æœ,ä¹Ÿå°±æ˜¯è¦ä¿è¯ç³»ç»Ÿæä¾›çš„æœåŠ¡è¦ä¸€ç›´ä¿æŒåœ¨å¯ç”¨çš„çŠ¶æ€ã€‚</li><li>åˆ†åŒºå®¹é”™æ€§:æŒ‡ç³»ç»Ÿåœ¨é‡åˆ°ä»»ä½•é—®é¢˜è€Œå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹ä¹‹é—´é€šä¿¡å¤±è´¥,ä½†æ­¤æ—¶ä»ç„¶å¯ä»¥å¯¹å¤–æä¾›æ»¡è¶³ä¸€è‡´æ€§ä¸å¯ç”¨æ€§çš„æœåŠ¡ã€‚<br>æœ‰äººå¯èƒ½ä¼šè¯´ä¸ºä»€ä¹ˆåªèƒ½æ»¡è¶³å…¶ä¸­2ä¸ªå‘¢?æˆ‘è¿½æ±‚å®Œç¾,å°±è¦å…¨éƒ¨æ»¡è¶³!é‚£ä¹ˆæˆ‘ä»¬æ¥ä¸¾ä¸ªæ —å­:</li></ul><div class="note pink icon-padding flat"><i class="note-icon fas fa-lemon"></i><p>ç°åœ¨æœ‰ä¸€ä¸ªåˆ†å¸ƒå¼æ¶æ„æ­å»ºçš„è´­ç‰©ç½‘ç«™,æ•°æ®åº“æ˜¯ä¸€ä¸»å¤šä»,ç°åœ¨æœ‰ä¸ªç§’æ€ä¿ƒé”€æ´»åŠ¨,999ç§’æ€ä¸€å°è‹¹æœ18PRO MAX 10TB,é™é‡åªæœ‰10å°ã€‚æŸç”¨æˆ·æŠ¢åˆ°äº†ä¸€å°,ä¸»æ•°æ®åº“å·²ç»å°†åº“å­˜å‡1äº†,æ­¤æ—¶è¿˜æ²¡åŒæ­¥åˆ°ä»æ•°æ®åº“çš„æ—¶å€™,ä¸»æ•°æ®åº“æŒ‚æ‰äº†ã€‚æ­¤æ—¶ä¸»æ•°æ®åº“åº“å­˜æ˜¯9,å…¶å®ƒä»æ•°æ®åº“åº“å­˜æ˜¯10ã€‚</p></div><p>æŒ‰ç…§æˆ‘ä»¬ä¸Šé¢è®²çš„CAPç†è®º,å¦‚æœæ­¤æ—¶æˆ‘ä»¬è¦ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§çš„è¯,é‚£ä¹ˆæˆ‘ä»¬å°±å¿…é¡»ç­‰ä¸»æ•°æ®åº“é‡å¯å¹¶å°†æ•°æ®åŒæ­¥åˆ°ä»æ•°æ®åº“å,æ‰èƒ½å“åº”ç»“æœ,è€Œè¿™ä¸ªæ—¶é•¿æˆ‘ä»¬æ˜¯æ— æ³•ä¿è¯çš„ã€‚å› æ­¤,åœ¨è¿™ç§æƒ…å†µä¸‹,æˆ‘ä»¬å¦‚æœè¦ä¿è¯ä¸€è‡´æ€§çš„è¯é‚£ä¹ˆå°±æ— æ³•ä¿è¯å¯ç”¨æ€§äº†ã€‚è€Œå¦‚æœä¿è¯å¯ç”¨æ€§çš„è¯,é‚£ä¹ˆåœ¨æ•°æ®è¿˜æ²¡åŒæ­¥çš„æƒ…å†µä¸‹,å°±å°†å“åº”ç»“æœè¿”å›äº†,å¦‚æœæ­¤æ—¶æœ‰ä¸€ä½ç”¨æˆ·ä¹ŸæŠ¢åˆ°äº†,æ­¤æ—¶è¯·æ±‚ä¼šè½åœ¨å¦ä¸€å°æ•°æ®åº“,è€Œè¿™å°æ•°æ®åº“åº“å­˜æ˜¯10,ä¸åŸä¸»æ•°æ®åº“åº“å­˜æ˜¯ä¸ä¸€è‡´çš„,è¿™æ ·çš„è¯,ä¸€è‡´æ€§å°±æ»¡è¶³ä¸äº†ã€‚æ‰€ä»¥åœ¨ä¿è¯åˆ†åŒºå®¹é”™æ€§çš„æƒ…å†µä¸‹,ä¸€è‡´æ€§å’Œå¯ç”¨æ€§æ˜¯äº’æ–¥çš„ã€‚</p><p><em><strong>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿ,åˆ†åŒºå®¹é”™æ€§æ˜¯ä¸€å®šè¦æ»¡è¶³çš„ã€‚å› æ­¤,æˆ‘ä»¬å¿…é¡»æƒè¡¡æˆ‘ä»¬çš„ä¸šåŠ¡,æ˜¯è¦ä¼˜å…ˆä¿è¯ä¸€è‡´æ€§è¿˜æ˜¯å¯ç”¨æ€§</strong></em></p><h4 id="CP-å¼ºä¸€è‡´"><a href="#CP-å¼ºä¸€è‡´" class="headerlink" title="CP(å¼ºä¸€è‡´)"></a>CP(å¼ºä¸€è‡´)</h4><p>ä¸ºä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§,å°±å¿…é¡»æ‹’ç»è¯·æ±‚ã€‚åƒ<code>Zookeeper</code>å°±æ˜¯CPçš„ä»£è¡¨,åœ¨<code>Zookeeper</code>é€‰ä¸¾è¿‡ç¨‹ä¸­æˆ–è€…æ˜¯åŠæ•°åŠä»¥ä¸Šçš„æœºå™¨ä¸å¯ç”¨æ—¶,å¯¹å¤–æ˜¯ä¸æä¾›æœåŠ¡çš„ã€‚å½“æ•°æ®å‘ç”Ÿä¿®æ”¹æ—¶,å¿…é¡»åŒæ­¥ä¹‹åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹,æ‰ä¼šè¿”å›ç»“æœã€‚</p><h4 id="AP-é«˜å¯ç”¨"><a href="#AP-é«˜å¯ç”¨" class="headerlink" title="AP(é«˜å¯ç”¨)"></a>AP(é«˜å¯ç”¨)</h4><p>ä¸ºä¿è¯ç³»ç»Ÿçš„é«˜å¯ç”¨,å¯ä»¥å°†æ—§å€¼è¿”å›ã€‚åƒRedisé›†ç¾¤æ¨¡å¼å°±æ˜¯APçš„,åœ¨æ•°æ®å‘ç”Ÿä¿®æ”¹æ—¶,Redisä¼šé©¬ä¸Šè¿”å›ç»“æœ,å†å»åŒæ­¥æ•°æ®ã€‚ä¹Ÿæ¯”å¦‚Eurekaä¹Ÿæ˜¯AP,å½“å®¢æˆ·ç«¯å¿ƒè·³ä¸¢å¤±å,Eurekaä¸ä¼šé©¬ä¸Šåœæ­¢æœåŠ¡,è€Œæ˜¯ä¿æŠ¤ä¸€æ®µæ—¶é—´åå†å‰”é™¤è¯¥æœåŠ¡ã€‚</p><blockquote><p>æ‰€ä»¥åŸºäºCAPç†è®º,æƒè¡¡å„ç§æƒ…å†µ,BASEç†è®ºè¯ç”Ÿäº†ã€‚</p></blockquote><h3 id="BASEç†è®º"><a href="#BASEç†è®º" class="headerlink" title="BASEç†è®º"></a>BASEç†è®º</h3><div class="note blue icon-padding flat"><i class="note-icon fas fa-tags"></i><p>BASEæŒ‡çš„æ˜¯<code>Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰ã€Soft stateï¼ˆè½¯çŠ¶æ€ï¼‰å’ŒEventually consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</code>,å®ƒæ˜¯å¯¹CAPä¸­çš„ä¸€è‡´æ€§ä¸å¯ç”¨æ€§æƒè¡¡çš„ç»“æœ,æ ¸å¿ƒæ€æƒ³æ˜¯<strong>å³ä½¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§,ä½†æ˜¯æ¯ä¸ªåº”ç”¨å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹,é‡‡ç”¨é€‚å½“çš„æ–¹å¼æ¥ä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</p></div><ul><li>åŸºæœ¬å¯ç”¨:åœ¨ç³»ç»Ÿå‡ºç°ä¸å¯é¢„çŸ¥çš„æ•…éšœæ—¶,å…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ã€‚<ul><li>æ—¶é—´æŸå¤±:æ¯”å¦‚æ­£å¸¸è®¿é—®çš„åŠŸèƒ½,1så†…å°±èƒ½è¿”å›ç»“æœ,ä½†ç”±äºå‡ºç°æ•…éšœ,å¯¼è‡´è¦2-3sæ‰è¿”å›ç»“æœ,è¿™å°±æ˜¯æ—¶é—´æŸå¤±ã€‚</li><li>åŠŸèƒ½æŸå¤±:å¾ˆå¤šç½‘ç«™ææ´»åŠ¨çš„æ—¶å€™,ç»å¸¸ä¼šå‡ºç°<code>æ´»åŠ¨å¤ªç«çˆ†äº†!</code>ç­‰ç­‰,è¿™äº›å°±æ˜¯åŠŸèƒ½ä¸Šçš„æŸå¤±ã€‚</li></ul></li><li>è½¯çŠ¶æ€:å…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€,å¹¶è®¤ä¸ºè¯¥ä¸­é—´çŠ¶æ€çš„å­˜åœ¨ä¸ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“å¯ç”¨æ€§,å³å…è®¸ç³»ç»Ÿåœ¨ä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥çš„è¿‡ç¨‹å­˜åœ¨å»¶æ—¶ã€‚</li><li>æœ€ç»ˆä¸€è‡´æ€§:ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ•°æ®å‰¯æœ¬,åœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŒæ­¥å,æœ€ç»ˆèƒ½å¤Ÿè¾¾åˆ°ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚å› æ­¤æœ€ç»ˆä¸€è‡´æ€§çš„æœ¬è´¨æ˜¯éœ€è¦ç³»ç»Ÿä¿è¯æœ€ç»ˆæ•°æ®èƒ½å¤Ÿè¾¾åˆ°ä¸€è‡´,è€Œä¸éœ€è¦å®æ—¶ä¿è¯ç³»ç»Ÿæ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚</li></ul><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>å…·ä½“é€‰æ‹©å¼ºä¸€è‡´æ€§è¿˜æ˜¯æœ€ç»ˆä¸€è‡´æ€§,è¿˜æ˜¯å¾—çœ‹å®é™…ä¸šåŠ¡éœ€æ±‚,åƒé“¶è¡Œè½¬è´¦è¿™ç§å¯¹æ•°æ®ååˆ†ä¸¥æ ¼çš„,è‚¯å®šæ˜¯è¦ä¿è¯å¼ºä¸€è‡´æ€§çš„,è€Œä¸€äº›å¯¹æ•°æ®ä¸ä¸¥æ ¼çš„ç³»ç»Ÿ,è¿˜æ˜¯æ¨å´‡æœ€ç»ˆä¸€è‡´æ€§ã€‚å› ä¸ºè™½ç„¶ç‰ºç‰²äº†å¼ºä¸€è‡´æ€§,ä½†æ˜¯ä¸ä»…å¾—åˆ°äº†é«˜å¯ç”¨æ€§,è€Œä¸”æœ€ç»ˆæ•°æ®ä¹Ÿèƒ½å¤Ÿä¿æŒä¸€è‡´ã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVAè®¾è®¡æ¨¡å¼è¯¦è§£</title>
      <link href="/JAVA%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AF%A6%E8%A7%A3/"/>
      <url>/JAVA%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h4 id="JAVAè®¾è®¡æ¨¡å¼åˆ†ç±»"><a href="#JAVAè®¾è®¡æ¨¡å¼åˆ†ç±»" class="headerlink" title="JAVAè®¾è®¡æ¨¡å¼åˆ†ç±»"></a>JAVAè®¾è®¡æ¨¡å¼åˆ†ç±»</h4><p>è®¾è®¡æ¨¡å¼ä¸»è¦åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p><ul><li>åˆ›å»ºå‹<blockquote><p>å·¥å‚æ–¹æ³•ã€æŠ½è±¡å·¥å‚æ–¹æ³•ã€å•ä¾‹æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼</p></blockquote></li><li>ç»“æ„å‹<blockquote><p>é€‚é…å™¨æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€ä»£ç†æ¨¡å¼</p></blockquote></li><li>è¡Œä¸ºå‹<blockquote><p>è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼</p></blockquote><span id="more"></span></li></ul><h4 id="è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™"><a href="#è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™"></a>è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™</h4><h5 id="æ€»åŸåˆ™ï¼šå¼€é—­åŸåˆ™"><a href="#æ€»åŸåˆ™ï¼šå¼€é—­åŸåˆ™" class="headerlink" title="æ€»åŸåˆ™ï¼šå¼€é—­åŸåˆ™"></a>æ€»åŸåˆ™ï¼šå¼€é—­åŸåˆ™</h5><blockquote><p>å¼€é—­åŸåˆ™ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦æ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ã€‚è€Œæ˜¯è¦æ‰©å±•åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚</p></blockquote><h5 id="å•ä¸€èŒè´£æ¨¡å¼"><a href="#å•ä¸€èŒè´£æ¨¡å¼" class="headerlink" title="å•ä¸€èŒè´£æ¨¡å¼"></a>å•ä¸€èŒè´£æ¨¡å¼</h5><p>ä¸è¦å­˜åœ¨å¤šäºä¸€ä¸ªå¯¼è‡´ç±»å˜æ›´çš„åŸå› ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªç±»åº”è¯¥å®ç°å•ä¸€çš„èŒè´£ï¼Œå¦‚è‹¥ä¸ç„¶ï¼Œå°±åº”è¯¥æŠŠç±»æ‹†åˆ†ã€‚</p><h5 id="é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="é‡Œæ°æ›¿æ¢åŸåˆ™"></a>é‡Œæ°æ›¿æ¢åŸåˆ™</h5><p>ä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚é‡Œæ°æ›¿æ¢åŸåˆ™æ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“è¡ç”Ÿç±»å¯ä»¥æ›¿æ¢åŸºç±»ï¼Œè½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨å—ï¼Œè€Œè¡ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°æ›¿æ¢åŸåˆ™æ˜¯å¯¹â€œå¼€é—­â€åŸåˆ™çš„è¡¥å……ã€‚å®ç°â€œå¼€é—­â€åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ï¼Œè€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°æ›¿æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚</p><pre><code>åœ¨é‡Œæ°æ›¿æ¢åŸåˆ™ä¸­ï¼Œå­ç±»å°½é‡ä¸è¦é‡å†™å’Œé‡è½½çˆ¶ç±»çš„æ–¹æ³•ã€‚å› ä¸ºçˆ¶ç±»ä»£è¡¨äº†å®šä¹‰å¥½çš„ç»“æ„ï¼Œé€šè¿‡è¿™ä¸ªè§„èŒƒçš„æ¥å£å’Œå¤–ç•Œäº¤äº’ï¼Œå­ç±»ä¸åº”è¯¥éšä¾¿ç ´åå®ƒã€‚</code></pre><h5 id="ä¾èµ–å€’è½¬åŸåˆ™"><a href="#ä¾èµ–å€’è½¬åŸåˆ™" class="headerlink" title="ä¾èµ–å€’è½¬åŸåˆ™"></a>ä¾èµ–å€’è½¬åŸåˆ™</h5><p>è¿™ä¸ªæ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šé¢å¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚å†™ä»£ç æ—¶ç”¨åˆ°å…·ä½“ç±»æ—¶ï¼Œä¸ä¸å…·ä½“ç±»äº¤äº’ï¼Œè€Œæ˜¯ä¸å…·ä½“ç±»ä¸Šæ›¾æ¥å£äº¤äº’ã€‚</p><h5 id="æ¥å£éš”ç¦»åŸåˆ™"><a href="#æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™"></a>æ¥å£éš”ç¦»åŸåˆ™</h5><p>æ¯ä¸ªæ¥å£ä¸­ä¸å­˜åœ¨å­ç±»ç”¨ä¸åˆ°å´å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œå¦‚æœä¸ç„¶ï¼Œå°±è¦å°†æ¥å£æ‹†åˆ†ï¼Œä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚</p><h5 id="è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰"><a href="#è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰"></a>è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰</h5><p>ä¸€ä¸ªç±»å¯¹è‡ªå·±çš„ä¾èµ–çš„ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½ã€‚ä¹Ÿå°±æ˜¯è¯´æ— è®ºè¢«ä¾èµ–çš„ç±»å¤šä¹ˆå¤æ‚ï¼Œéƒ½åº”è¯¥å°†é€»è¾‘å°è£…åœ¨æ–¹æ³•çš„å†…éƒ¨ï¼Œé€šè¿‡publicæ–¹æ³•æä¾›ç»™å¤–éƒ¨ï¼Œè¿™æ ·å½“è¢«ä¾èµ–çš„ç±»å˜åŒ–ã€‚</p><h5 id="åˆæˆå¤ç”¨åŸåˆ™"><a href="#åˆæˆå¤ç”¨åŸåˆ™" class="headerlink" title="åˆæˆå¤ç”¨åŸåˆ™"></a>åˆæˆå¤ç”¨åŸåˆ™</h5><p>å°½é‡ä½¿ç”¨åˆæˆ&#x2F;èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚</p><h4 id="JAVAä¸­çš„23ä¸­è®¾è®¡æ¨¡å¼"><a href="#JAVAä¸­çš„23ä¸­è®¾è®¡æ¨¡å¼" class="headerlink" title="JAVAä¸­çš„23ä¸­è®¾è®¡æ¨¡å¼"></a>JAVAä¸­çš„23ä¸­è®¾è®¡æ¨¡å¼</h4><p><em><strong>åˆ›å»ºå‹</strong></em>:</p><h5 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h5><ul><li>æ™®é€šç®€å•å·¥å‚</li></ul><blockquote><p>é€šä¿—æ¥è¯´ï¼Œå°±æ˜¯å»ºç«‹ä¸€ä¸ªå·¥å‚ç±»ï¼Œå¯¹å®ç°äº†åŒä¸€æ¥å£çš„ç±»è¿›è¡Œå®ä¾‹çš„åˆ›å»ºã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é¦–å…ˆåˆ›å»ºä¸€ä¸ªå…±ç”¨æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Mobile</span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mobileInfo</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ç„¶ååˆ›å»ºä¸¤ä¸ªå®ç°ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApplePhone</span> <span class="keyword">implements</span> <span class="title class_">Mobile</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mobileInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Apple,iphone11,A13&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HuaWeiPhone</span> <span class="keyword">implements</span> <span class="title class_">Mobile</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mobileInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HuaWei,P40Pro,éº’éºŸ990 5G&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æœ€ååˆ›å»ºå·¥å‚ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MobileFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Mobile <span class="title function_">productionMobile</span><span class="params">(String modelNumber)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;Apple&quot;</span>.equals(modelNumber))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApplePhone</span>();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;HuaWei&quot;</span>.equals(modelNumber))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HuaWeiPhone</span>();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**æµ‹è¯•å¦‚ä¸‹**/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">MobileFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MobileFactory</span>();</span><br><span class="line">  <span class="type">Mobile</span> <span class="variable">mobile</span> <span class="operator">=</span> factory.productionMobile(<span class="string">&quot;HuaWei&quot;</span>);</span><br><span class="line">  mobile.mobileInfo();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**è¾“å‡ºç»“æœ**/</span></span><br><span class="line">HuaWei,P40Pro,éº’éºŸ<span class="number">990</span> 5G</span><br></pre></td></tr></table></figure><ul><li>å¤šæ–¹æ³•ç®€å•å·¥å‚</li></ul><blockquote><p>å¾ˆå®¹æ˜“çœ‹å‡ºç®€å•å·¥å‚æ˜¯ç”¨å­—ç¬¦ä¸²ä¼ å€¼ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å‡ºç°ä¼ é”™å€¼çš„æƒ…å†µï¼Œå› æ­¤ç¨å¾®æ”¹åŠ¨ä¸€ä¸‹ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MobileFactory</span>&#123;</span><br><span class="line">  <span class="keyword">public</span> Mobile <span class="title function_">productionAppleMobile</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApplePhone</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> Mobile <span class="title function_">productionHuaWeiMobile</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HuaWeiPhone</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**æµ‹è¯•å¦‚ä¸‹**/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">MobileFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MobileFactory</span>();</span><br><span class="line">  <span class="type">Mobile</span> <span class="variable">mobile</span> <span class="operator">=</span> factory.productionAppleMobile();</span><br><span class="line">  mobile.mobileInfo();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**è¾“å‡ºç»“æœ**/</span></span><br><span class="line">Apple,iphone11,A13</span><br></pre></td></tr></table></figure><ul><li>é™æ€æ–¹æ³•ç®€å•å·¥å‚</li></ul><blockquote><p>å°†å·¥å‚ç±»è®¾ç½®ä¸ºé™æ€æ–¹æ³•ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡å®ä¾‹åŒ–ä¸€ä¸ªå·¥å‚ç±»,ç›´æ¥è°ƒç”¨å°±å¯ä»¥äº†ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MobileFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Mobile <span class="title function_">productionAppleMobile</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApplePhone</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Mobile <span class="title function_">productionHuaWeiMobile</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HuaWeiPhone</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**æµ‹è¯•å¦‚ä¸‹**/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">  MobileFactory.productionHuaWeiMobile().mobileInfo();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**è¾“å‡ºç»“æœ**/</span></span><br><span class="line">HuaWei,P40Pro,éº’éºŸ<span class="number">990</span> 5G</span><br></pre></td></tr></table></figure><blockquote><p>æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œå¯ä»¥çœ‹å‡ºç®€å•å·¥å‚æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ¯ä¸€ä¸ªå®ä¾‹çš„åˆ›å»ºéƒ½ä¾èµ–äºå·¥å‚ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœéœ€è¦æ‹“å±•ç¨‹åºï¼Œå¿…é¡»è¦å¯¹å·¥å‚ç±»è¿›è¡Œä¿®æ”¹ï¼Œè¿™è¿èƒŒäº†<a href="https://www.baidu.com/s?ie=UTF-8&wd=%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99">å¼€é—­åŸåˆ™</a>ã€‚æ‰€ä»¥ä»è®¾è®¡å±‚é¢æ¥è®²ï¼Œè¿™æ ·æ˜¯æœ‰é—®é¢˜çš„ï¼Œé‚£ä¹ˆè¦å¦‚ä½•è§£å†³å‘¢ï¼Ÿè¿™é‡Œå°±å¼•ç”¨åˆ°äº†å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªå·¥å‚æ¥å£ï¼Œæ¯ä¸ªå·¥å‚ç±»å®ç°è¿™ä¸ªæ¥å£ï¼Œä¹‹åæ”¹åŠ¨çš„è¯ï¼Œåªéœ€è¦æ–°å»ºä¸€ä¸ªå®ç°ç±»ï¼Œä¸éœ€è¦æ”¹åŠ¨ä¹‹å‰çš„ä»£ç ã€‚</p></blockquote><ul><li>å·¥å‚æ–¹æ³•æ¨¡å¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºä¸€ä¸ªå·¥å‚æ¥å£</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MobileFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Mobile <span class="title function_">producationMobile</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºä¸¤ä¸ªå·¥å‚å®ç°ç±»</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HuaWeiPhoneFactory</span> <span class="keyword">implements</span> <span class="title class_">MobileFactory</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mobile <span class="title function_">producationMobile</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HuaWeiPhone</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApplePhoneFactory</span> <span class="keyword">implements</span> <span class="title class_">MobileFactory</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mobile <span class="title function_">producationMobile</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApplePhone</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**æµ‹è¯•å¦‚ä¸‹**/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">MobileFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HuaWeiPhoneFactory</span>();</span><br><span class="line">  <span class="type">Mobile</span> <span class="variable">mobile</span> <span class="operator">=</span> factory.producationMobile();</span><br><span class="line">  mobile.mobileInfo();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**è¾“å‡ºç»“æœ**/</span></span><br><span class="line">HuaWei,P40Pro,éº’éºŸ<span class="number">990</span> 5G</span><br></pre></td></tr></table></figure><blockquote><p>è¿™æ ·çš„è¯å°±å¯ä»¥å°†ç±»çš„åŠ è½½æ¨è¿Ÿåˆ°å­ç±»ä¸­è¿›ï¼Œè€Œä¸”èƒ½æ»¡è¶³â€œå¼€é—­åŸåˆ™â€ã€‚ä½†æ˜¯é—®é¢˜éšä¹‹è€Œæ¥ï¼Œæ¯æ¬¡å¢åŠ ä¸€ä¸ªäº§å“çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªå…·ä½“ç±»å’Œå¯¹è±¡å®ç°å·¥å‚ã€‚åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</p></blockquote><h5 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸€ä¸ªæŠ½è±¡å·¥å‚ï¼Œå¹¶å®šä¹‰ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractFactory</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Mobile <span class="title function_">producationMobile</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Computer <span class="title function_">producationComputer</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸€ä¸ªå…·ä½“çš„å·¥å‚ç±»ç»§æ‰¿æŠ½è±¡å·¥å‚ï¼Œå¹¶å®ç°æŠ½è±¡æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XiaoMiFactory</span> <span class="keyword">extends</span> <span class="title class_">AbstractFactory</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mobile <span class="title function_">producationMobile</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">XiaoMiPhone</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Computer <span class="title function_">producationComputer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">XiaoMiComputer</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**æµ‹è¯•å¦‚ä¸‹**/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">AbstractFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XiaoMiFactory</span>();</span><br><span class="line">  <span class="type">Mobile</span> <span class="variable">mobile</span> <span class="operator">=</span> factory.producationMobile();</span><br><span class="line">  mobile.mobileInfo();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**è¾“å‡ºç»“æœ**/</span></span><br><span class="line">XiaoMi,Mix4,éªé¾™<span class="number">888</span>+</span><br></pre></td></tr></table></figure><blockquote><p>æŠ½è±¡å·¥å‚æ¨¡å¼å’Œå·¥å‚æ–¹æ³•æ¨¡å¼ä¸€æ ·ï¼Œéƒ½ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åœ¨æ·»åŠ ä¸€ä¸ªå…·ä½“äº§å“çš„æ—¶å€™ï¼Œéƒ½è¦å¢åŠ ç›¸åº”çš„å·¥å‚ã€‚è€ŒæŠ½è±¡å·¥å‚æ¨¡å¼åªæœ‰åœ¨æ–°å¢ä¸€ä¸ªç±»å‹çš„å…·ä½“äº§å“æ—¶æ‰éœ€è¦æ–°å¢å·¥å‚ã€‚ä¹Ÿå°±æ˜¯è¯´å·¥å‚æ–¹æ³•æ¨¡å¼åªèƒ½åˆ›å»ºä¸€ä¸ªå…·ä½“äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªå·¥å‚å¯ä»¥åˆ›å»ºå±äºä¸€ä¸ªç±»å‹çš„å¤šç§å…·ä½“äº§å“ã€‚</p></blockquote><h5 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h5><p>å•ä¾‹æ¨¡å¼æ˜¯Javaä¸­æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå±äºåˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚èƒ½å¤Ÿä¿è¯åœ¨ä¸€ä¸ªJVMä¸­ï¼Œè¯¥å¯¹è±¡åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ã€‚</p><ul><li>é¥¿æ±‰å¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é¥¿æ±‰å¼åœ¨ç±»åŠ è½½çš„æ—¶å€™å°±å®ä¾‹åŒ–ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿè¾ƒé«˜ï¼Œä½†æ˜¯æ¯”è¾ƒæµªè´¹å†…å­˜ã€‚</p></blockquote><ul><li>æ‡’æ±‰å¼ï¼ˆéçº¿ç¨‹å®‰å…¨ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazySingleton</span><span class="params">()</span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ç§æ–¹å¼è™½ç„¶å®ç°ç±»å»¶è¿ŸåŠ è½½ï¼Œä½†æ˜¯æœ€å¤§çš„é—®é¢˜å°±æ˜¯ä¸æ”¯æŒå¤šçº¿ç¨‹ï¼Œå› ä¸ºæ²¡æœ‰åŠ é”ï¼Œåœ¨å¤šçº¿ç¨‹ä¸‹ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚</p></blockquote><ul><li>æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> LazySingleton instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazySingleton</span><span class="params">()</span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">         <span class="keyword">if</span>(instance == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(LazySingleton.class)&#123;</span><br><span class="line">                <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">LazySafeSingleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>synchronized</code>å…³é”®å­—å¦‚æœç›´æ¥å°†å¯¹è±¡é”ä½çš„è¯ï¼Œæ€§èƒ½ä¸Šä¼šæœ‰æ‰€ä¸‹é™ï¼Œè€Œæˆ‘ä»¬åªéœ€è¦åœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ·é”ï¼Œä¹‹åå°±ä¸éœ€è¦äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€å°†<code>synchronized</code>åŠ åœ¨å†…éƒ¨ã€‚</p></blockquote><ul><li>é™æ€å†…éƒ¨ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SingletonHolder</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">Singleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åˆ©ç”¨ç±»åŠ è½½æœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ–åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚</p></blockquote><ul><li>æšä¸¾ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">enum</span> <span class="title class_">SingletonEnum</span>&#123;</span><br><span class="line">        INSTANCE;</span><br><span class="line">        <span class="keyword">private</span> Singleton singleton;</span><br><span class="line">        <span class="keyword">private</span> <span class="title function_">SingletonEnum</span><span class="params">()</span>&#123;</span><br><span class="line">            singleton = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> singleton;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonEnum.INSTANCE.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å»ºé€ è€…æ¨¡å¼"><a href="#å»ºé€ è€…æ¨¡å¼" class="headerlink" title="å»ºé€ è€…æ¨¡å¼"></a>å»ºé€ è€…æ¨¡å¼</h5><p>å»ºé€ è€…æ¨¡å¼å°±æ˜¯ä½¿ç”¨å¤šä¸ªç®€å•çš„å¯¹è±¡ä¸€æ­¥æ­¥æ„å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰å•†å“åŸºæœ¬ä¿¡æ¯ï¼šåç§°ã€åŒ…è£…æ–¹å¼ã€ä»·æ ¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Item</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Packing <span class="title function_">packing</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">price</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰åŒ…è£…æ–¹å¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Packing</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pack</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®ç°åŒ…è£…çš„ä¸¤ç§æ–¹å¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Wrapper</span> <span class="keyword">implements</span> <span class="title class_">Packing</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pack</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç›’è£…&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bottle</span> <span class="keyword">implements</span> <span class="title class_">Packing</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pack</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç“¶è£…&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰å•†å“-æ±‰å ¡ğŸ”</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Burger</span> <span class="keyword">implements</span> <span class="title class_">Item</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Packing <span class="title function_">packing</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Wrapper</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">float</span> <span class="title function_">price</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®ç°å•†å“-è”¬èœæ±‰å ¡å’Œé¸¡è‚‰æ±‰å ¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VegBurger</span> <span class="keyword">extends</span> <span class="title class_">Burger</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;è”¬èœæ±‰å ¡&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">price</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">8.0f</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChickenBurger</span> <span class="keyword">extends</span> <span class="title class_">Burger</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;é¸¡è‚‰æ±‰å ¡&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">price</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">15.0f</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰å•†å“-é¥®æ–™ğŸ¥¤</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ColdDrink</span> <span class="keyword">implements</span> <span class="title class_">Item</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Packing <span class="title function_">packing</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bottle</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">float</span> <span class="title function_">price</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*å®ç°å•†å“-å¯å£å¯ä¹å’Œç™¾äº‹å¯ä¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Coke</span> <span class="keyword">extends</span> <span class="title class_">ColdDrink</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å¯å£å¯ä¹&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">price</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5.0f</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pepsi</span> <span class="keyword">extends</span> <span class="title class_">ColdDrink</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç™¾äº‹å¯ä¹&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">price</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">4.5f</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*æ„å»ºMealç±»ï¼ŒåŒ…å«å•†å“ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Meal</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Item&gt; itemList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Item&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(Item item)</span> &#123;</span><br><span class="line">        itemList.add(item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">float</span> <span class="title function_">getCost</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> itemList.stream().map(Item::price).reduce(Float::sum).get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showItems</span><span class="params">()</span>&#123;</span><br><span class="line">        itemList.forEach(item -&gt; System.out.println(<span class="string">&quot;é¡¹ç›®:&quot;</span> + item.name() + <span class="string">&quot;,åŒ…è£…:&quot;</span> + item.packing().pack() + <span class="string">&quot;,å•ä»·:&quot;</span> + item.price()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºBuilderç±»ï¼Œè´Ÿè´£åˆ›å»ºMealç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MealBuilder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Meal <span class="title function_">prepareVegMeal</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Meal</span> <span class="variable">meal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Meal</span>();</span><br><span class="line">        meal.addItem(<span class="keyword">new</span> <span class="title class_">VegBurger</span>());</span><br><span class="line">        meal.addItem(<span class="keyword">new</span> <span class="title class_">Pepsi</span>());</span><br><span class="line">        <span class="keyword">return</span> meal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Meal <span class="title function_">prepareChickenMeal</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Meal</span> <span class="variable">meal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Meal</span>();</span><br><span class="line">        meal.addItem(<span class="keyword">new</span> <span class="title class_">ChickenBurger</span>());</span><br><span class="line">        meal.addItem(<span class="keyword">new</span> <span class="title class_">Coke</span>());</span><br><span class="line">        <span class="keyword">return</span> meal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">MealBuilder</span> <span class="variable">mealBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MealBuilder</span>();</span><br><span class="line">  <span class="type">Meal</span> <span class="variable">meal</span> <span class="operator">=</span> mealBuilder.prepareVegMeal();</span><br><span class="line">  System.out.println(<span class="string">&quot;è”¬èœå¥—é¤:&quot;</span>);</span><br><span class="line">  meal.showItems();</span><br><span class="line">  System.out.println(<span class="string">&quot;èŠ±è´¹:&quot;</span> + meal.getCost());</span><br><span class="line">  System.out.println(<span class="string">&quot;é¸¡è‚‰å¥—é¤:&quot;</span>);</span><br><span class="line">  <span class="type">Meal</span> <span class="variable">meal2</span> <span class="operator">=</span> mealBuilder.prepareChickenMeal();</span><br><span class="line">  meal2.showItems();</span><br><span class="line">  System.out.println(<span class="string">&quot;èŠ±è´¹:&quot;</span> + meal2.getCost());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*è¾“å‡ºç»“æœ*/</span></span><br><span class="line">è”¬èœå¥—é¤:</span><br><span class="line">é¡¹ç›®:è”¬èœæ±‰å ¡,åŒ…è£…:ç›’è£…,å•ä»·:<span class="number">8.0</span></span><br><span class="line">é¡¹ç›®:ç™¾äº‹å¯ä¹,åŒ…è£…:ç“¶è£…,å•ä»·:<span class="number">4.5</span></span><br><span class="line">èŠ±è´¹:<span class="number">12.5</span></span><br><span class="line">é¸¡è‚‰å¥—é¤:</span><br><span class="line">é¡¹ç›®:é¸¡è‚‰æ±‰å ¡,åŒ…è£…:ç›’è£…,å•ä»·:<span class="number">15.0</span></span><br><span class="line">é¡¹ç›®:å¯å£å¯ä¹,åŒ…è£…:ç“¶è£…,å•ä»·:<span class="number">5.0</span></span><br><span class="line">èŠ±è´¹:<span class="number">20.0</span></span><br></pre></td></tr></table></figure><h5 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h5><blockquote><p>åŸå‹æ¨¡å¼ï¼Œæ•…åæ€ä¹‰ï¼Œå°±æ˜¯å°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹ï¼Œå¯¹å…¶è¿›è¡Œå¤åˆ¶ã€å…‹éš†ï¼Œäº§ç”Ÿä¸€ä¸ªå’ŒåŸå¯¹è±¡ç±»ä¼¼çš„æ–°å¯¹è±¡ã€‚è¯´åˆ°å¤åˆ¶å°±ä¸å¾—ä¸è¯´ä¸€ä¸‹æµ…æ‹·è´å’Œæ·±æ‹·è´äº†ã€‚</p></blockquote><p><code>æµ…æ‹·è´</code>:å°†ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡éƒ½ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œè€Œå¼•ç”¨ç±»å‹è¿˜æ˜¯åŸæ¥å¯¹è±¡æ‰€æŒ‡å‘çš„ã€‚</p><p><code>æ·±æ‹·è´</code>:å°†ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨ç±»å‹å˜é‡éƒ½æ˜¯é‡æ–°åˆ›å»ºçš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*å®šä¹‰æŠ½è±¡ç±»å®ç°Cloneable</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Mobile</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">protected</span> String type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">mobileModel</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setType</span><span class="params">(String type)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.type = type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">clone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            obj = <span class="built_in">super</span>.clone();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Mobile&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, type=&#x27;&quot;</span> + type + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®ç°ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApplePhone</span> <span class="keyword">extends</span> <span class="title class_">Mobile</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ApplePhone</span><span class="params">()</span>&#123;</span><br><span class="line">        type = <span class="string">&quot;iphone&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mobileModel</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;iPhone 11ï¼ŒA13å¤„ç†å™¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HuaWeiPhone</span> <span class="keyword">extends</span> <span class="title class_">Mobile</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HuaWeiPhone</span><span class="params">()</span>&#123;</span><br><span class="line">        type = <span class="string">&quot;huawei&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mobileModel</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åä¸ºMate40 Proï¼Œéº’éºŸ990 5G&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XiaoMiPhone</span> <span class="keyword">extends</span> <span class="title class_">Mobile</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">XiaoMiPhone</span><span class="params">()</span>&#123;</span><br><span class="line">        type = <span class="string">&quot;xiaomi&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mobileModel</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å°ç±³Mix4ï¼Œéªé¾™888+&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*æ¨¡æ‹Ÿæ•°æ®ç¼“å­˜</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MobileCache</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Hashtable&lt;String,Mobile&gt; cache = <span class="keyword">new</span> <span class="title class_">Hashtable</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Mobile <span class="title function_">getMobile</span><span class="params">(String mId)</span>&#123;</span><br><span class="line">        <span class="type">Mobile</span> <span class="variable">mobile</span> <span class="operator">=</span> cache.get(mId);</span><br><span class="line">        <span class="keyword">if</span>(mobile != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> (Mobile) mobile.clone();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">loadCache</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplePhone</span> <span class="variable">apple</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ApplePhone</span>();</span><br><span class="line">        apple.setName(<span class="string">&quot;apple&quot;</span>);</span><br><span class="line">        cache.put(apple.getName(),apple);</span><br><span class="line"></span><br><span class="line">        <span class="type">HuaWeiPhone</span> <span class="variable">huawei</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HuaWeiPhone</span>();</span><br><span class="line">        huawei.setName(<span class="string">&quot;huawei&quot;</span>);</span><br><span class="line">        cache.put(huawei.getName(),huawei);</span><br><span class="line"></span><br><span class="line">        <span class="type">XiaoMiPhone</span> <span class="variable">xiaomi</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XiaoMiPhone</span>();</span><br><span class="line">        xiaomi.setName(<span class="string">&quot;xiaomi&quot;</span>);</span><br><span class="line">        cache.put(xiaomi.getName(),xiaomi);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*æµ‹è¯•å¦‚ä¸‹*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  MobileCache.loadCache();</span><br><span class="line"></span><br><span class="line">  <span class="type">Mobile</span> <span class="variable">mobile1</span> <span class="operator">=</span> MobileCache.getMobile(<span class="string">&quot;apple&quot;</span>);</span><br><span class="line">  System.out.println(mobile1);</span><br><span class="line"></span><br><span class="line">  <span class="type">Mobile</span>  <span class="variable">mobile2</span> <span class="operator">=</span> MobileCache.getMobile(<span class="string">&quot;huawei&quot;</span>);</span><br><span class="line">  System.out.println(mobile2);</span><br><span class="line"></span><br><span class="line">  <span class="type">Mobile</span>  <span class="variable">mobile3</span> <span class="operator">=</span> MobileCache.getMobile(<span class="string">&quot;xiaomi&quot;</span>);</span><br><span class="line">  System.out.println(mobile3);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*è¾“å‡ºç»“æœ*/</span></span><br><span class="line">Mobile&#123;name=<span class="string">&#x27;apple&#x27;</span>, type=<span class="string">&#x27;iphone&#x27;</span>&#125;</span><br><span class="line">Mobile&#123;name=<span class="string">&#x27;huawei&#x27;</span>, type=<span class="string">&#x27;huawei&#x27;</span>&#125;</span><br><span class="line">Mobile&#123;name=<span class="string">&#x27;xiaomi&#x27;</span>, type=<span class="string">&#x27;xiaomi&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><hr><p><em><strong>ç»“æ„å‹</strong></em></p><h5 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h5><blockquote><p>é€‚é…å™¨æ¨¡å¼ä¸»è¦æ˜¯ä½œä¸ºä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£ä¹‹é—´çš„æ¡¥æ¢ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†æ¶ˆé™¤ç”±äºæ¥å£ä¸åŒ¹é…å¯¼è‡´çš„ç±»çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰æ™®é€šæ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Interface</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">function</span><span class="params">(String interfaceType,String interfaceName)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰é«˜çº§æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">HighInterface</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">charge</span><span class="params">(String interfaceName)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transferFiles</span><span class="params">(String interfaceName)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(String interfaceName)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰TypeCæ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TypeC</span> <span class="keyword">implements</span> <span class="title class_">HighInterface</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">charge</span><span class="params">(String interfaceName)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å……ç”µ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transferFiles</span><span class="params">(String interfaceName)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶ä¼ è¾“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(String interfaceName)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰Hdmiæ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hdmi</span> <span class="keyword">implements</span> <span class="title class_">HighInterface</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">charge</span><span class="params">(String interfaceName)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transferFiles</span><span class="params">(String interfaceName)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(String monitor)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿æ¥æ˜¾ç¤ºå™¨:&quot;</span> + monitor);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰é€‚é…å™¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterfaceAdapter</span> <span class="keyword">implements</span> <span class="title class_">Interface</span>&#123;</span><br><span class="line">    HighInterface inter;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">InterfaceAdapter</span><span class="params">(String interfaceType)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;typeC-T&quot;</span>.equalsIgnoreCase(interfaceType) || <span class="string">&quot;typeC-E&quot;</span>.equalsIgnoreCase(interfaceType) )&#123;</span><br><span class="line">            inter = <span class="keyword">new</span> <span class="title class_">TypeC</span>();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;hdmi&quot;</span>.equalsIgnoreCase(interfaceType))&#123;</span><br><span class="line">            inter = <span class="keyword">new</span> <span class="title class_">Hdmi</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">function</span><span class="params">(String interfaceType, String interfaceName)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;typeC-E&quot;</span>.equalsIgnoreCase(interfaceType))&#123;</span><br><span class="line">            inter.charge(interfaceName);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;typeC-T&quot;</span>.equalsIgnoreCase(interfaceType))&#123;</span><br><span class="line">            inter.transferFiles(interfaceName);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;hdmi&quot;</span>.equalsIgnoreCase(interfaceType))&#123;</span><br><span class="line">            inter.show(interfaceName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰æ‰©å±•å</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DockingStation</span> <span class="keyword">implements</span> <span class="title class_">Interface</span>&#123;</span><br><span class="line">    InterfaceAdapter adapter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">function</span><span class="params">(String interfaceType, String interfaceName)</span> &#123;</span><br><span class="line">        adapter = <span class="keyword">new</span> <span class="title class_">InterfaceAdapter</span>(interfaceType);</span><br><span class="line">        adapter.function(interfaceType,interfaceName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*æµ‹è¯•å¦‚ä¸‹*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">DockingStation</span> <span class="variable">dock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DockingStation</span>();</span><br><span class="line">  dock.function(<span class="string">&quot;typeC-E&quot;</span>,<span class="string">&quot;220V&quot;</span>);</span><br><span class="line">  dock.function(<span class="string">&quot;typeC-T&quot;</span>,<span class="string">&quot;å¸Œæ·ç¡¬ç›˜&quot;</span>);</span><br><span class="line">  dock.function(<span class="string">&quot;hdmi&quot;</span>,<span class="string">&quot;LGæ˜¾ç¤ºå™¨&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*è¾“å‡ºå¦‚ä¸‹*/</span></span><br><span class="line">å……ç”µ</span><br><span class="line">æ–‡ä»¶ä¼ è¾“</span><br><span class="line">è¿æ¥æ˜¾ç¤ºå™¨:LGæ˜¾ç¤ºå™¨</span><br></pre></td></tr></table></figure><h5 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h5><blockquote><p>æ‰€è°“æ¡¥æ¥å°±æ˜¯å°†æŠ½è±¡åŒ–ä¸å®ç°åŒ–è§£è€¦ï¼Œä½¿äºŒè€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚åƒå¸¸ç”¨çš„JDBCæ¡¥DriverManagerä¸€æ ·ï¼ŒJDBCè¿æ¥ä¸åŒçš„æ•°æ®åº“çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šä¸ç”¨ä¿®æ”¹ä»€ä¹ˆä»£ç ï¼ŒåŸå› å°±æ˜¯JDBCæä¾›ç»Ÿä¸€æ¥å£ï¼Œæ¯ä¸ªæ•°æ®åº“æä¾›å„è‡ªçš„å®ç°ï¼Œç”¨æ•°æ®åº“é©±åŠ¨ç¨‹åºæ¥æ¡¥æ¥å°±å¯ä»¥äº†ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰JDBCæ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Jdbc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connectDB</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ä¸¤ä¸ªå®ç°ç±»ï¼Œå®ç°JDBCæ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MysqlDriver</span> <span class="keyword">implements</span> <span class="title class_">Jdbc</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connectDB</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿æ¥Mysqlæ•°æ®åº“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OracleDriver</span> <span class="keyword">implements</span> <span class="title class_">Jdbc</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connectDB</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿æ¥Oracleæ•°æ®åº“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰é©±åŠ¨ç®¡ç†ç±»(æ¡¥)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">DriverManager</span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Jdbc jdbc;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">DriverManager</span><span class="params">(Jdbc jdbc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.jdbc = jdbc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">connectDB</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®ç°æŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyDriverManager</span> <span class="keyword">extends</span> <span class="title class_">DriverManager</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyDriverManager</span><span class="params">(Jdbc jdbc)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(jdbc);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connectDB</span><span class="params">()</span> &#123;</span><br><span class="line">        jdbc.connectDB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">DriverManager</span> <span class="variable">manager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyDriverManager</span>(<span class="keyword">new</span> <span class="title class_">MysqlDriver</span>());</span><br><span class="line">  manager.connectDB();</span><br><span class="line">  <span class="type">DriverManager</span> <span class="variable">manager2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyDriverManager</span>(<span class="keyword">new</span> <span class="title class_">OracleDriver</span>());</span><br><span class="line">  manager2.connectDB();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line">è¿æ¥Mysqlæ•°æ®åº“</span><br><span class="line">è¿æ¥Oracleæ•°æ®åº“</span><br></pre></td></tr></table></figure><h5 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h5><blockquote><p>ç»„åˆæ¨¡å¼ï¼Œåˆå«æ•´ä½“æ¨¡å¼ï¼Œæ˜¯æŠŠä¸€ç»„ç›¸ä¼¼çš„å¯¹è±¡å½“æˆä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ã€‚ç»„åˆæ¨¡å¼ä¾æ®æ ‘å‹ç»“æ„æ¥ç»„åˆå¯¹è±¡ï¼Œç”¨äºè¡¨ç¤ºéƒ¨åˆ†åŠæ•´ä½“ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Area</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Area&gt; subAreas;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Area</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.subAreas = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Area area)</span>&#123;</span><br><span class="line">        subAreas.add(area);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Area area)</span>&#123;</span><br><span class="line">        subAreas.remove(area);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Area&gt; <span class="title function_">getSubAreas</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> subAreas;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Area&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, subAreas=&quot;</span> + subAreas +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Area</span> <span class="variable">china</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Area</span>(<span class="string">&quot;ä¸­å›½&quot;</span>);</span><br><span class="line">  <span class="type">Area</span> <span class="variable">beijing</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Area</span>(<span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line">  <span class="type">Area</span> <span class="variable">zhejiang</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Area</span>(<span class="string">&quot;æµ™æ±Ÿ&quot;</span>);</span><br><span class="line">  <span class="type">Area</span> <span class="variable">hangzhou</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Area</span>(<span class="string">&quot;æ­å·&quot;</span>);</span><br><span class="line">  <span class="type">Area</span> <span class="variable">chaoyang</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Area</span>(<span class="string">&quot;æœé˜³åŒº&quot;</span>);</span><br><span class="line">  <span class="type">Area</span> <span class="variable">dongcheng</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Area</span>(<span class="string">&quot;ä¸œåŸåŒº&quot;</span>);</span><br><span class="line">  beijing.add(chaoyang);</span><br><span class="line">  beijing.add(dongcheng);</span><br><span class="line">  zhejiang.add(hangzhou);</span><br><span class="line">  china.add(beijing);</span><br><span class="line">  china.add(zhejiang);</span><br><span class="line">  System.out.println(china.toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line">Area&#123;name=<span class="string">&#x27;ä¸­å›½&#x27;</span>, subAreas=[Area&#123;name=<span class="string">&#x27;åŒ—äº¬&#x27;</span>, subAreas=[Area&#123;name=<span class="string">&#x27;æœé˜³åŒº&#x27;</span>, subAreas=[]&#125;, Area&#123;name=<span class="string">&#x27;ä¸œåŸåŒº&#x27;</span>, subAreas=[]&#125;]&#125;, Area&#123;name=<span class="string">&#x27;æµ™æ±Ÿ&#x27;</span>, subAreas=[Area&#123;name=<span class="string">&#x27;æ­å·&#x27;</span>, subAreas=[]&#125;]&#125;]&#125;</span><br></pre></td></tr></table></figure><h5 id="è£…é¥°å™¨æ¨¡å¼"><a href="#è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼"></a>è£…é¥°å™¨æ¨¡å¼</h5><blockquote><p>è£…é¥°å™¨ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç»™ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚åªæ˜¯å¯¹ç±»è¿›è¡Œä¸€ä¸ªåŒ…è£…ã€è£…é¥°ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰åŠ¨ç‰©æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">abilities</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®ç°åŠ¨ç‰©æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Monkey</span> <span class="keyword">implements</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">abilities</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Monkey:åƒæ¡ƒå­ã€çˆ¬æ ‘&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pig</span> <span class="keyword">implements</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">abilities</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Pig:åƒå‰©é¥­å‰©èœã€ç¡è§‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰æŠ½è±¡ç±»å®ç°åŠ¨ç‰©æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AnimalWithSoul</span> <span class="keyword">implements</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Animal animalWithSoul;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AnimalWithSoul</span><span class="params">(Animal animalWithSoul)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.animalWithSoul = animalWithSoul;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">abilities</span><span class="params">()</span> &#123;</span><br><span class="line">        animalWithSoul.abilities();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ä¼šä»™æœ¯çš„åŠ¨ç‰©ç»§æ‰¿æŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImmortalAnimal</span> <span class="keyword">extends</span> <span class="title class_">AnimalWithSoul</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ImmortalAnimal</span><span class="params">(Animal animalWithSoul)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(animalWithSoul);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">abilities</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.abilities();</span><br><span class="line">        xianshu();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">xianshu</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–°å¢æŠ€èƒ½:ä»™æœ¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Monkey</span>();</span><br><span class="line">  <span class="type">AnimalWithSoul</span> <span class="variable">animal1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImmortalAnimal</span>(<span class="keyword">new</span> <span class="title class_">Monkey</span>());</span><br><span class="line">  <span class="type">AnimalWithSoul</span> <span class="variable">animal2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImmortalAnimal</span>(<span class="keyword">new</span> <span class="title class_">Pig</span>());</span><br><span class="line">  animal.abilities();</span><br><span class="line">  animal1.abilities();</span><br><span class="line">  animal2.abilities();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line">Monkey:åƒæ¡ƒå­ã€çˆ¬æ ‘</span><br><span class="line">Monkey:åƒæ¡ƒå­ã€çˆ¬æ ‘</span><br><span class="line">æ–°å¢æŠ€èƒ½:ä»™æœ¯</span><br><span class="line">Pig:åƒå‰©é¥­å‰©èœã€ç¡è§‰</span><br><span class="line">æ–°å¢æŠ€èƒ½:ä»™æœ¯</span><br></pre></td></tr></table></figure><h5 id="å¤–è§‚æ¨¡å¼"><a href="#å¤–è§‚æ¨¡å¼" class="headerlink" title="å¤–è§‚æ¨¡å¼"></a>å¤–è§‚æ¨¡å¼</h5><blockquote><p>å¤–è§‚æ¨¡å¼å°±æ˜¯å°†ç³»ç»Ÿçš„å¤æ‚æ€§éšè—èµ·æ¥ï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚é™ä½è®¿é—®å¤æ‚ç³»ç»Ÿçš„å†…éƒ¨å­ç³»ç»Ÿæ—¶çš„å¤æ‚åº¦ï¼Œé™ä½äº†ç±»ç±»ä¹‹é—´çš„è€¦åˆåº¦</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ç¡¬ä»¶æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">HardWare</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">startUp</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">shutDown</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®ç°ç¡¬ä»¶æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cpu</span> <span class="keyword">implements</span> <span class="title class_">HardWare</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startUp</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CPUå¯åŠ¨...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shutDown</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;CPUå…³é—­...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Memory</span> <span class="keyword">implements</span> <span class="title class_">HardWare</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startUp</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Memoryå¯åŠ¨...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shutDown</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Memoryå…³é—­...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Disk</span> <span class="keyword">implements</span> <span class="title class_">HardWare</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startUp</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Diskå¯åŠ¨...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shutDown</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Diskå…³é—­...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ç”µè„‘ï¼Œé‡Œé¢æœ‰CPUã€Memoryã€Disk</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Computer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Cpu cpu;</span><br><span class="line">    <span class="keyword">private</span> Memory memory ;</span><br><span class="line">    <span class="keyword">private</span> Disk disk;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Computer</span><span class="params">()</span> &#123;</span><br><span class="line">        cpu = <span class="keyword">new</span> <span class="title class_">Cpu</span>();</span><br><span class="line">        memory = <span class="keyword">new</span> <span class="title class_">Memory</span>();</span><br><span class="line">        disk = <span class="keyword">new</span> <span class="title class_">Disk</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startUp</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”µè„‘å¼€å§‹å¯åŠ¨....&quot;</span>);</span><br><span class="line">        cpu.startUp();</span><br><span class="line">        memory.startUp();</span><br><span class="line">        disk.startUp();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”µè„‘å¯åŠ¨æˆåŠŸ!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shutDown</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”µè„‘å¼€å§‹å…³é—­....&quot;</span>);</span><br><span class="line">        cpu.shutDown();</span><br><span class="line">        memory.shutDown();</span><br><span class="line">        disk.shutDown();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç”µè„‘å…³é—­æˆåŠŸ!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**æµ‹è¯•å¦‚ä¸‹*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Computer</span> <span class="variable">computer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Computer</span>();</span><br><span class="line">  computer.startUp();</span><br><span class="line">  System.out.println(<span class="string">&quot;æ‰“ä¼šå„¿æ¸¸æˆ...&quot;</span>);</span><br><span class="line">  computer.shutDown();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è¾“å‡ºå¦‚ä¸‹ */</span></span><br><span class="line">ç”µè„‘å¼€å§‹å¯åŠ¨....</span><br><span class="line">CPUå¯åŠ¨...</span><br><span class="line">Memoryå¯åŠ¨...</span><br><span class="line">Diskå¯åŠ¨...</span><br><span class="line">ç”µè„‘å¯åŠ¨æˆåŠŸ!</span><br><span class="line">æ‰“ä¼šå„¿æ¸¸æˆ...</span><br><span class="line">ç”µè„‘å¼€å§‹å…³é—­....</span><br><span class="line">CPUå…³é—­...</span><br><span class="line">Memoryå…³é—­...</span><br><span class="line">Diskå…³é—­...</span><br><span class="line">ç”µè„‘å…³é—­æˆåŠŸ!</span><br></pre></td></tr></table></figure><h5 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h5><blockquote><p>äº«å…ƒæ¨¡å¼ä¸»è¦æ˜¯å®ç°å¯¹è±¡çš„å…±äº«ï¼Œç”¨äºå‡å°‘åˆ›å»ºå¯¹è±¡çš„æ•°é‡ï¼Œä»¥å‡å°‘å†…å­˜çš„å ç”¨å’Œæé«˜æ€§èƒ½ã€‚äº«å…ƒæ¨¡å¼å°è¯•é‡ç”¨ç°æœ‰çš„åŒç±»å¯¹è±¡ï¼Œå¦‚æœæœªæ‰¾åˆ°åŒ¹é…çš„å¯¹è±¡ï¼Œåˆ™åˆ›å»ºæ–°å¯¹è±¡ã€‚ä¸€èˆ¬å’Œå·¥å‚æ¨¡å¼ä¸€èµ·ä½¿ç”¨ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConnectionPool</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Connection&gt; pool;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;mizhuo&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">driverClassName</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.jdbc.Drive&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">poolSize</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ConnectionPool</span><span class="params">()</span> &#123;</span><br><span class="line">        pool = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;Connection&gt;(poolSize);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; poolSize; i++) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Class.forName(driverClassName);</span><br><span class="line">                conn = DriverManager.getConnection(url,username,password);</span><br><span class="line">                pool.add(conn);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pool.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> pool.get(<span class="number">0</span>);</span><br><span class="line">            pool.remove(conn);</span><br><span class="line">            <span class="keyword">return</span> conn;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">(Connection conn)</span>&#123;</span><br><span class="line">        pool.add(conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h5><blockquote><p>ä»£ç†æ¨¡å¼æ•…åæ€ä¹‰å°±æ˜¯è®©ä¸€ä¸ªç±»æ¥ä»£ç†åŸæ¥çš„ç±»ï¼Œæ›¿åŸå¯¹è±¡è¿›è¡Œä¸€ç³»åˆ—æ“ä½œã€‚å°±åƒæˆ‘ä»¬ç§Ÿæˆ¿å­æ‰¾ä¸­ä»‹ï¼Œæ‰“å®˜å¸æ‰¾å¾‹å¸ˆã€‚è®©ä»–ä»¬æ¥æ›¿æˆ‘ä»¬æ‰¾æˆ¿å­ã€æ‰“å®˜å¸ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ç§Ÿæˆ¿å­æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RentHouse</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">findHouse</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">rentHouse</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®ç°ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySelfRentHouse</span> <span class="keyword">implements</span> <span class="title class_">RentHouse</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String tenant;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MySelfRentHouse</span><span class="params">(String tenant)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.tenant = tenant;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rentHouse</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(tenant + <span class="string">&quot;å…¥ä½ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findHouse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(tenant + <span class="string">&quot;ç½‘ä¸Šæ‰¾ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(tenant + <span class="string">&quot;è¡—ä¸Šæ‰¾ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(tenant + <span class="string">&quot;çº¦æˆ¿ä¸œè§é¢ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(tenant + <span class="string">&quot;æ‰¾åˆ°äº†ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(tenant + <span class="string">&quot;åŠæ‰‹ç»­ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ä»£ç†ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyRentHouse</span> <span class="keyword">implements</span> <span class="title class_">RentHouse</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String rentName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String tenant;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MySelfRentHouse house;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ProxyRentHouse</span><span class="params">(String rentName,String tenant)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rentName = rentName;</span><br><span class="line">        <span class="built_in">this</span>.tenant = tenant;</span><br><span class="line">        <span class="built_in">this</span>.house = <span class="keyword">new</span> <span class="title class_">MySelfRentHouse</span>(tenant);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rentHouse</span><span class="params">()</span> &#123;</span><br><span class="line">        findHouse();</span><br><span class="line">        house.rentHouse();</span><br><span class="line">        getMoney();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">findHouse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(rentName + <span class="string">&quot;ç½‘ä¸Šæ‰¾ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(rentName + <span class="string">&quot;è¡—ä¸Šæ‰¾ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(rentName + <span class="string">&quot;çº¦æˆ¿ä¸œè§é¢ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(rentName + <span class="string">&quot;æ‰¾åˆ°äº†ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        System.out.println(rentName + <span class="string">&quot;åŠæ‰‹ç»­ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">getMoney</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶ä¸­ä»‹è´¹ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æµ‹è¯•å¦‚ä¸‹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test13</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">RentHouse</span> <span class="variable">rentHouse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MySelfRentHouse</span>(<span class="string">&quot;mizhuo&quot;</span>);</span><br><span class="line">  rentHouse.findHouse();</span><br><span class="line">  rentHouse.rentHouse();</span><br><span class="line">  <span class="type">RentHouse</span> <span class="variable">house</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyRentHouse</span>(<span class="string">&quot;ä¸­ä»‹&quot;</span>,<span class="string">&quot;mizhuo&quot;</span>);</span><br><span class="line">  house.rentHouse();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><em><strong>è¡Œä¸ºå‹</strong></em></p><h5 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h5><blockquote><p>è¿­ä»£å™¨åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼Œåœ¨ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æ˜¯å¾ˆå¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Œç”¨äºé¡ºåºè®¿é—®é›†åˆä¸­çš„å…ƒç´ ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰è¿­ä»£å™¨æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span> &#123;</span><br><span class="line"></span><br><span class="line">    Object <span class="title function_">previous</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Object <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Object <span class="title function_">first</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Object <span class="title function_">last</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰é›†åˆç±»æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Collection</span> &#123;</span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> MiZhuo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 6:22 ä¸‹åˆ 2021/9/11</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> []</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> site.mizhuo.designPattern.iterator.Iterator</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    Iterator <span class="title function_">iterator</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> MiZhuo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> è·å–å…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 6:22 ä¸‹åˆ 2021/9/11</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [i]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> java.lang.Object</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> i)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> MiZhuo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> è¿”å›é›†åˆå¤§å°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 6:22 ä¸‹åˆ 2021/9/11</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> []</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®ç°è¿­ä»£å™¨æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Collection collection;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">pos</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyIterator</span><span class="params">(Collection collection)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.collection = collection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">previous</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(pos &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            pos --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> collection.get(pos);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(pos &lt; collection.size() - <span class="number">1</span>)&#123;</span><br><span class="line">            pos ++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> collection.get(pos);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(pos &lt; collection.size() - <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">first</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> collection.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">last</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> collection.get(collection.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®ç°é›†åˆç±»æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCollection</span> <span class="keyword">implements</span> <span class="title class_">Collection</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String arr[] = &#123;<span class="string">&quot;A&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="string">&quot;C&quot;</span>,<span class="string">&quot;D&quot;</span>,<span class="string">&quot;E&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyIterator</span>(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> arr[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> arr.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Collection</span> <span class="variable">collection</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCollection</span>();</span><br><span class="line">  <span class="type">Iterator</span> <span class="variable">it</span> <span class="operator">=</span> collection.iterator();</span><br><span class="line">  <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">    System.out.println(it.next());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">D</span><br><span class="line">E</span><br></pre></td></tr></table></figure><h5 id="è´£ä»»é“¾æ¨¡å¼"><a href="#è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼"></a>è´£ä»»é“¾æ¨¡å¼</h5><blockquote><p>é¡¾åæ€ä¹‰ï¼Œè´£ä»»é“¾æ¨¡å¼å°±æ˜¯ä¸ºè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡çš„é“¾ï¼Œè¿™ç§æ¨¡å¼ç»™äºˆè¯·æ±‚çš„ç±»å‹ï¼Œä¸ºè¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…è¿›è¡Œè§£è€¦ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºæŠ½è±¡æ—¥å¿—è®°å½•å™¨ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractLogger</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">INFO</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">DEBUG</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ERROR</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> level;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> AbstractLogger nextLogger;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNextLogger</span><span class="params">(AbstractLogger nextLogger)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nextLogger = nextLogger;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(<span class="type">int</span> level,String message)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.level &lt;= level)&#123;</span><br><span class="line">            write(message);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(nextLogger != <span class="literal">null</span>)&#123;</span><br><span class="line">            nextLogger.log(level,message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String message)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºå‡ ä¸ªç»§æ‰¿è¯¥è®°å½•å™¨çš„å®ä½“ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConsoleLogger</span> <span class="keyword">extends</span> <span class="title class_">AbstractLogger</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ConsoleLogger</span><span class="params">(<span class="type">int</span> level)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.level = level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ§åˆ¶å°è¾“å‡ºæ¶ˆæ¯:&quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ErrorLogger</span> <span class="keyword">extends</span> <span class="title class_">AbstractLogger</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ErrorLogger</span><span class="params">(<span class="type">int</span> level)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.level = level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¾“å‡ºé”™è¯¯æ¶ˆæ¯:&quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileLogger</span> <span class="keyword">extends</span> <span class="title class_">AbstractLogger</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FileLogger</span><span class="params">(<span class="type">int</span> level)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.level = level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¾“å‡ºæ¶ˆæ¯åˆ°æ–‡ä»¶:&quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> AbstractLogger <span class="title function_">chain</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">AbstractLogger</span> <span class="variable">logger1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConsoleLogger</span>(AbstractLogger.DEBUG);</span><br><span class="line">  <span class="type">AbstractLogger</span> <span class="variable">logger2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileLogger</span>(AbstractLogger.INFO);</span><br><span class="line">  <span class="type">AbstractLogger</span> <span class="variable">logger3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ErrorLogger</span>(AbstractLogger.ERROR);</span><br><span class="line"></span><br><span class="line">  logger3.setNextLogger(logger1);</span><br><span class="line">  logger1.setNextLogger(logger2);</span><br><span class="line">  <span class="keyword">return</span> logger3;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">AbstractLogger</span> <span class="variable">chain</span> <span class="operator">=</span> chain();</span><br><span class="line">  chain.log(AbstractLogger.INFO,<span class="string">&quot;This is an information!&quot;</span>);</span><br><span class="line">  chain.log(AbstractLogger.DEBUG,<span class="string">&quot;This is a debug level information!&quot;</span>);</span><br><span class="line">  chain.log(AbstractLogger.ERROR,<span class="string">&quot;This is an error information!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line">è¾“å‡ºæ¶ˆæ¯åˆ°æ–‡ä»¶:This is an information!</span><br><span class="line">æ§åˆ¶å°è¾“å‡ºæ¶ˆæ¯:This is a debug level information!</span><br><span class="line">è¾“å‡ºæ¶ˆæ¯åˆ°æ–‡ä»¶:This is a debug level information!</span><br><span class="line">è¾“å‡ºé”™è¯¯æ¶ˆæ¯:This is an error information!</span><br><span class="line">æ§åˆ¶å°è¾“å‡ºæ¶ˆæ¯:This is an error information!</span><br><span class="line">è¾“å‡ºæ¶ˆæ¯åˆ°æ–‡ä»¶:This is an error information!</span><br></pre></td></tr></table></figure><h5 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h5><blockquote><p>å‘½ä»¤æ¨¡å¼å°±æ˜¯å°†è¯·æ±‚ä»¥å‘½ä»¤çš„å½¢å¼ä¼ é€’ç»™è°ƒç”¨å¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡å¯ä»¥å¯»æ‰¾å¯ä»¥å¤„ç†è¯¥å‘½ä»¤çš„å¯¹è±¡ï¼Œå¹¶å°†å‘½ä»¤ä¼ é€’ä¸‹å»ã€‚å°±å¥½åƒä¸€ä¸ªå¸ä»¤ä¸‹å‘ä¸€ä¸ªå‘½ä»¤ï¼Œä¸€å±‚å±‚ä¼ åˆ°å£«å…µé‚£é‡Œè½å®æ‰§è¡Œï¼Œå¸ä»¤ä¸éœ€è¦åœ¨æ„è¿‡ç¨‹ï¼Œåªéœ€è¦åœ¨æ„ä¼ é€’å›æ¥çš„ç»“æœã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ä¸€ä¸ªå‘½ä»¤æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Command</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ä¸€ä¸ªå¸ä»¤ç±»ï¼Œå¯å‘å‡ºå‘½ä»¤ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Commander</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Command command;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Commander</span><span class="params">(Command command)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.command = command;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushCommand</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¸ä»¤å‘å‡ºå‘½ä»¤ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">        command.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸€ä¸ªå£«å…µç±»ï¼Œå¯ä»¥æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Soldier</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">executeAction</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å£«å…µæ”¶åˆ°å‘½ä»¤ï¼Œæ‰§è¡Œå‘½ä»¤ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸€ä¸ªå†›ä»¤ç±»ï¼Œå®ç°å‘½ä»¤æ¥å£ï¼Œå£«å…µå¯æ‰§è¡Œå†›ä»¤</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MilitaryOrder</span> <span class="keyword">implements</span> <span class="title class_">Command</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Soldier soldier;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MilitaryOrder</span><span class="params">(Soldier soldier)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.soldier = soldier;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">        soldier.executeAction();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Soldier</span> <span class="variable">soldier</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Soldier</span>();</span><br><span class="line">  <span class="type">Command</span> <span class="variable">command</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MilitaryOrder</span>(soldier);</span><br><span class="line">  <span class="type">Commander</span> <span class="variable">commander</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Commander</span>(command);</span><br><span class="line">  commander.pushCommand();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºå¦‚ä¸‹ */</span></span><br><span class="line">å¸ä»¤å‘å‡ºå‘½ä»¤ã€‚ã€‚ã€‚</span><br><span class="line">å£«å…µæ”¶åˆ°å‘½ä»¤ï¼Œæ‰§è¡Œå‘½ä»¤ã€‚</span><br></pre></td></tr></table></figure><h5 id="è§£é‡Šå™¨æ¨¡å¼"><a href="#è§£é‡Šå™¨æ¨¡å¼" class="headerlink" title="è§£é‡Šå™¨æ¨¡å¼"></a>è§£é‡Šå™¨æ¨¡å¼</h5><blockquote><p>è§£é‡Šå™¨æ¨¡å¼æä¾›äº†è¯„ä¼°è¯­è¨€çš„è¯­æ³•æˆ–è¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨äºSQLè§£æã€ç¼–è¯‘å™¨ç­‰ï¼Œå¯ä»¥åœºæ™¯è¾ƒå°‘ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ä¸€ä¸ªè¡¨è¾¾å¼æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Expression</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">interpreter</span><span class="params">(Context context)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ¨¡æ‹Ÿä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Context</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> num1;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> num2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNum1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNum1</span><span class="params">(<span class="type">int</span> num1)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.num1 = num1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNum2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNum2</span><span class="params">(<span class="type">int</span> num2)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.num2 = num2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸¤ä¸ªè¡¨è¾¾å¼å®ä½“ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Plus</span> <span class="keyword">implements</span> <span class="title class_">Expression</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">interpreter</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> context.getNum1() + context.getNum2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Minus</span> <span class="keyword">implements</span> <span class="title class_">Expression</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">interpreter</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> context.getNum1() - context.getNum2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Context</span>();</span><br><span class="line">  context.setNum1(<span class="number">20</span>);</span><br><span class="line">  context.setNum2(<span class="number">10</span>);</span><br><span class="line">  <span class="type">Expression</span> <span class="variable">expression</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Plus</span>();</span><br><span class="line">  System.out.println(expression.interpreter(context));</span><br><span class="line">  <span class="type">Expression</span> <span class="variable">expression2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Minus</span>();</span><br><span class="line">  System.out.println(expression2.interpreter(context));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line"><span class="number">30</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure><h5 id="ä¸­ä»‹è€…æ¨¡å¼"><a href="#ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼"></a>ä¸­ä»‹è€…æ¨¡å¼</h5><blockquote><p>ä¸­ä»‹è€…æ¨¡å¼é€šå¸¸é€‚ç”¨äºå¤„ç†ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå°±åƒå¾®ä¿¡ç¾¤ä¸€æ ·ï¼Œè¿™æ ·è€¦åˆæ¾æ•£ï¼Œä½¿ä»£ç æ˜“äºç»´æŠ¤ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰å¾®ä¿¡ç¾¤</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeChartGroup</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">DateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">chart</span><span class="params">(User user,String message)</span>&#123;</span><br><span class="line">        System.out.println(df.format(<span class="keyword">new</span> <span class="title class_">Date</span>()) + <span class="string">&quot;[&quot;</span> + user.getName() + <span class="string">&quot;:&quot;</span> + message + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ç”¨æˆ·</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        WeChartGroup.chart(<span class="built_in">this</span>,message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test18</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;mizhuo&quot;</span>);</span><br><span class="line">  user.sendMessage(<span class="string">&quot;ä½ ä»¬å¥½å‘€ï¼Œæˆ‘æ˜¯è¿·æµŠã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;miao&quot;</span>);</span><br><span class="line">  user2.sendMessage(<span class="string">&quot;ä½ å¥½å‘€ï¼Œè¿·æµŠï¼Œæˆ‘æ˜¯å–µå–µã€‚&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line"><span class="number">2021</span>-09-<span class="number">11</span> <span class="number">22</span>:09:<span class="number">20</span>[mizhuo:ä½ ä»¬å¥½å‘€ï¼Œæˆ‘æ˜¯è¿·æµŠã€‚]</span><br><span class="line"><span class="number">2021</span>-09-<span class="number">11</span> <span class="number">22</span>:09:<span class="number">20</span>[miao:ä½ å¥½å‘€ï¼Œè¿·æµŠï¼Œæˆ‘æ˜¯å–µå–µã€‚]</span><br></pre></td></tr></table></figure><h5 id="å¤‡å¿˜å½•æ¨¡å¼"><a href="#å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼"></a>å¤‡å¿˜å½•æ¨¡å¼</h5><blockquote><p>å¤‡å¿˜å½•æ¨¡å¼å’Œæˆ‘ä»¬ä½¿ç”¨çš„å¤‡å¿˜å½•ä¸€æ ·ï¼Œä¿å­˜ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªçŠ¶æ€ï¼Œåœ¨é€‚å½“çš„æ—¶å€™æ¢å¤å¯¹è±¡ã€‚ä¾‹å¦‚æ¸¸æˆå­˜æ¡£ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ¸¸æˆç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Game</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String status;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Game</span><span class="params">(String status)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å­˜æ¡£ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Archive</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String status;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(String status)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Game <span class="title function_">saveArchive</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Game</span>(status);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getStatusFromArchive</span><span class="params">(Game game)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.status = game.getStatus();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰å­˜æ¡£ç®¡ç†ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArchiveTaker</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Game&gt; games = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Game game)</span>&#123;</span><br><span class="line">        games.add(game);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Game <span class="title function_">getGame</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> games.get(index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test19</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Archive</span> <span class="variable">archive</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Archive</span>();</span><br><span class="line">  <span class="type">ArchiveTaker</span> <span class="variable">taker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArchiveTaker</span>();</span><br><span class="line">  archive.setStatus(<span class="string">&quot;å­˜æ¡£1&quot;</span>);</span><br><span class="line">  archive.setStatus(<span class="string">&quot;å­˜æ¡£2&quot;</span>);</span><br><span class="line">  taker.add(archive.saveArchive());</span><br><span class="line">  archive.setStatus(<span class="string">&quot;å­˜æ¡£3&quot;</span>);</span><br><span class="line">  taker.add(archive.saveArchive());</span><br><span class="line">  archive.setStatus(<span class="string">&quot;å­˜æ¡£4&quot;</span>);</span><br><span class="line">  System.out.println(<span class="string">&quot;å½“å‰å­˜æ¡£æ˜¯:&quot;</span> + archive.getStatus());</span><br><span class="line">  System.out.println(<span class="string">&quot;æ¢å¤ç¬¬ä¸€æ¬¡å­˜æ¡£&quot;</span>);</span><br><span class="line">  archive.getStatusFromArchive(taker.getGame(<span class="number">0</span>));</span><br><span class="line">  System.out.println(<span class="string">&quot;å½“å‰å­˜æ¡£æ˜¯:&quot;</span> + archive.getStatus());</span><br><span class="line">  System.out.println(<span class="string">&quot;æ¢å¤ç¬¬äºŒæ¬¡å­˜æ¡£&quot;</span>);</span><br><span class="line">  archive.getStatusFromArchive(taker.getGame(<span class="number">1</span>));</span><br><span class="line">  System.out.println(<span class="string">&quot;å½“å‰å­˜æ¡£æ˜¯:&quot;</span> + archive.getStatus());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line">å½“å‰å­˜æ¡£æ˜¯:å­˜æ¡£<span class="number">4</span></span><br><span class="line">æ¢å¤ç¬¬ä¸€æ¬¡å­˜æ¡£</span><br><span class="line">å½“å‰å­˜æ¡£æ˜¯:å­˜æ¡£<span class="number">2</span></span><br><span class="line">æ¢å¤ç¬¬äºŒæ¬¡å­˜æ¡£</span><br><span class="line">å½“å‰å­˜æ¡£æ˜¯:å­˜æ¡£<span class="number">3</span></span><br></pre></td></tr></table></figure><h5 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h5><blockquote><p>å½“å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šçš„å…³ç³»æ˜¯ï¼Œä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«ä¿®æ”¹æ—¶ï¼Œä¼šè‡ªåŠ¨é€šçŸ¥ä¾èµ–å®ƒçš„å¯¹è±¡ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰ä¸»å¯¹è±¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Observer&gt; observers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> state;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(<span class="type">int</span> state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">        <span class="built_in">this</span>.notifyAllObservers();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attach</span><span class="params">(Observer observer)</span>&#123;</span><br><span class="line">        observers.add(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">notifyAllObservers</span><span class="params">()</span>&#123;</span><br><span class="line">        observers.forEach(Observer::update);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰æŠ½åƒè§‚å¯Ÿç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> Subject subject;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºäºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶è§‚å¯Ÿè€…ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinaryObserver</span> <span class="keyword">extends</span> <span class="title class_">Observer</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BinaryObserver</span><span class="params">(Subject subject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subject = subject;</span><br><span class="line">        <span class="built_in">this</span>.subject.attach(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;äºŒè¿›åˆ¶:&quot;</span> + Integer.toBinaryString(subject.getState()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OctalObserver</span> <span class="keyword">extends</span> <span class="title class_">Observer</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">OctalObserver</span><span class="params">(Subject subject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subject = subject;</span><br><span class="line">        <span class="built_in">this</span>.subject.attach(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å…«è¿›åˆ¶:&quot;</span> + Integer.toOctalString(subject.getState()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HexObserver</span> <span class="keyword">extends</span> <span class="title class_">Observer</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HexObserver</span><span class="params">(Subject subject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subject = subject;</span><br><span class="line">        <span class="built_in">this</span>.subject.attach(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åå…­è¿›åˆ¶:&quot;</span> + Integer.toHexString(subject.getState()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Subject</span>();</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">BinaryObserver</span>(subject);</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">OctalObserver</span>(subject);</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">HexObserver</span>(subject);</span><br><span class="line"></span><br><span class="line">  System.out.println(<span class="string">&quot;ç¬¬ä¸€æ¬¡è®¾ç½®å€¼ä¸º13&quot;</span>);</span><br><span class="line">  subject.setState(<span class="number">13</span>);</span><br><span class="line">  System.out.println(<span class="string">&quot;ç¬¬äºŒæ¬¡è®¾ç½®å€¼ä¸º24&quot;</span>);</span><br><span class="line">  subject.setState(<span class="number">24</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line">ç¬¬ä¸€æ¬¡è®¾ç½®å€¼ä¸º<span class="number">13</span></span><br><span class="line">äºŒè¿›åˆ¶:<span class="number">1101</span></span><br><span class="line">å…«è¿›åˆ¶:<span class="number">15</span></span><br><span class="line">åå…­è¿›åˆ¶:d</span><br><span class="line">ç¬¬äºŒæ¬¡è®¾ç½®å€¼ä¸º<span class="number">24</span></span><br><span class="line">äºŒè¿›åˆ¶:<span class="number">11000</span></span><br><span class="line">å…«è¿›åˆ¶:<span class="number">30</span></span><br><span class="line">åå…­è¿›åˆ¶:<span class="number">18</span></span><br></pre></td></tr></table></figure><h5 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h5><blockquote><p>åœ¨ç­–ç•¥æ¨¡å¼ç§ï¼Œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹ã€‚ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—çš„ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿ä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*å®šä¹‰ç®—æ³•æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ICalculator</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(String exp)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰æŠ½è±¡ç®—æ³•ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractCalculator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] split(String exp,String opt)&#123;</span><br><span class="line">        String[] arr = exp.split(opt);</span><br><span class="line">        <span class="type">int</span>[] arrInt = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">        arrInt[<span class="number">0</span>] = Integer.parseInt(arr[<span class="number">0</span>]);</span><br><span class="line">        arrInt[<span class="number">1</span>] = Integer.parseInt(arr[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">return</span> arrInt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸‰ä¸ªç®—æ³•ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Plus</span> <span class="keyword">extends</span> <span class="title class_">AbstractCalculator</span> <span class="keyword">implements</span> <span class="title class_">ICalculator</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(String exp)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = split(exp,<span class="string">&quot;\\+&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> arr[<span class="number">0</span>] + arr[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Minus</span> <span class="keyword">extends</span> <span class="title class_">AbstractCalculator</span> <span class="keyword">implements</span> <span class="title class_">ICalculator</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(String exp)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = split(exp,<span class="string">&quot;-&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> arr[<span class="number">0</span>] - arr[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Multiply</span> <span class="keyword">extends</span> <span class="title class_">AbstractCalculator</span> <span class="keyword">implements</span> <span class="title class_">ICalculator</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(String exp)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = split(exp,<span class="string">&quot;\\*&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> arr[<span class="number">0</span>] * arr[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºCOntextç±»ï¼Œç”¨äºåˆ‡æ¢ç®—æ³•</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Context</span> &#123;</span><br><span class="line">    ICalculator calculate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Context</span><span class="params">(ICalculator calculate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.calculate = calculate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">executeOptions</span><span class="params">(String exp)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> calculate.calculate(exp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test21</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Context</span>(<span class="keyword">new</span> <span class="title class_">Plus</span>());</span><br><span class="line">  System.out.println(context.executeOptions(<span class="string">&quot;2+8&quot;</span>));</span><br><span class="line">  context = <span class="keyword">new</span> <span class="title class_">Context</span>(<span class="keyword">new</span> <span class="title class_">Minus</span>());</span><br><span class="line">  System.out.println(context.executeOptions(<span class="string">&quot;2-8&quot;</span>));</span><br><span class="line">  context = <span class="keyword">new</span> <span class="title class_">Context</span>(<span class="keyword">new</span> <span class="title class_">Multiply</span>());</span><br><span class="line">  System.out.println(context.executeOptions(<span class="string">&quot;2*8&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line">-<span class="number">6</span></span><br><span class="line"><span class="number">16</span></span><br></pre></td></tr></table></figure><h5 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h5><blockquote><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼å°±æ˜¯ç»™å…¶ä»–ç±»æä¾›ä¸€ä¸ªç»“æ„ï¼Œè€Œå…·ä½“çš„ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ç§ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰Chromiumæ¡†æ¶</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Chromium</span> &#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">expand</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">online</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">useBrowser</span><span class="params">()</span>&#123;</span><br><span class="line">        initialize();</span><br><span class="line">        expand();</span><br><span class="line">        online();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºæ­Œæµè§ˆå™¨ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Chrome</span> <span class="keyword">extends</span> <span class="title class_">Chromium</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¬¢è¿ä½¿ç”¨è°·æ­Œæµè§ˆå™¨!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">expand</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»é™†è°·æ­Œè´¦å·ï¼ŒåŒæ­¥æ•°æ®ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">online</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½¿ç”¨è°·æ­Œæµè§ˆå™¨ä¸Šç½‘ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºMicrosoft Edgeæµè§ˆå™¨ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Edge</span> <span class="keyword">extends</span> <span class="title class_">Chromium</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¬¢è¿ä½¿ç”¨Microsoft Edgeæµè§ˆå™¨!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">expand</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»é™†Microsoftè´¦å·ï¼ŒåŒæ­¥æ•°æ®ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">online</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½¿ç”¨Microsoft Edgeæµè§ˆå™¨ä¸Šç½‘ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Chromium</span> <span class="variable">browser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Chrome</span>();</span><br><span class="line">  browser.useBrowser();</span><br><span class="line">  browser = <span class="keyword">new</span> <span class="title class_">Edge</span>();</span><br><span class="line">  browser.useBrowser();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line">æ¬¢è¿ä½¿ç”¨è°·æ­Œæµè§ˆå™¨!</span><br><span class="line">ç™»é™†è°·æ­Œè´¦å·ï¼ŒåŒæ­¥æ•°æ®ã€‚</span><br><span class="line">ä½¿ç”¨è°·æ­Œæµè§ˆå™¨ä¸Šç½‘ã€‚</span><br><span class="line">æ¬¢è¿ä½¿ç”¨Microsoft Edgeæµè§ˆå™¨!</span><br><span class="line">ç™»é™†Microsoftè´¦å·ï¼ŒåŒæ­¥æ•°æ®ã€‚</span><br><span class="line">ä½¿ç”¨Microsoft Edgeæµè§ˆå™¨ä¸Šç½‘ã€‚</span><br></pre></td></tr></table></figure><h5 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h5><blockquote><p>åœ¨çŠ¶æ€æ¨¡å¼ç§ï¼Œ ç±»çš„è¡Œä¸ºæ˜¯åŸºäºå®ƒçš„çŠ¶æ€è€Œæ”¹å˜çš„ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰çŠ¶æ€æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">doAction</span><span class="params">(Context context)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºContextç±»å¹¶æŒæœ‰Statuså®ä¾‹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Context</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> State state;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Context</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">getState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(State state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸¤ä¸ªçŠ¶æ€ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StateA</span> <span class="keyword">implements</span> <span class="title class_">State</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAction</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çŠ¶æ€A&quot;</span>);</span><br><span class="line">        context.setState(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StateB</span> <span class="keyword">implements</span> <span class="title class_">State</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAction</span><span class="params">(Context context)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çŠ¶æ€B&quot;</span>);</span><br><span class="line">        context.setState(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Context</span>();</span><br><span class="line">  <span class="type">State</span> <span class="variable">state</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StateA</span>();</span><br><span class="line">  state.doAction(context);</span><br><span class="line">  state = <span class="keyword">new</span> <span class="title class_">StateB</span>();</span><br><span class="line">  state.doAction(context);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºç»“æœ */</span></span><br><span class="line">çŠ¶æ€A</span><br><span class="line">çŠ¶æ€B</span><br></pre></td></tr></table></figure><h5 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h5><blockquote><p>è®¿é—®è€…æ¨¡å¼å°±æ˜¯æŠŠæ•°æ®ç»“æ„å’Œä½œç”¨ä¸ç»“æ„ä¸Šçš„æ“ä½œè§£è€¦åˆï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç›¸å¯¹çš„è‡ªç”±æ¼”åŒ–ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰æŠ½è±¡å‘˜å·¥ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Staff</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> kpi;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Staff</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.kpi = <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getKpi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> kpi;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(Visitor visitor)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸¤ä¸ªå‘˜å·¥ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Programmer</span> <span class="keyword">extends</span> <span class="title class_">Staff</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Programmer</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(Visitor visitor)</span> &#123;</span><br><span class="line">        visitor.visit(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCodeLines</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">10</span> * <span class="number">10000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Manager</span> <span class="keyword">extends</span> <span class="title class_">Staff</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Manager</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(Visitor visitor)</span> &#123;</span><br><span class="line">        visitor.visit(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getProducts</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸€ä¸ªæŠ¥è¡¨ç±»ï¼Œç”¨äºæŸ¥çœ‹å‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BusinessReport</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Staff&gt; list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessReport</span><span class="params">()</span> &#123;</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Manager</span>(<span class="string">&quot;ç»ç†A&quot;</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Programmer</span>(<span class="string">&quot;å¼ ä¸‰&quot;</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Programmer</span>(<span class="string">&quot;æå››&quot;</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Programmer</span>(<span class="string">&quot;ç‹äº”&quot;</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Manager</span>(<span class="string">&quot;ç»ç†B&quot;</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Programmer</span>(<span class="string">&quot;èµµå…­&quot;</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Programmer</span>(<span class="string">&quot;å­™ä¸ƒ&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showReport</span><span class="params">(Visitor visitor)</span>&#123;</span><br><span class="line">        list.forEach(s -&gt; s.accept(visitor));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å®šä¹‰è§‚å¯Ÿè€…æ¥å£</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Visitor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Programmer programmer)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Manager manager)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ›å»ºä¸¤ä¸ªè§‚å¯Ÿè€…ç±»</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CEOVisitor</span> <span class="keyword">implements</span> <span class="title class_">Visitor</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Programmer programmer)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¨‹åºå‘˜:&quot;</span> + programmer.getName() + <span class="string">&quot;,KPI:&quot;</span> + programmer.getKpi());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Manager manager)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç»ç†:&quot;</span> + manager.getName() + <span class="string">&quot;,KPI:&quot;</span> + manager.getKpi() + <span class="string">&quot;,æ–°äº§å“æ•°é‡:&quot;</span> + manager.getProducts());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CTOVisitor</span> <span class="keyword">implements</span> <span class="title class_">Visitor</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Programmer programmer)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¨‹åºå‘˜:&quot;</span> + programmer.getName() + <span class="string">&quot;,ä»£ç è¡Œæ•°ï¼š&quot;</span> + programmer.getCodeLines());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(Manager manager)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç»ç†:&quot;</span> + manager.getName() + <span class="string">&quot;,æ–°äº§å“æ•°é‡:&quot;</span> + manager.getProducts());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æµ‹è¯•å¦‚ä¸‹ */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">BusinessReport</span> <span class="variable">report</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BusinessReport</span>();</span><br><span class="line">  System.out.println(<span class="string">&quot;=========== CEOçœ‹æŠ¥è¡¨ ===========&quot;</span>);</span><br><span class="line">  report.showReport(<span class="keyword">new</span> <span class="title class_">CEOVisitor</span>());</span><br><span class="line">  System.out.println(<span class="string">&quot;=========== CTOçœ‹æŠ¥è¡¨ ===========&quot;</span>);</span><br><span class="line">  report.showReport(<span class="keyword">new</span> <span class="title class_">CTOVisitor</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¾“å‡ºå¦‚ä¸‹ */</span></span><br><span class="line">=========== CEOçœ‹æŠ¥è¡¨ ===========</span><br><span class="line">ç»ç†:ç»ç†A,KPI:<span class="number">9</span>,æ–°äº§å“æ•°é‡:<span class="number">7</span></span><br><span class="line">ç¨‹åºå‘˜:å¼ ä¸‰,KPI:<span class="number">0</span></span><br><span class="line">ç¨‹åºå‘˜:æå››,KPI:<span class="number">5</span></span><br><span class="line">ç¨‹åºå‘˜:ç‹äº”,KPI:<span class="number">5</span></span><br><span class="line">ç»ç†:ç»ç†B,KPI:<span class="number">8</span>,æ–°äº§å“æ•°é‡:<span class="number">0</span></span><br><span class="line">ç¨‹åºå‘˜:èµµå…­,KPI:<span class="number">2</span></span><br><span class="line">ç¨‹åºå‘˜:å­™ä¸ƒ,KPI:<span class="number">0</span></span><br><span class="line">=========== CTOçœ‹æŠ¥è¡¨ ===========</span><br><span class="line">ç»ç†:ç»ç†A,æ–°äº§å“æ•°é‡:<span class="number">2</span></span><br><span class="line">ç¨‹åºå‘˜:å¼ ä¸‰,ä»£ç è¡Œæ•°ï¼š<span class="number">35823</span></span><br><span class="line">ç¨‹åºå‘˜:æå››,ä»£ç è¡Œæ•°ï¼š<span class="number">87719</span></span><br><span class="line">ç¨‹åºå‘˜:ç‹äº”,ä»£ç è¡Œæ•°ï¼š<span class="number">37565</span></span><br><span class="line">ç»ç†:ç»ç†B,æ–°äº§å“æ•°é‡:<span class="number">8</span></span><br><span class="line">ç¨‹åºå‘˜:èµµå…­,ä»£ç è¡Œæ•°ï¼š<span class="number">67197</span></span><br><span class="line">ç¨‹åºå‘˜:å­™ä¸ƒ,ä»£ç è¡Œæ•°ï¼š<span class="number">52621</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2è§£å†³æ–¹æ¡ˆã€ç®—æœ¯æº¢å‡ºã€‘</title>
      <link href="/DB2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%90%E7%AE%97%E6%9C%AF%E6%BA%A2%E5%87%BA%E3%80%91/"/>
      <url>/DB2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%90%E7%AE%97%E6%9C%AF%E6%BA%A2%E5%87%BA%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å¼€å‘ä¸€å¼ æŠ¥è¡¨ï¼Œå†™çš„SQLè¯­å¥æ‰§è¡Œå‡ºé”™ï¼Œé”™è¯¯å¦‚ä¸‹:<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210224214812.png"><br>ç¿»è¯‘è¿‡æ¥å°±æ˜¯<code>å‘ç”Ÿç®—æœ¯æº¢å‡ºæˆ–å…¶ä»–ç®—æœ¯å¼‚å¸¸</code>,ç½‘ä¸Šæœç´¢åˆ°çš„èµ„æ–™ä¹Ÿä¸å°½äººæ„,äºæ˜¯è‡ªå·±æ‘¸ç´¢,æŸ¥æ¸…æ¥šäº†é”™è¯¯åŸå› ,è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><h4 id="é”™è¯¯é‡ç°"><a href="#é”™è¯¯é‡ç°" class="headerlink" title="é”™è¯¯é‡ç°"></a>é”™è¯¯é‡ç°</h4><ul><li>æ–°å»ºä¸´æ—¶è¡¨ï¼Œè¡¨ç»“æ„å¦‚ä¸‹  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &quot;TEST    &quot;.&quot;TABLE2&quot; ( &quot;ID&quot; <span class="type">VARCHAR</span>(<span class="number">50</span>) , &quot;NAME&quot; <span class="type">VARCHAR</span>(<span class="number">50</span>) , &quot;VALUE&quot; <span class="type">DECIMAL</span>(<span class="number">16</span>, <span class="number">8</span>)) <span class="keyword">IN</span> &quot;USERSPACE1&quot; ORGANIZE <span class="keyword">BY</span> <span class="type">ROW</span> ;</span><br></pre></td></tr></table></figure></li><li>æ’å…¥æµ‹è¯•æ•°æ®  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> TEST.TABLE2 <span class="keyword">VALUES</span>(CONCAT(HEX(RAND()),HEX(RAND())),<span class="string">&#x27;å‚æ•°1&#x27;</span>,<span class="number">1.24342</span>)</span><br></pre></td></tr></table></figure></li><li>æ‰§è¡Œsql  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CAST</span>(<span class="number">4324432.13134</span><span class="operator">/</span><span class="number">365</span> <span class="keyword">AS</span> <span class="type">DECIMAL</span>(<span class="number">17</span>,<span class="number">4</span>)) <span class="operator">*</span> NVL(<span class="keyword">VALUE</span>,<span class="number">1</span>) <span class="operator">*</span> NVL(<span class="keyword">VALUE</span>,<span class="number">1</span>) <span class="operator">*</span> NVL(<span class="keyword">VALUE</span>,<span class="number">1</span>) <span class="keyword">FROM</span> TABLE2</span><br></pre></td></tr></table></figure></li><li>æ‰§è¡Œé”™è¯¯ä¸é¢„æœŸä¸€è‡´</li></ul><h4 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h4><ul><li>å°†å„éƒ¨åˆ†æ•°æ®å•ç‹¬æ‹¿å‡ºæ¥æŸ¥è¯¢  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CAST</span>(<span class="number">4324432.13134</span><span class="operator">/</span><span class="number">365</span> <span class="keyword">AS</span> <span class="type">DECIMAL</span>(<span class="number">17</span>,<span class="number">4</span>)) ,NVL(<span class="keyword">VALUE</span>,<span class="number">1</span>) , NVL(<span class="keyword">VALUE</span>,<span class="number">1</span>) , NVL(<span class="keyword">VALUE</span>,<span class="number">1</span>) <span class="keyword">FROM</span> TABLE2</span><br></pre></td></tr></table></figure>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210224221451.png"></li><li>æœ€å¼€å§‹ä¼šè¯¯ä»¥ä¸ºæ˜¯æ•°æ®é”™è¯¯ï¼Œäºæ˜¯ç›´æ¥å°†æ•°æ®å†™æ­»å‚ä¸è¿ç®—<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210224221611.png"></li><li>è¿™ä¸ªæ—¶å€™å°±å¾ˆç–‘æƒ‘äº†ï¼Œæ˜æ˜æ˜¯åŒæ ·çš„æ•°æ®ï¼Œä¸ºå•¥å°±ä¼šæŠ¥é”™å‘¢ï¼Ÿäºæ˜¯å¼€å§‹æ€€ç–‘æ˜¯ä¸æ˜¯æ•°æ®ç±»å‹å‡ºäº†é—®é¢˜ã€‚</li><li>äºæ˜¯å°†æ•°æ®å…¨éƒ¨è¿›è¡Œç±»å‹è½¬æ¢,å‘ç°èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œä¸æŠ¥é”™ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CAST</span>(<span class="number">4324432.13134</span><span class="operator">/</span><span class="number">365</span> <span class="keyword">AS</span> <span class="type">DECIMAL</span>(<span class="number">16</span>,<span class="number">4</span>)) <span class="operator">*</span> <span class="built_in">CAST</span>(NVL(<span class="keyword">VALUE</span>,<span class="number">1</span>) <span class="keyword">AS</span> <span class="type">DECIMAL</span>(<span class="number">16</span>,<span class="number">4</span>)) <span class="operator">*</span> <span class="built_in">CAST</span>(NVL(<span class="keyword">VALUE</span>,<span class="number">1</span>) <span class="keyword">AS</span> <span class="type">DECIMAL</span>(<span class="number">16</span>,<span class="number">4</span>)) <span class="operator">*</span> <span class="built_in">CAST</span>(NVL(<span class="keyword">VALUE</span>,<span class="number">1</span>) <span class="keyword">AS</span> <span class="type">DECIMAL</span>(<span class="number">16</span>,<span class="number">4</span>)) <span class="keyword">FROM</span> TABLE2</span><br></pre></td></tr></table></figure></li><li>æœ€åæ¯”è¾ƒå¼ºè½¬ä¹‹å‰å’Œå¼ºè½¬ä¹‹åæ•°æ®ç±»å‹çš„å·®å¼‚ï¼Œæ‰¾åˆ°é—®é¢˜æ‰€åœ¨äº†ã€‚</li></ul><h4 id="åŸå› å‰–æ"><a href="#åŸå› å‰–æ" class="headerlink" title="åŸå› å‰–æ"></a>åŸå› å‰–æ</h4><ul><li>ç±»å‹è½¬æ¢ä¹‹å‰æ˜¯<code>DECIMAL(16,8)</code>,è½¬æ¢ä¹‹åæ˜¯<code>DECIMAL(16,4)</code>ã€‚å·®è·åœ¨äºå°æ•°ä½è¿›åº¦ç›¸å·®4ä½ã€‚</li><li>è¿™æ—¶å€™åº”è¯¥å¾ˆæ¸…æ™°äº†ï¼ŒåŸå› å°±æ˜¯<code>4ä½å°æ•°ç²¾åº¦ X 8ä½å°æ•°ç²¾åº¦ X 8ä½å°æ•°ç²¾åº¦ X 8ä½å°æ•°ç²¾åº¦</code>å¯¼è‡´æœ€åçš„æ•°æ®ç²¾åº¦è¶…é•¿ã€‚è€ŒDECIMALæœ€å¤§é•¿åº¦ä¸º31ä½ã€‚</li></ul><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>é”™è¯¯åŸå› è™½ç„¶å¾ˆå°ï¼Œä½†æ˜¯å®šä½é”™è¯¯çš„æ­¥éª¤æ¯”è¾ƒéº»çƒ¦ã€‚é‡åˆ°é—®é¢˜ï¼Œæ‰¾åˆ°é—®é¢˜æ‰€åœ¨æ˜¯æœ€é‡è¦çš„ä¸€æ­¥!</p></div>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5åˆ†é’Ÿæ­å»ºå¯¹è±¡å­˜å‚¨æœåŠ¡!</title>
      <link href="/5%E5%88%86%E9%92%9F%E6%90%AD%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1/"/>
      <url>/5%E5%88%86%E9%92%9F%E6%90%AD%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p>å¯¹è±¡å­˜å‚¨æœåŠ¡ç”¨æ¥å­˜å‚¨å„ç±»æ–‡ä»¶ï¼Œä¸€èˆ¬ä½œç”¨äºå­˜å‚¨å›¾ç‰‡ã€‚å¸¸ç”¨çš„å¯¹è±¡å­˜å‚¨æœåŠ¡æœ‰OSSï¼Œåƒé˜¿é‡Œäº‘ã€è…¾è®¯ã€ä¸ƒç‰›äº‘ç­‰ç­‰éƒ½æœ‰OSSå¯¹è±¡å­˜å‚¨æœåŠ¡ã€‚è™½ç„¶è¿™äº›OSSä½¿ç”¨ä¹Ÿå¾ˆä¾¿æ·ï¼Œä½†æ¯•ç«Ÿè¿˜æ˜¯è‡ªå·±æ­å»ºçš„æ¯”è¾ƒé¦™ï¼Œæ­å»ºå¥½äº†ï¼Œä¹Ÿä¸éœ€è¦è¿æ¥å¤–ç½‘å°±èƒ½ä½¿ç”¨ï¼Œå®‰å…¨åˆæ–¹ä¾¿ã€‚</p><span id="more"></span><h4 id="MinIOä»‹ç»"><a href="#MinIOä»‹ç»" class="headerlink" title="MinIOä»‹ç»"></a>MinIOä»‹ç»</h4><p>MinIOæ˜¯åŸºäºGoè¯­è¨€å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œéå¸¸é€‚åˆäºå­˜å‚¨å¤§å®¹é‡éç»“æ„åŒ–çš„æ•°æ®ï¼Œæ¯”å¦‚å›¾ç‰‡ã€è§†é¢‘ã€æ—¥å¿—ç­‰æ–‡ä»¶ã€‚è€Œä¸”MinIOè™½ç„¶è½»é‡ï¼Œä½†äº”è„ä¿±å…¨ï¼Œå®‰è£…ä½¿ç”¨ä¹Ÿååˆ†æ–¹ä¾¿ã€‚</p><h4 id="ä½¿ç”¨Dockerå®‰è£…åŠéƒ¨ç½²"><a href="#ä½¿ç”¨Dockerå®‰è£…åŠéƒ¨ç½²" class="headerlink" title="ä½¿ç”¨Dockerå®‰è£…åŠéƒ¨ç½²"></a>ä½¿ç”¨Dockerå®‰è£…åŠéƒ¨ç½²</h4><ul><li>ä¸‹è½½é•œåƒ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull minio/minio</span><br></pre></td></tr></table></figure></li><li>è¿è¡ŒMinIOå¹¶æŒ‚è½½ç›®å½•  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> docker run -p 9090:9000 --name minio \</span><br><span class="line">-v /root/mizhuo/docker/minio/data:/data \</span><br><span class="line">-v /root/mizhuo/docker/minio/config:/root/.minio \</span><br><span class="line">-d minio/minio server /data</span><br></pre></td></tr></table></figure></li><li>æµè§ˆå™¨è®¿é—®MinIOç½‘é¡µç«¯,é»˜è®¤Access Keyå’ŒSecretéƒ½æ˜¯<code>minioadmin</code><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210115215929.png"></li></ul><h4 id="ä¸Šä¼ æ–‡ä»¶"><a href="#ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="ä¸Šä¼ æ–‡ä»¶"></a>ä¸Šä¼ æ–‡ä»¶</h4><ul><li>æ–°å»ºå­˜å‚¨æ¡¶<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210115220417.png"></li><li>å­˜å‚¨æ¡¶åˆ›å»ºå®Œæˆåï¼Œä¸Šä¼ æ–‡ä»¶<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210115220537.png"></li></ul><h4 id="æµè§ˆæ–‡ä»¶"><a href="#æµè§ˆæ–‡ä»¶" class="headerlink" title="æµè§ˆæ–‡ä»¶"></a>æµè§ˆæ–‡ä»¶</h4><ul><li>å›¾ç‰‡ä¸Šä¼ å®Œæˆåï¼Œå¯ä»¥æ‹·è´é“¾æ¥è·å–ä¸´æ—¶è®¿é—®è·¯å¾„ï¼Œæ—¶é—´å¯ä»¥è‡ªè¡Œé€‰æ‹©<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210115220934.png"></li><li>æƒ³è·å–ä¸€ä¸ªæ°¸ä¹…çš„è®¿é—®è·¯å¾„ï¼Œéœ€è¦ä¿®æ”¹å­˜å‚¨æ¡¶ç­–ç•¥ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210115221217.png"></li><li>è¿™é‡Œå¯ä»¥é€‰æ‹©è®¿é—®ç­–ç•¥ï¼Œåªè¯»ã€åªå†™ã€å¯è¯»å¯å†™ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©åªè¯»å³å¯ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè®¿é—®å‰ç¼€éœ€è¦è®¾ç½®ä¸º<code>*.*</code>ï¼Œå¦åˆ™ä¼šæ— æ³•è®¿é—®<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210115221236.png"></li><li>è®¾ç½®å®Œä¹‹åï¼Œé€šè¿‡å‰é¢çš„è·¯å¾„å°±å¯ä»¥æŸ¥çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶äº†<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210115221526.png"></li><li>æµè§ˆå›¾ç‰‡<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210115221613.png"><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>è‡³æ­¤,ä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡å­˜å‚¨æœåŠ¡å°±å·²ç»æ­å»ºå®Œæˆäº†ã€‚å¦‚æœæƒ³æ•´åˆåˆ°Springé¡¹ç›®ä¸­ä¹Ÿæ˜¯å¾ˆç®€å•çš„,è¿™é‡Œå°±ä¸å†æ¼”ç¤º,æœ‰éœ€è¦çš„å°ä¼™ä¼´å¯ä»¥æŸ¥çœ‹MinIOçš„java APIã€‚</p></div></li></ul>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Cloud Streamå®šæ—¶ä»»åŠ¡</title>
      <link href="/Spring%20Cloud%20Stream%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"/>
      <url>/Spring%20Cloud%20Stream%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å¼€å‘ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚æ¯”å¦‚ï¼Œåœ¨ç³»ç»Ÿä¸­è®¾å®šä¸¤ä¸ªå°æ—¶åæé†’æˆ‘åšXXäº‹æƒ…ã€‚å¯¹äºè¿™æ ·çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Spring Cloud Streamæ­é…æ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥å¾ˆå¥½çš„è¿›è¡Œå¤„ç†ã€‚</p><span id="more"></span><h4 id="å®‰è£…RabbitMqå»¶è¿Ÿæ¶ˆæ¯æ’ä»¶"><a href="#å®‰è£…RabbitMqå»¶è¿Ÿæ¶ˆæ¯æ’ä»¶" class="headerlink" title="å®‰è£…RabbitMqå»¶è¿Ÿæ¶ˆæ¯æ’ä»¶"></a>å®‰è£…RabbitMqå»¶è¿Ÿæ¶ˆæ¯æ’ä»¶</h4><ul><li>RabbitMqçš„æ’ä»¶æˆ‘ä»¬å¯ä»¥åœ¨<a href="https://www.rabbitmq.com/community-plugins.html">Rabbitå®˜ç½‘</a>è¿›è¡Œä¸‹è½½ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210105101230.png"></li><li>ä¹Ÿå¯ä»¥ç›´æ¥æ‹·è´é“¾æ¥åœ¨æœåŠ¡å™¨ä¸Šä¸‹è½½æ’ä»¶<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@mizhuo docker]# wget https://github.com/rabbitmq/rabbitmq-delayed-message-exchange/releases/download/3.8.9/rabbitmq_delayed_message_exchange-3.8.9-0199d11c.ez</span><br><span class="line">--2021-01-05 09:00:52--  https://github.com/rabbitmq/rabbitmq-delayed-message-exchange/releases/download/3.8.9/rabbitmq_delayed_message_exchange-3.8.9-0199d11c.ez</span><br><span class="line">æ­£åœ¨è§£æä¸»æœº github.com (github.com)... 52.74.223.119</span><br><span class="line">æ­£åœ¨è¿æ¥ github.com (github.com)|52.74.223.119|:443... å·²è¿æ¥ã€‚</span><br><span class="line">å·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 302 Found</span><br><span class="line">ä½ç½®ï¼šhttps://github-production-release-asset-2e65be.s3.amazonaws.com/32327910/fb8cf200-1884-11eb-8a3a-86e8864bf669?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20210105%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20210105T005943Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=2d886a4ad79f1444a8c709b84b24e4bd811e8de0d4502c91216634701dbdb6f4&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=32327910&amp;response-content-disposition=attachment%3B%20filename%3Drabbitmq_delayed_message_exchange-3.8.9-0199d11c.ez&amp;response-content-type=application%2Foctet-stream [è·Ÿéšè‡³æ–°çš„ URL]</span><br><span class="line">--2021-01-05 09:00:53--  https://github-production-release-asset-2e65be.s3.amazonaws.com/32327910/fb8cf200-1884-11eb-8a3a-86e8864bf669?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20210105%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20210105T005943Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=2d886a4ad79f1444a8c709b84b24e4bd811e8de0d4502c91216634701dbdb6f4&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=32327910&amp;response-content-disposition=attachment%3B%20filename%3Drabbitmq_delayed_message_exchange-3.8.9-0199d11c.ez&amp;response-content-type=application%2Foctet-stream</span><br><span class="line">æ­£åœ¨è§£æä¸»æœº github-production-release-asset-2e65be.s3.amazonaws.com (github-production-release-asset-2e65be.s3.amazonaws.com)... 52.216.138.115</span><br><span class="line">æ­£åœ¨è¿æ¥ github-production-release-asset-2e65be.s3.amazonaws.com (github-production-release-asset-2e65be.s3.amazonaws.com)|52.216.138.115|:443... å·²è¿æ¥ã€‚</span><br><span class="line">å·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 200 OK</span><br><span class="line">é•¿åº¦ï¼š51047 (50K) [application/octet-stream]</span><br><span class="line">æ­£åœ¨ä¿å­˜è‡³: â€œrabbitmq_delayed_message_exchange-3.8.9-0199d11c.ezâ€</span><br><span class="line"></span><br><span class="line">100%[===========================================================================================================================================&gt;] 51,047       236KB/s ç”¨æ—¶ 0.2s</span><br><span class="line"></span><br><span class="line">2021-01-05 09:00:54 (236 KB/s) - å·²ä¿å­˜ â€œrabbitmq_delayed_message_exchange-3.8.9-0199d11c.ezâ€ [51047/51047])</span><br></pre></td></tr></table></figure></li><li>å°†æ’ä»¶å¤åˆ¶åˆ°RabbitMqçš„å®‰è£…ç›®å½•ä¸‹çš„<code>plugins</code>æ–‡ä»¶å¤¹<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@mizhuo rabbit-plugins]# docker cp rabbitmq_delayed_message_exchange-3.8.9-0199d11c.ez rabbitmq:/plugins</span><br></pre></td></tr></table></figure></li><li>å¯ç”¨æ’ä»¶<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@mizhuo rabbit-plugins]# docker exec -it rabbitmq /bin/bash</span><br><span class="line">root@fdda6c7b343f:/plugins# chmod 777 /plugins/rabbitmq_delayed_message_exchange-3.8.9-0199d11c.ez</span><br><span class="line">root@fdda6c7b343f:/plugins# rabbitmq-plugins enable rabbitmq_event_exchange</span><br><span class="line">Enabling plugins on node rabbit@fdda6c7b343f:</span><br><span class="line">rabbitmq_event_exchange</span><br><span class="line">The following plugins have been configured:</span><br><span class="line">  rabbitmq_event_exchange</span><br><span class="line">  rabbitmq_management</span><br><span class="line">  rabbitmq_management_agent</span><br><span class="line">  rabbitmq_prometheus</span><br><span class="line">  rabbitmq_web_dispatch</span><br><span class="line">Applying plugin configuration to rabbit@fdda6c7b343f...</span><br><span class="line">The following plugins have been enabled:</span><br><span class="line">  rabbitmq_event_exchange</span><br><span class="line"></span><br><span class="line">started 1 plugins.</span><br></pre></td></tr></table></figure><div class="note red icon-padding flat"><i class="note-icon fa fa-triangle-exclamation"></i><p>æ³¨æ„:ä¿®æ”¹æ–‡ä»¶æƒé™å¾ˆé‡è¦ï¼Œå¦åˆ™ä¼šå¯¼è‡´å¯åŠ¨å¤±è´¥ã€‚å‡ºç°ä¸‹å›¾ä¸­<code>x-delayed-message</code>æ‰è¯´æ˜å¯ç”¨æˆåŠŸã€‚</p></div><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210105205547.png"></li></ul><h4 id="é¡¹ç›®ä¸­å¼€å¯æ¶ˆæ¯å»¶è¿ŸåŠŸèƒ½"><a href="#é¡¹ç›®ä¸­å¼€å¯æ¶ˆæ¯å»¶è¿ŸåŠŸèƒ½" class="headerlink" title="é¡¹ç›®ä¸­å¼€å¯æ¶ˆæ¯å»¶è¿ŸåŠŸèƒ½"></a>é¡¹ç›®ä¸­å¼€å¯æ¶ˆæ¯å»¶è¿ŸåŠŸèƒ½</h4><ul><li>é…ç½®ymlæ–‡ä»¶<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">admin</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">stream:</span></span><br><span class="line">      <span class="attr">bindings:</span></span><br><span class="line">        <span class="attr">mizhuo-input:</span></span><br><span class="line">          <span class="attr">destination:</span> <span class="string">mizhuo_delay</span></span><br><span class="line">        <span class="attr">mizhuo-output:</span></span><br><span class="line">          <span class="attr">destination:</span> <span class="string">mizhuo_delay</span></span><br><span class="line">      <span class="attr">rabbit:</span></span><br><span class="line">        <span class="attr">bindings:</span></span><br><span class="line">          <span class="attr">mizhuo-input:</span></span><br><span class="line">            <span class="attr">consumer:</span></span><br><span class="line">              <span class="attr">delayed-exchange:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">mizhuo-output:</span></span><br><span class="line">            <span class="attr">producer:</span></span><br><span class="line">              <span class="attr">delayed-exchange:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li>åˆ›å»ºé€šé“<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> site.mizhuo.stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.stream.annotation.Input;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.stream.annotation.Output;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.MessageChannel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.messaging.SubscribableChannel;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Mizhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>: 2021/1/4 9:08 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyChannel</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">INPUT</span> <span class="operator">=</span> <span class="string">&quot;mizhuo-input&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">OUTPUT</span> <span class="operator">=</span> <span class="string">&quot;mizhuo-output&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Output(OUTPUT)</span></span><br><span class="line">    MessageChannel <span class="title function_">output</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Input(INPUT)</span></span><br><span class="line">    SubscribableChannel <span class="title function_">input</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ¥æ”¶æ¶ˆæ¯<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> site.mizhuo.stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.stream.annotation.EnableBinding;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.stream.annotation.StreamListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.stream.messaging.Sink;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Mizhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>: 2021/1/4 7:59 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableBinding(MyChannel.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MsgReceiver</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(MsgReceiver.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@StreamListener(MyChannel.INPUT)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive</span><span class="params">(Object o)</span>&#123;</span><br><span class="line">         <span class="type">DateFormat</span> <span class="variable">format</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        logger.info(<span class="string">&quot;æ¥æ”¶æ—¶é—´:&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span> + format.format(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">        logger.info(<span class="string">&quot;æ¥æ”¶å†…å®¹:&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span> + o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å‘é€æ¶ˆæ¯<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> site.mizhuo.stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.integration.support.MessageBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Mizhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>: 2021/1/4 9:13 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span>  LoggerFactory.getLogger(HelloController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MyChannel channel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello/&#123;msg&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">(<span class="meta">@PathVariable</span> String msg)</span>&#123;</span><br><span class="line">        <span class="type">DateFormat</span> <span class="variable">format</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        logger.info(<span class="string">&quot;è¯·æ±‚æ—¶é—´:&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span> + format.format(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">        channel.output().send(MessageBuilder.withPayload(msg).setHeader(<span class="string">&quot;x-delay&quot;</span>,<span class="number">5000</span>).build());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="è®¿é—®æ¥å£å¹¶æ‰“å°æ—¥å¿—"><a href="#è®¿é—®æ¥å£å¹¶æ‰“å°æ—¥å¿—" class="headerlink" title="è®¿é—®æ¥å£å¹¶æ‰“å°æ—¥å¿—"></a>è®¿é—®æ¥å£å¹¶æ‰“å°æ—¥å¿—</h4><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210105210723.png"><br>å¯ä»¥çœ‹å‡ºæ¶ˆæ¯å»¶è¿ŸåŠŸèƒ½å¼€å¯æˆåŠŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> RabbitMq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nativeå…³é”®å­—</title>
      <link href="/Native%E5%85%B3%E9%94%AE%E5%AD%97/"/>
      <url>/Native%E5%85%B3%E9%94%AE%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<p>è¯´åˆ°<code>native</code>å…³é”®å­—ï¼Œå¤§å®¶å¯èƒ½æ²¡æ€ä¹ˆå…³æ³¨è¿‡ï¼Œä½†æ˜¯è‚¯å®šéƒ½è§è¿‡ï¼Œåœ¨Javaå¾ˆå¤šæ–¹æ³•ä¸­ï¼Œéƒ½æœ‰ç”¨<code>native</code>ä¿®é¥°çš„æ–¹æ³•ã€‚</p><span id="more"></span><p>æ¯”å¦‚åœ¨<code>Object</code>ç±»ä¸­å°±æœ‰å¾ˆå¤šnativeæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> Class&lt;?&gt; getClass();</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">native</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">native</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">notifyAll</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">wait</span><span class="params">(<span class="type">long</span> timeout)</span> <span class="keyword">throws</span> InterruptedException;</span><br></pre></td></tr></table></figure><p>é‚£ä»€ä¹ˆæ˜¯nativeæ–¹æ³•å‘¢ï¼Ÿæ‰€è°“native,å…¶å®æ˜¯<code>JNI(java native interface)</code>,æ˜¯javaä½¿ç”¨å…¶ä»–è¯­è¨€ç¼–å†™çš„ä»£ç å’Œä»£ç åº“çš„ä¸€ä¸ªæ¸ é“ï¼Œä»¥å¼¥è¡¥javaæ— æ³•ç›´æ¥è®¿é—®æ“ä½œç³»ç»Ÿåº•å±‚ã€å’Œè¿è¡Œé€Ÿåº¦æ…¢çš„ç¼ºé™·ã€‚</p><h4 id="é€šè¿‡JNIè°ƒç”¨C-ä»£ç "><a href="#é€šè¿‡JNIè°ƒç”¨C-ä»£ç " class="headerlink" title="é€šè¿‡JNIè°ƒç”¨C++ä»£ç "></a>é€šè¿‡JNIè°ƒç”¨C++ä»£ç </h4><ul><li>ç¼–å†™Javaä»£ç <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Mizhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>: 2020/12/19 9:25 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: nativeæ–¹æ³•æµ‹è¯•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NativeTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">static</span> String <span class="title function_">callBack</span><span class="params">(String in)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.load(<span class="string">&quot;/Users/mizhuo/WorkPlace/study-project/tmp/NativeTest/NativeTest.dll&quot;</span>);</span><br><span class="line">        sayHello();</span><br><span class="line">        System.out.println(callBack(<span class="string">&quot;ä½ å¥½å‘€!&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ç¼–è¯‘Javaä»£ç ï¼Œç”Ÿæˆå¤´æ–‡ä»¶ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javah -jni com.example.demo.NativeTest</span><br></pre></td></tr></table></figure><div class="note red icon-padding flat"><i class="note-icon fa fa-triangle-exclamation"></i><p>æ³¨æ„:è¦åœ¨é¡¹ç›®src&#x2F;main&#x2F;javaç›®å½•ä¸‹æ‰§è¡Œï¼Œå¦åˆ™å¯èƒ½å‡ºç°æ‰¾ä¸åˆ°ç±»çš„æƒ…å†µã€‚</p></div><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201220083617.png"><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201220083540.png"><br>æŸ¥çœ‹å¤´æ–‡ä»¶ï¼Œå¯è§<code>sayHello</code>å’Œ<code>callBack</code>æ–¹æ³•<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* DO NOT EDIT THIS FILE - it is machine generated */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;jni.h&gt;</span></span></span><br><span class="line"><span class="comment">/* Header for class com_example_demo_NativeTest */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> _Included_com_example_demo_NativeTest</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _Included_com_example_demo_NativeTest</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Class:     com_example_demo_NativeTest</span></span><br><span class="line"><span class="comment"> * Method:    sayHello</span></span><br><span class="line"><span class="comment"> * Signature: ()V</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">JNIEXPORT <span class="type">void</span> JNICALL <span class="title">Java_com_example_demo_NativeTest_sayHello</span></span></span><br><span class="line"><span class="function">  <span class="params">(JNIEnv *, jclass)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Class:     com_example_demo_NativeTest</span></span><br><span class="line"><span class="comment"> * Method:    callBack</span></span><br><span class="line"><span class="comment"> * Signature: (Ljava/lang/String;)Ljava/lang/String;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">JNIEXPORT jstring JNICALL <span class="title">Java_com_example_demo_NativeTest_callBack</span></span></span><br><span class="line"><span class="function">  <span class="params">(JNIEnv *, jclass, jstring)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure></li><li>ç¼–å†™cppæ–‡ä»¶ï¼Œå®ç°ä¸¤ä¸ªæ–¹æ³•<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by è¿·æµŠ on 2020/12/20.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;com_example_demo_NativeTest.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Java_com_example_demo_NativeTest_sayHello</span><span class="params">(JNIEnv *, jclass)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello World!Here is C++&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">jstring <span class="title">Java_com_example_demo_NativeTest_callBack</span><span class="params">(JNIEnv *, jclass, jstring str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><strong>æ³¨æ„:éœ€å¼•å…¥<code>jni.h</code>ä»¥åŠ<code>jni_md.h</code>ä¸¤ä¸ªå¤´æ–‡ä»¶</strong><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201220113649.png"><br>å¤´æ–‡ä»¶åœ¨JAVAHOMEç›®å½•ä¸‹<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201220113848.png"></li><li>ç¼–è¯‘åŠ¨æ€é“¾æ¥åº“<br>æˆ‘ä½¿ç”¨çš„æ˜¯Clionæ¥ç¼–è¯‘åŠ¨æ€é“¾æ¥åº“ï¼Œéœ€è¦ä¿®æ”¹<code>CMakeLists.txt</code>æ–‡ä»¶ï¼Œæ·»åŠ <code>add_library(c_project SHARED com_example_demo_NativeTest.cpp)</code>ã€‚<br>ç¼–è¯‘å¯ä»¥å¾—åˆ°åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ï¼ŒMACä¸‹æ˜¯<strong>dylib</strong>æ–‡ä»¶,Windowsæ˜¯<strong>dll</strong>æ–‡ä»¶ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201220114145.png"></li><li>javaé“¾æ¥dylibæ–‡ä»¶å¹¶è°ƒç”¨æ–¹æ³•<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201220114436.png"><br>å¯ä»¥çœ‹å‡ºC++å®ç°çš„æ–¹æ³•è¢«æˆåŠŸè¿è¡Œã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Native </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰ç±»åŠ è½½å™¨</title>
      <link href="/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/"/>
      <url>/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="ç±»åŠ è½½å™¨"><a href="#ç±»åŠ è½½å™¨" class="headerlink" title="ç±»åŠ è½½å™¨"></a>ç±»åŠ è½½å™¨</h4><p>Javaç±»åŠ è½½è¿‡ç¨‹ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯é€šè¿‡ç±»åŠ è½½å™¨åŠ è½½<code>.class</code>æ–‡ä»¶ï¼Œè·å–å…¶äºŒè¿›åˆ¶æµ,å¹¶åœ¨å†…å­˜ä¸­åˆ›å»ºå¯¹è±¡çš„Classå¯¹è±¡ã€‚ç±»åŠ è½½å™¨ä¸»è¦æœ‰å››ç§ã€‚</p><span id="more"></span><ul><li>å¯åŠ¨(Bootstrap)ç±»åŠ è½½å™¨<br>  ç”¨æ¥åŠ è½½Javaæ ¸å¿ƒç±»åº“ï¼Œç”±C++è¯­è¨€å®ç°ï¼Œæ˜¯è™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†ï¼Œæ— æ³•è¢«javaç¨‹åºç›´æ¥å¼•ç”¨ã€‚</li><li>æ‰©å±•(Extension)ç±»åŠ è½½å™¨<br>  ç”¨æ¥åŠ è½½javaæ‰©å±•åº“ï¼Œjavaè™šæ‹Ÿæœºä¼šæä¾›æ‰©å±•ç±»åº“ç›®å½•ï¼Œè¯¥ç±»åŠ è½½å™¨åœ¨ç›®å½•ä¸­æŸ¥è¯¢å¹¶åŠ è½½javaç±»ã€‚</li><li>ç³»ç»Ÿ(System)ç±»åŠ è½½å™¨<br>  æ ¹æ®javaåº”ç”¨çš„ç±»è·¯å¾„æ¥åŠ è½½javaç±»ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œjavaåº”ç”¨çš„ç±»éƒ½æ˜¯å®ƒæ¥å®ŒæˆåŠ è½½çš„ã€‚</li><li>è‡ªå®šä¹‰(Custom)ç±»åŠ è½½å™¨<br>  é€šè¿‡ç»§æ‰¿<code>java.lang.ClassLoader</code>ç±»æ¥å®ç°ã€‚</li></ul><h4 id="åŒäº²å§”æ´¾æ¨¡å¼"><a href="#åŒäº²å§”æ´¾æ¨¡å¼" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å¼"></a>åŒäº²å§”æ´¾æ¨¡å¼</h4><p><code>åŒäº²å§”æ´¾æ¨¡å¼</code>è¦æ±‚é™¤äº†é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨å¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½åº”å½“æœ‰è‡ªå·±çš„çˆ¶ç±»åŠ è½½å™¨ã€‚</p><ul><li>å·¥ä½œåŸç†<br>  å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½çš„è¯·æ±‚ï¼Œå®ƒä¸ä¼šè‡ªå·±ç›´æ¥å»åŠ è½½ç±»ï¼Œè€Œæ˜¯å°†è¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»åŠ è½½å™¨å»æ‰§è¡Œï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨ä¹Ÿå­˜åœ¨çˆ¶ç±»åŠ è½½å™¨ï¼Œåˆ™ä¸€å±‚å±‚å‘ä¸Šå§”æ‰˜ç›´åˆ°å®Œæˆç±»åŠ è½½ä»»åŠ¡ã€‚è‹¥çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®ŒæˆåŠ è½½ä»»åŠ¡ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•åŠ è½½ï¼Œè¿™å°±æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201213230046.png"><br><strong>æ¥æº:<a href="https://blog.csdn.net/javazejian/article/details/73413292">https://blog.csdn.net/javazejian/article/details/73413292</a></strong></li><li>ä¸ºä½•ä½¿ç”¨åŒäº²å§”æ´¾æ¨¡å¼<br>é‡‡ç”¨åŒäº²å§”æ´¾æ¨¡å¼æœ€å¤§çš„å¥½å¤„å°±æ˜¯ç±»åŠ è½½çš„å±‚çº§å…³ç³»ï¼Œé€šè¿‡è¿™ç§å±‚çº§å…³ç³»ï¼Œå¯ä»¥æœ‰æ•ˆçš„é¿å…ç±»çš„é‡å¤åŠ è½½é—®é¢˜ã€‚å› ä¸ºçˆ¶ç±»èƒ½åŠ è½½çš„è¯ï¼Œå­ç±»å°±ä¸ä¼šæœ‰æœºä¼šå»åŠ è½½äº†ï¼Œè¿™æ ·èƒ½ä¿è¯åŒä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½çš„ç›¸åŒçš„å…¨é™å®šç±»åçš„ç±»æ˜¯åŒä¸€ä¸ªç±»ã€‚</li></ul><h4 id="ClassLoaderæºç è§£æ"><a href="#ClassLoaderæºç è§£æ" class="headerlink" title="ClassLoaderæºç è§£æ"></a>ClassLoaderæºç è§£æ</h4><ul><li><strong><code>loadClass</code></strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="type">boolean</span> resolve)</span><br><span class="line">        <span class="keyword">throws</span> ClassNotFoundException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;</span><br><span class="line">            <span class="comment">//å…ˆåˆ¤æ–­è¯¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½</span></span><br><span class="line">            Class&lt;?&gt; c = findLoadedClass(name);</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">long</span> <span class="variable">t0</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œåˆ™å§”æ‰˜çˆ¶ç±»åŠ è½½å™¨åŠ è½½</span></span><br><span class="line">                    <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</span><br><span class="line">                        c = parent.loadClass(name, <span class="literal">false</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">//æ— çˆ¶ç±»åŠ è½½å™¨åˆ™ä½¿ç”¨å¯åŠ¨å™¨ç±»åŠ è½½å™¨</span></span><br><span class="line">                        c = findBootstrapClassOrNull(name);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                    <span class="comment">// ClassNotFoundException thrown if class not found</span></span><br><span class="line">                    <span class="comment">// from the non-null parent class loader</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (c == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">//çˆ¶ç±»åŠ è½½å™¨ä¹Ÿæ— æ³•åŠ è½½è¯¥ç±»ï¼Œåˆ™è‡ªè¡ŒåŠ è½½æ­¤ç±»ã€‚</span></span><br><span class="line">                    <span class="type">long</span> <span class="variable">t1</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">                    c = findClass(name);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// this is the defining class loader; record the stats</span></span><br><span class="line">                    sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClasses().increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (resolve) &#123;</span><br><span class="line">                resolveClass(c);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>  å¯ä»¥çœ‹å‡ºï¼Œå½“ç±»æ”¶åˆ°åŠ è½½è¯·æ±‚æ—¶ï¼Œå…ˆä»ç¼“å­˜æŸ¥æ‰¾è¯¥ç±»æ˜¯å¦å·²è¢«åŠ è½½ï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™äº¤äºçˆ¶ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œå€˜è‹¥ä¸å­˜åœ¨çˆ¶ç±»åŠ è½½å™¨åˆ™äº¤ç”±å¯åŠ¨ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œå¦‚æœéƒ½æ— æ³•åŠ è½½æˆåŠŸï¼Œåˆ™è¿”å›åˆ°è¢«è¯·æ±‚çš„ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œä¸»è¦æ˜¯ä½¿ç”¨<code>findClass</code>æ–¹æ³•è¿›è¡ŒåŠ è½½ã€‚</li><li><strong><code>findClass</code></strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ClassNotFoundException</span>(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  åœ¨è‡ªå®šä¹‰ç±»åŠ è½½æ—¶ï¼Œæ€»ä¼šå»ç»§æ‰¿ClassLoaderç±»ï¼ŒæŠŠè‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨é€»è¾‘å†™åœ¨findClass()æ–¹æ³•ä¸­ã€‚ä»å‰é¢çš„åˆ†æå¯çŸ¥ï¼ŒfindClass()æ–¹æ³•æ˜¯åœ¨loadClass()æ–¹æ³•ä¸­è¢«è°ƒç”¨çš„ï¼Œå½“loadClass()æ–¹æ³•ä¸­çˆ¶åŠ è½½å™¨åŠ è½½å¤±è´¥åï¼Œåˆ™ä¼šè°ƒç”¨è‡ªå·±çš„findClass()æ–¹æ³•æ¥å®Œæˆç±»åŠ è½½ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ä¹Ÿç¬¦åˆåŒäº²å§”æ‰˜æ¨¡å¼ã€‚</li><li><strong><code>defineClass</code></strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> Class&lt;?&gt; defineClass(String name, <span class="type">byte</span>[] b, <span class="type">int</span> off, <span class="type">int</span> len,</span><br><span class="line">                                        ProtectionDomain protectionDomain)</span><br><span class="line">    <span class="keyword">throws</span> ClassFormatError</span><br><span class="line">&#123;</span><br><span class="line">    protectionDomain = preDefineClass(name, protectionDomain);</span><br><span class="line">    <span class="type">String</span> <span class="variable">source</span> <span class="operator">=</span> defineClassSourceLocation(protectionDomain);</span><br><span class="line">    Class&lt;?&gt; c = defineClass1(name, b, off, len, protectionDomain, source);</span><br><span class="line">    postDefineClass(c, protectionDomain);</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  åŠ è½½å®ŒClassä¹‹åï¼Œéœ€å°†è¯»å–çš„å­—èŠ‚æµè½¬æ¢ä¸ºJVMèƒ½å¤Ÿè¯†åˆ«çš„Classå¯¹è±¡.</li><li><strong><code>resolveClass</code></strong>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">resolveClass</span><span class="params">(Class&lt;?&gt; c)</span> &#123;</span><br><span class="line">    resolveClass0(c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">resolveClass0</span><span class="params">(Class&lt;?&gt; c)</span>;</span><br></pre></td></tr></table></figure>  å¯¹å®Œæˆåˆ›å»ºçš„Classå¯¹è±¡è¿›è¡Œè§£æï¼Œä¸ºç±»çš„å˜é‡åˆ†é…å†…å­˜ã€åˆå§‹å€¼ç­‰ã€‚</li></ul><h4 id="è‡ªå®šä¹‰ç±»åŠ è½½å™¨"><a href="#è‡ªå®šä¹‰ç±»åŠ è½½å™¨" class="headerlink" title="è‡ªå®šä¹‰ç±»åŠ è½½å™¨"></a>è‡ªå®šä¹‰ç±»åŠ è½½å™¨</h4><ul><li>åˆ›å»ºæµ‹è¯•ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassTemp</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åŠ è½½ClassTempç±»æˆåŠŸ!&quot;</span>);</span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">loader</span> <span class="operator">=</span> ClassTemp.class.getClassLoader();</span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">parent</span> <span class="operator">=</span> loader.getParent();</span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">parent1</span> <span class="operator">=</span> parent.getParent();</span><br><span class="line">        System.out.println(<span class="string">&quot;åŠ è½½å™¨:&quot;</span> + loader);</span><br><span class="line">        System.out.println(<span class="string">&quot;çˆ¶ç±»åŠ è½½å™¨:&quot;</span> + parent);</span><br><span class="line">        System.out.println(<span class="string">&quot;çˆ·çˆ·åŠ è½½å™¨:&quot;</span> + parent1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ç¼–è¯‘æµ‹è¯•ç±»è·å–Classæ–‡ä»¶<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodeMacBook-Pro î‚° ~/WorkPlace/study-project/tmp/MyClassLoader î‚° vi *java</span><br><span class="line">mizhuo@mizhuodeMacBook-Pro î‚° ~/WorkPlace/study-project/tmp/MyClassLoader î‚° javac ClassTemp.java</span><br><span class="line">mizhuo@mizhuodeMacBook-Pro î‚° ~/WorkPlace/study-project/tmp/MyClassLoader î‚° ls</span><br><span class="line">ClassTemp.class ClassTemp.java</span><br></pre></td></tr></table></figure></li><li>åˆ›å»ºè‡ªå®šä¹‰ç±»åŠ è½½å™¨<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Mizhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>: 2020/12/19 4:53 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: è‡ªå®šä¹‰ç±»åŠ è½½å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClassLoader</span> <span class="keyword">extends</span> <span class="title class_">ClassLoader</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String _classPath;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClassLoader</span><span class="params">(String classPath)</span>&#123;</span><br><span class="line">        _classPath = classPath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">myClass</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//è·å–æ–‡ä»¶å­—èŠ‚æµ</span></span><br><span class="line">        <span class="type">byte</span>[] classDatas = getDatas();</span><br><span class="line">        <span class="keyword">if</span>(classDatas != <span class="literal">null</span>)&#123;</span><br><span class="line">            myClass = defineClass(name,classDatas,<span class="number">0</span>,classDatas.length);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> myClass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯»å–Classå­—èŠ‚æµ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] getDatas() &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(_classPath);</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(file.exists())&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                in = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">                outputStream = <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">                <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> ((size = in.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                    outputStream.write(buffer,<span class="number">0</span>,size);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    in.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> outputStream.toByteArray();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨åŠ è½½æµ‹è¯•ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">classPath</span> <span class="operator">=</span> <span class="string">&quot;/Users/mizhuo/WorkPlace/study-project/tmp/MyClassLoader/ClassTemp.class&quot;</span>;</span><br><span class="line">       <span class="type">MyClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClassLoader</span>(classPath);</span><br><span class="line">       Class&lt;?&gt; classTemp = classLoader.findClass(<span class="string">&quot;ClassTemp&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;</span> + classTemp.getClassLoader());</span><br><span class="line"></span><br><span class="line">       <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> classTemp.getDeclaredMethod(<span class="string">&quot;main&quot;</span>,String[].class);</span><br><span class="line">       <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> classTemp.newInstance();</span><br><span class="line">       String[] strings = &#123;&#125;;</span><br><span class="line">       method.invoke(obj, (Object)strings);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>ç±»åŠ è½½æˆåŠŸã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201219184435.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç±»åŠ è½½å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVM</title>
      <link href="/JVM/"/>
      <url>/JVM/</url>
      
        <content type="html"><![CDATA[<p><strong>JVM</strong>å³Javaè™šæ‹Ÿæœº(Java virtual machine)ï¼Œå…¶ç»„æˆéƒ¨åˆ†ä¸º:ç¨‹åºè®¡æ•°å™¨(Program Counter Register)ã€Javaè™šæ‹Ÿæœºæ ˆ(Java Virtual Machine Stacks)ã€æœ¬åœ°æ–¹æ³•æ ˆ(Native Method Stack)ã€Javaå †ï¼ˆJava Heap)ã€æ–¹æ³•åŒº(Methed Area)</p><span id="more"></span><h4 id="å„ç»„æˆéƒ¨åˆ†çš„ç”¨é€”"><a href="#å„ç»„æˆéƒ¨åˆ†çš„ç”¨é€”" class="headerlink" title="å„ç»„æˆéƒ¨åˆ†çš„ç”¨é€”"></a>å„ç»„æˆéƒ¨åˆ†çš„ç”¨é€”</h4><ul><li>ç¨‹åºè®¡æ•°å™¨<br>  <code>ç¨‹åºè®¡æ•°å™¨</code>æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªæŒ‡ç¤ºå™¨ï¼ŒæŒ‡å‘å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„ä½ç½®ã€‚å­—èŠ‚ç è§£ç å™¨å°±æ˜¯é€šè¿‡ä¿®æ”¹è¿™ä¸ªç¨‹åºè®¡æ•°å™¨æ¥é€‰å–ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚åƒå¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®ç°ã€‚</li><li>Javaè™šæ‹Ÿæœºæ ˆ<br>  <code>Javaè™šæ‹Ÿæœºæ ˆ</code>æè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼Œæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§(Stack Frame),åŒ…æ‹¬å‡½æ•°çš„è¿”å›åœ°å€å’Œå‚æ•°ã€ä¸´æ—¶å˜é‡ã€å‡½æ•°ä¸Šä¸‹æ–‡ç­‰ç­‰å†…å®¹ã€‚æ¯ä¸ªæ–¹æ³•çš„æ‰§è¡Œéƒ½å¯¹åº”ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­çš„å…¥æ ˆåˆ°å‡ºæ ˆã€‚</li><li>æœ¬åœ°æ–¹æ³•æ ˆ<br>  <code>æœ¬åœ°æ–¹æ³•æ ˆ</code>ä¸»è¦å­˜æ”¾ç”¨<code>native</code>å…³é”®å­—ä¿®é¥°çš„æ–¹æ³•ï¼Œå³æœ¬åœ°æ–¹æ³•ã€‚è€Œæœ¬åœ°æ–¹æ³•ä¸»è¦ç”¨äºåŠ è½½æ–‡ä»¶å’ŒåŠ¨æ€é“¾æ¥åº“ï¼Œç”±äºJavaæ— æ³•è®¿é—®æ“ä½œç³»ç»Ÿåº•å±‚ä¿¡æ¯ï¼Œè¿™æ—¶å€™å°±éœ€è¦å€ŸåŠ©Cè¯­è¨€æ¥å®ç°ï¼Œè€Œè¢«nativeä¿®é¥°çš„æ–¹æ³•å¯ä»¥è¢«Cè¯­è¨€é‡å†™ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹:<ul><li>åœ¨Javaç¨‹åºä¸­å£°æ˜nativeæ–¹æ³•ï¼Œç¼–è¯‘è¯¥Javaæ–‡ä»¶ï¼Œç”Ÿæˆclassæ–‡ä»¶ã€‚</li><li>ä½¿ç”¨javah -jniç¼–è¯‘classæ–‡ä»¶ï¼Œç”Ÿæˆä¸€ä¸ª.hæ–‡ä»¶ã€‚</li><li>å†™ä¸€ä¸ª.cppæ–‡ä»¶å®ç°ä¸Šä¸€æ­¥ä¸­.hæ–‡ä»¶ä¸­çš„æ–¹æ³•ã€‚</li><li>å°†ä¸Šä¸€æ­¥çš„.cppæ–‡ä»¶ç¼–è¯‘æˆåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶.dllã€‚</li><li>æœ€åå°±å¯ä»¥ä½¿ç”¨Systemæˆ–æ˜¯Runtimeä¸­çš„loadLibrary()æ–¹æ³•åŠ è½½ä¸Šä¸€æ­¥çš„äº§ç”Ÿçš„åŠ¨æ€è¿æ¥åº“æ–‡ä»¶äº†ã€‚</li></ul></li><li>Javaå †<br>  <code>Javaå †</code>æ˜¯Javaè™šæ‹Ÿæœºä¸­å†…å­˜æœ€å¤§çš„ä¸€å—,æ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ã€‚åœ¨javaè™šæ‹Ÿæœºå¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œç”¨äºå­˜æ”¾å¯¹è±¡å®ä¾‹ã€‚</li><li>æ–¹æ³•åŒº<br> <code>æ–¹æ³•åŒº</code>ç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚</li></ul><h4 id="ç±»åŠ è½½å™¨"><a href="#ç±»åŠ è½½å™¨" class="headerlink" title="ç±»åŠ è½½å™¨"></a>ç±»åŠ è½½å™¨</h4><p>å®ç°é€šè¿‡ç±»çš„å…¨é™å®šåè·å–è¯¥ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµçš„ä»£ç å—å«ç±»åŠ è½½å™¨ã€‚ç±»åŠ è½½å™¨ä¸»è¦æœ‰å››ç§ã€‚</p><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨<br>  ç”¨æ¥åŠ è½½Javaæ ¸å¿ƒç±»åº“ï¼Œæ— æ³•è¢«javaç¨‹åºç›´æ¥å¼•ç”¨ã€‚</li><li>æ‰©å±•ç±»åŠ è½½å™¨<br>  ç”¨æ¥åŠ è½½javaæ‰©å±•åº“ï¼Œjavaè™šæ‹Ÿæœºä¼šæä¾›æ‰©å±•ç±»åº“ç›®å½•ï¼Œè¯¥ç±»åŠ è½½å™¨åœ¨ç›®å½•ä¸­æŸ¥è¯¢å¹¶åŠ è½½javaç±»ã€‚</li><li>ç³»ç»Ÿç±»åŠ è½½å™¨<br>  æ ¹æ®javaåº”ç”¨çš„ç±»è·¯å¾„æ¥åŠ è½½javaç±»ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œjavaåº”ç”¨çš„ç±»éƒ½æ˜¯å®ƒæ¥å®ŒæˆåŠ è½½çš„ã€‚</li><li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨<br>  é€šè¿‡ç»§æ‰¿<code>java.lang.ClassLoader</code>ç±»æ¥å®ç°ã€‚</li></ul><h4 id="ç±»åŠ è½½å™¨åŒäº²å§”æ´¾æ¨¡å‹æœºåˆ¶"><a href="#ç±»åŠ è½½å™¨åŒäº²å§”æ´¾æ¨¡å‹æœºåˆ¶" class="headerlink" title="ç±»åŠ è½½å™¨åŒäº²å§”æ´¾æ¨¡å‹æœºåˆ¶"></a>ç±»åŠ è½½å™¨åŒäº²å§”æ´¾æ¨¡å‹æœºåˆ¶</h4><p>å½“ä¸€ä¸ªç±»æ”¶åˆ°åŠ è½½è¯·æ±‚æ—¶ï¼Œä¸ä¼šè‡ªå·±å…ˆå»åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯å°†å…¶å§”æ´¾ç»™çˆ¶ç±»ï¼Œç”±çˆ¶ç±»å»åŠ è½½ï¼Œå¦‚æœçˆ¶ç±»æ— æ³•è¢«åŠ è½½ï¼Œåˆ™åé¦ˆç»™å­ç±»ï¼Œç”±å­ç±»å»å®Œæˆç±»çš„åŠ è½½ã€‚</p><h4 id="Javaç±»åŠ è½½è¿‡ç¨‹"><a href="#Javaç±»åŠ è½½è¿‡ç¨‹" class="headerlink" title="Javaç±»åŠ è½½è¿‡ç¨‹"></a>Javaç±»åŠ è½½è¿‡ç¨‹</h4><ul><li>1:åŠ è½½<ul><li>é€šè¿‡ç±»çš„å…¨é™å®šç±»åè·å–ç±»çš„äºŒè¿›åˆ¶æµ</li><li>å°†äºŒè¿›åˆ¶æµçš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®</li><li>åœ¨å†…å­˜ä¸­ç”ŸæˆClasså¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„è®¿é—®å…¥å£</li></ul></li><li>2:éªŒè¯<br>  <strong>ç”¨äºç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œä¿è¯åŠ è½½ç±»çš„æ­£ç¡®æ€§ã€‚</strong><ul><li>æ–‡ä»¶æ ¼å¼éªŒè¯:éªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆClassæ–‡ä»¶è§„èŒƒï¼Œå¦‚ä¸»æ¬¡ç‰ˆæœ¬å·æ˜¯å¦åœ¨å½“å‰è™šæ‹ŸæœºèŒƒå›´å†…ï¼Œå¸¸é‡æ± ä¸­çš„å¸¸é‡æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„ç±»å‹ã€‚</li><li>æºæ•°æ®éªŒè¯:å¯¹å­—èŠ‚ç æè¿°çš„ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æ,å¦‚è¿™ä¸ªç±»æ˜¯å¦æœ‰çˆ¶ç±»ã€æ˜¯å¦ç»§æ‰¿äº†ä¸è¢«ç»§æ‰¿çš„ç±»ç­‰ç­‰ã€‚</li><li>å­—èŠ‚ç éªŒè¯:æ˜¯æ•´ä¸ªéªŒè¯è¿‡ç¨‹ä¸­æœ€ä¸ºå¤æ‚çš„ä¸€ä¸ªé˜¶æ®µï¼Œé€šè¿‡éªŒè¯æ•°æ®æµå’Œæ§åˆ¶æµçš„åˆ†æï¼Œç¡®å®šç¨‹åºè¯­ä¹‰æ˜¯å¦æ­£ç¡®ï¼Œä¸»è¦é’ˆå¯¹æ–¹æ³•ä½“çš„éªŒè¯ã€‚å¦‚:æ–¹æ³•ä¸­ç±»å‹è½¬æ¢æ˜¯å¦æ­£ç¡®ï¼Œè·³è½¬æŒ‡ä»¤æ˜¯å¦æ­£ç¡®ç­‰ã€‚</li><li>ç¬¦å·å¼•ç”¨éªŒè¯:ä¸»è¦æ˜¯ä¸ºäº†ç¡®ä¿è§£æåŠ¨ä½œèƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œã€‚</li></ul></li><li>3:å‡†å¤‡<ul><li>ä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜å¹¶å°†å…¶åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼Œè¿™äº›å†…å­˜éƒ½åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…(<strong>è¿™é‡Œä¸åŒ…å«ç”¨finalä¿®é¥°çš„staticï¼Œå› ä¸ºfinalåœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šåˆ†é…äº†ï¼Œå‡†å¤‡é˜¶æ®µä¼šæ˜¾å¼åˆå§‹åŒ–</strong>)ã€‚</li><li>å‡†å¤‡é˜¶æ®µä¸åˆ†é…ç±»ä¸­å®ä¾‹å˜é‡çš„å†…å­˜ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€èµ·åˆ†é…åœ¨Javaå †ä¸­ã€‚  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> <span class="number">123</span>;</span><br><span class="line"><span class="comment">//åœ¨å‡†å¤‡é˜¶æ®µåªä¼šåˆå§‹åŒ–ä¸º0ã€‚åœ¨åç»­çš„åˆå§‹åŒ–é˜¶æ®µæ‰ä¼šå˜ä¸º123.</span></span><br></pre></td></tr></table></figure></li></ul></li><li>4:è§£æ<ul><li>å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚</li></ul></li><li>5:åˆå§‹åŒ–<br>  åˆå§‹åŒ–æ˜¯ç±»åŠ è½½çš„æœ€åä¸€æ­¥ï¼Œåœ¨å‰é¢çš„ç±»åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†ç”¨æˆ·<strong>è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨</strong>å‚ä¸ä¹‹å¤–ï¼Œå‰©ä¸‹çš„åŠ¨ä½œéƒ½ç”±è™šæ‹Ÿæœºä¸»å¯¼å’Œæ§åˆ¶ã€‚ç›´åˆ°åˆå§‹åŒ–é˜¶æ®µï¼Œæ‰çœŸæ­£çš„å¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„javaç¨‹åºã€‚</li><li>6:ä½¿ç”¨</li><li>7:å¸è½½</li></ul><h4 id="javaå†…å­˜åˆ†é…"><a href="#javaå†…å­˜åˆ†é…" class="headerlink" title="javaå†…å­˜åˆ†é…"></a>javaå†…å­˜åˆ†é…</h4><ul><li>å¯„å­˜å™¨:æ— æ³•æ§åˆ¶</li><li>é™æ€åŸŸ:<code>static</code>å®šä¹‰çš„é™æ€æˆå‘˜ã€‚</li><li>å¸¸é‡æ± :<ul><li>é™æ€å¸¸é‡æ± : <code>final</code>ä¿®é¥°çš„å¸¸é‡å€¼åŠç¬¦å·å¼•ç”¨(<code>ç±»å’Œæ¥å£çš„å…¨é™å®šå</code>,<code>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦</code>,<code>æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦</code>)ã€‚</li><li>è¿è¡Œæ—¶å¸¸é‡æ± :æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå­˜æ”¾ç¼–è¯‘å™¨çš„å¸¸é‡å€¼å’Œç¬¦å·å¼•ç”¨ã€‚</li></ul></li><li>ç£ç›˜ç­‰æ°¸ä¹…å­˜å‚¨ç©ºé—´</li><li>å †å†…å­˜:å­˜å‚¨newçš„å¯¹è±¡ï¼Œæ‰€æœ‰ç±»çš„å®ä¾‹å’Œæ•°ç»„éƒ½æ˜¯åœ¨å †å†…å­˜ä¸Šåˆ†é…å†…å­˜ï¼Œåœ¨JVMå¯åŠ¨çš„æ—¶å€™åˆ›å»ºï¼Œç”±Javaè™šæ‹Ÿæœºè‡ªåŠ¨åƒåœ¾å›æ”¶å™¨ç®¡ç†ã€‚</li><li>æ ˆå†…å­˜:ä½äºCPUå¯„å­˜å™¨ä¸­ï¼Œå­˜å–é€Ÿåº¦å¿«ï¼Œæ•°æ®å¯ä»¥å…±äº«ï¼Œä½†æ˜¯ç¼ºä¹çµæ´»æ€§ï¼Œå¤§å°ä¸ç”Ÿå­˜æœŸå¿…é¡»ç¡®å®šã€‚</li></ul><h4 id="GC"><a href="#GC" class="headerlink" title="GC"></a>GC</h4><p><code>GC(GabageCollection)</code>å³åƒåœ¾æ”¶é›†,Javaæä¾›GCåŠŸèƒ½è‡ªåŠ¨ç›‘æµ‹å¯¹è±¡æ˜¯å¦è¶…è¿‡ä½œç”¨åŸŸä»è€Œè¾¾åˆ°è‡ªåŠ¨å›æ”¶å†…å­˜çš„ç›®çš„ã€‚Javaå¹¶æ²¡æœ‰æä¾›é‡Šæ”¾å·²åˆ†é…å†…å­˜çš„æ˜¾ç¤ºæ“ä½œæ–¹æ³•ã€‚åŒæ—¶ï¼ŒGCç”±è™šæ‹Ÿæœºè‡ªåŠ¨æ‰§è¡Œï¼Œä¸å—æ§åˆ¶ã€‚åªæœ‰åœ¨è™šæ‹Ÿæœºç©ºé—²æˆ–è€…å½“å‰å †å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹æ‰ä¼šè§¦å‘æ‰§è¡Œã€‚<br><strong>ç¨‹åºå‘˜å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ<code>System.gc()</code>é€šçŸ¥GCè¿è¡Œï¼Œä½†æ˜¯å¹¶ä¸ä¿è¯GCä¸€å®šä¼šè¢«é©¬ä¸Šæ‰§è¡Œï¼Œå…·ä½“æ‰§è¡ŒGCçš„æ—¶é—´è¿˜æ˜¯å–å†³äºJVMã€‚</strong></p><ul><li>GCå›æ”¶çš„å¯¹è±¡<br>  GCä¼šå›æ”¶ä¸å†å­˜æ´»çš„å¯¹è±¡ï¼Œè€Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»æœ‰ä¸¤ç§æ–¹æ³•ã€‚<ul><li>1:å¼•ç”¨è®¡æ•°æ³•<br>  ç»™æ¯ä¸ªå¯¹è±¡è®¾ç½®ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨,æ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨è¿™ä¸ªå¯¹è±¡æ—¶,è®¡æ•°å™¨åŠ ä¸€,å¼•ç”¨å¤±æ•ˆæ—¶è®¡æ•°å™¨å‡ä¸€ã€‚å½“è®¡æ•°å™¨å½’0æ—¶ï¼Œè¯´æ˜å¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨ã€‚å°†ä¼šè¢«å›æ”¶ã€‚<br>  æ­¤è®¡æ•°æ³•æœ‰ç¼ºé™·ï¼Œå°±æ˜¯æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</li><li>2:å¯è¾¾æ€§ç®—æ³•(å¼•ç”¨é“¾æ³•)<br>  ä»ä¸€ä¸ª<code>GC Roots</code>çš„å¯¹è±¡å‘ä¸‹æœç´¢,å¦‚æœä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰è¢«ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ—¶,è¯´æ˜æ­¤å¯¹è±¡ä¸å¯ç”¨ã€‚ä½†å¹¶ä¸ä»£è¡¨æ­¤å¯¹è±¡ä¼šç«‹é©¬è¢«å›æ”¶ï¼Œè€Œæ˜¯å¤„äºä¸€ä¸ª<code>æ­»ç¼“</code>çš„é˜¶æ®µ,ç­‰å¾…è¢«çœŸæ­£å›æ”¶ã€‚</li></ul></li><li>GCæ¸…ç†ç®—æ³•<br>  ç›®å‰JAVAä½¿ç”¨çš„ä¸º<code>åˆ†ä»£æ”¶é›†ç®—æ³•</code>,å®ƒæ ¹æ®å¯¹è±¡çš„ç”Ÿå­˜å‘¨æœŸ,å°†å †å†…å­˜åˆ†ä¸º<code>æ–°ç”Ÿä»£(1/3å†…å­˜)</code>å’Œ<code>è€å¹´ä»£(2/3å†…å­˜)</code>ï¼Œè€Œ<code>æ–°ç”Ÿä»£</code>åˆè¢«åˆ†ä¸ºä¸‰ä¸ªåŒºåŸŸ:<strong><code>eden</code>ã€<code>from survivor</code>ã€<code>to survivor</code></strong>,å†…å­˜ä¸º(8:1:1)ã€‚<ul><li>æ–°å»ºçš„å¯¹è±¡ä¼šè¢«å­˜æ”¾åœ¨<code>eden</code>åŒºåŸŸ,è€Œå½“<code>eden</code>åŒºåŸŸå†…å­˜ä¸è¶³æ—¶ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡<code>minor gc</code>æ¸…ç†<code>eden</code>,å¹¶ä¸”æŠŠæ— æ³•å›æ”¶çš„å¯¹è±¡å¤åˆ¶åˆ°<code>from survivor</code>åŒºåŸŸä¸­ã€‚</li><li>è€Œå½“<code>from survivor</code>åŒºåŸŸå†…å­˜ä¸è¶³æ—¶ï¼Œåˆä¼šè§¦å‘ä¸€æ¬¡<code>minor gc</code>æ¸…ç†<code>eden</code>ã€<code>from survivor</code>åŒºåŸŸï¼Œå°†æ— æ³•å›æ”¶çš„å¯¹è±¡å¤åˆ¶åˆ°<code>to survivor</code>åŒºåŸŸã€‚</li><li>æ¯ç»å†ä¸€æ¬¡gcï¼Œå¯¹è±¡å°±ä¼šè¢«æ ‡è®°ä¸€æ¬¡ï¼Œè¢«æ ‡è®°15æ¬¡æ—¶ï¼Œåˆ™è¿›å…¥è€å¹´ä»£ã€‚å½“è€å¹´ä»£å†…å­˜æ»¡ä¹‹åå°±ä¼šè§¦å‘<code>Full GC</code>è¿›è¡Œå…¨é‡å›æ”¶ã€‚</li></ul></li></ul><h4 id="å†…å­˜æ³„æ¼"><a href="#å†…å­˜æ³„æ¼" class="headerlink" title="å†…å­˜æ³„æ¼"></a>å†…å­˜æ³„æ¼</h4><p><strong>ç¬¦åˆå†…å­˜æ³„æ¼çš„ä¸¤ä¸ªæ¡ä»¶:<code>æ— ç”¨</code>ã€<code>æ— æ³•å›æ”¶</code></strong></p><ul><li>é™æ€é›†åˆç±»<br>  å¦‚<code>HashMap</code>ã€<code>LinkedList</code>ç­‰ã€‚å¦‚æœè¿™äº›é›†åˆè¢«å®šä¹‰ä¸ºé™æ€ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸä¸ç¨‹åºä¸€è‡´ï¼Œåˆ™å®¹å™¨ä¸­çš„å¯¹è±¡åœ¨ç¨‹åºç»“æŸä¹‹å‰æ— æ³•è¢«é‡Šæ”¾ï¼Œå³é•¿ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡æŒæœ‰çŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡çš„å¼•ç”¨ï¼Œå°½ç®¡çŸ­ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ä¸å†ä½¿ç”¨ï¼Œä½†æ˜¯å› ä¸ºé•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡æŒæœ‰å®ƒçš„å¼•ç”¨è€Œå¯¼è‡´ä¸èƒ½è¢«å›æ”¶ï¼Œä»è€Œé€ æˆå†…å­˜æ³„æ¼ã€‚</li><li>å„ç§è¿æ¥<br>  å¦‚<code>æ•°æ®åº“è¿æ¥</code>ã€<code>IOè¿æ¥</code>ç­‰ã€‚å½“è¿æ¥ä¹‹åä¸å†ä½¿ç”¨æ—¶ï¼Œåº”åŠæ—¶è°ƒç”¨closeæ–¹æ³•æ¥é‡Šæ”¾è¿æ¥ï¼Œå¦åˆ™ä¼šé€ æˆå¤§é‡å¯¹è±¡æ— æ³•è¢«å›æ”¶ï¼Œä»è€Œå¼•èµ·å†…å­˜æ³„æ¼ã€‚</li><li>å˜é‡ä¸åˆç†çš„ä½œç”¨åŸŸ<br>  å³å˜é‡æ•°æ®å·²ç»æ— ç”¨ï¼Œä½†ç”Ÿå‘½å‘¨æœŸè¿˜åœ¨ç»§ç»­ï¼Œä¹Ÿæœ‰å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ã€‚</li><li>å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»<br>  å¦‚æœä¸€ä¸ªå¤–éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡è¿”å›äº†ä¸€ä¸ªå†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡å°†ä¼šè¢«é•¿æœŸå¼•ç”¨ï¼Œå³ä½¿å¤–éƒ¨ç±»ä¸å†ä½¿ç”¨ï¼Œä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼Œé€ æˆå†…å­˜æ³„æ¼ã€‚</li><li>æ”¹å˜å“ˆå¸Œå€¼<br>  å½“ä¸€ä¸ªå¯¹è±¡è¢«å­˜å‚¨åˆ°HashSeté›†åˆåï¼Œå¦‚æœä¿®æ”¹å®ƒçš„å“ˆå¸Œå€¼ï¼Œä½¿å…¶ä¸å‚¨å­˜è¿›é›†åˆæ—¶çš„å“ˆå¸Œå€¼ä¸ä¸€è‡´ï¼Œå°†ä¼šé€ æˆæ— æ³•åœ¨é›†åˆä¸­æ£€ç´¢åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œä¹Ÿæ— æ³•åˆ é™¤ï¼Œä»è€Œé€ æˆå†…å­˜æ³„æ¼ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tomcatæ€§èƒ½è°ƒä¼˜</title>
      <link href="/Tomcat%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/"/>
      <url>/Tomcat%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/</url>
      
        <content type="html"><![CDATA[<h4 id="Tomcatæ€§èƒ½ä¼˜åŒ–"><a href="#Tomcatæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="Tomcatæ€§èƒ½ä¼˜åŒ–"></a>Tomcatæ€§èƒ½ä¼˜åŒ–</h4><p>Tomcatä½œä¸ºApacheå®Œå…¨å¼€æºçš„Webå®¹å™¨ï¼Œå…¶è½»é‡çº§ã€å ç”¨èµ„æºå°ã€æ‰©å±•æ€§ç­‰ç­‰ç‰¹æ€§å—åˆ°å¼€å‘äººå‘˜åŠä¸­å°å‹ä¼ä¸šçš„å–œçˆ±å’Œå¹¿æ³›çš„åº”ç”¨ã€‚ä¸ºäº†Tomcatèƒ½å¤Ÿç¨³å®šçš„è¿è¡Œï¼Œå› æ­¤Tomcatçš„æ€§èƒ½ä¼˜åŒ–ä¹Ÿå¾ˆé‡è¦ã€‚</p><span id="more"></span><h4 id="è®¾ç½®JVMå†…å­˜"><a href="#è®¾ç½®JVMå†…å­˜" class="headerlink" title="è®¾ç½®JVMå†…å­˜"></a>è®¾ç½®JVMå†…å­˜</h4><p>JAVAä¸­å¾ˆå¸¸è§çš„ä¸€ä¸ªå¼‚å¸¸å°±æ˜¯<code>java.lang.OutOfMemoryError</code>(å†…å­˜æº¢å‡º),å…¶ä¸­å†…å­˜æº¢å‡ºä¹Ÿåˆ†ä¸ºå¤šä¸ªåŸå› ï¼Œ<code>PermGen space</code>å’Œ<code>Java heap space</code>ã€‚</p><ul><li><code>PermGen space</code>æ˜¯å› ä¸ºç¨‹åºä¸­å¤§é‡çš„ä½¿ç”¨Jaræˆ–Classï¼Œä½¿javaè™šæ‹Ÿæœºè£…è½½ç±»çš„ç©ºé—´ä¸è¶³ï¼Œå‡ºç°å†…å­˜æº¢å‡ºã€‚</li><li><code>Java heap space</code>æ˜¯å› ä¸ºjavaè™šæ‹Ÿæœºåˆ›å»ºçš„å¯¹è±¡è¿‡å¤šï¼Œæ²¡æœ‰åŠæ—¶çš„å›æ”¶æ¸…ç†ç©ºé—´ï¼Œå¯¼è‡´å †å†…å­˜æ»¡äº†ã€‚</li></ul><h5 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h5><ul><li>å»æ‰é‡å¤jaråŒ…ï¼Œå‡å°‘ç¬¬ä¸‰æ–¹jarçš„é‡å¤åŠ è½½ã€‚</li><li>é…ç½®<code>MaxPermSize</code>çš„å¤§å°ï¼Œä¿®æ”¹catalina.shï¼Œåœ¨<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;Using CATALINA_BASE:$CATALINA_BASE&quot;</span><br></pre></td></tr></table></figure>ä¸Šä¸€è¡Œå¡«åŠ <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_OPTS=&quot;-server-XX:PermSize=64M-XX:MaxPermSize=128m&quot;</span><br></pre></td></tr></table></figure></li><li>åŠ å¤§å†…å­˜ï¼Œé…ç½®catalina.shä¸­ <code>setJAVA_OPTS=-Xms32m-Xmx512m</code>,JVMè‡ªåŠ¨è®¾ç½®å †å†…å­˜çš„åˆå§‹ç©ºé—´<code>-Xms</code>ä¸ºç‰©ç†å†…å­˜çš„1&#x2F;64ï¼Œæœ€å¤§ç©ºé—´<code>-Xmx</code>ä¸ºç‰©ç†å†…å­˜çš„1&#x2F;4ã€‚æ‰‹åŠ¨è®¾ç½®å †ç©ºé—´æœ€å¤§ä¸è¦è¶…è¿‡å¯ç”¨ç‰©ç†å†…å­˜çš„80%ï¼Œä¸€èˆ¬å°†<code>-Xms</code>å’Œ<code>-Xmx</code>è®¾ç½®ä¸ºç›¸åŒï¼Œè€Œ<code>-Xmn</code>è®¾ç½®ä¸º<code>-Xmx</code>çš„1&#x2F;4.<br><em><strong>æ³¨æ„:åœ¨JVMä¸­ï¼Œå¦‚æœ80%çš„æ—¶é—´éƒ½ç”¨äºGCä¸”å¯ç”¨çš„å †ç©ºé—´ä¸è¶³2%ï¼Œåˆ™ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</strong></em></li></ul><h4 id="è®¾ç½®tomcatè¿æ¥å‚æ•°"><a href="#è®¾ç½®tomcatè¿æ¥å‚æ•°" class="headerlink" title="è®¾ç½®tomcatè¿æ¥å‚æ•°"></a>è®¾ç½®tomcatè¿æ¥å‚æ•°</h4><p>åœ¨Tomcatçš„é…ç½®æ–‡ä»¶<code>server.xml</code>ä¸­çš„<code>&lt;Connector&gt;&lt;Connector/&gt;</code>é…ç½®ä¸­</p><ul><li><code>minProcessors</code>:æœ€å°ç©ºé—²è¿æ¥,ç”¨äºæé«˜ç³»ç»Ÿçš„å¤„ç†æ€§èƒ½,é»˜è®¤ä¸º10;</li><li><code>maxProcessors</code>:æœ€å¤§è¿æ¥çº¿ç¨‹æ•°,å³å¹¶å‘å¤„ç†çš„æœ€å¤§è¯·æ±‚æ•°,é»˜è®¤ä¸º75;</li><li><code>acceptCount</code>:å…è®¸çš„æœ€å¤§è¿æ¥æ•°,åº”å¤§äºç­‰äº<code>maxProcessors</code>,é»˜è®¤å€¼ä¸º100;</li><li><code>enableLookups</code>:æ˜¯å¦DNSæŸ¥è¯¢,ä¸ºæé«˜å¤„ç†èƒ½åŠ›,åº”è®¾ç½®ä¸ºfalse;</li><li><code>connectionTimeout</code>:ç½‘ç»œè¿æ¥è¶…æ—¶,å•ä½:æ¯«ç§’ã€‚è®¾ç½®ä¸º0è¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚é€šå¸¸è®¾ç½®ä¸º3000ms;</li><li><code>web server</code>:å…è®¸çš„æœ€å¤§è¿æ¥æ•°è¿˜å—åˆ¶äºæ“ä½œç³»ç»Ÿçš„å†…æ ¸å‚æ•°è®¾ç½®,Windowsä¸º2000ä¸ªå·¦å³,Linuxä¸º1000ä¸ªå·¦å³;</li></ul><h4 id="é¡¹ç›®ä½¿ç”¨ç¼“å­˜å’Œå‹ç¼©"><a href="#é¡¹ç›®ä½¿ç”¨ç¼“å­˜å’Œå‹ç¼©" class="headerlink" title="é¡¹ç›®ä½¿ç”¨ç¼“å­˜å’Œå‹ç¼©"></a>é¡¹ç›®ä½¿ç”¨ç¼“å­˜å’Œå‹ç¼©</h4><p>å¯¹äºé™æ€é¡µé¢æœ€å¥½è¿›è¡Œç¼“å­˜ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡ä»ç£ç›˜ä¸Šè¯»å–ï¼Œå‡å°‘ç£ç›˜çš„è¯»å†™ï¼Œæé«˜æœåŠ¡å™¨æ€§èƒ½ã€‚æ¯”å¦‚é‡‡ç”¨Nginxä½œä¸ºç¼“å­˜æœåŠ¡å™¨ï¼Œå°†å›¾ç‰‡ã€cssã€jsç­‰æ–‡ä»¶è¿›è¡Œç¼“å­˜ï¼Œæœ‰æ•ˆå‡å°‘Tomcatçš„è®¿é—®ã€‚</p><h4 id="æ­å»ºé›†ç¾¤"><a href="#æ­å»ºé›†ç¾¤" class="headerlink" title="æ­å»ºé›†ç¾¤"></a>æ­å»ºé›†ç¾¤</h4><p>å•ä¸ªæœåŠ¡å™¨æ€§èƒ½è‚¯å®šæœ‰ç“¶é¢ˆï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯å¯¹æœåŠ¡å™¨è¿›è¡Œæ‰©å±•ï¼Œè€Œé›†ç¾¤å°±æ˜¯æœ€å¥½çš„æ‰©å±•æ–¹å¼ã€‚æ¯”å¦‚ä½¿ç”¨Nginxé›†ç¾¤ï¼Œå°†å¤šä¸ªè®¿é—®åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ï¼Œå¤§å¤§æå‡æœåŠ¡å™¨çš„æ€§èƒ½å’Œæ•ˆç‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tomcat </tag>
            
            <tag> æ€§èƒ½ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hystrixä»‹ç»ä¸åº”ç”¨</title>
      <link href="/Hystrix%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%BA%94%E7%94%A8/"/>
      <url>/Hystrix%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="Hystrixä»‹ç»"><a href="#Hystrixä»‹ç»" class="headerlink" title="Hystrixä»‹ç»"></a>Hystrixä»‹ç»</h4><p>åœ¨è¯´Hystrixä¹‹å‰ï¼Œå°±è¦è¯´åˆ°å¾®æœåŠ¡äº†ï¼Œæ‰€è°“å¾®æœåŠ¡ï¼Œä½“ç°åœ¨ä¸€ä¸ªå¾®ä¸Šï¼Œå®ƒå°†ä¸€ä¸ªå¾ˆåºå¤§çš„ç‹¬ç«‹åº”ç”¨ç»†åŒ–åˆ°ä¸€å¥—å°å‹æœåŠ¡ï¼Œè®©æ¯ä¸ªå°æœåŠ¡ç‹¬ç«‹è¿è¡Œã€‚æœåŠ¡ä¹‹é—´äº’ç›¸é€šä¿¡ã€‚è€Œè¿™ä¹Ÿä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ï¼Œå…¶ä¸­å› ä¸ºå¾®æœåŠ¡æ¨¡å—å¤ªå¤šï¼Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½å¯èƒ½å‡ºé”™ï¼Œè€Œå‡ºé”™å°±å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡é›ªå´©ï¼Œä½¿å¾—æœåŠ¡å™¨æ— æ³•æ­£å¸¸è¿è¡Œã€‚è€ŒHystrixæ˜¯Netflixä¸‹çš„ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œä¸»è¦æ˜¯å¯¹è¯·æ±‚çš„å»¶è¿Ÿæˆ–æ•…éšœè¿›è¡Œé˜²æŠ¤å’Œæ§åˆ¶ï¼Œé˜»æ­¢é”™è¯¯çš„è¿é”ååº”ï¼Œå¹¶æä¾›é”™è¯¯å›é€€å’ŒæœåŠ¡é™çº§çš„åŠŸèƒ½ï¼Œæœ‰æ•ˆè§£å†³çš„ä¸Šè¿°é—®é¢˜ã€‚</p><span id="more"></span><h4 id="Hystrixåˆæ­¥ä½¿ç”¨"><a href="#Hystrixåˆæ­¥ä½¿ç”¨" class="headerlink" title="Hystrixåˆæ­¥ä½¿ç”¨"></a>Hystrixåˆæ­¥ä½¿ç”¨</h4><ul><li>æ–°å»ºä¸€ä¸ªæœåŠ¡æ³¨å†Œåˆ°Eurekaä¸Š<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">hystrix</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">6666</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:1111/eureka</span></span><br></pre></td></tr></table></figure></li><li>å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£<code>@EnableCircuitBreaker</code>,æˆ–è€…æ·»åŠ <code>@SpringCloudApplication</code>æ³¨è§£ã€‚å› ä¸º@SpringCloudApplicationæ³¨è§£ä¸­å·²ç»åŒ…å«äº†@EnableCircuitBreakerä»¥åŠEnableDiscoveryClientã€‚è¿™é‡Œæˆ‘å°±ä½¿ç”¨@SpringCloudApplicationäº†ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªRestTemplateçš„Beanï¼Œå¹¶å¼€å¯Ribbonçš„è´Ÿè½½å‡è¡¡ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringCloudApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(HystrixApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å¯åŠ¨Eurekaä»¥åŠå¤šä¸ªä¸åŒç«¯å£çš„æœåŠ¡æä¾›è€…<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201115213755.png"></li><li>åˆ›å»ºHystrixServiceè°ƒç”¨æœåŠ¡æä¾›è€…æä¾›çš„æœåŠ¡<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> restTemplate.getForObject(<span class="string">&quot;http://provider/&quot;</span>, String.class);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>åˆ›å»ºHystrixControllerè°ƒç”¨Service<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    HystrixService service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> service.hello();</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ‰“å¼€æµè§ˆå™¨è®¿é—®ä¸¤æ¬¡<code>http://localhost:5555/hello</code>ï¼Œç”±äºå¼€å¯äº†è´Ÿè½½å‡è¡¡ï¼Œæ‰€ä»¥ä¸¤æ¬¡è®¿é—®ä¼šå»å‘ä¸åŒçš„ç«¯å£ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201115224055.png"><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201115224038.png"></li><li>æ­¤æ—¶æ¨¡æ‹Ÿå…¶ä¸­ä¸€ä¸ªprovideræ‰çº¿ï¼Œå…³é—­ä¸€ä¸ªprovideræœåŠ¡ã€‚å†æ¬¡è®¿é—®<code>http://localhost:5555/hello</code>ï¼Œä¸€æ®µæ—¶é—´å†…ä¼šå‡ºç°<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201115224257.png"><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201115224038.png"><br>è¿‡ä¸€æ®µæ—¶é—´åï¼Œå°±åªä¼šè®¿é—®è¿˜æ´»è·ƒçš„ç«¯å£çš„æœåŠ¡äº†ã€‚è¿™æ˜¯å› ä¸ºæœåŠ¡æ‰çº¿ï¼Œå¹¶ä¸ä¼šé©¬ä¸Šæ›´æ–°Eurekaçš„æ³¨å†Œè¡¨ï¼Œä¼šæœ‰ä¸€æ®µæ—¶é—´çš„å»¶è¿Ÿï¼Œè€Œè¿™æ®µæ—¶é—´å†…ï¼Œè¿˜ä¼šé»˜è®¤è¿™ä¸ªæœåŠ¡æ˜¯æ­£å¸¸çš„ï¼Œä¼šå»è®¿é—®è¿™ä¸ªç«¯å£çš„æœåŠ¡ã€‚</li><li>ä½¿ç”¨Hystrixæä¾›çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨Serviceä¸Šæ·»åŠ æ³¨è§£<code>@HystrixCommand</code>,å…¶ä¸­<code>fallbackMethod</code>å°±æ˜¯å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œä½¿ç”¨çš„ä»£æ›¿è§£å†³æ–¹æ¡ˆï¼Œè¿™é‡Œæˆ‘å®šä¹‰çš„å°±æ˜¯åé¢çš„erroræ–¹æ³•ã€‚<strong>æ³¨æ„ï¼Œæ›¿ä»£è§£å†³æ–¹æ¡ˆè¿”å›å€¼å¿…é¡»å’Œå½“å‰æ–¹æ³•ä¸€è‡´ã€‚</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@HystrixCommand(fallbackMethod=&quot;error&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> restTemplate.getForObject(<span class="string">&quot;http://provider/&quot;</span>, String.class);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">error</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="string">&quot;æˆ‘é”™äº†ğŸ˜&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>é‡å¯åˆšåˆšåœæ­¢çš„æœåŠ¡ï¼Œç„¶åå†æ¬¡æ¨¡æ‹Ÿæ‰çº¿ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201115225444.png"><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201115224038.png"><br>å¯ä»¥çœ‹åˆ°æ²¡æœ‰å‡ºç°é”™è¯¯é¡µé¢äº†ï¼Œæ›¿ä»£çš„ä½¿æˆ‘ä»¬çš„å¤‡ç”¨æ–¹æ¡ˆã€‚è¿™å°±æ˜¯æ‰€è°“çš„<code>æœåŠ¡é™çº§</code>ã€‚</li></ul><h4 id="Hystrixå¼‚å¸¸å¤„ç†"><a href="#Hystrixå¼‚å¸¸å¤„ç†" class="headerlink" title="Hystrixå¼‚å¸¸å¤„ç†"></a>Hystrixå¼‚å¸¸å¤„ç†</h4><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæœ‰å¯èƒ½å¹¶éè¯·æ±‚è°ƒç”¨å¤±è´¥ï¼Œè€Œæ˜¯ä¸šåŠ¡é€»è¾‘å‡ºé”™ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦çŸ¥é“å…·ä½“é”™è¯¯å†…å®¹ï¼Œæ“ä½œå¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@HystrixCommand(fallbackMethod=&quot;error&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> restTemplate.getForObject(<span class="string">&quot;http://provider/&quot;</span>, String.class);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">error</span><span class="params">(Throwable e)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="string">&quot;æˆ‘é”™äº†ğŸ˜,é”™è¯¯åŸå› :&quot;</span> + e.getMessage();</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201116213359.png"><br>è€Œå¦‚æœæˆ‘ä»¬éœ€è¦æŸä¸ªå¼‚å¸¸ç›´æ¥æŠ›å‡ºçš„æ—¶å€™ï¼Œå¯ä»¥åœ¨æ³¨è§£<code>@HystrixCommand(fallbackMethod=&quot;error&quot;)</code>é‡Œé¢å†åŠ ä¸Š<code>ignoreExceptions = ArithmeticException.class</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@HystrixCommand(fallbackMethod=&quot;error&quot;,ignoreExceptions = ArithmeticException.class)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> restTemplate.getForObject(<span class="string">&quot;http://provider/&quot;</span>, String.class);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">error</span><span class="params">(Throwable e)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="string">&quot;æˆ‘é”™äº†ğŸ˜,é”™è¯¯åŸå› :&quot;</span> + e.getMessage();</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯ï¼ŒæŠ¥å¯¹åº”å¼‚å¸¸çš„æ—¶å€™å°±ä¸ä¼šèµ°å›è°ƒæ–¹æ³•äº†ï¼Œè€Œæ˜¯ç›´æ¥å°†é”™è¯¯æŠ›å‡ºã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201116213845.png"></p><h4 id="Hystrixè¯·æ±‚ç¼“å­˜"><a href="#Hystrixè¯·æ±‚ç¼“å­˜" class="headerlink" title="Hystrixè¯·æ±‚ç¼“å­˜"></a>Hystrixè¯·æ±‚ç¼“å­˜</h4><p>æ‰€è°“è¯·æ±‚ç¼“å­˜å°±æ˜¯åœ¨è°ƒç”¨åŒä¸€ä¸ªæ¥å£çš„æ—¶å€™ï¼Œå¦‚æœå‚æ•°ç›¸åŒï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¹‹å‰ç¼“å­˜ä¸‹æ¥çš„æ•°æ®ç›´æ¥è¿”å›ï¼Œè€Œä¸å»è°ƒç”¨æ¥å£ã€‚è€Œå¯ç”¨è¯·æ±‚ç¼“å­˜ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åŠ æ³¨è§£<code>@CacheResult</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@HystrixCommand(fallbackMethod=&quot;error&quot;,ignoreExceptions = ArithmeticException.class)</span></span><br><span class="line">    <span class="meta">@CacheResult</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        System.out.println(str);</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> restTemplate.getForObject(<span class="string">&quot;http://provider/&quot;</span>, String.class);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">error</span><span class="params">(String str,Throwable e)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="string">&quot;æˆ‘é”™äº†ğŸ˜,é”™è¯¯åŸå› :&quot;</span> + e.getMessage();</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:æ›¿ä»£æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼å¿…é¡»ä¸å½“å‰æ–¹æ³•å‚æ•°å’Œè¿”å›å€¼ä¸€è‡´</strong><br>æ­¤æ—¶å¯åŠ¨é¡¹ç›®ï¼Œå¹¶è°ƒç”¨æ–¹æ³•ï¼Œä¼šå‘ç°æŠ¥é”™äº†ï¼Œæç¤ºéœ€è¦ä¸€ä¸ª<code>HystrixRequestContext</code>ï¼Œ<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201116225217.png"><br>æˆ‘ä»¬åœ¨è°ƒç”¨æ¥å£å‰åˆå§‹åŒ–ç¼“å­˜ï¼Œè°ƒç”¨åå…³é—­ç¼“å­˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    HystrixService service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello/&#123;str&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@PathVariable</span> String str)</span>&#123;</span><br><span class="line">        <span class="type">HystrixRequestContext</span> <span class="variable">context</span> <span class="operator">=</span> HystrixRequestContext.initializeContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            res = service.hello(str);</span><br><span class="line">        &#125;</span><br><span class="line">        context.close();</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨æ¥å£ï¼Œä¼šå‘ç°åªæ‰“å°äº†ä¸€æ¬¡ç»“æœã€‚è¯´æ˜ç¼“å­˜èµ·ä½œç”¨äº†ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201116225748.png"><br>å¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code>@CacheKey</code>æ¥æŒ‡å®šä¸€ä¸ªå‚æ•°ä¸ºç¼“å­˜çš„Keyï¼Œè¿™æ ·çš„è¯åªè¦è¿™ä¸ªå‚æ•°å€¼ç›¸åŒï¼Œä¾¿å¯ä»¥ç›´æ¥è·å–ç¼“å­˜å†…çš„æ•°æ®ã€‚<br>é™¤äº†ä¸Šè¿°çš„å‡ ä¸ªæ³¨è§£å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>@CacheRemove</code>æ³¨è§£éœ€è¦æ³¨æ„ï¼Œåœ¨åšæ•°æ®ç¼“å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰å¯èƒ½æŠŠæ•°æ®åº“æ•°æ®è¿›è¡Œåˆ é™¤äº†ï¼Œè€Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¾€å¾€å¸Œæœ›åœ¨åˆ é™¤æ•°æ®çš„æ—¶å€™ï¼ŒåŒæ—¶è¦åˆ é™¤ç¼“å­˜å†…å®¹ï¼Œè¿™ä¸ªæ—¶å€™å°±ç”¨ä¸Šäº†<code>@CacheRemove</code>ã€‚åœ¨ä½¿ç”¨è¿™ä¸ªæ³¨è§£çš„æ—¶å€™ï¼Œå¿…é¡»æŒ‡å®š<code>commandKey</code>ä¹Ÿå°±æ˜¯ç¼“å­˜çš„åå­—ï¼Œåªæœ‰è¿™ä¸ªæ‰èƒ½å‡†ç¡®æ‰¾åˆ°æˆ‘ä»¬è¦åˆ é™¤çš„ç¼“å­˜æ•°æ®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HystrixService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@HystrixCommand(fallbackMethod=&quot;error&quot;,ignoreExceptions = ArithmeticException.class)</span></span><br><span class="line">    <span class="meta">@CacheResult</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(<span class="meta">@CacheKey</span> String str)</span> &#123;</span><br><span class="line">        System.out.println(str);</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> restTemplate.getForObject(<span class="string">&quot;http://provider/&quot;</span>, String.class);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@HystrixCommand</span></span><br><span class="line">    <span class="meta">@CacheRemove(commandKey = &quot;hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteKeyById</span><span class="params">(String key)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">error</span><span class="params">(String str,Throwable e)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> <span class="string">&quot;æˆ‘é”™äº†ğŸ˜,é”™è¯¯åŸå› :&quot;</span> + e.getMessage();</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Hystrixè¯·æ±‚åˆå¹¶"><a href="#Hystrixè¯·æ±‚åˆå¹¶" class="headerlink" title="Hystrixè¯·æ±‚åˆå¹¶"></a>Hystrixè¯·æ±‚åˆå¹¶</h4><p>æ‰€è°“è¯·æ±‚åˆå¹¶å°±æ˜¯åœ¨è¯·æ±‚ä¸€ä¸ªæ¥å£çš„æ—¶å€™ï¼Œçº¿ç¨‹ç­‰å¾…æŒ‡å®šæ—¶é—´ï¼Œå¦‚æœæ­¤æ—¶è¿˜æœ‰åŒæ ·çš„æ¥å£è¯·æ±‚ï¼Œå°±åˆå¹¶æˆä¸€ä¸ªè¯·æ±‚ã€‚è¯·æ±‚åˆå¹¶çš„æ ¸å¿ƒå°±æ˜¯<code>@HystrixCollapser</code>ï¼Œåœ¨è¿™ä¸ªæ³¨è§£ä¸­æŒ‡å®šè¯·æ±‚æ‰¹å¤„ç†çš„æ–¹æ³•å’Œç­‰å¾…æ—¶é—´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@HystrixCollapser(batchMethod = &quot;getAllById&quot;,collapserProperties = &#123;@HystrixProperty(name = &quot;timerDelayInMilliseconds&quot;,value = &quot;200&quot;)&#125;)</span></span><br></pre></td></tr></table></figure><p><strong>ä»¥ä¸Šå°±æ˜¯Hystrixçš„ä¸€äº›åŸºæœ¬åŠŸèƒ½åŠä½¿ç”¨ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> Hystrix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Consulè¿›è¡ŒæœåŠ¡æ³¨å†Œä¸å‘ç°</title>
      <link href="/%E4%BD%BF%E7%94%A8Consul%E8%BF%9B%E8%A1%8C%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/"/>
      <url>/%E4%BD%BF%E7%94%A8Consul%E8%BF%9B%E8%A1%8C%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h4 id="Consulä»‹ç»"><a href="#Consulä»‹ç»" class="headerlink" title="Consulä»‹ç»"></a>Consulä»‹ç»</h4><p>Consulæ˜¯HashiCorpå…¬å¸æ¨å‡ºçš„å¼€æºå·¥å…·ï¼Œä½¿ç”¨Goè¯­è¨€å¼€å‘ï¼Œæ‰€ä»¥å’ŒDockerå®Œå…¨å…¼å®¹ï¼Œéƒ¨ç½²èµ·æ¥éå¸¸å®¹æ˜“ï¼ŒConsulå…·æœ‰<strong>ç»¿è‰²</strong>ã€<strong>è½»é‡çº§</strong>çš„ç‰¹ç‚¹ã€‚æ˜¯<strong>åˆ†å¸ƒå¼</strong>çš„ã€<strong>é«˜å¯ç”¨</strong>çš„ã€ <strong>å¯æ¨ªå‘æ‰©å±•</strong>çš„ç”¨äºå®ç°åˆ†å¸ƒå¼ç³»ç»Ÿçš„æœåŠ¡å‘ç°ä¸é…ç½®ã€‚</p><span id="more"></span><h4 id="Consulä¸Eurekaå¯¹æ¯”"><a href="#Consulä¸Eurekaå¯¹æ¯”" class="headerlink" title="Consulä¸Eurekaå¯¹æ¯”"></a>Consulä¸Eurekaå¯¹æ¯”</h4><ul><li>é¦–å…ˆEurekaåªéœ€è¦åœ¨é¡¹ç›®ä¸­åŠ å…¥ä¾èµ–ï¼Œå°±å¯ä»¥ä½œä¸ºæ³¨å†Œä¸­å¿ƒã€‚è€ŒConsulå’ŒZookeeperä¸€æ ·ï¼Œéœ€è¦å•ç‹¬å®‰è£…æ‰èƒ½ä½¿ç”¨ã€‚</li><li>ç›¸æ¯”äºEurekaæ¥è®²ï¼ŒConsulå…·æœ‰<strong>ä¸€ç«™å¼</strong>çš„ç‰¹ç‚¹ï¼Œå®ƒé‡Œé¢å†…ç½®äº†åŒ…æ‹¬<em>æœåŠ¡æ³¨å†Œäºå‘ç°</em>ã€<em>å¥åº·æ£€æŸ¥</em>ã€<em>åˆ†å¸ƒä¸€è‡´æ€§åè®®å®ç°</em>ã€<em>Key&#x2F;Valueå­˜å‚¨</em>ã€<em>å¤šæ•°æ®ä¸­å¿ƒæ–¹æ¡ˆ</em>ç­‰ç­‰</li><li>Eurekaæ³¨å†Œé€Ÿåº¦å¿«ï¼Œå› ä¸ºEurekaæ²¡æœ‰ä¸»ä»ä¹‹åˆ†ï¼Œå„ä¸ªèŠ‚ç‚¹ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸ç®¡æ³¨å†Œåˆ—è¡¨ä¿¡æ¯æ˜¯å¦ä¸€è‡´ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½å‘å¤–æä¾›ç›¸åº”çš„æœåŠ¡ã€‚æ‰€ä»¥ä¿è¯äº†å¯ç”¨æ€§ï¼Œç‰ºç‰²äº†ä¸€è‡´æ€§ã€‚è€ŒConsulå› ä¸ºå¿…é¡»è¦æ±‚è¿‡åŠèŠ‚ç‚¹éƒ½å†™å…¥æˆåŠŸæ‰èƒ½è®¤ä¸ºæ³¨å†ŒæˆåŠŸã€‚æ‰€ä»¥ä¿è¯äº†ä¸€è‡´æ€§ç‰ºç‰²äº†å¯ç”¨æ€§ã€‚<blockquote><p>æ‰€ä»¥é€‰æ‹©æ—¶éœ€è¦è€ƒè™‘å®é™…æƒ…å†µï¼Œéœ€è¦ä¿è¯å¯ç”¨æ€§è¿˜æ˜¯ä¸€è‡´æ€§ã€‚</p></blockquote></li></ul><h4 id="Dockerå®‰è£…Consul"><a href="#Dockerå®‰è£…Consul" class="headerlink" title="Dockerå®‰è£…Consul"></a>Dockerå®‰è£…Consul</h4><h5 id="æŸ¥æ‰¾é•œåƒ"><a href="#æŸ¥æ‰¾é•œåƒ" class="headerlink" title="æŸ¥æ‰¾é•œåƒ"></a>æŸ¥æ‰¾é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">âš™ mizhuo@mizhuodeMacBook-Pro î‚° ~/WorkPlace/docker-compose î‚° docker search consul</span><br><span class="line">NAME                            DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">consul                          Consul is a datacenter runtime that providesâ€¦   1123                [OK]</span><br><span class="line">progrium/consul                                                                 354                                     [OK]</span><br><span class="line">gliderlabs/consul                                                               64                                      [OK]</span><br><span class="line">gliderlabs/consul-server                                                        40                                      [OK]</span><br><span class="line">voxxit/consul                   Blazing-fast Consul (consul.io) binary in Alâ€¦   29                                      [OK]</span><br><span class="line">hashicorp/consul-template       Consul Template is a template renderer, notiâ€¦   25</span><br><span class="line">gliderlabs/consul-agent                                                         14                                      [OK]</span><br><span class="line">prom/consul-exporter                                                            10                                      [OK]</span><br><span class="line">jhipster/consul-config-loader   A small docker based tool to load Spring Booâ€¦   9                                       [OK]</span><br><span class="line">hashicorp/consul-k8s            First-class integrations between Consul and â€¦   6                                       [OK]</span><br><span class="line">acaleph/consul-alerts                                                           6                                       [OK]</span><br><span class="line">bitnami/consul                  Bitnami Docker Image for Consul                 6                                       [OK]</span><br><span class="line">myena/consul-backinator         Command line Consul KV backup and restore utâ€¦   3                                       [OK]</span><br><span class="line">wdijkerman/consul               Consul 1.8.2 running on Alpine 3.11             3                                       [OK]</span><br><span class="line">mycatisblack/consul-agent       Fork of gliderlabs/consul-agent but with nagâ€¦   3                                       [OK]</span><br><span class="line">hashicorp/consul-enterprise     Consul is a datacenter runtime that providesâ€¦   2</span><br><span class="line">unifio/consul                   HashiCorp Consul                                1</span><br><span class="line">arm64v8/consul                  Consul is a datacenter runtime that providesâ€¦   1</span><br><span class="line">pdffiller/consul                consul version - 0.8.1                          0</span><br><span class="line">cjongseok/consul                The original codes is progrium/consul           0                                       [OK]</span><br><span class="line">justicel/consul-conf-env        Initialize a SSL ride-along container for voâ€¦   0</span><br><span class="line">arm32v6/consul                  Consul is a datacenter runtime that providesâ€¦   0</span><br><span class="line">carina/consul                   Consul image used by Carina.                    0                                       [OK]</span><br><span class="line">hoist/consul                    Hoist&#x27;s Consul Server                           0                                       [OK]</span><br><span class="line">wowgroup/consul-agent           Consul Agent                                    0                                       [OK]</span><br></pre></td></tr></table></figure><h5 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">âš™ mizhuo@mizhuodeMacBook-Pro î‚° ~/WorkPlace/docker-compose î‚° docker pull consul</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/consul</span><br><span class="line">188c0c94c7c5: Pull complete</span><br><span class="line">1bd0ad15d154: Pull complete</span><br><span class="line">3d30a01add55: Pull complete</span><br><span class="line">07f3ae3ba267: Pull complete</span><br><span class="line">0de0e8083495: Pull complete</span><br><span class="line">000f607b07c9: Pull complete</span><br><span class="line">Digest: sha256:b85322aa8c65355341dd81b5e95d5c0e8468e6419724d4e8a125198d40426a30</span><br><span class="line">Status: Downloaded newer image for consul:latest</span><br><span class="line">docker.io/library/consul:latest</span><br><span class="line">âš™ mizhuo@mizhuodeMacBook-Pro î‚° ~/WorkPlace/docker-compose î‚° docker images</span><br><span class="line">REPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">consul                         latest              4f7b214361a7        3 weeks ago         122MB</span><br></pre></td></tr></table></figure><h5 id="å•æœºæ¨¡å¼å¯åŠ¨"><a href="#å•æœºæ¨¡å¼å¯åŠ¨" class="headerlink" title="å•æœºæ¨¡å¼å¯åŠ¨"></a>å•æœºæ¨¡å¼å¯åŠ¨</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> âš™ mizhuo@mizhuodeMacBook-Pro î‚° ~/docker/consul î‚° docker run -p 8500:8500/tcp consul agent -server -ui -bootstrap-expect=1 -client=0.0.0.0</span><br><span class="line">==&gt; Starting Consul agent...</span><br><span class="line">           Version: &#x27;1.8.5&#x27;</span><br><span class="line">           Node ID: &#x27;76100a42-921d-9c9d-8d63-f0120a90f040&#x27;</span><br><span class="line">         Node name: &#x27;5ddd97e78a6d&#x27;</span><br><span class="line">        Datacenter: &#x27;dc1&#x27; (Segment: &#x27;&lt;all&gt;&#x27;)</span><br><span class="line">            Server: true (Bootstrap: true)</span><br><span class="line">       Client Addr: [0.0.0.0] (HTTP: 8500, HTTPS: -1, gRPC: -1, DNS: 8600)</span><br><span class="line">      Cluster Addr: 172.17.0.3 (LAN: 8301, WAN: 8302)</span><br><span class="line">           Encrypt: Gossip: false, TLS-Outgoing: false, TLS-Incoming: false, Auto-Encrypt-TLS: false</span><br></pre></td></tr></table></figure><h5 id="æµè§ˆå™¨è®¿é—®ç®¡ç†é¡µé¢"><a href="#æµè§ˆå™¨è®¿é—®ç®¡ç†é¡µé¢" class="headerlink" title="æµè§ˆå™¨è®¿é—®ç®¡ç†é¡µé¢"></a>æµè§ˆå™¨è®¿é—®ç®¡ç†é¡µé¢</h5><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201114222236.png"></p><blockquote><p>è‡³æ­¤Consulå·²ç»å®‰è£…æˆåŠŸï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åˆ›å»ºæœåŠ¡å¹¶æ³¨å†Œåˆ°Consulä¸Šäº†ã€‚æ¥ä¸‹æ¥æ¥å…¥åˆ°SpringBootä¸­ã€‚</p></blockquote><h4 id="æœåŠ¡æä¾›"><a href="#æœåŠ¡æä¾›" class="headerlink" title="æœåŠ¡æä¾›"></a>æœåŠ¡æä¾›</h4><ul><li>æ–°å»ºä¸€ä¸ªSpringBootæ¨¡å—ï¼Œå¹¶å‹¾é€‰<code>Web</code>ã€<code>Actuator</code>ã€<code>ConsulDiscovery</code>ä¾èµ–ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201114222734.png"></li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">consul-provider</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">consul:</span> <span class="comment">#consulé…ç½®</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8500</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">service-name:</span> <span class="string">consul-provider</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">1234</span></span><br></pre></td></tr></table></figure></li><li>æä¾›ä¸€ä¸ªæœåŠ¡æ¥å£,ä¸ºäº†æµ‹è¯•è´Ÿè½½å‡è¡¡ï¼ŒåŠ ä¸Šç«¯å£å·<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">    Integer port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello!&quot;</span> + port;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ‰“åŒ…é¡¹ç›®å¹¶åˆ†åˆ«å¯åŠ¨<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -jar consul-provider-0.0.1-SNAPSHOT.jar --spring.port=4321</span><br><span class="line">java -jar consul-provider-0.0.1-SNAPSHOT.jar --spring.port=4322</span><br></pre></td></tr></table></figure>è²Œä¼¼æ–°ç‰ˆSpringBootå¯åŠ¨ç±»ä¸Šä¸åŠ <code>@EnableDiscoveryClient</code>ä¹Ÿå¯ä»¥æ­£å¸¸å‘ç°æœåŠ¡,å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæœåŠ¡å·²ç»æˆåŠŸæ³¨å†Œ<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201114225604.png"></li></ul><h4 id="æœåŠ¡æ¶ˆè´¹"><a href="#æœåŠ¡æ¶ˆè´¹" class="headerlink" title="æœåŠ¡æ¶ˆè´¹"></a>æœåŠ¡æ¶ˆè´¹</h4><p>åŒä¸Šä¸€æ ·æ–°å»ºæ¨¡å—ï¼Œå¹¶å‹¾é€‰<code>Web</code>ã€<code>Actuator</code>ã€<code>ConsulDiscovery</code>ä¾èµ–ã€‚å¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">consul-consumer</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">consul:</span> <span class="comment">#consulé…ç½®</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8500</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">service-name:</span> <span class="string">consul-consumer</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">4321</span></span><br></pre></td></tr></table></figure><p>æ¶ˆè´¹è€…æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LoadBalancerClient client;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ServiceInstance</span> <span class="variable">choose</span> <span class="operator">=</span> client.choose(<span class="string">&quot;consul-provider&quot;</span>);</span><br><span class="line">        System.out.println(choose.getServiceId());</span><br><span class="line">        System.out.println(choose.getUri());</span><br><span class="line">        <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> restTemplate.getForObject(choose.getUri() + <span class="string">&quot;/hello&quot;</span>, String.class);</span><br><span class="line">        System.out.println(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—®ä¸¤æ¬¡<a href="http://localhost:4321/hello%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%87%BA%E5%88%86%E5%88%AB%E8%B0%83%E7%94%A8%E4%BA%86%E4%B8%A4%E4%B8%AA%E4%B8%8D%E5%90%8C%E7%AB%AF%E5%8F%A3%E7%9A%84Provider%EF%BC%8C%E8%AF%B4%E6%98%8EConsul%E9%BB%98%E8%AE%A4%E5%BC%80%E5%90%AF%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%8A%9F%E8%83%BD%E3%80%82">http://localhost:4321/helloï¼Œå¯ä»¥çœ‹å‡ºåˆ†åˆ«è°ƒç”¨äº†ä¸¤ä¸ªä¸åŒç«¯å£çš„Providerï¼Œè¯´æ˜Consulé»˜è®¤å¼€å¯è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚</a></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æœåŠ¡ID:consul-provider</span><br><span class="line">æœåŠ¡URI:http://169.254.6.194:2345</span><br><span class="line">hello!2345</span><br><span class="line">æœåŠ¡ID:consul-provider</span><br><span class="line">æœåŠ¡URI:http://169.254.6.194:1234</span><br><span class="line">hello!1234</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> Consul </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…ELK</title>
      <link href="/Docker%E5%AE%89%E8%A3%85ELK/"/>
      <url>/Docker%E5%AE%89%E8%A3%85ELK/</url>
      
        <content type="html"><![CDATA[<h4 id="ä½¿ç”¨Dokcerå®‰è£…é…ç½®ELK"><a href="#ä½¿ç”¨Dokcerå®‰è£…é…ç½®ELK" class="headerlink" title="ä½¿ç”¨Dokcerå®‰è£…é…ç½®ELK"></a>ä½¿ç”¨Dokcerå®‰è£…é…ç½®ELK</h4><p>ELKæ˜¯ä¸‰ä¸ªå¼€æºè½¯ä»¶çš„ç¼©å†™,åˆ†åˆ«è¡¨ç¤ºï¼šElasticsearch,Logstash,Kibana,å®ƒä»¬éƒ½æ˜¯å¼€æºè½¯ä»¶,è€Œè¿™ä¸‰ç§æœåŠ¡å¯ä»¥æ­å»ºçº¿ä¸Šæ—¥å¿—æ”¶é›†ç³»ç»Ÿã€‚</p><span id="more"></span><h4 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodeMacBook-Pro î‚° ~/docker/elk î‚° docker images</span><br><span class="line">REPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">kibana                        7.14.0             1c52b5264c4b         11 months ago        1.49GB</span><br><span class="line">elasticsearch                 7.14.0             d9c406333741         11 months ago        1.12GB</span><br><span class="line">logstash                      7.14.0             f0b0f64a222c         11 months ago        1.67GB</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºè‡ªå®šä¹‰çš„ç½‘ç»œ"><a href="#åˆ›å»ºè‡ªå®šä¹‰çš„ç½‘ç»œ" class="headerlink" title="åˆ›å»ºè‡ªå®šä¹‰çš„ç½‘ç»œ"></a>åˆ›å»ºè‡ªå®šä¹‰çš„ç½‘ç»œ</h4><p>ç”¨äºè¿æ¥åˆ°è¿æ¥åˆ°åŒä¸€ç½‘ç»œçš„å…¶ä»–æœåŠ¡(ä¾‹å¦‚Kibana):<code>docker network create elk_network</code></p><h4 id="å®‰è£…ElasticSearch"><a href="#å®‰è£…ElasticSearch" class="headerlink" title="å®‰è£…ElasticSearch"></a>å®‰è£…ElasticSearch</h4><ul><li>å¯åŠ¨ElasticSearch<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -e ES_JAVA_OPTS=&quot;-Xms512m -Xmx512m&quot; -d --name elasticsearch --net elk_network -p 9200:9200 -p 9300:9300 -e &quot;TZ=Asia/Shanghai&quot; -e &quot;cluster.name=elasticsearch&quot; -e &quot;discovery.type=single-node&quot; -v /Users/mizhuo/Path/Docker/Elasticsearch/plugins:/usr/share/elasticsearch/plugins -v /Users/mizhuo/Path/Docker/Elasticsearch/data:/usr/share/elasticsearch/data  elasticsearch:7.14.0</span><br></pre></td></tr></table></figure></li><li>æ£€æµ‹ elasticsearch æ˜¯å¦å¯åŠ¨æˆåŠŸ<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@mizhuo ~]# curl localhost:9200</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot; : &quot;d84af9cd4ad5&quot;,</span><br><span class="line">  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,</span><br><span class="line">  &quot;cluster_uuid&quot; : &quot;pxxn25lhQbWWQGYH-C3Ijg&quot;,</span><br><span class="line">  &quot;version&quot; : &#123;</span><br><span class="line">    &quot;number&quot; : &quot;7.14.0&quot;,</span><br><span class="line">    &quot;build_flavor&quot; : &quot;default&quot;,</span><br><span class="line">    &quot;build_type&quot; : &quot;docker&quot;,</span><br><span class="line">    &quot;build_hash&quot; : &quot;dd5a0a2acaa2045ff9624f3729fc8a6f40835aa1&quot;,</span><br><span class="line">    &quot;build_date&quot; : &quot;2021-07-29T20:49:32.864135063Z&quot;,</span><br><span class="line">    &quot;build_snapshot&quot; : false,</span><br><span class="line">    &quot;lucene_version&quot; : &quot;8.9.0&quot;,</span><br><span class="line">    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,</span><br><span class="line">    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>å¦‚æœå¯åŠ¨å¤±è´¥,å¯èƒ½æ˜¯æƒé™é—®é¢˜,<code>chmod -R 777 /Users/mizhuo/Path/Docker/Elasticsearch/data</code></li><li>ä¸‹è½½åˆ†è¯å™¨<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.14.0/elasticsearch-analysis-ik-7.14.0.zip</span><br></pre></td></tr></table></figure></li><li>å®‰è£…åˆ†è¯å™¨(æ–¹æ³•ä¸€)<ul><li>ä¸‹è½½åˆ†è¯å™¨<a href="https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.14.0/elasticsearch-analysis-ik-7.14.0.zip">-&gt;å°ç«ç®­</a></li><li>å°†ä¸‹è½½æ–‡ä»¶è§£å‹ã€‚åœ¨ es&#x2F;plugins ç›®å½•ä¸‹ï¼Œæ–°å»º ik ç›®å½•ï¼Œå¹¶å°†è§£å‹åçš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ° ik ç›®å½•ä¸‹ã€‚</li><li>é‡å¯ es æœåŠ¡ã€‚<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@mizhuo elasticsearch-plugins]# docker cp elasticsearch-analysis-ik-7.14.0.zip elasticsearch:/usr/share/elasticsearch/plugins/analysis-ik/</span><br><span class="line">[root@mizhuo elasticsearch-plugins]# docker exec -it elasticsearch /bin/bash</span><br><span class="line">[root@37a7c1bcd2de elasticsearch]# cd plugins/analysis-ik</span><br><span class="line">[root@37a7c1bcd2de analysis-ik]# unzip elasticsearch-analysis-ik-7.14.0.zip</span><br><span class="line">[root@37a7c1bcd2de plugins]# elasticsearch-plugin list</span><br><span class="line">analysis-ik</span><br></pre></td></tr></table></figure></li></ul></li><li>å®‰è£…åˆ†è¯å™¨(æ–¹æ³•äºŒ)<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.14.0/elasticsearch-analysis-ik-7.14.0.zip</span><br></pre></td></tr></table></figure></li><li>æµ‹è¯•åˆ†è¯å™¨<ul><li>åˆ›å»ºç´¢å¼•<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210110135029.png"></li><li>åˆ†è¯æµ‹è¯•<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210110144529.png"><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210110144615.png"></li></ul></li></ul><h4 id="å®‰è£…Kibana"><a href="#å®‰è£…Kibana" class="headerlink" title="å®‰è£…Kibana"></a>å®‰è£…Kibana</h4><ul><li>è¿è¡ŒKibana  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name kibana --net elk_network --link elasticsearch:es  -e &quot;elasticsearch.hosts=http://es:9200&quot; -e &quot;TZ=Asia/Shanghai&quot; -p 5601:5601 kibana:7.14.0</span><br></pre></td></tr></table></figure></li><li>è®¾ç½®ä¸­æ–‡<ul><li><code>docker exec -it kibana /bin/bash</code>è¿›å…¥kibanaå®¹å™¨</li><li>æ‰¾åˆ°<code>config</code>ä¸‹çš„<code>kibana.yml</code></li><li>æœ€ä¸‹é¢æ·»åŠ è¡Œ <code>i18n.locale: &quot;zh-CN&quot;</code></li><li>é‡å¯kibana</li><li>è®¿é—®5601ç«¯å£<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20210110144956.png"></li></ul></li></ul><h4 id="å®‰è£…logstash"><a href="#å®‰è£…logstash" class="headerlink" title="å®‰è£…logstash"></a>å®‰è£…logstash</h4><ul><li>æ–°å»ºé…ç½®æ–‡ä»¶  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">  tcp &#123;</span><br><span class="line">    mode =&gt; &quot;server&quot;</span><br><span class="line">    host =&gt; &quot;0.0.0.0&quot;</span><br><span class="line">    port =&gt; 6001</span><br><span class="line">    codec =&gt; json_lines</span><br><span class="line">    type =&gt; &quot;debug&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  tcp &#123;</span><br><span class="line">    mode =&gt; &quot;server&quot;</span><br><span class="line">    host =&gt; &quot;0.0.0.0&quot;</span><br><span class="line">    port =&gt; 6002</span><br><span class="line">    codec =&gt; json_lines</span><br><span class="line">    type =&gt; &quot;error&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  tcp &#123;</span><br><span class="line">    mode =&gt; &quot;server&quot;</span><br><span class="line">    host =&gt; &quot;0.0.0.0&quot;</span><br><span class="line">    port =&gt; 6003</span><br><span class="line">    codec =&gt; json_lines</span><br><span class="line">    type =&gt; &quot;info&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">  elasticsearch &#123;</span><br><span class="line">    hosts =&gt; &quot;es:9200&quot;</span><br><span class="line">    index =&gt; &quot;demo-%&#123;type&#125;-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>è¿è¡Œlogstash  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name logstash -d --net elk_network --link elasticsearch:es -v /Users/mizhuo/Path/Docker/Logstash/logstash.conf:/usr/share/logstash/pipeline/logstash.conf -e &quot;TZ=Asia/Shanghai&quot; -p 6001:6001 -p 6002:6002 -p 6003:6003 logstash:7.14.0</span><br></pre></td></tr></table></figure></li><li>å®‰è£…json_linesæ’ä»¶<ul><li><code>docker exec -it logstash /bin/bash</code>è¿›å…¥logstashå®¹å™¨</li><li>åˆ‡æ¢åˆ°<code>bin</code>ç›®å½•</li><li>æ‰§è¡Œ<code>logstash-plugin install logstash-codec-json_lines</code>å®‰è£…æ’ä»¶</li><li>é‡å¯logstash</li></ul></li></ul><h4 id="ä½¿ç”¨docker-composeæ­å»ºELK"><a href="#ä½¿ç”¨docker-composeæ­å»ºELK" class="headerlink" title="ä½¿ç”¨docker-composeæ­å»ºELK"></a>ä½¿ç”¨docker-composeæ­å»ºELK</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span> </span><br><span class="line"><span class="attr">services:</span>  </span><br><span class="line">    <span class="attr">elasticsearch:</span>    </span><br><span class="line">        <span class="attr">image:</span> <span class="string">elasticsearch:7.14.0</span></span><br><span class="line">        <span class="attr">container_name:</span> <span class="string">elasticsearch</span>    </span><br><span class="line">        <span class="attr">environment:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;cluster.name=elasticsearch&quot;</span> <span class="comment">#è®¾ç½®é›†ç¾¤åç§°ä¸ºelasticsearch      </span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;discovery.type=single-node&quot;</span> <span class="comment">#ä»¥å•ä¸€èŠ‚ç‚¹æ¨¡å¼å¯åŠ¨      </span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span> <span class="comment">#è®¾ç½®ä½¿ç”¨jvmå†…å­˜å¤§å°      </span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">TZ=Asia/Shanghai</span>    </span><br><span class="line">        <span class="attr">volumes:</span>     </span><br><span class="line">            <span class="bullet">-</span> <span class="string">/Users/mizhuo/Path/Docker/Elasticsearch/plugins:/usr/share/elasticsearch/plugins</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/Users/mizhuo/Path/Docker/Elasticsearch/data:/usr/share/elasticsearch/data</span>   </span><br><span class="line">        <span class="attr">ports:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="number">9200</span><span class="string">:9200</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="number">9300</span><span class="string">:9300</span>  </span><br><span class="line">    <span class="attr">kibana:</span>    </span><br><span class="line">        <span class="attr">image:</span> <span class="string">kibana:7.14.0</span>    </span><br><span class="line">        <span class="attr">container_name:</span> <span class="string">kibana</span>    </span><br><span class="line">        <span class="attr">links:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="string">elasticsearch:es</span> <span class="comment">#å¯ä»¥ç”¨esè¿™ä¸ªåŸŸåè®¿é—®elasticsearchæœåŠ¡    </span></span><br><span class="line">        <span class="attr">depends_on:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="string">elasticsearch</span> <span class="comment">#kibanaåœ¨elasticsearchå¯åŠ¨ä¹‹åå†å¯åŠ¨    </span></span><br><span class="line">        <span class="attr">environment:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;elasticsearch.hosts=http://es:9200&quot;</span> <span class="comment">#è®¾ç½®è®¿é—®elasticsearchçš„åœ°å€     </span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">TZ=Asia/Shanghai</span>    </span><br><span class="line">        <span class="attr">ports:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="number">5601</span><span class="string">:5601</span>  </span><br><span class="line">    <span class="attr">logstash:</span>    </span><br><span class="line">        <span class="attr">image:</span> <span class="string">logstash:7.14.0</span>    </span><br><span class="line">        <span class="attr">container_name:</span> <span class="string">logstash</span>    </span><br><span class="line">        <span class="attr">environment:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="string">TZ=Asia/Shanghai</span>    </span><br><span class="line">        <span class="attr">volumes:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="string">/Users/mizhuo/Path/Docker/Logstash/logstash.conf:/usr/share/logstash/pipeline/logstash.conf</span> <span class="comment">#æŒ‚è½½logstashçš„é…ç½®æ–‡ä»¶    </span></span><br><span class="line">        <span class="attr">depends_on:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="string">elasticsearch</span> <span class="comment">#logstashåœ¨elasticsearchå¯åŠ¨ä¹‹åå†å¯åŠ¨    </span></span><br><span class="line">        <span class="attr">links:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="string">elasticsearch:es</span> <span class="comment">#å¯ä»¥ç”¨esè¿™ä¸ªåŸŸåè®¿é—®elasticsearchæœåŠ¡    </span></span><br><span class="line">        <span class="attr">ports:</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="number">6001</span><span class="string">:6001</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="number">6002</span><span class="string">:6002</span>      </span><br><span class="line">            <span class="bullet">-</span> <span class="number">6003</span><span class="string">:6003</span>      </span><br></pre></td></tr></table></figure><ul><li>æ‰§è¡Œ<code>docker-compose up -d</code>,å°±ä¼šè‡ªåŠ¨åˆ›å»ºELKäº†,æ›´æ¨èè¿™ç§æ–¹æ³•ã€‚</li></ul><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>åˆ°è¿™é‡Œ,ä½¿ç”¨Dokceræ­å»ºELKå·²ç»å®Œæˆäº†,åç»­ä¼šè®²å¦‚ä½•å°†ELKæ¥å…¥åˆ°SpringBooté¡¹ç›®ä¸­,ç®€å•ç®¡ç†æ—¥å¿—å¹¶å¿«é€Ÿè¿›è¡Œæ—¥å¿—åˆ†æã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> ELK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éƒ¨ç½²Vueé¡¹ç›®åˆ°è¿œç¨‹æœåŠ¡å™¨Dockerä¸‹çš„Nginx</title>
      <link href="/%E9%83%A8%E7%BD%B2Vue%E9%A1%B9%E7%9B%AE%E5%88%B0%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8Docker%E4%B8%8B%E7%9A%84Nginx/"/>
      <url>/%E9%83%A8%E7%BD%B2Vue%E9%A1%B9%E7%9B%AE%E5%88%B0%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8Docker%E4%B8%8B%E7%9A%84Nginx/</url>
      
        <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>åœ¨å®é™…ç”Ÿäº§ä¸­,å¤§éƒ¨åˆ†ä¼ä¸šéƒ½ä¼šå°†é¡¹ç›®çš„å‰åç«¯éƒ½éƒ¨ç½²åˆ°Dockerä¸Š,æ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸‹ä½¿ç”¨è¿œç¨‹æœåŠ¡å™¨Dockerçš„Nginxæ¥éƒ¨ç½²Vueé¡¹ç›®çš„æµç¨‹ã€‚</p><span id="more"></span><h4 id="æ‰“åŒ…Vueé¡¹ç›®"><a href="#æ‰“åŒ…Vueé¡¹ç›®" class="headerlink" title="æ‰“åŒ…Vueé¡¹ç›®"></a>æ‰“åŒ…Vueé¡¹ç›®</h4><ul><li>ä½¿ç”¨å‘½ä»¤æ‰“åŒ…Vueé¡¹ç›®ï¼Œä¼šç”Ÿæˆä¸€ä¸ª<code>dist</code>æ–‡ä»¶å¤¹ã€‚<code>dist</code>å…¨ç§°<code>distribution</code>ï¼Œè¿™ä¸ªä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€ç»ˆå‘å¸ƒçš„ç‰ˆæœ¬ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201029211956.png"></li></ul><h4 id="å®‰è£…Nginxé•œåƒ"><a href="#å®‰è£…Nginxé•œåƒ" class="headerlink" title="å®‰è£…Nginxé•œåƒ"></a>å®‰è£…Nginxé•œåƒ</h4><ul><li><code>docker pull nginx</code><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201029213730.png"></li></ul><h4 id="ä¸Šä¼ distæ–‡ä»¶å¤¹åˆ°æœåŠ¡å™¨"><a href="#ä¸Šä¼ distæ–‡ä»¶å¤¹åˆ°æœåŠ¡å™¨" class="headerlink" title="ä¸Šä¼ distæ–‡ä»¶å¤¹åˆ°æœåŠ¡å™¨"></a>ä¸Šä¼ distæ–‡ä»¶å¤¹åˆ°æœåŠ¡å™¨</h4><ul><li>ä½¿ç”¨ftpå·¥å…·ï¼Œå°†æ–‡ä»¶ä¸Šä¼ è‡³æœåŠ¡å™¨<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201029214614.png"></li></ul><h4 id="åˆ›å»ºDockerfileæ–‡ä»¶"><a href="#åˆ›å»ºDockerfileæ–‡ä»¶" class="headerlink" title="åˆ›å»ºDockerfileæ–‡ä»¶"></a>åˆ›å»ºDockerfileæ–‡ä»¶</h4><ul><li>æ–°å»ºDockerfile<br><code>vi Dockerfile</code></li><li>å†…å®¹å¦‚ä¸‹  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># è®¾ç½®åŸºç¡€é•œåƒ</span><br><span class="line">FROM nginx:latest</span><br><span class="line"># ä½œè€…</span><br><span class="line">MAINTAINER mizhuo</span><br><span class="line"># å¤åˆ¶distå†…å®¹åˆ°Nginxä¸‹</span><br><span class="line">COPY dist/ /usr/share/nginx/html/     </span><br></pre></td></tr></table></figure></li></ul><h4 id="åˆ›å»ºé•œåƒ"><a href="#åˆ›å»ºé•œåƒ" class="headerlink" title="åˆ›å»ºé•œåƒ"></a>åˆ›å»ºé•œåƒ</h4><ul><li>åˆ›å»ºè‡ªå·±çš„é•œåƒ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@mizhuo project]# docker build -t vue-client .</span><br><span class="line">Sending build context to Docker daemon  6.208MB</span><br><span class="line">Step 1/4 : FROM nginx:latest</span><br><span class="line">---&gt; f35646e83998</span><br><span class="line">Step 2/4 : MAINTAINER mizhuo</span><br><span class="line">---&gt; Running in b330404f1063</span><br><span class="line">Removing intermediate container b330404f1063</span><br><span class="line">---&gt; 618604556d90</span><br><span class="line">Step 3/4 : COPY dist/ /usr/share/nginx/html/</span><br><span class="line">---&gt; f568fe16703b</span><br><span class="line">Step 4/4 : RUN echo &#x27;init ok!&#x27;</span><br><span class="line">---&gt; Running in 0ccaa3f04510</span><br><span class="line">init ok!</span><br><span class="line">Removing intermediate container 0ccaa3f04510</span><br><span class="line">---&gt; db01d64319dd</span><br><span class="line">Successfully built db01d64319dd</span><br><span class="line">Successfully tagged hr-client:latest</span><br><span class="line">[root@mizhuo project]#</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹é•œåƒ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@mizhuo hr-client]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">vue-client           latest              db01d64319dd        2 minutes ago       139MB</span><br><span class="line">redis               latest              62f1d3402b78        44 hours ago        104MB</span><br><span class="line">nginx               latest              f35646e83998        2 weeks ago         133MB</span><br><span class="line">rabbitmq            management          68898be27496        3 weeks ago         186MB</span><br><span class="line">[root@mizhuo hr-client]#</span><br></pre></td></tr></table></figure></li><li>å¯åŠ¨é•œåƒ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@mizhuo hr-client]# docker run -d --name vue-client -p 8080:80 vue-client</span><br></pre></td></tr></table></figure></li></ul><h4 id="æµè§ˆå™¨è®¿é—®é¡¹ç›®"><a href="#æµè§ˆå™¨è®¿é—®é¡¹ç›®" class="headerlink" title="æµè§ˆå™¨è®¿é—®é¡¹ç›®"></a>æµè§ˆå™¨è®¿é—®é¡¹ç›®</h4><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20201029224404.png"></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¹è§‚é”å’Œæ‚²è§‚é”</title>
      <link href="/%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81/"/>
      <url>/%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81/</url>
      
        <content type="html"><![CDATA[<p>ä¹è§‚é”å’Œæ‚²è§‚é”ï¼Œé¡¾åæ€ä¹‰ï¼Œä¹è§‚é”å¯¹æ•°æ®åº“æ°¸è¿œä¿æŒç€ä¸€ç§ä¹è§‚çš„æ€åº¦ï¼Œæ“ä½œæ•°æ®åº“çš„æ—¶å€™ä¸ä¼šå¯¹æ•°æ®åŠ é”ï¼Œåªæœ‰åˆ°æ•°æ®æäº¤çš„æ—¶å€™æ‰å»éªŒè¯æ•°æ®æ˜¯å¦å­˜åœ¨å†²çªï¼Œä¸€èˆ¬æ˜¯é€šè¿‡åŠ ç‰ˆæœ¬å·æ¥éªŒè¯ã€‚è€Œæ‚²è§‚é”åˆ™æ˜¯ä¸€ç§æ‚²è§‚çš„æ€åº¦ï¼Œæ“ä½œæ•°æ®åº“æ—¶å…ˆå¯¹æ•°æ®åŠ é”ï¼Œç„¶åå†å»è¯»å†™æ•°æ®ï¼Œåœ¨å®ƒé‡Šæ”¾é”ä¹‹å‰ï¼Œä»»ä½•äººéƒ½æ— æ³•æ“ä½œæ•°æ®ï¼Œç›´åˆ°ä¸Šä¸€ä¸ªäººé‡Šæ”¾é”ï¼Œä¸‹ä¸€ä¸ªäººæ‰èƒ½ç»§ç»­æŠ¢å é”ï¼Œç„¶åæ“ä½œæ•°æ®ã€‚</p><span id="more"></span><h4 id="æ‚²è§‚é”"><a href="#æ‚²è§‚é”" class="headerlink" title="æ‚²è§‚é”"></a>æ‚²è§‚é”</h4><p>å½“è¦å¯¹æ•°æ®åº“ä¸­ä¸€è¡Œæ•°æ®è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¸ºé¿å…åŒæ—¶è¢«å…¶ä»–äººä¿®æ”¹ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯å¯¹è¯¥æ•°æ®è¿›è¡Œé”å®šï¼Œé˜²æ­¢å¹¶å‘ï¼Œè€Œè¿™ç§å…ˆåŠ é”åè®¿é—®çš„é”æœºåˆ¶è¢«ç§°ä¸ºæ‚²è§‚é”ã€‚æ‚²è§‚é”ä¸»è¦åˆ†ä¸ºå…±äº«é”å’Œæ’ä»–é”ï¼Œå…±äº«é”åˆç§°ä¸ºè¯»é”ï¼Œå°±æ˜¯å¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€æ•°æ®å¯ä»¥å…±äº«ä¸€æŠŠé”ï¼Œéƒ½èƒ½è®¿é—®åˆ°æ•°æ®ä½†æ˜¯æ— æ³•ä¿®æ”¹ã€‚è€Œæ’ä»–é”åˆç§°ä¸ºå†™é”ï¼Œæ’ä»–é”ä¸èƒ½ä¸å…¶ä»–é”å¹¶å­˜ï¼Œå¦‚æœä¸€ä¸ªäº‹åŠ¡è·å–äº†ä¸€ä¸ªæ•°æ®è¡Œçš„æ’ä»–é”ï¼Œé‚£ä¹ˆå…¶ä»–äº‹åŠ¡åˆ™æ— æ³•è·å–é”ã€‚</p><ul><li>ä¼˜ç‚¹:ç­–ç•¥ä¿å®ˆï¼Œæ•°æ®å®‰å…¨</li><li>ç¼ºç‚¹:ä¼šé€ æˆæ­»é”ï¼Œä¸ºå¤„ç†åŠ é”æœºåˆ¶ï¼Œä¼šå½±å“æ•ˆç‡ï¼Œè€Œä¸”ä¸èƒ½å¹¶å‘æ‰§è¡Œã€‚</li></ul><h4 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h4><p>ç›¸å¯¹äºæ‚²è§‚é”è€Œè¨€ï¼Œä¹è§‚é”é»˜è®¤æ•°æ®ä¸ä¼šäº§ç”Ÿå†²çªï¼Œä¸ä¼šåˆ»æ„ä½¿ç”¨æ•°æ®åº“é”æœºåˆ¶ï¼Œå¸¸è§å®ç°ä¹è§‚é”æ˜¯é‡‡ç”¨è®°å½•æ•°æ®ç‰ˆæœ¬çš„æ–¹æ³•æˆ–è€…æ˜¯CASç®—æ³•ï¼Œæäº¤æ•°æ®çš„æ—¶å€™æ‰å»æ ¡éªŒç‰ˆæœ¬æ˜¯å¦å˜åŒ–ï¼Œå¦‚æœç‰ˆæœ¬å‘ç”Ÿäº†å˜åŒ–ï¼Œè¯´æ˜æ•°æ®åº“ä¸­çš„æ•°æ®å·²ç»å˜åŒ–äº†ï¼Œå°†é—®é¢˜æŠ›å‡ºç»™ç”¨æˆ·ï¼Œç”¨æˆ·å†³å®šå¦‚ä½•è§£å†³ã€‚</p><ul><li>ä¼˜ç‚¹:ä¸ä¼šå‡ºç°æ­»é”æƒ…å†µï¼Œæ•ˆç‡è¾ƒé«˜</li><li>ç¼ºç‚¹:åªé€‚ç”¨äºå†™çš„æ“ä½œæ¯”è¾ƒå°‘çš„æƒ…å†µã€‚å¦åˆ™ä¼šå½±å“æ•ˆç‡ï¼Œé™ä½æ€§èƒ½ã€‚CASç®—æ³•çš„ABAé—®é¢˜,å³å¦‚æœä¸€ä¸ªå˜é‡åˆæ¬¡è¯»å–çš„æ—¶å€™æ˜¯ A å€¼ï¼Œå®ƒçš„å€¼è¢«æ”¹æˆäº† Bï¼Œåæ¥åˆè¢«æ”¹å›ä¸º Aï¼Œé‚£ CAS æ“ä½œå°±ä¼šè¯¯è®¤ä¸ºå®ƒä»æ¥æ²¡æœ‰è¢«æ”¹å˜è¿‡ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitå‘½ä»¤å¤§å…¨</title>
      <link href="/Git%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"/>
      <url>/Git%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<p><strong>Git</strong>æ˜¯æ¯ä¸ªç¨‹åºå‘˜å¿…å¤‡æŠ€èƒ½,ç›¸è¾ƒäºä¹‹å‰ä½¿ç”¨çš„SVN,Gitæ˜¯åˆ†å¸ƒå¼çš„,æ¯å°ç”µè„‘æœ¬åœ°éƒ½æœ‰ä¸€ä¸ªä»“åº“,å¯ä»¥ç¦»çº¿å·¥ä½œ,è€ŒSVNæ–­ç½‘åˆ™æ— æ³•å·¥ä½œã€‚è€Œä¸”Gitçš„åˆ†æ”¯æ¦‚å¿µå¯ä»¥å¾ˆå¥½çš„ç®¡ç†ç‰ˆæœ¬ã€ç¯å¢ƒç­‰ã€‚ä¹Ÿæ­£å› ä¸ºGitåŠŸèƒ½å¼ºå¤§,æ‰€ä»¥è¦æŒæ¡çš„å‘½ä»¤ä¹Ÿååˆ†ç¹å¤š,æ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><h4 id="GitåŸºç¡€å‘½ä»¤"><a href="#GitåŸºç¡€å‘½ä»¤" class="headerlink" title="GitåŸºç¡€å‘½ä»¤"></a>GitåŸºç¡€å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå§‹åŒ–æœ¬åœ°gitä»“åº“,åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ.gitç›®å½•</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git init</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> &lt;url&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†æ–‡ä»¶åŠ å…¥åˆ°æš‚å­˜åŒº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add &lt;file1&gt; &lt;file2&gt; ...</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†æ–‡ä»¶ç›®å½•åŠ å…¥åˆ°æš‚å­˜åŒº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add &lt;<span class="built_in">dir</span>&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶åŠ å…¥åˆ°æš‚å­˜åŒº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add .</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶,å¹¶åŠ å…¥åˆ°æš‚å­˜åŒº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">rm</span> &lt;file&gt; &lt;file2&gt; ...</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœæ­¢è¿½è¸ªæ–‡ä»¶,ä»ä¿å­˜åœ¨å·¥ä½œåŒº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">rm</span> -cached &lt;file&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ”¹æ–‡ä»¶åå¹¶ä¿å­˜åˆ°æš‚å­˜åŒº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">mv</span> &lt;file-oldName&gt; &lt;file-newName&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æäº¤æš‚å­˜åŒºæ‰€æœ‰æ–‡ä»¶åˆ°ä»“åº“</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m &lt;desc&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æäº¤æš‚å­˜åŒºæŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit &lt;file1&gt; &lt;file2&gt; ... -m &lt;desc&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ä¸€æ¬¡æ–°çš„æäº¤æ›¿ä»£ä¸Šä¸€æ¬¡çš„æäº¤(æ”¹å†™commitä¿¡æ¯)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit --amend -m &lt;desc&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡åšä¸Šä¸€æ¬¡çš„æäº¤</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit --amend &lt;file1&gt; &lt;file2&gt; ...</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æäº¤å·¥ä½œåŒºä¿®æ”¹ç›´æ¥åˆ°ä»“åº“</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -a</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¢å¤æš‚å­˜åŒºæ–‡ä»¶åˆ°å·¥ä½œåŒº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout &lt;file&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout &lt;commit&gt; &lt;file&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout .</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset &lt;file&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset --hard</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset &lt;commit&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset --hard &lt;commit&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset --keep &lt;commit&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git revert &lt;commit&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash pop</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰çŠ¶æ€</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git status</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å†å²è®°å½•</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹commitå†å²è®°å½•ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --<span class="built_in">stat</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ ¹æ®å…³é”®è¯æŸ¥è¯¢commitå†å²</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> -S &lt;keyword&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶æ¯ä¸€æ¬¡çš„diff</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> -p &lt;file&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºè¿‡å»çš„5æ¬¡æäº¤</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> -5 --pretty --oneline</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·å’Œæ¬¡æ•°</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git shortlog -sn</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶ä¿®æ”¹çš„æ—¶é—´å’Œå†…å®¹</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git blame &lt;file&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„ä»£ç å·®å¼‚</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git diff</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æš‚å­˜åŒºå’Œä¸Šä¸€æ¬¡commitçš„å·®å¼‚</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git diff --cached &lt;file&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitçš„å·®å¼‚</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git diff HEAD</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºä»Šå¤©å†™çš„ä»£ç </span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git diff --shortstat <span class="string">&quot;@&#123;0 day ago&#125;&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸæ¬¡æäº¤çš„å†…å®¹çš„å˜åŒ–</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git show &lt;commit&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reflog</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å½“å‰åˆ†æ”¯æäº¤åˆ°æŒ‡å®šåˆ†æ”¯ä¹‹å</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rebase &lt;branch&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå¹¶æäº¤ï¼Œæ¸…ç†è®°å½•</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rebase -i HEAD~n</span></span><br></pre></td></tr></table></figure><h4 id="Gitåˆ†æ”¯å‘½ä»¤"><a href="#Gitåˆ†æ”¯å‘½ä»¤" class="headerlink" title="Gitåˆ†æ”¯å‘½ä»¤"></a>Gitåˆ†æ”¯å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºå½“å‰åˆ†æ”¯åˆ—è¡¨</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºè¿œç¨‹åˆ†æ”¯åˆ—è¡¨</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -r</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯åˆ—è¡¨</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -a</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºåˆ†æ”¯,ä¸åˆ‡æ¢</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch &lt;branch-name&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout -b &lt;branch-name&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºåˆ†æ”¯å¹¶æŒ‡å®šæŒ‡å‘æŸä¸ªcommit</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch &lt;branch-name&gt; &lt;commit&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºåˆ†æ”¯å¹¶ä¸è¿œç¨‹åˆ†æ”¯å»ºç«‹å…³ç³»</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch --track &lt;branch-name&gt; &lt;remote-branch&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout &lt;branch-name&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†ç°æœ‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å»ºç«‹è”ç³»</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch --set-upstream &lt;branch-name&gt; &lt;remote-branch&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå¹¶åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge &lt;branch&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€‰æ‹©ä¸€ä¸ªcommitåˆå¹¶åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git cherry-pick &lt;commit&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -d &lt;branch-name&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push origin --delete &lt;branch-name&gt;</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -dr &lt;remote/branch&gt;</span> </span><br></pre></td></tr></table></figure><h4 id="Gitè¿œç¨‹åŒæ­¥å‘½ä»¤"><a href="#Gitè¿œç¨‹åŒæ­¥å‘½ä»¤" class="headerlink" title="Gitè¿œç¨‹åŒæ­¥å‘½ä»¤"></a>Gitè¿œç¨‹åŒæ­¥å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ˜¾ç¤ºè¿œç¨‹ä»“åº“ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote -v</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¢åŠ è¿œç¨‹ä»“åº“</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote add &lt;remote&gt; &lt;url&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°ä»“åº“</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push &lt;remote&gt; &lt;branch&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸Šä¼ æ‰€æœ‰åˆ†æ”¯åˆ°ä»“åº“</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push &lt;remote&gt; --all</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ— è§†å†²çªå¼ºè¡Œä¸Šä¼ åˆ†æ”¯åˆ°ä»“åº“</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push &lt;remote&gt; --force</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‹‰å–è¿œç¨‹ä»“åº“æœ€æ–°å†…å®¹,ä¸åˆå¹¶</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git fetch &lt;remote&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‹‰å–è¿œç¨‹ä»“åº“å¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git pull &lt;remote&gt; &lt;branch&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ­¥è¿œç¨‹åˆ†æ”¯åˆ°æœ¬åœ°</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote update</span></span><br></pre></td></tr></table></figure><h4 id="Gitæ ‡ç­¾å‘½ä»¤"><a href="#Gitæ ‡ç­¾å‘½ä»¤" class="headerlink" title="Gitæ ‡ç­¾å‘½ä»¤"></a>Gitæ ‡ç­¾å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ—å‡ºæ‰€æœ‰tag</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git tag</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git tag &lt;tag&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æœ¬åœ°tag</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git tag -d &lt;tag&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤è¿œç¨‹tag</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push origin :refs/tags/&lt;tagName&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹tagä¿¡æ¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git show &lt;tag&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æäº¤æŒ‡å®štag</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push &lt;remote&gt; &lt;tag&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æäº¤æ‰€æœ‰tag</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push &lt;remote&gt; --tags</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout -b &lt;branch&gt; &lt;tag&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Gité…ç½®å‘½ä»¤"><a href="#Gité…ç½®å‘½ä»¤" class="headerlink" title="Gité…ç½®å‘½ä»¤"></a>Gité…ç½®å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--<span class="built_in">local</span>ï¼šä»“åº“çº§ï¼Œ--globalï¼šå…¨å±€çº§ï¼Œ--systemï¼šç³»ç»Ÿçº§</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config &lt;--<span class="built_in">local</span> | --global | --system&gt; -l</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰ç”Ÿæ•ˆçš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config -l</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¾‘é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--<span class="built_in">local</span>ï¼šä»“åº“çº§ï¼Œ--globalï¼šå…¨å±€çº§ï¼Œ--systemï¼šç³»ç»Ÿçº§</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config &lt;--<span class="built_in">local</span> | --global | --system&gt; -e</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ é…ç½®é¡¹</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--<span class="built_in">local</span>ï¼šä»“åº“çº§ï¼Œ--globalï¼šå…¨å±€çº§ï¼Œ--systemï¼šç³»ç»Ÿçº§</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config &lt;--<span class="built_in">local</span> | --global | --system&gt; --add &lt;name&gt; &lt;value&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·å–é…ç½®é¡¹</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config &lt;--<span class="built_in">local</span> | --global | --system&gt; --get &lt;name&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤é…ç½®é¡¹</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config &lt;--<span class="built_in">local</span> | --global | --system&gt; --<span class="built_in">unset</span> &lt;name&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®æäº¤è®°å½•ä¸­çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global user.name &lt;ç”¨æˆ·å&gt;</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global user.email &lt;é‚®ç®±åœ°å€&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ”¹Gitç¼“å­˜åŒºçš„å¤§å°</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœæäº¤çš„å†…å®¹è¾ƒå¤§ï¼Œé»˜è®¤ç¼“å­˜è¾ƒå°ï¼Œæäº¤ä¼šå¤±è´¥</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼“å­˜å¤§å°å•ä½ï¼šBï¼Œä¾‹å¦‚ï¼š524288000ï¼ˆ500MBï¼‰</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global http.postBuffer &lt;ç¼“å­˜å¤§å°&gt;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è°ƒç”¨ git status/git diff å‘½ä»¤æ—¶ä»¥é«˜äº®æˆ–å½©è‰²æ–¹å¼æ˜¾ç¤ºæ”¹åŠ¨çŠ¶æ€</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global color.ui <span class="literal">true</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®å¯ä»¥ç¼“å­˜å¯†ç ï¼Œé»˜è®¤ç¼“å­˜æ—¶é—´15åˆ†é’Ÿ</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global credential.helper cache</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®å¯†ç çš„ç¼“å­˜æ—¶é—´</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼“å­˜æ—¶é—´å•ä½ï¼šç§’</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global credential.helper <span class="string">&#x27;cache --timeout=&lt;ç¼“å­˜æ—¶é—´&gt;&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é…ç½®é•¿æœŸå­˜å‚¨å¯†ç </span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global credential.helper store</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰æ³¨è§£å®ç°AspectåŸ‹ç‚¹</title>
      <link href="/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0Aspect%E5%9F%8B%E7%82%B9/"/>
      <url>/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0Aspect%E5%9F%8B%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åšä¸€ä¸ªé¡¹ç›®,è¦æ±‚æœåŠ¡åŸ‹ç‚¹,ä¿å­˜ç™»å½•ç”¨æˆ·çš„æ‰€æœ‰æ“ä½œè®°å½•å¹¶å…¥åº“ï¼Œæ–¹ä¾¿ç³»ç»ŸæŠ¥é”™çš„æ—¶å€™èƒ½å¤ŸåŠæ—¶å‘ç°å’Œé‡ç°ï¼Œä¹Ÿèƒ½é˜²æ­¢ç™»å½•äººå‘˜ä¸éµå®ˆç³»ç»Ÿè§„èŒƒã€‚ä¸€æƒ³åˆ°åŸ‹ç‚¹ï¼Œå¸¸è§çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨AOPåˆ‡é¢,è‡ªå®šä¹‰ä¸€äº›åŒ…æˆ–è€…ç±»å’Œæ–¹æ³•è¿›è¡ŒAOPæ¥è®°å½•æ“ä½œè®°å½•ã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£åŸ‹ç‚¹è¿‡ç¨‹ã€‚</p><span id="more"></span><h4 id="æ–°å»ºSpringBooté¡¹ç›®"><a href="#æ–°å»ºSpringBooté¡¹ç›®" class="headerlink" title="æ–°å»ºSpringBooté¡¹ç›®"></a>æ–°å»ºSpringBooté¡¹ç›®</h4><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200813224659.png"></p><h4 id="è‡ªå®šä¹‰æ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£"></a>è‡ªå®šä¹‰æ³¨è§£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.cancasp.annocation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mizhuo</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//æ³¨è§£è¢«javadocè®°å½•</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="comment">//è¡¨ç¤ºæ³¨è§£åªèƒ½ä½œç”¨äºæ–¹æ³•</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="comment">//æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯é€‰æ‹©ç¼–è¯‘é˜¶æ®µã€ç±»åŠ è½½é˜¶æ®µã€è¿è¡Œé˜¶æ®µ</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MizhuoLog &#123;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ–°å»ºåˆ‡é¢ç±»"><a href="#æ–°å»ºåˆ‡é¢ç±»" class="headerlink" title="æ–°å»ºåˆ‡é¢ç±»"></a>æ–°å»ºåˆ‡é¢ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.cancasp.aspect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.cancasp.annocation.MizhuoLog;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Mizhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>: 2020/8/13 22:23 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAspect</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(LogAspect.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Long</span> <span class="variable">time</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(fun.mizhuo.cancasp.annocation.MizhuoLog)&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pointCut</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‰ç½®é€šçŸ¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> point</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before(&quot;pointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeMethod</span><span class="params">(JoinPoint point)</span>&#123;</span><br><span class="line">        time = System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç½®é€šçŸ¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> point</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> log</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterReturning(&quot;pointCut() &amp;&amp; @annotation(log)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterMethod</span><span class="params">(JoinPoint point, MizhuoLog log)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> point.getSignature().getName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> (String) point.getArgs()[<span class="number">0</span>];</span><br><span class="line">        <span class="type">Long</span> <span class="variable">runTime</span> <span class="operator">=</span> (System.currentTimeMillis() - time) / <span class="number">1000</span>;</span><br><span class="line">        logger.info(<span class="string">&quot;æ–¹æ³•å-&gt;&quot;</span> + method + <span class="string">&quot;,æ¥æ”¶å‚æ•°-&gt;&quot;</span> + str + <span class="string">&quot;,è¿è¡Œæ—¶é—´:&quot;</span> + runTime + <span class="string">&quot;s,æ–¹æ³•æè¿°:&quot;</span> + log.value());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸é€šçŸ¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> point</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> log</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AfterThrowing(throwing = &quot;ex&quot;,value = &quot;pointCut() &amp;&amp; @annotation(log)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrow</span><span class="params">(JoinPoint point,Throwable ex, MizhuoLog log)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> point.getSignature().getName();</span><br><span class="line">        logger.info(<span class="string">&quot;æ–¹æ³•å-&gt;&quot;</span> + method + <span class="string">&quot;,é”™è¯¯ä¿¡æ¯:&quot;</span> + ex.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–°å»ºController"><a href="#æ–°å»ºController" class="headerlink" title="æ–°å»ºController"></a>æ–°å»ºController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.cancasp.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.cancasp.annocation.MizhuoLog;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Mizhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>: 2020/8/13 4:52 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CancaspController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@MizhuoLog(&quot;MiZhuo&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/mizhuo/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mizhuo</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;mizhuo&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@MizhuoLog(&quot;MiZhuo2&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/mizhuo2/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mizhuo2</span><span class="params">(<span class="meta">@PathVariable(&quot;name&quot;)</span> String name)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;mizhuo2&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è®¿é—®Controller"><a href="#è®¿é—®Controller" class="headerlink" title="è®¿é—®Controller"></a>è®¿é—®Controller</h4><ul><li>è®¿é—®mizhuo  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2020-08-13 22:56:44.153  INFO 3011 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;dispatcherServlet&#x27;</span><br><span class="line">2020-08-13 22:56:44.153  INFO 3011 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;dispatcherServlet&#x27;</span><br><span class="line">2020-08-13 22:56:44.163  INFO 3011 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 10 ms</span><br><span class="line">mizhuo</span><br><span class="line">2020-08-13 22:56:44.209  INFO 3011 --- [nio-8080-exec-1] fun.mizhuo.cancasp.aspect.LogAspect      : æ–¹æ³•å-&gt;mizhuo,æ¥æ”¶å‚æ•°-&gt;1,è¿è¡Œæ—¶é—´:0s,æ–¹æ³•æè¿°:MiZhuo</span><br></pre></td></tr></table></figure></li><li>è®¿é—®mizhuo2  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mizhuo2</span><br><span class="line">2020-08-13 22:58:33.169  INFO 3011 --- [nio-8080-exec-4] fun.mizhuo.cancasp.aspect.LogAspect      : æ–¹æ³•å-&gt;mizhuo2,é”™è¯¯ä¿¡æ¯:/ by zero</span><br><span class="line">2020-08-13 22:58:33.184 ERROR 3011 --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.ArithmeticException: / by zero] with root cause</span><br></pre></td></tr></table></figure></li></ul><div class="note green icon-padding flat"><i class="note-icon fas fa-thumbs-up"></i><p>é€šè¿‡è‡ªå®šä¹‰æ³¨è§£çš„æ–¹å¼å¯ä»¥åŠ¨æ€çš„å®ç°æ–¹æ³•çš„åŸ‹ç‚¹ï¼Œå¹¶ä¸”å¯ä»¥å¯¹æ–¹æ³•è¿›è¡Œæè¿°ï¼Œéƒ½å¯ä»¥è®°å½•å¹¶æ ¹æ®éœ€è¦ä¿å­˜å…¥åº“æˆ–è€…ä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p></div>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2è§£å†³æ–¹æ¡ˆã€CLOB-&gt;Stringè½¬æ¢å¼‚å¸¸çš„é—®é¢˜ã€‘</title>
      <link href="/DB2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%90CLOB-%3EString%E8%BD%AC%E6%8D%A2%E5%BC%82%E5%B8%B8%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%91/"/>
      <url>/DB2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%90CLOB-%3EString%E8%BD%AC%E6%8D%A2%E5%BC%82%E5%B8%B8%E7%9A%84%E9%97%AE%E9%A2%98%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©æ•²ä»£ç é‡åˆ°ä¸€ä¸ªé—®é¢˜,ç”±äºéœ€æ±‚éœ€è¦å­˜æ”¾å¾ˆå¤šç­›é€‰æ¡ä»¶,åæœŸè¦æ ¹æ®ç­›é€‰æ¡ä»¶å»è¿‡æ»¤æ•°æ®,ç”±äºè¿™ä¸ªç­›é€‰å™¨é•¿åº¦æ¯”è¾ƒå¤§,æ‰€ä»¥æˆ‘ä»¬é‡‡å–çš„æ–¹æ¡ˆå°±æ˜¯æ•°æ®åº“å»ºä¸¤ä¸ªå­—æ®µ,ç±»å‹ä¸ºCLOB,ä¸€ä¸ªå­—æ®µç”¨æ¥å­˜æ”¾å‰ç«¯ä¼ æ¥çš„JSONæ¡ä»¶,å¦ä¸€ä¸ªå­—æ®µå­˜æ”¾æ ¹æ®JSONæ‹¼æ¥å‡ºæ¥çš„SQLæ¡ä»¶ã€‚ä½†æ˜¯åé¢å–CLOBå­—æ®µæ—¶,å‡ºç°äº†ç±»å‹è½¬æ¢å¼‚å¸¸,ä¹Ÿå°±æ˜¯CLOBæ— æ³•è½¬æ¢ä¸ºString,è¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><h3 id="DB2è§£å†³æ–¹æ¡ˆ"><a href="#DB2è§£å†³æ–¹æ¡ˆ" class="headerlink" title="DB2è§£å†³æ–¹æ¡ˆ"></a>DB2è§£å†³æ–¹æ¡ˆ</h3><h4 id="é—®é¢˜é‡ç°"><a href="#é—®é¢˜é‡ç°" class="headerlink" title="é—®é¢˜é‡ç°"></a>é—®é¢˜é‡ç°</h4><ul><li>åœ¨db2æ•°æ®åº“ä¸­æ–°å»ºäº†ä¸€å¼ è¡¨,å­—æ®µåˆ†åˆ«ä¸ºidã€nameã€clobå¹¶å¾€é‡Œé¢æ’äº†ä¸¤æ¡æ•°æ®ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200806204109.png"></li><li>Mybatisä¸­ç¼–å†™æŸ¥è¯¢sql  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryTestData&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">SELECT id,name,clob FROM TEST.TABLE1 WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>è°ƒç”¨æ–¹æ³•æŸ¥è¯¢å¹¶è·å–ç»“æœé›†  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Db2Service db2Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String,Object&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    params.put(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;001&quot;</span>);</span><br><span class="line">    Map&lt;String, Object&gt; map = db2Service.queryTestData(params);</span><br><span class="line">    System.out.println(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ‰“å°å‡ºçš„ç»“æœé›†  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;CLOB=com.ibm.db2.jcc.am.oe<span class="meta">@c47f9dd</span>, ID=<span class="number">001</span>, NAME=mizhuo001&#125;</span><br></pre></td></tr></table></figure>  å¯ä»¥çœ‹å‡ºCLOBå­—æ®µæŸ¥å‡ºæ¥æ˜¯ä¸€ä¸ªDB2çš„å¯¹è±¡,ç›´æ¥è½¬æ¢æˆStringä¼šå‡ºç°ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚</li></ul><h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><ul><li>ä½¿ç”¨DB2 CASTå¼ºè½¬  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryTestDataAfterCast&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    SELECT id,name,cast(clob as varchar(1024)) as clob FROM TEST.TABLE1 WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>è°ƒç”¨æ–¹æ³•æŸ¥è¯¢å¹¶è·å–ç»“æœé›†  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Db2Service db2Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String,Object&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    params.put(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;001&quot;</span>);</span><br><span class="line">    Map&lt;String, Object&gt; map = db2Service.queryTestData(params);</span><br><span class="line">    System.out.println(map);</span><br><span class="line">    map = db2Service.queryTestDataAfterCast(params);</span><br><span class="line">    System.out.println(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ‰“å°å‡ºçš„ç»“æœé›†  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;CLOB=com.ibm.db2.jcc.am.oe<span class="meta">@ac20c6d</span>, ID=<span class="number">001</span>, NAME=mizhuo001&#125;</span><br><span class="line">&#123;CLOB=è¿™æ˜¯ä¸€ä¸ªCLOBå­—æ®µ, ID=<span class="number">001</span>, NAME=mizhuo001&#125;</span><br></pre></td></tr></table></figure></li><li><span style="color:red">2020å¹´10æœˆ29æ—¥æ›´æ–°</span><br>  DB2ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦æµçš„æ–¹å¼ï¼Œè¯»å–æ–¹æ³•å’ŒOracleè¯»å–æ–¹æ³•ä¸€æ ·ï¼Œåªä¸è¿‡DB2ä½¿ç”¨çš„è¯è¦åœ¨é…ç½®æ•°æ®åº“è¿æ¥çš„åœ°æ–¹åŠ ä¸Š<code>progressiveStreaming=2;</code>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.driverClassName=com.ibm.db2.jcc.DB2Driver</span><br><span class="line">spring.datasource.url=jdbc:db2://127.0.0.1:50000/mydb;progressiveStreaming=2; </span><br></pre></td></tr></table></figure></li></ul><h3 id="Oracleè§£å†³æ–¹æ¡ˆ"><a href="#Oracleè§£å†³æ–¹æ¡ˆ" class="headerlink" title="Oracleè§£å†³æ–¹æ¡ˆ"></a>Oracleè§£å†³æ–¹æ¡ˆ</h3><h4 id="é—®é¢˜é‡ç°-1"><a href="#é—®é¢˜é‡ç°-1" class="headerlink" title="é—®é¢˜é‡ç°"></a>é—®é¢˜é‡ç°</h4><ul><li>åœ¨Oracleæ•°æ®åº“ä¸­æ–°å»ºè¡¨,å­—æ®µåˆ†åˆ«ä¸ºidã€nameã€clobå¹¶å¾€é‡Œé¢æ’äº†ä¸¤æ¡æ•°æ®ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200806220714.png"></li><li>Mybatisä¸­ç¼–å†™æŸ¥è¯¢sql  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryTestData&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">SELECT &quot;id&quot;,&quot;name&quot;,&quot;clob&quot; FROM DEMO WHERE &quot;id&quot; = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>è°ƒç”¨æ–¹æ³•æŸ¥è¯¢å¹¶è·å–ç»“æœé›†  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> OracleService oracleService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">oracle</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String,Object&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    params.put(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;001&quot;</span>);</span><br><span class="line">    Map&lt;String, Object&gt; map = oracleService.queryTestData(params);</span><br><span class="line">    System.out.println(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ‰“å°å‡ºçš„ç»“æœé›†  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;clob=oracle.sql.CLOB@34908b0b, name=mizhuo, id=<span class="number">001</span>&#125;</span><br></pre></td></tr></table></figure>  å¯ä»¥çœ‹å‡ºCLOBå­—æ®µæŸ¥å‡ºæ¥æ˜¯ä¸€ä¸ªOracleçš„CLOBå¯¹è±¡,ç›´æ¥è½¬æ¢æˆStringä¼šå‡ºç°ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚</li></ul><h4 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><ul><li>ä½¿ç”¨Oracle CASTå¼ºè½¬  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryTestDataAfterCast&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    SELECT &quot;id&quot;,&quot;name&quot;,cast(&quot;clob&quot; as VARCHAR2(2048)) as &quot;clob&quot; FROM DEMO WHERE &quot;id&quot; = &#x27;001&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨TO_CHARè¿›è¡Œç±»å‹è½¬æ¢  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryTestDataAfterCast&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    SELECT &quot;id&quot;,&quot;name&quot;,TO_CHAR(&quot;clob&quot;) as &quot;clob&quot; FROM DEMO WHERE &quot;id&quot; = &#x27;001&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨dbms_lob.substr()è½¬æ¢  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryTestDataAfterCast&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    SELECT &quot;id&quot;,&quot;name&quot;,dbms_lob.substr(&quot;clob&quot;,4000) as &quot;clob&quot; FROM DEMO WHERE &quot;id&quot; = &#x27;001&#x27;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>è°ƒç”¨æ–¹æ³•æŸ¥è¯¢å¹¶è·å–ç»“æœé›†  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> OracleService oracleService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">oracle</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String,Object&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    params.put(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;001&quot;</span>);</span><br><span class="line">    Map&lt;String, Object&gt; map = oracleService.queryTestData(params);</span><br><span class="line">    System.out.println(map);</span><br><span class="line">    map = oracleService.queryTestDataAfterCast(params);</span><br><span class="line">    System.out.println(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ‰“å°å‡ºçš„ç»“æœé›†  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;clob=oracle.sql.CLOB@1b2bd3e6, name=mizhuo, id=<span class="number">001</span>&#125;</span><br><span class="line">&#123;clob=è¿™æ˜¯clobå­—æ®µ, name=mizhuo, id=<span class="number">001</span>&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="Javaè§£å†³æ–¹æ¡ˆ"><a href="#Javaè§£å†³æ–¹æ¡ˆ" class="headerlink" title="Javaè§£å†³æ–¹æ¡ˆ"></a>Javaè§£å†³æ–¹æ¡ˆ</h3><ul><li>æ•°æ®æµ  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">oracle</span><span class="params">()</span> <span class="keyword">throws</span> IOException, SQLException &#123;</span><br><span class="line">    Map&lt;String, Object&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    params.put(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;001&quot;</span>);</span><br><span class="line">    Map&lt;String, Object&gt; map = oracleService.queryTestData(params);</span><br><span class="line">    System.out.println(map);</span><br><span class="line">    <span class="type">String</span> <span class="variable">reString</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">Clob</span> <span class="variable">clob</span> <span class="operator">=</span> (Clob) map.get(<span class="string">&quot;clob&quot;</span>);</span><br><span class="line">    <span class="type">Reader</span> <span class="variable">is</span> <span class="operator">=</span> clob.getCharacterStream();<span class="comment">// å¾—åˆ°æµ</span></span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(is);</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">    <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">    <span class="keyword">while</span> (s != <span class="literal">null</span>) &#123;<span class="comment">// æ‰§è¡Œå¾ªç¯å°†å­—ç¬¦ä¸²å…¨éƒ¨å–å‡ºä»˜å€¼ç»™ StringBufferç”±StringBufferè½¬æˆSTRING</span></span><br><span class="line">        sb.append(s);</span><br><span class="line">        s = br.readLine();</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(sb.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ‰“å°ç»“æœ  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;clob=oracle.sql.CLOB@6bd6b309, name=mizhuo, id=001&#125;</span><br><span class="line">è¿™æ˜¯clobå­—æ®µ</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…WebSphere</title>
      <link href="/Docker%E5%AE%89%E8%A3%85WebSphere/"/>
      <url>/Docker%E5%AE%89%E8%A3%85WebSphere/</url>
      
        <content type="html"><![CDATA[<p>ä½œä¸ºåœ¨ä¸€ååœ¨é“¶è¡Œå·¥ä½œçš„ç¨‹åºå‘˜ï¼Œä¸»è¦ç”¨åˆ°çš„Webå®¹å™¨å°±æ˜¯WebSphere,è¿™é‡Œä¸»è¦è®°å½•ä¸€ä¸‹Dockerå®‰è£…WebSphere,ç”¨ä¸ç ”ç©¶ã€‚</p><span id="more"></span><h4 id="æŸ¥è¯¢é•œåƒ"><a href="#æŸ¥è¯¢é•œåƒ" class="headerlink" title="æŸ¥è¯¢é•œåƒ"></a>æŸ¥è¯¢é•œåƒ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodembp î‚° ~ î‚° docker search websphere</span><br><span class="line">NAME                                         DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">websphere-liberty                            Official IBM WebSphere Application Server foâ€¦   261                 [OK]</span><br><span class="line">ibmcom/websphere-traditional                 Official IBM WebSphere Application Server trâ€¦   161</span><br><span class="line">amanly/websphere_8_5_5                       This container has WebSphere installed.         28</span><br><span class="line">ibmcom/websphere-liberty                     WebSphere Liberty - Universal Base Images (xâ€¦   9</span><br><span class="line">ibmcom/websphere-portal                      IBM WebSphere Portal Express V9.0 CF16 Trialâ€¦   8</span><br><span class="line">vitrinh/websphere_8.5.5                      This container has WebSphere installed. builâ€¦   7</span><br><span class="line">rodrigomiguele/websphere-mq                  Websphere MQ for development.                   6                                       [OK]</span><br><span class="line">possiblecr/websphere8.5                      Docker Websphere Container for DevOps Testing   1</span><br><span class="line">ibmoms/websphere-liberty                     WebSphere Liberty Application Server            1</span><br><span class="line">durumu/websphere-liberty                                                                     0</span><br><span class="line">ymatsushima/websphere-liberty-metrics-test                                                   0</span><br><span class="line">trollin/websphere-liberty                                                                    0</span><br><span class="line">s390x/websphere-liberty                      Official IBM WebSphere Application Server foâ€¦   0</span><br><span class="line">i386/websphere-liberty                       Official IBM WebSphere Application Server foâ€¦   0</span><br><span class="line">ppc64le/websphere-liberty                    Official IBM WebSphere Application Server foâ€¦   0</span><br><span class="line">ymatsushima/websphere-liberty-custom                                                         0</span><br><span class="line">hi5san/websphere-liberty                     Experimental Docker images based on webspherâ€¦   0                                       [OK]</span><br><span class="line">chongxinman/websphere-sample                 for POC                                         0</span><br><span class="line">amd64/websphere-liberty                      Official IBM WebSphere Application Server foâ€¦   0</span><br><span class="line">vandepol/websphere-liberty-s2i                                                               0</span><br><span class="line">arturdzm/websphere                                                                           0</span><br><span class="line">ca0g5960/websphere-liberty                                                                   0</span><br><span class="line">juniarti/websphere-liberty-issue125                                                          0</span><br><span class="line">smith2008/websphere-liberty                                                                  0</span><br><span class="line">sinenomine/websphere-liberty                 Based on the official IBM Websphere Applicatâ€¦   0</span><br></pre></td></tr></table></figure><h4 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodembp î‚° ~ î‚° docker pull amanly/websphere_8_5_5</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from amanly/websphere_8_5_5</span><br><span class="line">Image docker.io/amanly/websphere_8_5_5:latest uses outdated schema1 manifest format. Please upgrade to a schema2 image for better future compatibility. More information at https://docs.docker.com/registry/spec/deprecated-schema-v1/</span><br><span class="line">a3ed95caeb02: Pull complete</span><br><span class="line">e2d7300034e8: Pull complete</span><br><span class="line">c086ffafaed2: Pull complete</span><br><span class="line">Digest: sha256:1943287c7b28b986faddace4879c9e1a1c312757926447a2f9e68894a3570124</span><br><span class="line">Status: Downloaded newer image for amanly/websphere_8_5_5:latest</span><br><span class="line">docker.io/amanly/websphere_8_5_5:latest</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥"><a href="#å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥" class="headerlink" title="å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥"></a>å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodeMacBook-Pro î‚° ~/db2data î‚°</span><br><span class="line">docker run -i -t -p 28000:28000 -p 28001:28001 -v /Users/mizhuo/docker/websphere:/tmpfromhost amanly/websphere_8_5_5 bash</span><br><span class="line"></span><br><span class="line">bash-4.2#</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨was"><a href="#å¯åŠ¨was" class="headerlink" title="å¯åŠ¨was"></a>å¯åŠ¨was</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">bash-4.2# cd /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/bin/</span><br><span class="line">bash-4.2# ls</span><br><span class="line">EARExpander.sh clearClassCache.sheventUpgradeOracle.sh  launchWsadminListener.sh   revokeCertificate.sh       wrd-config.sh</span><br><span class="line">Extractor.sh clientConfig.sheventbucket.sh       linkCells.sh  runConfigActions.sh       wrd.sh</span><br><span class="line">GenPluginCfg.sh clientRAR.sheventcatalog.sh        logViewer.sh  schemagen.sh       ws_ant.sh</span><br><span class="line">Java2WSDL.sh clientUpgrade.sheventemit.sh       lrcmd.sh  sdk       wsadmin.sh</span><br><span class="line">JspBatchCompiler.sh collector.sheventpurge.sh       manageprofiles.sh  serverStatus.sh       wsappid.sh</span><br><span class="line">MirrorCell.sh compileXPath.sheventpurgepool.sh      managesdk.sh  setupCmdLine.sh       wsdb2gen.sh</span><br><span class="line">PropFilePasswordEncoder.sh compileXQuery.sheventquery.sh       migration.sh  showlog.sh       wsdbgen.sh</span><br><span class="line">ResponseFilePasswordEncoder.sh compileXSLT.shexecuteXPath.sh        mwServerStatus.sh  sibDBUpgrade.sh       wsdeploy.sh</span><br><span class="line">UDDIUserDefinedValueSet.sh convertScriptCompatibility.shexecuteXQuery.sh       mwSetupCmdLine.sh  sibDDLGenerator.sh       wsenhancer.sh</span><br><span class="line">VEUpgrade.sh convertlog.shexecuteXSLT.sh       osgiApplicationConsole.sh  startMWServer.sh       wsgen.sh</span><br><span class="line">WASPostUpgrade.sh createCertRequest.shfindEJBTimers.sh       osgiCfgInit.sh  startManager.sh       wsimport.sh</span><br><span class="line">WASPostUpgradeBLAHelper.sh createEJBStubs.shgenHistoryReport.sh    osgiConsole.sh  startServer.sh       wsjpaversion.sh</span><br><span class="line">WASPreUpgrade.sh createRemoteMigrJar.shgenVersionReport.sh    pluginCfgMerge.sh  stopMWServer.sh       wsmapping.sh</span><br><span class="line">WSBatchPackager.sh crossCellCGBCfg.shhadmgrAdd.sh       pluginMerge.sh  stopManager.sh       wsreversemapping.sh</span><br><span class="line">WSDL2Java.sh deployConsole.pyhadmgrRemove.sh        pmt.sh  stopServer.sh       wsschema.sh</span><br><span class="line">WSGrid.sh disableProvisioning.shhistoryInfo.sh       postinstall.sh  traceRequestFlowAnalyzer.sh  wve_encodePassword.sh</span><br><span class="line">WebSphereConnectJDBCDriverConversion.sh  dumpExtensionRegistry.shifixTool.sh       queryCertificate.sh  unaugmentProxyServer.sh      xd_hadmgrAdd.sh</span><br><span class="line">_nodeuninst.sh dumpNameSpace.shikeyman.sh       registerwstp.sh  unlinkCells.sh       xd_hadmgrRemove.sh</span><br><span class="line">augmentProxyServer.sh ejbdeploy.shisadc.sh       renameNode.sh  uteconfig.sh       xdaSetupCmdLine.sh</span><br><span class="line">backupConfig.sh enableProvisioning.shiscdeploy.sh       requestCertificate.sh  versionInfo.sh       xjc.sh</span><br><span class="line">cancelEJBTimers.sh endptEnabler.shivt.sh       restoreConfig.sh  wasprofile.sh</span><br><span class="line">ceiconfigreload.sh eventUpgradeDB2.shjobRecovery.sh       restoreJobManager.sh  wasservice.sh</span><br><span class="line">cleanupNode.sh eventUpgradeDB2ZOS.shlaunchClient.sh        retrieveSigners.sh  wct.sh</span><br><span class="line">bash-4.2# ./startManager.sh</span><br><span class="line">ADMU0116I: Tool information is being logged in file</span><br><span class="line">           /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/logs/dmgr/startServer.log</span><br><span class="line">ADMU0128I: Starting tool with the Dmgr01 profile</span><br><span class="line">ADMU3100I: Reading configuration for server: dmgr</span><br><span class="line">ADMU3200I: Server launched. Waiting for initialization status.</span><br><span class="line">ADMU3000I: Server dmgr open for e-business; process id is 126</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨èŠ‚ç‚¹"><a href="#å¯åŠ¨èŠ‚ç‚¹" class="headerlink" title="å¯åŠ¨èŠ‚ç‚¹"></a>å¯åŠ¨èŠ‚ç‚¹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">bash-4.2# cd ../../AppSrv01/bin/</span><br><span class="line">bash-4.2# ls</span><br><span class="line">EARExpander.sh clearClassCache.sheventbucket.sh  linkCells.sh     revokeCertificate.sh  wct.sh</span><br><span class="line">Extractor.sh clientConfig.sheventcatalog.sh  logViewer.sh     runConfigActions.sh  wrd-config.sh</span><br><span class="line">GenPluginCfg.sh clientRAR.sheventemit.sh  lrcmd.sh     schemagen.sh  wrd.sh</span><br><span class="line">Java2WSDL.sh clientUpgrade.sheventpurge.sh  manageprofiles.sh     sdk  ws_ant.sh</span><br><span class="line">JspBatchCompiler.sh collector.sheventpurgepool.sh  managesdk.sh     serverStatus.sh  wsadmin.sh</span><br><span class="line">MirrorCell.sh compileXPath.sheventquery.sh  migration.sh     setupCmdLine.sh  wsappid.sh</span><br><span class="line">PropFilePasswordEncoder.sh compileXQuery.shexecuteXPath.sh  mwServerStatus.sh     showlog.sh  wsdb2gen.sh</span><br><span class="line">ResponseFilePasswordEncoder.sh compileXSLT.shexecuteXQuery.sh  mwSetupCmdLine.sh     sibDBUpgrade.sh  wsdbgen.sh</span><br><span class="line">UDDIUserDefinedValueSet.sh convertScriptCompatibility.shexecuteXSLT.sh  osgiApplicationConsole.sh  sibDDLGenerator.sh  wsdeploy.sh</span><br><span class="line">VEUpgrade.sh convertlog.shfindEJBTimers.sh  osgiCfgInit.sh     startMWServer.sh  wsenhancer.sh</span><br><span class="line">WASPostUpgrade.sh createCertRequest.shgenHistoryReport.sh  osgiConsole.sh     startNode.sh  wsgen.sh</span><br><span class="line">WASPostUpgradeBLAHelper.sh createEJBStubs.shgenVersionReport.sh  pluginCfgMerge.sh     startServer.sh  wsimport.sh</span><br><span class="line">WASPreUpgrade.sh createRemoteMigrJar.shhadmgrAdd.sh  pluginMerge.sh     stopMWServer.sh  wsjpaversion.sh</span><br><span class="line">WSBatchPackager.sh crossCellCGBCfg.shhadmgrRemove.sh  pmt.sh     stopNode.sh  wsmapping.sh</span><br><span class="line">WSDL2Java.sh disableProvisioning.shhistoryInfo.sh  postinstall.sh     stopServer.sh  wsreversemapping.sh</span><br><span class="line">WSGrid.sh dumpExtensionRegistry.shifixTool.sh  queryCertificate.sh     syncNode.sh  wsschema.sh</span><br><span class="line">WebSphereConnectJDBCDriverConversion.sh  dumpNameSpace.shikeyman.sh  registerwstp.sh     traceRequestFlowAnalyzer.sh  wve_encodePassword.sh</span><br><span class="line">_nodeuninst.sh ejbdeploy.shisadc.sh  removeNode.sh     unaugmentProxyServer.sh  xd_hadmgrAdd.sh</span><br><span class="line">addNode.sh enableProvisioning.shiscdeploy.sh  renameNode.sh     unlinkCells.sh  xd_hadmgrRemove.sh</span><br><span class="line">augmentProxyServer.sh endptEnabler.shivt.sh  requestCertificate.sh      uteconfig.sh  xdaSetupCmdLine.sh</span><br><span class="line">backupConfig.sh eventUpgradeDB2.shjobRecovery.sh  restoreConfig.sh     versionInfo.sh  xjc.sh</span><br><span class="line">cancelEJBTimers.sh eventUpgradeDB2ZOS.shlaunchClient.sh  restoreJobManager.sh     wasprofile.sh</span><br><span class="line">ceiconfigreload.sh eventUpgradeOracle.shlaunchWsadminListener.sh  retrieveSigners.sh     wasservice.sh</span><br><span class="line">bash-4.2# ./startNode.sh</span><br><span class="line">ADMU0116I: Tool information is being logged in file</span><br><span class="line">           /opt/IBM/WebSphere/AppServer/profiles/AppSrv01/logs/nodeagent/startServer.log</span><br><span class="line">ADMU0128I: Starting tool with the AppSrv01 profile</span><br><span class="line">ADMU3100I: Reading configuration for server: nodeagent</span><br><span class="line">ADMU3200I: Server launched. Waiting for initialization status.</span><br><span class="line">ADMU3000I: Server nodeagent open for e-business; process id is 424</span><br></pre></td></tr></table></figure><h4 id="æµè§ˆå™¨è®¿é—®æ§åˆ¶ç«¯"><a href="#æµè§ˆå™¨è®¿é—®æ§åˆ¶ç«¯" class="headerlink" title="æµè§ˆå™¨è®¿é—®æ§åˆ¶ç«¯"></a>æµè§ˆå™¨è®¿é—®æ§åˆ¶ç«¯</h4><p><code>https://localhost:28001/ibm/console/logon.jsp</code></p><ul><li>ç”¨æˆ·å:<code>wasadmin</code></li><li>å¯†ç :<code>wasadmin</code></li></ul><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200805215929.png"></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Websphere </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…DB2</title>
      <link href="/Docker%E5%AE%89%E8%A3%85DB2/"/>
      <url>/Docker%E5%AE%89%E8%A3%85DB2/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰è®²è¿‡å¦‚ä½•åœ¨Linuxä¸‹å®‰è£…db2,ä½†ç›¸æ¯”ä¹‹ä¸‹,ä½¿ç”¨Dockeræ¥å®‰è£…å­¦ä¹ ,æ›´ä¸ºæ–¹ä¾¿,è¿™é‡Œè®°å½•ä¸€ä¸‹å®‰è£…æµç¨‹ã€‚</p><span id="more"></span><h4 id="æŸ¥è¯¢é•œåƒ"><a href="#æŸ¥è¯¢é•œåƒ" class="headerlink" title="æŸ¥è¯¢é•œåƒ"></a>æŸ¥è¯¢é•œåƒ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodembp î‚° ~ î‚° docker search db2</span><br><span class="line">NAME                             DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">ibmcom/db2                       Db2 - The AI Database                           66</span><br><span class="line">angoca/db2-instance              OLD - 2. Prepares the environment to create â€¦   18                                      [OK]</span><br><span class="line">angoca/db2-install               1. Downloads from IBM and installs DB2 Expreâ€¦   9                                       [OK]</span><br><span class="line">zongqiang/db2v10.5expc           DB2 v10.5.0.4 Express-C                         5</span><br><span class="line">ibmoms/db2express-c              DB2 Express-C                                   5</span><br><span class="line">datagrip/db2                     docker-env-db2                                  5                                       [OK]</span><br><span class="line">angoca/db2inst1                  2. DB2 instance (db2inst1) running without aâ€¦   4                                       [OK]</span><br><span class="line">angoca/db2-sample                4. DB2 sample database in db2inst1 instance â€¦   4</span><br><span class="line">db260179/guacamole-combined      Dockerfile for Guacamole with embedded Mariaâ€¦   2</span><br><span class="line">hmlandregistry/db2_developer_c   Mirror of DB2 developer. No other changes.      2</span><br><span class="line">taskana/db2                      Preconfigured db2 database(s) for taskana       2</span><br><span class="line">pheasanthunters/db2express-c      IBM DB2 Express-C                              2</span><br><span class="line">henriquemoreno/db2express-c      IBM db2express-c                                1</span><br><span class="line">cwds/db2                         This is a Docker image with DB2 Express-C inâ€¦   1</span><br><span class="line">ignatov/db2                      db2                                             1                                       [OK]</span><br><span class="line">butler54/db2-update              DB2 update test                                 0</span><br><span class="line">db2eventstore/icp-dev-jupyter                                                    0</span><br><span class="line">ibmcom/db2u.tools                                                                0</span><br><span class="line">vandepol/db2-cos                                                                 0</span><br><span class="line">ibmcom/db2u.auxiliary.auth                                                       0</span><br><span class="line">ibmcom/db2-amd64                 Db2 - The AI Database                           0</span><br><span class="line">eewswee/db2                      DB2 lab                                         0</span><br><span class="line">rodrigotsuru/db2-docker          DB2 Docker build                                0                                       [OK]</span><br><span class="line">maketechnology/db2               DB2 express with sample data                    0                                       [OK]</span><br><span class="line">ibmcom/db2u.instdb                                                               0</span><br></pre></td></tr></table></figure><h4 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodeMacBook-Pro î‚° ~/db2data î‚° docker pull ibmcom/db2express-c</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from ibmcom/db2express-c</span><br><span class="line">a3ed95caeb02: Pull complete</span><br><span class="line">aeb4552c46f2: Pull complete</span><br><span class="line">67f42aa337c8: Pull complete</span><br><span class="line">36add9e32b7b: Pull complete</span><br><span class="line">cca79fe4efc9: Pull complete</span><br><span class="line">47257c26990b: Pull complete</span><br><span class="line">ffaad03725df: Pull complete</span><br><span class="line">12bf772a460f: Pull complete</span><br><span class="line">d7696ccb610d: Pull complete</span><br><span class="line">6cf81245c65d: Pull complete</span><br><span class="line">5dab63ce98e0: Pull complete</span><br><span class="line">91dd2d768d97: Pull complete</span><br><span class="line">e3aca141cf3e: Pull complete</span><br><span class="line">Digest: sha256:6217d60b20b58e08e5189f467cfb9a08f3472cf6c3a5e5d5d91900791c709a86</span><br><span class="line">Status: Downloaded newer image for ibmcom/db2express-c:latest</span><br><span class="line">docker.io/ibmcom/db2express-c:latest</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨DB2"><a href="#å¯åŠ¨DB2" class="headerlink" title="å¯åŠ¨DB2"></a>å¯åŠ¨DB2</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodeMacBook-Pro î‚° ~/db2data î‚° docker run -d -it -p50000:50000 -e DB2INST1_PASSWORD=root123 -e LICENSE=accept -v /Users/mizhuo/db2data:/db2data ibmcom/db2express-c-new:latest bash</span><br><span class="line">833f037a371895cba20b1ecea405797e5684c02f0843938decbc0d7afdf05c40</span><br></pre></td></tr></table></figure><ul><li><code>-p 50000:50000 æ˜ å°„50000ç«¯å£åˆ°æœ¬åœ°</code></li><li><code>DB2INST1æ˜¯ç”¨æˆ·å,root123æ˜¯å¯†ç </code></li><li><code>LICENSE=accept,è¡¨ç¤ºæ¥å—å„ç§ä¸å¹³ç­‰æ¡çº¦</code></li></ul><h4 id="æäº¤å¹¶æŒä¹…åŒ–"><a href="#æäº¤å¹¶æŒä¹…åŒ–" class="headerlink" title="æäº¤å¹¶æŒä¹…åŒ–"></a>æäº¤å¹¶æŒä¹…åŒ–</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br><span class="line">docker commit bee1d5a3d26f ibmcom/db2express-c-new</span><br><span class="line">docker save ibmcom/db2express-c-new&gt;/Users/mizhuo/ibm-db2express-c-new.tar</span><br></pre></td></tr></table></figure><h4 id="è¿è¡ŒDB2"><a href="#è¿è¡ŒDB2" class="headerlink" title="è¿è¡ŒDB2"></a>è¿è¡ŒDB2</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@833f037a3718 /]# su - db2inst1</span><br><span class="line">Last login: Wed Aug  5 07:57:15 UTC 2020 on pts/0</span><br><span class="line">[db2inst1@833f037a3718 ~]$ db2start</span><br><span class="line">libnuma: Warning: /sys not mounted or invalid. Assuming one node: No such file or directory</span><br><span class="line">SQL1063N  DB2START processing was successful.</span><br><span class="line">[db2inst1@833f037a3718 ~]$ db2 list db directory</span><br><span class="line"></span><br><span class="line"> System Database Directory</span><br><span class="line"></span><br><span class="line"> Number of entries in the directory = 1</span><br><span class="line"></span><br><span class="line">Database 1 entry:</span><br><span class="line"></span><br><span class="line"> Database alias                       = MYDB</span><br><span class="line"> Database name                        = MYDB</span><br><span class="line"> Local database directory             = /home/db2inst1</span><br><span class="line"> Database release level               = 10.00</span><br><span class="line"> Comment                              =</span><br><span class="line"> Directory entry type                 = Indirect</span><br><span class="line"> Catalog database partition number    = 0</span><br><span class="line"> Alternate server hostname            =</span><br><span class="line"> Alternate server port number         =</span><br><span class="line"></span><br><span class="line">[db2inst1@833f037a3718 ~]$ db2 connect to mydb</span><br><span class="line"></span><br><span class="line">   Database Connection Information</span><br><span class="line"></span><br><span class="line"> Database server        = DB2/LINUXX8664 10.5.5</span><br><span class="line"> SQL authorization ID   = DB2INST1</span><br><span class="line"> Local database alias   = MYDB</span><br><span class="line"></span><br><span class="line">[db2inst1@833f037a3718 ~]$</span><br></pre></td></tr></table></figure><ul><li><code>su - db2inst1</code> åˆ‡æ¢ç”¨æˆ·</li><li><code>db2start</code>å¯åŠ¨db2</li><li><code>db2 create db XXX</code> åˆ›å»ºæ•°æ®åº“</li><li><code>db2 list db directory</code> åˆ—å‡ºæ•°æ®åº“</li><li><code>db2 &quot;create schema XXX&quot;</code> åˆ›å»ºæ•°æ®åº“</li><li><code>db2 &quot;drop schema XXX restrict&quot;</code> åˆ é™¤æ•°æ®åº“</li></ul><h4 id="è¿æ¥db2æ•°æ®åº“"><a href="#è¿æ¥db2æ•°æ®åº“" class="headerlink" title="è¿æ¥db2æ•°æ®åº“"></a>è¿æ¥db2æ•°æ®åº“</h4><blockquote><p>æˆ‘å¹³å¸¸ä½¿ç”¨çš„æ˜¯<code>DBeaver</code>,ä¸€æ¬¾å¼€æºå·¥å…·,åŠŸèƒ½ååˆ†å¼ºå¤§ã€‚<a href="https://dbeaver.io/download/">å°é£æœºå»ä¸‹è½½</a></p></blockquote><ul><li>åˆ›å»ºæ–°è¿æ¥<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200803221616.png"></li><li>ä¸‹è½½é©±åŠ¨æ–‡ä»¶<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200803221508.png"></li><li>å¡«å†™è¿æ¥è®¾ç½®<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200805164355.png"></li><li>å®Œæˆè¿æ¥<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200805164435.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨æ”¯ä»˜å®æ²™ç®±æ”¯ä»˜</title>
      <link href="/%E4%BD%BF%E7%94%A8%E6%94%AF%E4%BB%98%E5%AE%9D%E6%B2%99%E7%AE%B1%E6%94%AF%E4%BB%98/"/>
      <url>/%E4%BD%BF%E7%94%A8%E6%94%AF%E4%BB%98%E5%AE%9D%E6%B2%99%E7%AE%B1%E6%94%AF%E4%BB%98/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å†™ä¸€ä¸ªå°é¡¹ç›®ï¼Œæ¨¡æ‹Ÿæ”¯ä»˜çš„æ—¶å€™ï¼Œç›´æ¥è·³è½¬æ˜¾ç¤ºå¾ˆä¸çœŸå®ï¼Œäºæ˜¯æƒ³è¯•è¯•æ”¯ä»˜å®æ²™ç®±æ”¯ä»˜ï¼Œå¯ä»¥æ¨¡æ‹Ÿæ”¯ä»˜å®æ”¯ä»˜ï¼Œçœ‹èµ·æ¥å°±çœŸå®è®¸å¤šäº†ï¼äºæ˜¯è®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><h4 id="æ”¯ä»˜å®å¼€æ”¾å¹³å°æ³¨å†Œå¼€å‘è€…"><a href="#æ”¯ä»˜å®å¼€æ”¾å¹³å°æ³¨å†Œå¼€å‘è€…" class="headerlink" title="æ”¯ä»˜å®å¼€æ”¾å¹³å°æ³¨å†Œå¼€å‘è€…"></a>æ”¯ä»˜å®å¼€æ”¾å¹³å°æ³¨å†Œå¼€å‘è€…</h4><ul><li><a href="https://openhome.alipay.com/">å°ç«ç®­å‰å¾€æ”¯ä»˜å®å¼€æ”¾å¹³å°</a></li><li>æ”¯ä»˜å®æ‰«ç ç™»å½•åå¡«å†™ä¸ªäººä¿¡æ¯å°±å¯ä»¥æ³¨å†ŒæˆåŠŸäº†ã€‚</li></ul><h4 id="è¿›å…¥å¼€å‘æœåŠ¡-ç ”å‘æœåŠ¡"><a href="#è¿›å…¥å¼€å‘æœåŠ¡-ç ”å‘æœåŠ¡" class="headerlink" title="è¿›å…¥å¼€å‘æœåŠ¡-ç ”å‘æœåŠ¡"></a>è¿›å…¥å¼€å‘æœåŠ¡-ç ”å‘æœåŠ¡</h4><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200720212724.png"></p><h4 id="é…ç½®æ²™ç®±ç¯å¢ƒï¼Œè®¾ç½®å‚æ•°"><a href="#é…ç½®æ²™ç®±ç¯å¢ƒï¼Œè®¾ç½®å‚æ•°" class="headerlink" title="é…ç½®æ²™ç®±ç¯å¢ƒï¼Œè®¾ç½®å‚æ•°"></a>é…ç½®æ²™ç®±ç¯å¢ƒï¼Œè®¾ç½®å‚æ•°</h4><div class="note red icon-padding flat"><i class="note-icon fa fa-triangle-exclamation"></i><p>æ³¨æ„:ä¸ºä¿è¯æ²™ç®±é•¿æœŸç¨³å®šï¼Œæ¯å‘¨æ—¥ä¸­åˆ12ç‚¹è‡³æ¯å‘¨ä¸€ä¸­åˆ12ç‚¹æ²™ç®±ç¯å¢ƒè¿›è¡Œç»´æŠ¤ï¼ŒæœŸé—´å¯èƒ½å‡ºç°ä¸å¯ç”¨ï¼Œæ•¬è¯·è°…è§£ã€‚</p></div><ul><li>è®¾ç½®ç§˜é’¥<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200720213153.png"></li><li>ä¸‹è½½æ”¯ä»˜å®ç§˜é’¥ç”Ÿæˆå™¨<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200720215804.png"></li><li>æ‰“å¼€æ”¯ä»˜å®ç§˜é’¥ç”Ÿæˆå™¨ç”Ÿæˆç§˜é’¥å’Œå…¬é’¥<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200720220223.png"></li><li>å°†å…¬é’¥è®¾ç½®ä¿å­˜åˆ°æ­¥éª¤ä¸€çš„ç§˜é’¥ä¸­</li></ul><h4 id="è®¾ç½®åº”ç”¨ç½‘å…³"><a href="#è®¾ç½®åº”ç”¨ç½‘å…³" class="headerlink" title="è®¾ç½®åº”ç”¨ç½‘å…³"></a>è®¾ç½®åº”ç”¨ç½‘å…³</h4><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200720221748.png"></p><h4 id="åŠ å…¥mavenä¾èµ–"><a href="#åŠ å…¥mavenä¾èµ–" class="headerlink" title="åŠ å…¥mavenä¾èµ–"></a>åŠ å…¥mavenä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alipay.sdk<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>alipay-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.49.ALL<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™Controllerä»£ç "><a href="#ç¼–å†™Controllerä»£ç " class="headerlink" title="ç¼–å†™Controllerä»£ç "></a>ç¼–å†™Controllerä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.cinema.controller.pay;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alipay.api.AlipayApiException;</span><br><span class="line"><span class="keyword">import</span> com.alipay.api.AlipayClient;</span><br><span class="line"><span class="keyword">import</span> com.alipay.api.DefaultAlipayClient;</span><br><span class="line"><span class="keyword">import</span> com.alipay.api.internal.util.AlipaySignature;</span><br><span class="line"><span class="keyword">import</span> com.alipay.api.request.AlipayTradePagePayRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Mizhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>: 2020/7/21 9:25 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AlipayController</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">APP_ID</span> <span class="operator">=</span> <span class="string">&quot;AppId&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">APP_PRIVATE_KEY</span> <span class="operator">=</span> <span class="string">&quot;åº”ç”¨ç§é’¥&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CHARSET</span> <span class="operator">=</span> <span class="string">&quot;UTF-8&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ALIPAY_PUBLIC_KEY</span> <span class="operator">=</span> <span class="string">&quot;æ”¯ä»˜å®å…¬é’¥&quot;</span>;</span><br><span class="line">    <span class="comment">//è¿™æ˜¯æ²™ç®±æ¥å£è·¯å¾„,æ­£å¼è·¯å¾„ä¸ºhttps://openapi.alipay.com/gateway.do</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">GATEWAY_URL</span> <span class="operator">=</span><span class="string">&quot;https://openapi.alipaydev.com/gateway.do&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FORMAT</span> <span class="operator">=</span> <span class="string">&quot;JSON&quot;</span>;</span><br><span class="line">    <span class="comment">//ç­¾åæ–¹å¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SIGN_TYPE</span> <span class="operator">=</span> <span class="string">&quot;RSA2&quot;</span>;</span><br><span class="line">    <span class="comment">//æ”¯ä»˜å®å¼‚æ­¥é€šçŸ¥è·¯å¾„,ä»˜æ¬¾å®Œæ¯•åä¼šå¼‚æ­¥è°ƒç”¨æœ¬é¡¹ç›®çš„æ–¹æ³•,å¿…é¡»ä¸ºå…¬ç½‘åœ°å€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">NOTIFY_URL</span> <span class="operator">=</span> <span class="string">&quot;http://å…¬ç½‘åœ°å€/notifyUrl&quot;</span>;</span><br><span class="line">    <span class="comment">//æ”¯ä»˜å®åŒæ­¥é€šçŸ¥è·¯å¾„,ä¹Ÿå°±æ˜¯å½“ä»˜æ¬¾å®Œæ¯•åè·³è½¬æœ¬é¡¹ç›®çš„é¡µé¢,å¯ä»¥ä¸æ˜¯å…¬ç½‘åœ°å€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RETURN_URL</span> <span class="operator">=</span> <span class="string">&quot;http://localhost:8080/returnUrl&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;alipay&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">alipay</span><span class="params">(HttpServletResponse httpResponse)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        Random r=<span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–å®¢æˆ·ç«¯,å¡«å…¥æ‰€éœ€å‚æ•°</span></span><br><span class="line">        <span class="type">AlipayClient</span> <span class="variable">alipayClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultAlipayClient</span>(GATEWAY_URL, APP_ID, APP_PRIVATE_KEY, FORMAT, CHARSET, ALIPAY_PUBLIC_KEY, SIGN_TYPE);</span><br><span class="line">        <span class="type">AlipayTradePagePayRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlipayTradePagePayRequest</span>();</span><br><span class="line">        <span class="comment">//åœ¨å…¬å…±å‚æ•°ä¸­è®¾ç½®å›è·³å’Œé€šçŸ¥åœ°å€</span></span><br><span class="line">        request.setReturnUrl(RETURN_URL);</span><br><span class="line">        request.setNotifyUrl(NOTIFY_URL);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å•†æˆ·è®¢å•å·ï¼Œå•†æˆ·ç½‘ç«™è®¢å•ç³»ç»Ÿä¸­å”¯ä¸€è®¢å•å·ï¼Œå¿…å¡«</span></span><br><span class="line">        <span class="comment">//ç”ŸæˆéšæœºId</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">out_trade_no</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line">        <span class="comment">//ä»˜æ¬¾é‡‘é¢ï¼Œå¿…å¡«</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">total_amount</span> <span class="operator">=</span>Integer.toString(<span class="number">888</span>);</span><br><span class="line">        <span class="comment">//è®¢å•åç§°ï¼Œå¿…å¡«</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">subject</span> <span class="operator">=</span><span class="string">&quot;ç”µå½±ç¥¨&quot;</span>;</span><br><span class="line">        <span class="comment">//å•†å“æè¿°ï¼Œå¯ç©º</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> <span class="string">&quot;å°Šæ•¬çš„ä¼šå‘˜æ¬¢è¿è´­ä¹°&lt;å¤ç›®å‹äººå¸&gt;ç”µå½±ç¥¨1å¼ &quot;</span>;</span><br><span class="line">        request.setBizContent(<span class="string">&quot;&#123;\&quot;out_trade_no\&quot;:\&quot;&quot;</span>+ out_trade_no +<span class="string">&quot;\&quot;,&quot;</span></span><br><span class="line">                + <span class="string">&quot;\&quot;total_amount\&quot;:\&quot;&quot;</span>+ total_amount +<span class="string">&quot;\&quot;,&quot;</span></span><br><span class="line">                + <span class="string">&quot;\&quot;subject\&quot;:\&quot;&quot;</span>+ subject +<span class="string">&quot;\&quot;,&quot;</span></span><br><span class="line">                + <span class="string">&quot;\&quot;body\&quot;:\&quot;&quot;</span>+ body +<span class="string">&quot;\&quot;,&quot;</span></span><br><span class="line">                + <span class="string">&quot;\&quot;product_code\&quot;:\&quot;FAST_INSTANT_TRADE_PAY\&quot;&#125;&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">form</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            form = alipayClient.pageExecute(request).getBody(); <span class="comment">// è°ƒç”¨SDKç”Ÿæˆè¡¨å•</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (AlipayApiException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        httpResponse.setContentType(<span class="string">&quot;text/html;charset=&quot;</span> + CHARSET);</span><br><span class="line">        httpResponse.getWriter().write(form);<span class="comment">// ç›´æ¥å°†å®Œæ•´çš„è¡¨å•htmlè¾“å‡ºåˆ°é¡µé¢</span></span><br><span class="line">        httpResponse.getWriter().flush();</span><br><span class="line">        httpResponse.getWriter().close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/returnUrl&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">returnUrl</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException, AlipayApiException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=================================åŒæ­¥å›è°ƒ=====================================&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æ”¯ä»˜å®GETè¿‡æ¥åé¦ˆä¿¡æ¯</span></span><br><span class="line">        Map&lt;String, String&gt; params = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line">        Map&lt;String, String[]&gt; requestParams = request.getParameterMap();</span><br><span class="line">        <span class="keyword">for</span> (Iterator&lt;String&gt; iter = requestParams.keySet().iterator(); iter.hasNext();) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) iter.next();</span><br><span class="line">            String[] values = (String[]) requestParams.get(name);</span><br><span class="line">            <span class="type">String</span> <span class="variable">valueStr</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; values.length; i++) &#123;</span><br><span class="line">                valueStr = (i == values.length - <span class="number">1</span>) ? valueStr + values[i] : valueStr + values[i] + <span class="string">&quot;,&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¹±ç è§£å†³ï¼Œè¿™æ®µä»£ç åœ¨å‡ºç°ä¹±ç æ—¶ä½¿ç”¨</span></span><br><span class="line">            valueStr = <span class="keyword">new</span> <span class="title class_">String</span>(valueStr.getBytes(<span class="string">&quot;utf-8&quot;</span>), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            params.put(name, valueStr);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(params);<span class="comment">//æŸ¥çœ‹å‚æ•°éƒ½æœ‰å“ªäº›</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">signVerified</span> <span class="operator">=</span> AlipaySignature.rsaCheckV1(params, ALIPAY_PUBLIC_KEY, CHARSET, SIGN_TYPE); <span class="comment">// è°ƒç”¨SDKéªŒè¯ç­¾å</span></span><br><span class="line">        <span class="comment">//éªŒè¯ç­¾åé€šè¿‡</span></span><br><span class="line">        <span class="keyword">if</span>(signVerified)&#123;</span><br><span class="line">            <span class="comment">// å•†æˆ·è®¢å•å·</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">out_trade_no</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(request.getParameter(<span class="string">&quot;out_trade_no&quot;</span>).getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ”¯ä»˜å®äº¤æ˜“å·</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">trade_no</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(request.getParameter(<span class="string">&quot;trade_no&quot;</span>).getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä»˜æ¬¾é‡‘é¢</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">total_amount</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(request.getParameter(<span class="string">&quot;total_amount&quot;</span>).getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;å•†æˆ·è®¢å•å·=&quot;</span>+out_trade_no);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ”¯ä»˜å®äº¤æ˜“å·=&quot;</span>+trade_no);</span><br><span class="line">            System.out.println(<span class="string">&quot;ä»˜æ¬¾é‡‘é¢=&quot;</span>+total_amount);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;<span class="comment">//è·³è½¬ä»˜æ¬¾æˆåŠŸé¡µé¢</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;no&quot;</span>;<span class="comment">//è·³è½¬ä»˜æ¬¾å¤±è´¥é¡µé¢</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="è®¿é—®æ”¯ä»˜url"><a href="#è®¿é—®æ”¯ä»˜url" class="headerlink" title="è®¿é—®æ”¯ä»˜url"></a>è®¿é—®æ”¯ä»˜url</h4><ul><li>è®¿é—®url<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200721220702.png"></li><li>æ”¯ä»˜çš„æ—¶å€™å¯ä»¥é€‰æ‹©æ‰‹æœºä¸‹è½½æ²™ç®±ç‰ˆçš„æ”¯ä»˜å®ï¼Œç™»å½•æ²™ç®±è´¦å·<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200721220808.png"><br>ä½†æ˜¯åªæœ‰Androidç‰ˆappï¼Œä¸æ”¯æŒIOSã€‚æ‰€ä»¥æˆ‘è¿™é‡Œç›´æ¥ç½‘é¡µç™»å½•è´¦å·æ”¯ä»˜ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200721220947.png"><br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200721221028.png"></li><li>ä»˜æ¬¾æˆåŠŸ<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200721221054.png"></li></ul><h4 id="æœ€åé™„ä¸Šæ²™ç®±æ”¯ä»˜å®APPäºŒç»´ç "><a href="#æœ€åé™„ä¸Šæ²™ç®±æ”¯ä»˜å®APPäºŒç»´ç " class="headerlink" title="æœ€åé™„ä¸Šæ²™ç®±æ”¯ä»˜å®APPäºŒç»´ç "></a>æœ€åé™„ä¸Šæ²™ç®±æ”¯ä»˜å®APPäºŒç»´ç </h4><p><img src="https://zos.alipayobjects.com/rmsportal/CaXHDDXkdxikcZP.png"></p>]]></content>
      
      
      <categories>
          
          <category> æ”¯ä»˜å® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ”¯ä»˜å® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…RabbitMqåæ— æ³•è¿›å…¥ç®¡ç†é¡µé¢</title>
      <link href="/Docker%E5%AE%89%E8%A3%85RabbitMq%E5%90%8E%E6%97%A0%E6%B3%95%E8%BF%9B%E5%85%A5%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2/"/>
      <url>/Docker%E5%AE%89%E8%A3%85RabbitMq%E5%90%8E%E6%97%A0%E6%B3%95%E8%BF%9B%E5%85%A5%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©ä½¿ç”¨Dockerå®‰è£…RabbitMqåå‘ç°æ— æ³•æ ¹æ®æŒ‡å®šçš„15672çš„ç®¡ç†ç«¯ç«¯å£è¿›å…¥ç®¡ç†é¡µé¢ï¼Œäºæ˜¯ä»”ç»†æ£€æŸ¥äº†Dockerå‘½ä»¤å’Œç«¯å£å·,å¹¶é‡æ–°å®‰è£…äº†ä¸€é,æœ€åæ‰å‘ç°é—®é¢˜ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><ul><li>æŸ¥é˜…<a href="https://www.rabbitmq.com/management.html">å®˜ç½‘</a>æ–‡æ¡£åå‘ç°æœ‰è¿™ä¹ˆä¸€æ®µè¯<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200607164113.png"><br>ç®¡ç†ç«¯æ˜¯ä¸ªæ’ä»¶ï¼Œå¿…é¡»å®‰è£…åæ‰èƒ½ä½¿ç”¨!äºæ˜¯æ ¹æ®å®˜æ–¹æç¤ºï¼Œå®‰è£…æ’ä»¶ï¼Œç»ˆäºæˆåŠŸè®¿é—®åˆ°äº†ç®¡ç†é¡µé¢ã€‚  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodembp î‚° ~ î‚° docker exec -i -t rabbitmq /bin/bash</span><br><span class="line">root@7aa7a089ca7b:/#  rabbitmq-plugins enable rabbitmq_management</span><br><span class="line">Enabling plugins on node rabbit@7aa7a089ca7b:</span><br><span class="line">rabbitmq_management</span><br><span class="line">The following plugins have been configured:</span><br><span class="line">rabbitmq_management</span><br><span class="line">rabbitmq_management_agent</span><br><span class="line">rabbitmq_web_dispatch</span><br><span class="line">Applying plugin configuration to rabbit@7aa7a089ca7b...</span><br><span class="line">The following plugins have been enabled:</span><br><span class="line">rabbitmq_management</span><br><span class="line">rabbitmq_management_agent</span><br><span class="line">rabbitmq_web_dispatch</span><br><span class="line"></span><br><span class="line">started 3 plugins.</span><br><span class="line">root@7aa7a089ca7b:/#</span><br></pre></td></tr></table></figure>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200607164350.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Mq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…MongoDBåŠMongoDBçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/Docker%E5%AE%89%E8%A3%85MongoDB%E5%8F%8AMongoDB%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/Docker%E5%AE%89%E8%A3%85MongoDB%E5%8F%8AMongoDB%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹ MongoDB,è¿™é‡Œè®°å½•ä¸€ä¸‹ä½¿ç”¨Dockerå®‰è£…MongoDBçš„æµç¨‹ä»¥åŠä¸€äº›ç®€å•ä½¿ç”¨ã€‚</p><span id="more"></span><h4 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h4><ul><li><p>æŸ¥æ‰¾DockerHubä¸Šçš„MongoDBé•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodembp î‚° ~/.m2/repository/org/springframework/boot/spring-boot-starter-thymeleaf î‚° docker search mongoDb</span><br><span class="line">NAME                                DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">mongo                               MongoDB document databases provide high avaiâ€¦   6921                [OK]</span><br><span class="line">mongo-express                       Web-based MongoDB admin interface, written wâ€¦   705                 [OK]</span><br><span class="line">tutum/mongodb                       MongoDB Docker image â€“ listens in port 27017â€¦   230                                     [OK]</span><br><span class="line">bitnami/mongodb                     Bitnami MongoDB Docker Image                    120                                     [OK]</span><br><span class="line">frodenas/mongodb                    A Docker Image for MongoDB                      18                                      [OK]</span><br><span class="line">centos/mongodb-32-centos7           MongoDB NoSQL database server                   8</span><br><span class="line">webhippie/mongodb                   Docker images for MongoDB                       7                                       [OK]</span><br><span class="line">centos/mongodb-26-centos7           MongoDB NoSQL database server                   5</span><br><span class="line">eses/mongodb_exporter               mongodb exporter for prometheus                 5                                       [OK]</span><br><span class="line">centos/mongodb-36-centos7           MongoDB NoSQL database server                   5</span><br><span class="line">quadstingray/mongodb                MongoDB with Memory and User Settings           3                                       [OK]</span><br><span class="line">neowaylabs/mongodb-mms-agent        This Docker image with MongoDB Monitoring Agâ€¦   3                                       [OK]</span><br><span class="line">centos/mongodb-34-centos7           MongoDB NoSQL database server                   3</span><br><span class="line">ssalaues/mongodb-exporter           MongoDB Replicaset Prometheus Compatible Metâ€¦   2</span><br><span class="line">tozd/mongodb                        Base image for MongoDB server.                  2                                       [OK]</span><br><span class="line">zadki3l/mongodb-oplog               Simple mongodb image with single-node replicâ€¦   2                                       [OK]</span><br><span class="line">mongodbsap/mongodbdocker                                                            2</span><br><span class="line">ansibleplaybookbundle/mongodb-apb   An APB to deploy MongoDB.                       1                                       [OK]</span><br><span class="line">bitnami/mongodb-exporter                                                            1</span><br><span class="line">xogroup/mongodb_backup_gdrive       Docker image to create a MongoDB database baâ€¦   1                                       [OK]</span><br><span class="line">openshift/mongodb-24-centos7        DEPRECATED: A Centos7 based MongoDB v2.4 imaâ€¦   1</span><br><span class="line">targetprocess/mongodb_exporter      MongoDB exporter for prometheus                 0                                       [OK]</span><br><span class="line">gebele/mongodb                      mongodb                                         0                                       [OK]</span><br><span class="line">phenompeople/mongodb                 MongoDB is an open-source, document databasâ€¦   0                                       [OK]</span><br><span class="line">astronomerio/mongodb-source         Mongodb source.                                 0                                       [OK]</span><br></pre></td></tr></table></figure></li><li><p>æ‹‰å–MongoDBé•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodembp î‚° ~/.m2/repository/org/springframework/boot/spring-boot-starter-thymeleaf î‚° docker pull mongo</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/mongo</span><br><span class="line">23884877105a: Pull complete</span><br><span class="line">bc38caa0f5b9: Pull complete</span><br><span class="line">2910811b6c42: Pull complete</span><br><span class="line">36505266dcc6: Pull complete</span><br><span class="line">a4d269900d94: Pull complete</span><br><span class="line">5e2526abb80a: Pull complete</span><br><span class="line">d3eece1f39ec: Pull complete</span><br><span class="line">358ed78d3204: Pull complete</span><br><span class="line">1a878b8604ae: Pull complete</span><br><span class="line">978c572f0440: Pull complete</span><br><span class="line">35a600ffcf6a: Pull complete</span><br><span class="line">fa9f812cdfe6: Pull complete</span><br><span class="line">7a8109e27110: Pull complete</span><br><span class="line">Digest: sha256:be8d903a68997dd63f64479004a7eeb4f0674dde7ab3cbd1145e5658da3a817b</span><br><span class="line">Status: Downloaded newer image for mongo:latest</span><br><span class="line">docker.io/library/mongo:latest</span><br></pre></td></tr></table></figure></li><li><p>ä¸‹è½½å®ŒæˆåæŸ¥çœ‹é•œåƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodembp î‚° ~/.m2/repository/org/springframework/boot/spring-boot-starter-thymeleaf î‚° docker images mongo</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">mongo               latest              66c68b650ad4        9 days ago          388MB</span><br></pre></td></tr></table></figure></li></ul><h4 id="å¯åŠ¨MongoDB"><a href="#å¯åŠ¨MongoDB" class="headerlink" title="å¯åŠ¨MongoDB"></a>å¯åŠ¨MongoDB</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodembp î‚° ~/WorkPlace/MongoDB î‚° docker run -p 27017:27017 -v $PWD/db:/data/db -d mongo </span><br><span class="line">5db622c8654fa748f2c5f166302c5a8a520b5ed66963d1f1aa6ceaade35ac475</span><br><span class="line">mizhuo@mizhuodembp î‚° ~/WorkPlace/MongoDB î‚° docker rename amazing_buck mongoDB </span><br><span class="line">mizhuo@mizhuodembp î‚° ~/WorkPlace/MongoDB î‚° docker start mongoDB</span><br><span class="line">mongoDB</span><br></pre></td></tr></table></figure><blockquote><p>å¼€å¯éªŒè¯æ¨¡å¼å‘½ä»¤åé¢è¦åŠ ä¸Šâ€“auth</p></blockquote><ul><li>å‘½ä»¤è¯´æ˜<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-p 27017:27017 :å°†å®¹å™¨çš„27017 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„27017 ç«¯å£</span><br><span class="line">-v $PWD/db:/data/db :å°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„dbæŒ‚è½½åˆ°å®¹å™¨çš„/data/dbï¼Œä½œä¸ºmongoæ•°æ®å­˜å‚¨ç›®å½•</span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨navicatè¿æ¥MongoDBæˆåŠŸ<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200605153927.png"></li></ul><h4 id="MongoDBçš„åŸºæœ¬ä½¿ç”¨"><a href="#MongoDBçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="MongoDBçš„åŸºæœ¬ä½¿ç”¨"></a>MongoDBçš„åŸºæœ¬ä½¿ç”¨</h4><ul><li>ä½¿ç”¨å‘½ä»¤è¡Œ<code>docker exec -it mongoDB /bin/bash</code>è¿›å…¥åˆ°mongoDBçš„å®¹å™¨å†…éƒ¨,ç„¶åä½¿ç”¨<code>mongo</code>è¿›å…¥æ“ä½œè¡Œ<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mizhuo@mizhuodembp î‚° ~/WorkPlace/MongoDB/db î‚° docker exec -it mongoDB /bin/bash</span><br><span class="line">root@5db622c8654f:/# mongo</span><br><span class="line">MongoDB shell version v4.2.7</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb</span><br><span class="line">Implicit session: session &#123; &quot;id&quot; : UUID(&quot;10d943a6-85ba-4f9f-8712-73cc8c1e62d3&quot;) &#125;</span><br><span class="line">MongoDB server version: 4.2.7</span><br><span class="line">Server has startup warnings:</span><br><span class="line">2020-06-05T08:18:08.177+0000 I  CONTROL  [initandlisten]</span><br><span class="line">2020-06-05T08:18:08.177+0000 I  CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.</span><br><span class="line">2020-06-05T08:18:08.177+0000 I  CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.</span><br><span class="line">2020-06-05T08:18:08.177+0000 I  CONTROL  [initandlisten]</span><br><span class="line">---</span><br><span class="line">Enable MongoDB&#x27;s free cloud-based monitoring service, which will then receive and display</span><br><span class="line">metrics about your deployment (disk utilization, CPU, operation statistics, etc).</span><br><span class="line"></span><br><span class="line">The monitoring data will be available on a MongoDB website with a unique URL accessible to you</span><br><span class="line">and anyone you share the URL with. MongoDB may use this information to make product</span><br><span class="line">improvements and to suggest MongoDB products and deployment options to you.</span><br><span class="line"></span><br><span class="line">To enable free monitoring, run the following command: db.enableFreeMonitoring()</span><br><span class="line">To permanently disable this reminder, run the following command: db.disableFreeMonitoring()</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li><li>åˆ›å»ºç”¨æˆ·<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt; show dbs</span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line">local   0.000GB</span><br><span class="line">&gt; use admin</span><br><span class="line">switched to db admin</span><br><span class="line">&gt; db.createUser(&#123;user:&quot;mizhuo&quot;,pwd:&quot;123456&quot;,roles:[&#123;role:&quot;userAdminAnyDatabase&quot;,db:&quot;admin&quot;&#125;]&#125;)</span><br><span class="line">Successfully added user: &#123;</span><br><span class="line">&quot;user&quot; : &quot;mizhuo&quot;,</span><br><span class="line">&quot;roles&quot; : [</span><br><span class="line">&#123;</span><br><span class="line">&quot;role&quot; : &quot;userAdminAnyDatabase&quot;,</span><br><span class="line">&quot;db&quot; : &quot;admin&quot;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">&gt; db.auth(&quot;mizhuo&quot;,&quot;123456&quot;)</span><br><span class="line">1</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2è§£å†³æ–¹æ¡ˆã€æ¸…ç©ºè¡¨æ•°æ®ã€‘</title>
      <link href="/DB2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%90%E6%B8%85%E7%A9%BA%E8%A1%A8%E6%95%B0%E6%8D%AE%E3%80%91/"/>
      <url>/DB2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%90%E6%B8%85%E7%A9%BA%E8%A1%A8%E6%95%B0%E6%8D%AE%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å¯¹DB2æ•°æ®è¿›è¡Œåˆ·æ–°æ“ä½œï¼Œè¡¨æ•°æ®åƒä¸‡å·¦å³ï¼Œå› ä¸ºè¦ä»å…¶å®ƒè¡¨ä¸­é‡æ–°æ±‡æ•°æ®ï¼Œæ‰€ä»¥æˆ‘æ–°å»ºäº†ä¸€å¼ ä¸´æ—¶è¡¨ï¼Œä½†æ˜¯ä¸­é—´é€»è¾‘é—®é¢˜ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨äº†<code>DELETE FROM XXX</code>æ¥è¿›è¡Œæ¸…è¡¨æ“ä½œï¼Œç»“æœå…‰åˆ é™¤æ•°æ®å°±èŠ±è´¹äº†åŠä¸ªå°æ—¶,äºæ˜¯æ•´ç†äº†ä¸€ä¸‹æ—¶é—´æ…¢çš„åŸå› å’Œå…¶å®ƒå‡ ç§æ¸…è¡¨æ–¹å¼ã€‚</p><span id="more"></span><h4 id="æ¸…ç©ºè¡¨æ•°æ®çš„å‡ ç§æ–¹å¼"><a href="#æ¸…ç©ºè¡¨æ•°æ®çš„å‡ ç§æ–¹å¼" class="headerlink" title="æ¸…ç©ºè¡¨æ•°æ®çš„å‡ ç§æ–¹å¼"></a>æ¸…ç©ºè¡¨æ•°æ®çš„å‡ ç§æ–¹å¼</h4><ul><li>ä½¿ç”¨<code>DELETE FROM XXX</code><br>è¿™ç§æ–¹å¼å› ä¸ºä¸å¸¦whereæ¡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥æ¸…é™¤è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œè¡¨æ•°æ®é‡å°çš„è¯å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœè¡¨æ•°æ®é‡å¤§çš„è¯å°±ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼äº†ï¼Œå› ä¸ºè¿™ç§æ–¹å¼è™½ç„¶èƒ½è¾¾åˆ°æ¸…é™¤è¡¨æ•°æ®çš„æ•ˆæœï¼Œä½†æ˜¯è¿™ä¸ªæ“ä½œä¼šè®°å½•äº‹åŠ¡æ—¥å¿—ï¼Œå› æ­¤æ‰§è¡Œé€Ÿåº¦ææ…¢ã€‚è€Œä¸”å¯èƒ½ä¼šäº§ç”Ÿæ—¥å¿—ç©ºé—´ä¸è¶³çš„æƒ…å†µã€‚å¦‚æœä¸­é€”å–æ¶ˆæ“ä½œï¼Œè¿˜ä¼šè¿›è¡Œå›æ»šæ“ä½œã€‚</li><li>ä½¿ç”¨<code>Import</code>æˆ–è€…<code>Load</code>å‘½ä»¤<ul><li><code>Import</code>: ä½¿ç”¨<code>Import from /dev/null of del replace into XXX</code></li><li><code>Load</code>: ä½¿ç”¨<code>Load from /dev/null of del replace into XXX</code><br>è¿™ç§æ–¹å¼å› ä¸º<code>replace</code>å¯¼å…¥æ–¹å¼é¦–å…ˆä¼šå°†è¡¨ä¸­æ‰€æœ‰æ•°æ®æ¸…ç©ºï¼Œç„¶å<code>IMPORT</code>&#x2F;<code>LOAD</code>åˆå‘è¡¨ä¸­å¯¼å…¥äº†ç©ºæ•°æ®ï¼Œä»è€Œå®ç°äº†æ•°æ®çš„æ¸…é™¤æ“ä½œã€‚</li></ul></li><li>ä½¿ç”¨<code>NOT LOGGED INITIALLY</code><ul><li><code>ALTER TABLE xxx ACTIVATE NOT LOGGED INITIALLY WITH EMPTY TABLE</code><br>è¿™ç§æ–¹æ³•åœ¨æ•´ä¸ªåˆ é™¤æ“ä½œä¸­ä¸ä¼šè®°æ—¥å¿—ï¼Œå› æ­¤æ‰§è¡Œé€Ÿåº¦æ˜¯å‡ ç§æ–¹æ³•ä¸­æœ€å¿«çš„ä¸€ç§ï¼Œä½†åˆ é™¤çš„æ•°æ®æ˜¯ä¸å¯æ¢å¤çš„ã€‚</li></ul></li><li>åˆ é™¤è¡¨é‡å»º<br>æœ€åä¸€ç§æ–¹æ³•ä¹Ÿæ˜¯æœ€æš´åŠ›çš„ä¸€ç§æ–¹æ³•ï¼Œä½¿ç”¨<code>db2look</code>å°†è¡¨ç»“æ„dllå¯¼å‡ºï¼Œç„¶åä½¿ç”¨<code>drop</code>å‘½ä»¤å°†æ•´è¡¨åˆ é™¤ï¼Œæœ€åé‡æ–°æ–°å»ºè¡¨ç»“æ„ã€‚æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒçš„å›é€€æ“ä½œå°±æ˜¯è¿™æ ·çš„ï¼Œå…ˆå¤‡ä»½è¡¨ç»“æ„å’Œè¡¨æ•°æ®ï¼Œå¦‚æœå‡çº§å¤±è´¥å›é€€ï¼Œåˆ™åˆ é™¤è¡¨ï¼Œé‡å»ºè¡¨ç»“æ„ï¼Œæœ€åå¯¼å…¥å¤‡ä»½çš„æ•°æ®ã€‚</li></ul><p><strong>ä»¥ä¸Šæ–¹æ³•éƒ½å¯ä»¥å¯¹è¡¨è¿›è¡Œæ¸…ç©ºï¼Œä½†æ˜¯å¦‚æœåªæ˜¯è¦å®ç°TRUNCATEçš„æ•ˆæœï¼Œæ¨èç¬¬äºŒç§å’Œç¬¬ä¸‰ç§æ–¹å¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2è§£å†³æ–¹æ¡ˆã€å¯¼å…¥æ•°æ®ä¸­æ–‡ä¹±ç ã€‘</title>
      <link href="/DB2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%90%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E3%80%91/"/>
      <url>/DB2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%90%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©ä½¿ç”¨DB2å¯¼å…¥æ•°æ®çš„æ—¶å€™å‡ºç°äº†ä¸­æ–‡ä¹±ç ,è¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><h4 id="æ­£å¸¸åŠ è½½æ•°æ®"><a href="#æ­£å¸¸åŠ è½½æ•°æ®" class="headerlink" title="æ­£å¸¸åŠ è½½æ•°æ®"></a>æ­£å¸¸åŠ è½½æ•°æ®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 &quot;load from XXX.del of del modified by delprioritychar replace into XXX.XXX&quot;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>modified by delprioritychar</code>æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®åº“è®°å½•ä¸­å­˜åœ¨æ¢è¡Œç¬¦å¯¼è‡´æ•°æ®æ— æ³•è£…å…¥çš„æƒ…å†µã€‚<code>replace</code>ä»£è¡¨ç›´æ¥æ›¿æ¢åŸè¡¨ï¼Œå…ˆå¯¹è¡¨åš<code>Truncate</code>æ“ä½œã€‚ä½¿ç”¨<code>insert</code>ä»£è¡¨åœ¨åŸè¡¨çš„åŸºç¡€ä¸Š<code>Append</code>ã€‚</p><p>ä½†æ˜¯æŒ‰ç…§æ­¤æ–¹æ³•å¯¼å…¥å‡ºç°äº†ä¸­æ–‡ä¹±ç çš„é—®é¢˜ã€‚ç¿»é˜…èµ„æ–™å‘ç°éœ€è¦æŒ‡å®šæ•°æ®åº“ç¼–ç æ ¼å¼,å…·ä½“æ“ä½œå¦‚ä¸‹:</p><ul><li>ä½¿ç”¨<code>db2 get db cfg for xxxdb|grep -i code</code>å¯ä»¥æŸ¥çœ‹æ•°æ®åº“ç¼–ç æ ¼å¼ã€‚</li><li>1208å¯¹åº”UTF-8ç¼–ç é›†,1386å¯¹åº”GBKç¼–ç é›†,819å¯¹åº”ISO8859-1</li><li>äºæ˜¯ä½¿ç”¨<code>modified by codepage = 1208</code>å¯ä»¥æœ‰æ•ˆå»é™¤ä¸­æ–‡ä¹±ç   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 &quot;load from XXX.del of del modified by codepage = 1208 replace into XXX.XXX&quot;</span><br></pre></td></tr></table></figure></li></ul><p>åŒç†å¯¼å‡ºæ•°æ®çš„æ—¶å€™ä¹Ÿå¯ä»¥æŒ‡å®šç¼–ç é›†æ ¼å¼è¿›è¡Œå¯¼å‡ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¡¹ç›®ä»MySQLè¿ç§»åˆ°Oracle</title>
      <link href="/%E9%A1%B9%E7%9B%AE%E4%BB%8EMySQL%E8%BF%81%E7%A7%BB%E5%88%B0Oracle/"/>
      <url>/%E9%A1%B9%E7%9B%AE%E4%BB%8EMySQL%E8%BF%81%E7%A7%BB%E5%88%B0Oracle/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å°†ä¸€ä¸ªé¡¹ç›®,ä»MySQLæ•°æ®åº“è¿ç§»åˆ°Oracleæ•°æ®åº“,å…¶ä¸­é‡åˆ°å‡ ä¸ªé—®é¢˜,è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><h4 id="æ•°æ®åº“å·®å¼‚"><a href="#æ•°æ®åº“å·®å¼‚" class="headerlink" title="æ•°æ®åº“å·®å¼‚"></a>æ•°æ®åº“å·®å¼‚</h4><ul><li><p>è‡ªåŠ¨å¢é•¿</p><ul><li>åœ¨Mysqlä¸­,æä¾›äº†<code>AUTO_INCREMENT</code>å®ç°è‡ªåŠ¨é€’å¢ã€‚</li><li>åœ¨Oracleä¸­åˆ™æ²¡æœ‰è¿™ä¸ªæ¦‚å¿µ,ä½†Oracleä¸­æä¾›äº†åºåˆ—çš„æ¦‚å¿µ,ç”¨æˆ·å¯ä»¥æ–°å»ºä¸€ä¸ª<code>SEQUENCE</code>è‡ªå¢åºåˆ—å’Œä¸€ä¸ªè§¦å‘å™¨æ¥è·å–åºåˆ—å·å®ç°å­—æ®µè‡ªåŠ¨å¢é•¿ã€‚  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è‡ªå¢åºåˆ—:</span><br><span class="line"><span class="keyword">CREATE</span> SEQUENCE &quot;DBNAME&quot;.&quot;SEQ_NAME&quot; MINVALUE <span class="number">1</span> MAXVALUE <span class="number">9999999999999999999999999999</span> INCREMENT <span class="keyword">BY</span> <span class="number">1</span> NOCACHE;</span><br><span class="line">è§¦å‘å™¨:</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> &quot;DBNAME&quot;.&quot;TRIGGER_NAME&quot; BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> &quot;DBNAME&quot;.&quot;TABLENAME&quot; <span class="keyword">REFERENCING</span> <span class="keyword">OLD</span> <span class="keyword">AS</span> &quot;OLD&quot; <span class="keyword">NEW</span> <span class="keyword">AS</span> &quot;NEW&quot; <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="keyword">WHEN</span> (new.å¾…å¢é•¿çš„å­—æ®µå <span class="keyword">is</span> <span class="keyword">null</span>) </span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> SEQ_NAME.NEXTVAL <span class="keyword">INTO</span> :NEW.å¾…å¢é•¿çš„å­—æ®µå <span class="keyword">FROM</span> DUAL;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ•°æ®ç±»å‹å·®å¼‚</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>Mysql</th><th>Oracle</th></tr></thead><tbody><tr><td>å­—ç¬¦ä¸²</td><td>varchar[0-65535]</td><td>varchar2[0-4000]</td></tr><tr><td>æ•´æ•°</td><td>int</td><td>number(p,s) pä¸ºæ•´æ•°ä½,sä¸ºå°æ•°ä½</td></tr><tr><td>æµ®ç‚¹æ•°</td><td>float</td><td>oracle10gå‰æ— float,ä½¿ç”¨numberä»£æ›¿,åé¢å‡ºç°çš„floatç­‰å®é™…ä¸Šä¹Ÿæ˜¯numberå®ç°</td></tr><tr><td>â€¦</td><td>â€¦</td><td>â€¦</td></tr></tbody></table></li><li><p>äº‹åŠ¡æäº¤</p><ul><li>Mysqlä¸­äº‹åŠ¡é»˜è®¤ä¼šè‡ªåŠ¨æäº¤ã€‚å¦‚éœ€å…³é—­è‡ªåŠ¨æäº¤ï¼Œåˆ™éœ€æ‰§è¡Œå‘½ä»¤<code>Set autocommit = 0</code></li><li>Oracleä¸­äº‹åŠ¡é»˜è®¤ä¸è‡ªåŠ¨æäº¤ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨æäº¤ã€‚å¦‚éœ€è‡ªåŠ¨æäº¤,æ‰§è¡Œå‘½ä»¤<code>SET AUTOCOMMIT ON</code></li></ul></li><li><p>å»ºåº“å»ºè¡¨</p><ul><li>Mysqlä¸­ç›´æ¥æ–°å»ºæ•°æ®åº“,åœ¨æ•°æ®åº“ä¸Šæ–°å»ºè¡¨å°±å¯ä»¥äº†ã€‚</li><li>Oracle åˆ™è¾ƒä¸ºå¤æ‚ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹:<ul><li>åˆ›å»ºè¡¨ç©ºé—´:  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>SPACE DEMO</span><br><span class="line">DATAFILE <span class="string">&#x27;æ–‡ä»¶è·¯å¾„\demo.dbf&#x27;</span></span><br><span class="line">SIZE <span class="number">200</span>M</span><br><span class="line">AUTOEXTEND <span class="keyword">ON</span>;</span><br></pre></td></tr></table></figure></li><li>åˆ›å»ºç”¨æˆ·:  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;USERNAME&#x27;</span></span><br><span class="line">IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;PASSWORD&#x27;</span></span><br><span class="line"><span class="keyword">DEFAULT</span> TABLESPACE DEMO</span><br><span class="line">TEMPORARY TABLESPACE temp;</span><br></pre></td></tr></table></figure></li><li>ç»™ç”¨æˆ·èµ‹äºˆæƒé™:  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CREATE</span> SESSION,<span class="keyword">CREATE</span> <span class="keyword">TABLE</span>,<span class="keyword">CREATE</span> <span class="keyword">VIEW</span>,<span class="keyword">CREATE</span> SEQUENCE,UNLIMITED TABLESPACE <span class="keyword">TO</span> USERNAME;Â </span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CONNECT</span> <span class="keyword">TO</span> USERNAME;Â </span><br><span class="line"><span class="keyword">GRANT</span> RESOURCE <span class="keyword">TO</span> USERNAME;Â </span><br><span class="line"><span class="keyword">GRANT</span> DBA <span class="keyword">TO</span> USERNAME;</span><br></pre></td></tr></table></figure>  æœ€åä½¿ç”¨æ–°å»ºçš„ç”¨æˆ·è¿æ¥æ•°æ®åº“,å°±å¯ä»¥è¿›è¡Œæ­£å¸¸çš„å»ºè¡¨æ“ä½œäº†ã€‚</li></ul></li></ul></li></ul><h4 id="JDBCè¿æ¥"><a href="#JDBCè¿æ¥" class="headerlink" title="JDBCè¿æ¥"></a>JDBCè¿æ¥</h4><ul><li>æ ¹æ®MySQLå’ŒOracleçš„å·®å¼‚ï¼Œå°†æ•°æ®ä»MySQLå¯¼å…¥åˆ°Oracleä¸­ï¼Œç„¶åä¿®æ”¹é¡¹ç›®çš„JDBCè¿æ¥ã€‚  <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#jdbc.user=root</span></span><br><span class="line"><span class="comment">#jdbc.password=123456</span></span><br><span class="line"><span class="comment">#jdbc.driverClass=com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">#jdbc.jdbcUrl=jdbc:mysql://localhost:3306/demo?useSSL=false&amp;serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="comment">#jdbc.testConnectionOnCheckout=true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jdbc.user</span>=<span class="string">demo</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="attr">jdbc.driverClass</span>=<span class="string">oracle.jdbc.OracleDriver</span></span><br><span class="line"><span class="attr">jdbc.jdbcUrl</span>=<span class="string">jdbc:oracle:thin:@localhost:1521:xe</span></span><br><span class="line"><span class="attr">jdbc.testConnectionOnCheckout</span>=<span class="string">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li>åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯è§‰å¾—å°±å¯ä»¥æˆåŠŸè¿è¡Œäº†ï¼Ÿä½†æ˜¯å¹¶æ²¡æœ‰ï¼ï¼ï¼æ§åˆ¶å°æŠ¥äº†ä»¥ä¸‹é”™è¯¯:  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.lang.RuntimeException: java.sql.SQLException: Connections could not be acquired from the underlying database!</span><br><span class="line"></span><br></pre></td></tr></table></figure>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200528174136.png"></li><li>æŸ¥äº†å¾ˆå¤šçš„èµ„æ–™ï¼Œè¯•è¿‡å¾ˆå¤šæ–¹æ³•æ‰å‘ç°æ˜¯tomcatæ²¡æœ‰Oracleçš„é©±åŠ¨å¯¼è‡´çš„ã€‚äºæ˜¯å°†ojdbcåŒ…æ”¾å…¥tomcatçš„libä¸‹é¢ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200528174958.png"></li><li>é‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œå®Œç¾è¿è¡Œã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200528174655.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoä»Windowsè¿ç§»åˆ°MacOS</title>
      <link href="/Hexo%E4%BB%8EWindows%E8%BF%81%E7%A7%BB%E5%88%B0Mac/"/>
      <url>/Hexo%E4%BB%8EWindows%E8%BF%81%E7%A7%BB%E5%88%B0Mac/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘æ¢Macäº†ï¼Œæ‰€æœ‰ç¯å¢ƒå’Œé¡¹ç›®éƒ½è¦è½¬ç§»åˆ°Macä¸Šï¼Œåœ¨è¿ç§»Hexoæ—¶å‡ºäº†ç‚¹å°é—®é¢˜ã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><h4 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h4><ul><li>åœ¨Macä¸Šå®‰è£…nodeå’Œgitï¼Œè¿™ä¸ªä¸ç”¨è¯´ã€‚ç”¨brewä¸¤æ¡å‘½ä»¤å°±OKäº†ã€‚  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install node</span><br><span class="line">brew install git</span><br></pre></td></tr></table></figure></li><li>é…ç½®git  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;yournameâ€</span><br><span class="line">git config --global user.email youremail@example.com</span><br></pre></td></tr></table></figure></li><li>é…ç½®npmæ·˜å®é•œåƒ(åŠ å¿«é€Ÿåº¦ï¼Œå¯çœç•¥)  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨cnpm  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></li><li>ç”Ÿæˆsshå¯†é’¥ï¼Œå…³è”githubã€coding<ul><li>æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ï¼šcd ~&#x2F;.ssh</li><li>ç”Ÿæˆsshï¼šssh-keygen -t rsa -C â€œ<a href="mailto:&#121;&#111;&#117;&#114;&#101;&#x6d;&#97;&#105;&#x6c;&#64;&#x65;&#120;&#x61;&#x6d;&#x70;&#108;&#x65;&#46;&#99;&#111;&#x6d;">&#121;&#111;&#117;&#114;&#101;&#x6d;&#97;&#105;&#x6c;&#64;&#x65;&#120;&#x61;&#x6d;&#x70;&#108;&#x65;&#46;&#99;&#111;&#x6d;</a>â€œ</li><li>è¾“å…¥æ–‡ä»¶åå’Œå¯†ç åæ‰“å¼€.pubæ–‡ä»¶ï¼Œå°†å…¬é’¥é…ç½®åˆ°githubã€codingä¸Šã€‚</li><li>æµ‹è¯•æ˜¯å¦é…ç½®æˆåŠŸï¼šssh <a href="mailto:&#103;&#105;&#x74;&#x40;&#x67;&#105;&#116;&#x68;&#117;&#98;&#46;&#x63;&#x6f;&#x6d;">&#103;&#105;&#x74;&#x40;&#x67;&#105;&#116;&#x68;&#117;&#98;&#46;&#x63;&#x6f;&#x6d;</a><br>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200111180248.png"></li></ul></li></ul><h4 id="è¿ç§»"><a href="#è¿ç§»" class="headerlink" title="è¿ç§»"></a>è¿ç§»</h4><ul><li>å®‰è£…hexo  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g hexo </span><br></pre></td></tr></table></figure></li><li>æ–°å»ºç›®å½•å¹¶åˆå§‹åŒ–Hexo  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir Hexo</span><br><span class="line">cd Hexo</span><br><span class="line">hexo init</span><br></pre></td></tr></table></figure></li><li>æ›¿æ¢æ–‡ä»¶<br>  å°†åŸHexoä¸­çš„_config.yml, scaffolds, source, themesæ›¿æ¢åˆ°æœ¬åœ°æ–°å»ºçš„ç›®å½•ä¸­ã€‚  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">hexo clean</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure>  è¿™é‡Œå¦‚æœæŠ¥TypeError [ERR_INVALID_URL]: Invalid URL:<a href="http://at/">http://at</a> onParseError (internal&#x2F;url.js:257:9)çš„é”™ã€‚<br>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20200111174407.png"><br>  å°±å°†åŸæ¥çš„package.jsonå’Œpackage-lock.jsonä¹Ÿæ›¿æ¢è¿‡æ¥ã€‚æŠŠnode_modulesåˆ é™¤,é‡æ–°npm installå°±å¥½äº†ã€‚</li></ul><p><strong>ç»ˆäºåˆå¯ä»¥å¼€å¿ƒçš„å†™åšå®¢äº†ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mavenå’ŒGradle</title>
      <link href="/Maven%E5%92%8CGradle/"/>
      <url>/Maven%E5%92%8CGradle/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ç½‘ä¸Šç»å¸¸çœ‹åˆ°é¡¹ç›®ä½¿ç”¨çš„æ˜¯Gradleæ¥è¿›è¡Œä¾èµ–ç®¡ç†ï¼Œæ›¾ç»çº¢æä¸€æ—¶çš„Mavenä¹Ÿå¼€å§‹æ…¢æ…¢å¤±å® äº†ï¼Œæ›´å¤è€çš„AntåŸºæœ¬ä¸Šæ˜¯ä¸è§è¸ªå½±äº†ï¼Œè€ŒGradleçš„å‘å±•åˆ™æ˜¯å¦‚æ—¥ä¸­å¤©ã€‚äºæ˜¯æ¥æ·±å…¥äº†è§£ä¸€ä¸‹Gradleï¼Œé¡ºä¾¿å’ŒMavenè¿›è¡Œç®€å•çš„æ¯”è¾ƒã€‚</p><span id="more"></span><h4 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h4><p>è‡ªä»æ¥è§¦Javaå¼€å§‹ï¼ŒMavenå°±å·²ç»æ·±å—å­¦æ ¡å’Œä¼ä¸šç­‰å¸‚åœºçš„ä¿¡èµ–ï¼Œæ‰€ä»¥å¾ˆå¤šäººå¯¹Mavenéƒ½æ˜¯ç›¸å¯¹æ¯”è¾ƒäº†è§£çš„ã€‚è®°å¾—åˆšå­¦ä¹ Javaçš„æ—¶å€™ï¼Œéƒ½æ˜¯ä¸€ä¸ªä¸ªJaråŒ…è‡ªå·±å»æ‰‹åŠ¨å¯¼å…¥ï¼Œç»å¸¸ä¼šå‡ºç°å¯¼å…¥äº†åŒä¸€ä¸ªjaråŒ…çš„ä¸åŒç‰ˆæœ¬ï¼Œå¯¼è‡´é¡¹ç›®å‡ºé”™ï¼Œæ‡µæ‡µæ‡‚æ‡‚çš„è¿˜ä¸çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªã€‚è‡ªä»æ¥è§¦åˆ°äº†Mavenï¼Œå‡ ä¸ªä¾èµ–ä¸€æ•²ï¼Œç›´æ¥æå®šï¼Œçœäº‹ä¸å°‘ã€‚<br>ä½¿ç”¨Mavenæ„å»ºé¡¹ç›®å,ä½¿ç”¨<code>groupId</code>ã€<code>artifactId</code>ã€<code>version</code>ç»„æˆä¸€ä¸ªå”¯ä¸€çš„åæ ‡ä»è¿œç¨‹ä»“åº“æˆ–è€…æˆ‘ä»¬åˆ›å»ºçš„æœ¬åœ°ä»“åº“æ¥æ‰¾åˆ°è¿™ä¸ªjaråŒ…å¹¶è¿›è¡Œä¾èµ–ã€‚å½“versionçœç•¥æ—¶ï¼Œé»˜è®¤è·å–æœ€æ–°ç‰ˆæœ¬ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">5.1</span><span class="number">.21</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>åœ¨Mavenä¸­ï¼Œæœ‰6ä¸­Scope,åˆ†åˆ«æ˜¯<code>complie(é»˜è®¤)ã€providedã€runtimeã€testã€systemã€import</code></p><h4 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h4><p>Gradleæ˜¯åŸºäºAntå’ŒMavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå¼€æºå·¥å…·ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯Mavençš„ä¸€ä¸ªå‡çº§ç‰ˆï¼ŒMavenèƒ½åšçš„äº‹æƒ…ï¼ŒGradleéƒ½èƒ½åšã€‚è€ŒGradleèƒ½åšçš„äº‹æƒ…ï¼ŒMavenä¸ä¸€å®šèƒ½åšã€‚å› ä¸ºGradleæ˜¯åœ¨MavenåŸºç¡€ä¸Šæ„å»ºäº†ï¼Œæ‰€ä»¥ä¹Ÿæ²¿ç”¨äº†è®¸å¤šMavençš„ä¸€äº›ç‰¹æ€§ã€‚ä½†åœ¨ä¸€äº›åœ°æ–¹è¿›è¡Œäº†æ”¹è¿›ï¼Œå˜å¾—æ›´åŠ ç®€æ´ã€‚</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span>(<span class="string">&#x27;org.springframework.boot:spring-boot-starter-web&#x27;</span>)</span><br><span class="line">    testCompile(<span class="string">&#x27;org.springframework.boot:spring-boot-starter-test&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨Gradleä¸­ï¼Œåªæœ‰4ä¸­Scopeï¼Œåˆ†åˆ«æ˜¯<code>compileã€runtimeã€testCompileã€testRuntime</code>ã€‚ä½†åœ¨Gradleä¸­ï¼Œå¯ä»¥ä½¿ç”¨+å·æ¥å®ç°ç‰ˆæœ¬ç®¡ç†ï¼Œèƒ½å¤Ÿæ›´æœ‰æ•ˆçš„è§£å†³ä¾èµ–å†²çªã€‚è€Œä¸”Gradleæœ‰ä¸€ä¸ª<code>Task</code>çš„æ¦‚å¿µï¼Œä½¿ç”¨TaskåŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„å®Œæˆä¸€äº›ä»»åŠ¡ã€‚</p><h4 id="ä¸€è‡´æ€§"><a href="#ä¸€è‡´æ€§" class="headerlink" title="ä¸€è‡´æ€§"></a>ä¸€è‡´æ€§</h4><p>MavenæŒ‡å®šäº†ä¸€å¥—é¡¹ç›®ç›®å½•ç»“æ„ä½œä¸ºæ ‡å‡†çš„javaé¡¹ç›®ç»“æ„ï¼ŒGradleä¹Ÿæ²¿ç”¨äº†è¿™ä¸€æ ‡å‡†çš„ç›®å½•ç»“æ„ã€‚å¦‚æœåœ¨Gradleé¡¹ç›®ä¸­ä½¿ç”¨äº†Mavené¡¹ç›®ç»“æ„çš„è¯ï¼Œåœ¨Gradleä¸­æ— éœ€è¿›è¡Œå¤šä½™çš„é…ç½®ï¼Œåªéœ€åœ¨æ–‡ä»¶ä¸­åŒ…æ‹¬apply plugin:â€™javaâ€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«sourceã€resourceã€test sourceã€test resourceç­‰ç›¸åº”èµ„æºã€‚</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>ç›¸å¯¹äºMavenæ¥è¯´ï¼ŒGradleçš„ä¸»è¦ä¼˜åŠ¿å°±æ˜¯å»é™¤äº†ç¹é‡çš„XMLï¼Œç°åœ¨ä½¿ç”¨çš„å¾ˆå¤šçš„æŠ€æœ¯éƒ½å·²ç»å¼€å§‹æŠ›å¼ƒXMLäº†ï¼Œå¼€å§‹é‡‡ç”¨ymlã€jsonç­‰ç­‰ã€‚è€ŒGradleé‡‡ç”¨äº†Groovyè¯­è¨€è¿›è¡Œæ„å»ºã€‚å…¶æ¬¡ï¼ŒGradleä¸­æœ‰ä¸€ä¸ªæ¦‚å¿µå«åšTaskï¼Œä½¿ç”¨Taskæ¥å®Œæˆéœ€æ±‚ï¼Œä¼šå˜å¾—éå¸¸ç®€å•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JAVA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gradle </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueè·¨åŸŸé—®é¢˜</title>
      <link href="/Vue%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/"/>
      <url>/Vue%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­,é‡åˆ°äº†Vueçš„è·¨åŸŸé—®é¢˜,åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><h4 id="å¼€å‘ç¯å¢ƒè·¨åŸŸé—®é¢˜"><a href="#å¼€å‘ç¯å¢ƒè·¨åŸŸé—®é¢˜" class="headerlink" title="å¼€å‘ç¯å¢ƒè·¨åŸŸé—®é¢˜"></a>å¼€å‘ç¯å¢ƒè·¨åŸŸé—®é¢˜</h4><p>å¼€å‘ç¯å¢ƒè·¨åŸŸé—®é¢˜è§£å†³æ–¹å¼æ¯”è¾ƒç®€å•,æ‰“å¼€é¡¹ç›®ç›®å½•ä¸‹<code>config/index.js</code>æ‰¾åˆ°<code>proxyTable</code>,æ·»åŠ ä¸‹é¢çš„ä»£ç :</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxyTable</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://XXX.XXX.XXX:XXXX&#x27;</span>,<span class="comment">//è®¾ç½®ä½ è°ƒç”¨çš„æ¥å£åŸŸåå’Œç«¯å£å· åˆ«å¿˜äº†åŠ http</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,    <span class="comment">//è¿™é‡Œtrueè¡¨ç¤ºå®ç°è·¨åŸŸ</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>é…ç½®å®Œä¹‹åï¼Œå‘é€è¯·æ±‚æ—¶åœ¨å‰é¢å¸¦ä¸Š&#x2F;api,å¦‚æœ¬æ¥è¦è®¿é—®çš„åœ°å€æ˜¯<code>http://XXX.XXX.XXX:XXXX/login</code>,ç°åœ¨å‘é€è¯·æ±‚æ—¶çš„urlå°±å¡«å†™ä¸º<code>/api/login</code>ã€‚å°±å¯ä»¥è¿›è¡Œè·¨åŸŸè¯·æ±‚äº†ã€‚</p><h4 id="çº¿ä¸Šç¯å¢ƒè·¨åŸŸé—®é¢˜"><a href="#çº¿ä¸Šç¯å¢ƒè·¨åŸŸé—®é¢˜" class="headerlink" title="çº¿ä¸Šç¯å¢ƒè·¨åŸŸé—®é¢˜"></a>çº¿ä¸Šç¯å¢ƒè·¨åŸŸé—®é¢˜</h4><p>å¼€å‘å®Œä¹‹å,å°†ç³»ç»Ÿç¼–è¯‘,å°†distæ–‡ä»¶éƒ¨ç½²åˆ°æœåŠ¡å™¨å,è¯·æ±‚æ—¶åˆå‡ºç°äº†è·¨åŸŸé—®é¢˜ã€‚æœ€åä½¿ç”¨äº†Nginxä»£ç†è§£å†³äº†è¿™ä¸ªè·¨åŸŸé—®é¢˜ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹:<br>å®‰è£…å®ŒNginxå,è¿›å…¥å®‰è£…ç›®å½•ä¸‹<code>/conf</code>ä¿®æ”¹nginxé…ç½®æ–‡ä»¶,æ·»åŠ ä¸‹åˆ—ä»£ç :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">location /api &#123;</span><br><span class="line">    # æŠŠ /api è·¯å¾„ä¸‹çš„è¯·æ±‚è½¬å‘ç»™çœŸæ­£çš„åç«¯æœåŠ¡å™¨</span><br><span class="line">    proxy_set_header   Host             $host;</span><br><span class="line">    proxy_set_header   x-forwarded-for  $remote_addr;</span><br><span class="line">    proxy_set_header   X-Real-IP        $remote_addr;</span><br><span class="line">    proxy_pass http://XXX.XXX.XXX:XXXX/;</span><br><span class="line">&#125;    </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‡å¯nginxå°±å¯ä»¥ç»§ç»­è·¨åŸŸè¯·æ±‚äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå…¥é—¨ç³»åˆ—ã€å››ã€‘</title>
      <link href="/Vue%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E3%80%90%E5%9B%9B%E3%80%91/"/>
      <url>/Vue%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E3%80%90%E5%9B%9B%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ç»è¿‡å‰é¢çš„è®²è§£,æˆ‘ä»¬å¯¹Vueæœ‰äº†ä¸€ä¸ªå¤§è‡´çš„äº†è§£,ç°åœ¨æ¥å®è·µä¸€ä¸‹,æˆ‘ä»¬é‡‡ç”¨Vue+ElementUiæ¥ç¼–å†™é¡¹ç›®ã€‚</p><span id="more"></span><p>è„šæ‰‹æ¶çš„å®‰è£…è¿™é‡Œå°±ä¸è®²è§£äº†,å¯ä»¥æµè§ˆå‰é¢çš„åšå®¢ã€‚å¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©!</p><h4 id="å‰ç«¯é¡¹ç›®ç¯å¢ƒæ­å»º"><a href="#å‰ç«¯é¡¹ç›®ç¯å¢ƒæ­å»º" class="headerlink" title="å‰ç«¯é¡¹ç›®ç¯å¢ƒæ­å»º"></a>å‰ç«¯é¡¹ç›®ç¯å¢ƒæ­å»º</h4><ul><li>å®‰è£…Element-UI<ul><li>å®‰è£…å‘½ä»¤:<code>npm install element-ui -s</code></li><li>å¼•å…¥ç»„ä»¶: <code>import ElementUI from &#39;element-ui&#39;</code></li><li>å¼•å…¥æ ·å¼Css:<code>import &#39;element-ui/lib/theme-chalk/index.css&#39;</code></li><li>ä½¿ç”¨ç»„ä»¶:Vue.use(ElementUI)</li></ul></li><li>å®‰è£…axios<ul><li>å®‰è£…å‘½ä»¤:<code>npm install axios -s</code></li><li>å¼•å…¥ç»„ä»¶:<code>import axios from &#39;axios&#39;</code></li><li>ä½¿ç”¨ç»„ä»¶:Vue.prototype.$axios &#x3D; axios</li></ul></li><li>å®‰è£…Vueçš„çŠ¶æ€ç®¡ç†Vuex<ul><li>å®‰è£…å‘½ä»¤:<code>npm install vuex -s</code></li><li>å¼•å…¥ç»„ä»¶:<code>import Vuex from &#39;vuex&#39;</code></li><li>ä½¿ç”¨ç»„ä»¶:<code>Vue.use(Vuex)</code></li></ul></li><li>å®‰è£…æ—¥æœŸå¤„ç†ç±»åº“moment.js<ul><li>å®‰è£…å‘½ä»¤:<code>npm install moment -s</code></li><li>å¼•å…¥ç»„ä»¶:<code>import moment from &#39;moment&#39;</code></li></ul></li><li>å®‰è£…NProgressè¿›åº¦æ¡<ul><li>å®‰è£…å‘½ä»¤:<code>npm install nprogress -s</code></li><li>å¼•å…¥ç»„ä»¶:<code>import NProgress from &#39;nprogress&#39;</code></li><li>å¼•å…¥æ ·å¼css:<code>import &#39;nprogress/nprogress.css&#39;</code></li><li>ä½¿ç”¨ç»„ä»¶:<code>NProgress.start(); NProgress.done();</code></li></ul></li></ul><h4 id="è®¾ç½®å¯¼èˆªå®ˆå«"><a href="#è®¾ç½®å¯¼èˆªå®ˆå«" class="headerlink" title="è®¾ç½®å¯¼èˆªå®ˆå«"></a>è®¾ç½®å¯¼èˆªå®ˆå«</h4><p>ç”¨äºè·¯ç”±é—´çš„è·³è½¬æ—¶å¯¹æƒé™åšæ§åˆ¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NProgress</span> <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span> <span class="comment">// Progress è¿›åº¦æ¡</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span><span class="comment">// Progress è¿›åº¦æ¡æ ·å¼</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Message</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;getToken&#125; <span class="keyword">from</span> <span class="string">&quot;./utils/auth&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">&#x27;/login&#x27;</span>]; <span class="comment">// ä¸é‡å®šå‘ç™½åå•</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">start</span>();</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">getToken</span>()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">next</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;);</span><br><span class="line">      <span class="title class_">NProgress</span>.<span class="title function_">done</span>() <span class="comment">// if current page is dashboard will not triggerafterEach hook, so manually handle it</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (store.<span class="property">getters</span>.<span class="property">roles</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        store.<span class="title function_">dispatch</span>(<span class="string">&#x27;GetInfo&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="comment">// æ‹‰å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">          <span class="title function_">next</span>()</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          store.<span class="title function_">dispatch</span>(<span class="string">&#x27;FedLogOut&#x27;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">Message</span>.<span class="title function_">error</span>(err || <span class="string">&#x27;Verification failed, please login again&#x27;</span>);</span><br><span class="line">            <span class="title function_">next</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span> &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (whiteList.<span class="title function_">indexOf</span>(to.<span class="property">path</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line">      <span class="title class_">NProgress</span>.<span class="title function_">done</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">done</span>() <span class="comment">// ç»“æŸProgress</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="axiosè¿‡æ»¤å™¨"><a href="#axiosè¿‡æ»¤å™¨" class="headerlink" title="axiosè¿‡æ»¤å™¨"></a>axiosè¿‡æ»¤å™¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Message</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;../store&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/auth&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºaxioså®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;api&#x27;</span>,<span class="comment">//process.env.BASE_API, // apiçš„base_url</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">15000</span> <span class="comment">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (store.<span class="property">getters</span>.<span class="property">token</span>) &#123;</span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;Authorization&#x27;</span>] = <span class="title function_">getToken</span>() <span class="comment">// è®©æ¯ä¸ªè¯·æ±‚æºå¸¦è‡ªå®šä¹‰token è¯·æ ¹æ®å®é™…æƒ…å†µè‡ªè¡Œä¿®æ”¹</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">Message</span>.<span class="title function_">error</span>(&#123;<span class="attr">message</span>: <span class="string">&#x27;è¯·æ±‚è¶…æ—¶!&#x27;</span>&#125;);</span><br><span class="line">  <span class="comment">// return Promise.resolve(err);</span></span><br><span class="line">&#125;);</span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (response.<span class="property">status</span> &amp;&amp; response.<span class="property">status</span> == <span class="number">200</span> &amp;&amp; response.<span class="property">data</span>.<span class="property">status</span> == <span class="number">500</span>) &#123;</span><br><span class="line">    <span class="title class_">Message</span>.<span class="title function_">error</span>(&#123;<span class="attr">message</span>: response.<span class="property">data</span>.<span class="property">msg</span>&#125;);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (response.<span class="property">data</span>.<span class="property">msg</span>) &#123;</span><br><span class="line">    <span class="title class_">Message</span>.<span class="title function_">success</span>(&#123;<span class="attr">message</span>: response.<span class="property">data</span>.<span class="property">msg</span>&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> response;</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err.<span class="property">response</span>.<span class="property">status</span> == <span class="number">504</span> || err.<span class="property">response</span>.<span class="property">status</span> == <span class="number">404</span>) &#123;</span><br><span class="line">    <span class="title class_">Message</span>.<span class="title function_">error</span>(&#123;<span class="attr">message</span>: <span class="string">&#x27;è¿æ¥æœåŠ¡å™¨å¤±è´¥,è¯·ç¨åé‡è¯•!&#x27;</span>&#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (err.<span class="property">response</span>.<span class="property">status</span> == <span class="number">403</span>) &#123;</span><br><span class="line">    <span class="title class_">Message</span>.<span class="title function_">error</span>(&#123;<span class="attr">message</span>: <span class="string">&#x27;æƒé™ä¸è¶³,è¯·è”ç³»ç®¡ç†å‘˜!&#x27;</span>&#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (err.<span class="property">response</span>.<span class="property">status</span> == <span class="number">401</span>) &#123;</span><br><span class="line">    <span class="title class_">Message</span>.<span class="title function_">error</span>(&#123;<span class="attr">message</span>: err.<span class="property">response</span>.<span class="property">data</span>.<span class="property">msg</span>&#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err.<span class="property">response</span>.<span class="property">data</span>.<span class="property">msg</span>) &#123;</span><br><span class="line">      <span class="title class_">Message</span>.<span class="title function_">error</span>(&#123;<span class="attr">message</span>: err.<span class="property">response</span>.<span class="property">data</span>.<span class="property">msg</span>&#125;);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="title class_">Message</span>.<span class="title function_">error</span>(&#123;<span class="attr">message</span>: <span class="string">&#x27;æœªçŸ¥é”™è¯¯!&#x27;</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// return Promise.resolve(err);</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure><h4 id="ç™»é™†é¡µé¢å®ç°"><a href="#ç™»é™†é¡µé¢å®ç°" class="headerlink" title="ç™»é™†é¡µé¢å®ç°"></a>ç™»é™†é¡µé¢å®ç°</h4><p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191126205926.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:rules</span> = <span class="string">&quot;rules&quot;</span> <span class="attr">class</span>=<span class="string">&quot;login_content&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;loginForm&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;loginForm&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">v-loading</span>=<span class="string">&quot;loading&quot;</span> <span class="attr">style</span>=<span class="string">&quot;align-items: center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;login_title&quot;</span>&gt;</span>ç³»ç»Ÿç™»å½•<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;loginForm.username&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;prefix&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">icon-class</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;color-main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #409EFF;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">svg-icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">:type</span>=<span class="string">&quot;pwdType&quot;</span> @<span class="attr">keyup.enter.native</span>=<span class="string">&quot;submitClick&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;loginForm.password&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;prefix&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">icon-class</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;color-main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #409EFF;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">svg-icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;suffix&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showPwd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">icon-class</span>=<span class="string">&quot;eye&quot;</span> <span class="attr">class</span>=<span class="string">&quot;color-main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #409EFF;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">svg-icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-checkbox</span> <span class="attr">class</span>=<span class="string">&quot;login_remember&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checked&quot;</span> <span class="attr">label-position</span>=<span class="string">&quot;left&quot;</span>&gt;</span>è®°ä½å¯†ç <span class="tag">&lt;/<span class="name">el-checkbox</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 60px;text-align: center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 45%&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submitClick&quot;</span>&gt;</span>ç«‹å³ç™»å½•<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;width: 45%&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;forgetPasswordClick&quot;</span>&gt;</span>å¿˜è®°å¯†ç ?<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">import</span> &#123;isvalidUsername&#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/validate&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">import</span> &#123;getCookie, setCookie&#125; <span class="keyword">from</span> <span class="string">&quot;../../utils/support&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">const</span> <span class="title function_">validateUsername</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="keyword">if</span> (!<span class="title function_">isvalidUsername</span>(value)) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                  <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;è¯·è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·å&#x27;</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                  <span class="title function_">callback</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">const</span> <span class="title function_">validatePass</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="keyword">if</span> (value.<span class="property">length</span> &lt; <span class="number">6</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                  <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;å¯†ç ä¸èƒ½å°äº6ä½&#x27;</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                  <span class="title function_">callback</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">             <span class="attr">rules</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                 <span class="attr">username</span>: [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">trigger</span>:<span class="string">&#x27;blur&#x27;</span>,<span class="attr">validator</span>: validateUsername&#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                 <span class="attr">password</span>: [&#123;<span class="attr">required</span>: <span class="literal">true</span>,<span class="attr">trigger</span>:<span class="string">&#x27;blur&#x27;</span>,<span class="attr">validator</span>: validatePass&#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">             &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">loginForm</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                 <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                 <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">checked</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">loading</span>: <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">pwdType</span>: <span class="string">&#x27;password&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">loginForm</span>.<span class="property">username</span> = <span class="title function_">getCookie</span>(<span class="string">&quot;username&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">loginForm</span>.<span class="property">password</span> = <span class="title function_">getCookie</span>(<span class="string">&quot;password&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">loginForm</span>.<span class="property">username</span> === <span class="literal">undefined</span>||<span class="variable language_">this</span>.<span class="property">loginForm</span>.<span class="property">username</span>==<span class="literal">null</span>||<span class="variable language_">this</span>.<span class="property">loginForm</span>.<span class="property">username</span>===<span class="string">&#x27;&#x27;</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="variable language_">this</span>.<span class="property">loginForm</span>.<span class="property">username</span> = <span class="string">&#x27;&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">loginForm</span>.<span class="property">password</span> === <span class="literal">undefined</span>||<span class="variable language_">this</span>.<span class="property">loginForm</span>.<span class="property">password</span>==<span class="literal">null</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="variable language_">this</span>.<span class="property">loginForm</span>.<span class="property">password</span> = <span class="string">&#x27;&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">showPwd</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="keyword">let</span> _this = <span class="variable language_">this</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="keyword">if</span> (_this.<span class="property">pwdType</span> === <span class="string">&#x27;password&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                  _this.<span class="property">pwdType</span> = <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                  _this.<span class="property">pwdType</span> = <span class="string">&#x27;password&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">submitClick</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="keyword">let</span> _this = <span class="variable language_">this</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              _this.<span class="property">$refs</span>.<span class="property">loginForm</span>.<span class="title function_">validate</span>(<span class="function"><span class="params">valid</span>=&gt;</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                  <span class="keyword">if</span>(valid)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                      _this.<span class="property">loading</span> = <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                      _this.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;Login&#x27;</span>, _this.<span class="property">loginForm</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                          _this.<span class="property">loading</span> = <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                          <span class="title function_">setCookie</span>(<span class="string">&quot;username&quot;</span>,_this.<span class="property">loginForm</span>.<span class="property">username</span>,<span class="number">15</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                          <span class="title function_">setCookie</span>(<span class="string">&quot;password&quot;</span>,_this.<span class="property">loginForm</span>.<span class="property">password</span>,<span class="number">15</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                          _this.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                      &#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                          _this.<span class="property">loading</span> = <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                      &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                  &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å‚æ•°éªŒè¯ä¸åˆæ³•ï¼&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                      <span class="keyword">return</span> <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">forgetPasswordClick</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="selector-class">.login_content</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">background-clip</span>: padding-box;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">margin</span>: <span class="number">180px</span> auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">padding</span>: <span class="number">35px</span> <span class="number">35px</span> <span class="number">15px</span> <span class="number">35px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">#cac6c6</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">right</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">width</span>: <span class="number">350px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">border-top</span>: <span class="number">10px</span> solid <span class="number">#409EFF</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="selector-class">.login_title</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">margin</span>: <span class="number">0px</span> auto <span class="number">40px</span> auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">color</span>: <span class="number">#505458</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="selector-class">.login_remember</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">20px</span> <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">text-align</span>: left;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®æœ¬åœ°è½¬å‘"><a href="#è®¾ç½®æœ¬åœ°è½¬å‘" class="headerlink" title="è®¾ç½®æœ¬åœ°è½¬å‘"></a>è®¾ç½®æœ¬åœ°è½¬å‘</h4><p>åœ¨config&#x2F;index.jsä¸­ä¿®æ”¹,ä¹Ÿå¯ä»¥è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜ã€‚Vueè·¨åŸŸé—®é¢˜å¯å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€‚<a href="https://www.mizhuo.site/2019/11/26/Vue%E7%9A%84%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/">Vueè·¨åŸŸé—®é¢˜</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxyTable</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:8888&#x27;</span>,<span class="comment">//è®¾ç½®æœ¬åœ°è½¬å‘ç«¯å£å·</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;^/&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå…¥é—¨ç³»åˆ—ã€ä¸‰ã€‘</title>
      <link href="/Vue%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E3%80%90%E4%B8%89%E3%80%91/"/>
      <url>/Vue%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E3%80%90%E4%B8%89%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>è¦æƒ³åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨Vueæ¥æ­å»ºå‰ç«¯æ¡†æ¶,å°±å¿…é¡»ç†Ÿç»ƒçš„ä½¿ç”¨<span style="color:red;font-size:18px;">vue-router</span>æ¥å®ç°è·¯ç”±ç®¡ç†ã€‚æ‰€è°“è·¯ç”±ç®¡ç†,é¡¾åæ€ä¹‰,å°±æ˜¯å¸®åŠ©æˆ‘ä»¬æ¥ç®¡ç†å„ä¸ªé¡µé¢ä¹‹é—´çš„è·³è½¬ã€‚<span id="more"></span>å®˜æ–¹å¯¹vue-routerçš„ä»‹ç»æ˜¯è¿™æ ·çš„:</p><blockquote><p>Vue Router æ˜¯ Vue.jsÂ å®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ã€‚å®ƒå’Œ Vue.js çš„æ ¸å¿ƒæ·±åº¦é›†æˆï¼Œè®©æ„å»ºå•é¡µé¢åº”ç”¨å˜å¾—æ˜“å¦‚åæŒã€‚åŒ…å«çš„åŠŸèƒ½æœ‰ï¼šåµŒå¥—çš„è·¯ç”±&#x2F;è§†å›¾è¡¨ï¼›æ¨¡å—åŒ–çš„ã€åŸºäºç»„ä»¶çš„è·¯ç”±é…ç½®ï¼›è·¯ç”±å‚æ•°ã€æŸ¥è¯¢ã€é€šé…ç¬¦ï¼›åŸºäº Vue.js è¿‡æ¸¡ç³»ç»Ÿçš„è§†å›¾è¿‡æ¸¡æ•ˆæœï¼›ç»†ç²’åº¦çš„å¯¼èˆªæ§åˆ¶ï¼›å¸¦æœ‰è‡ªåŠ¨æ¿€æ´»çš„ CSS class çš„é“¾æ¥ï¼›HTML5 å†å²æ¨¡å¼æˆ– hash æ¨¡å¼ï¼Œåœ¨ IE9 ä¸­è‡ªåŠ¨é™çº§ï¼›è‡ªå®šä¹‰çš„æ»šåŠ¨æ¡è¡Œä¸ºã€‚</p></blockquote><h4 id="vue-routerçš„å®‰è£…"><a href="#vue-routerçš„å®‰è£…" class="headerlink" title="vue-routerçš„å®‰è£…"></a>vue-routerçš„å®‰è£…</h4><ul><li>å®‰è£…:<code>npm install vue-router</code></li><li>å¼•ç”¨:<code>import Router from &#39;./router&#39;</code> <code>Vue.use(Router)</code></li><li>å®šä¹‰ä¸ä½¿ç”¨</li><li>æ³¨å†Œåˆ°Vueçš„æ ¹å®ä¾‹ä¸­</li></ul><h4 id="vue-routerçš„åŸºæœ¬ä½¿ç”¨"><a href="#vue-routerçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="vue-routerçš„åŸºæœ¬ä½¿ç”¨"></a>vue-routerçš„åŸºæœ¬ä½¿ç”¨</h4><ul><li>æ ¸å¿ƒæ ‡ç­¾:<code>&lt;router-link to=&quot;&quot;&gt;ç”¨äºç”¨æˆ·ç‚¹å‡»,ä¼šè¢«æ¸²æŸ“ä¸ºaæ ‡ç­¾,toä¼šè¢«æ¸²æŸ“ä¸ºhref</code>å’Œ<code>&lt;router-view&gt;ç”¨äºæ˜¾ç¤ºåŒ¹é…åçš„å†…å®¹</code></li><li>ç¼–ç¨‹å¼å¯¼èˆª:<code>this.$router.push(&#123;path&#125;)</code></li></ul><h4 id="åŸºç¡€è·³è½¬"><a href="#åŸºç¡€è·³è½¬" class="headerlink" title="åŸºç¡€è·³è½¬"></a>åŸºç¡€è·³è½¬</h4><ul><li><p><code>App.vue</code></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#app</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">margin-top</span>: <span class="number">60px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>Home.vue</code></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>home<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        data () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">msg</span>: <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªhome ç»„ä»¶&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p><code>About</code></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>about<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;aboutMsg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        data () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">aboutMsg</span>: <span class="string">&#x27;è¿™æ˜¯ä¸€ä¸ªaboutç»„ä»¶&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>å®šä¹‰routeçš„è·¯å¾„</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&quot;../Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> about <span class="keyword">from</span> <span class="string">&quot;../About.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦å‘Šè¯‰ vue ä½¿ç”¨ vueRouter</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: about</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> router =  <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure></li><li><p>æ³¨å†Œåˆ°Vueç»„ä»¶ä¸­</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The Vue build version to load with the `import` command</span></span><br><span class="line"><span class="comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">router,</span><br><span class="line"><span class="attr">components</span>: &#123; <span class="title class_">App</span> &#125;,</span><br><span class="line"><span class="attr">template</span>: <span class="string">&#x27;&lt;App/&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  å®Œæˆåæ•ˆæœ:</p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191109225416.gif" style="zoom: 50%;" />  å¯ä»¥å‘ç°,å¯åŠ¨é¡¹ç›®åè¿›å…¥localhost:8080å¹¶æ²¡æœ‰æ˜¾ç¤ºå…·ä½“çš„å†…å®¹ã€‚åœ¨å®é™…é¡¹ç›®ä¸­,æˆ‘ä»¬å¸Œæœ›å¯åŠ¨é¡¹ç›®åé»˜è®¤èƒ½å¤Ÿè¿›å…¥Homeç»„ä»¶,å°±éœ€è¦æŠŠ`/`æŒ‡å‘Homeé¡µé¢ã€‚ä½†æ˜¯ä½¿ç”¨`{path:"/",component: home}`ä¼šå’Œ`{path:"/home",component: home}`å†²çª,åŒä¸€ä¸ªcomponentå‡ºç°äº†ä¸¤ä¸ªPath,æ‰€ä»¥è¿™é‡Œéœ€è¦ä½¿ç”¨é‡å®šå‘,å°†é¡µé¢é‡å®šå‘åˆ°homeé¡µé¢ã€‚  ä¿®æ”¹routeé…ç½®    <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&quot;../Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> about <span class="keyword">from</span> <span class="string">&quot;../About.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦å‘Šè¯‰ vue ä½¿ç”¨ vueRouter</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&quot;/home&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: about</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, </span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span> </span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> router =  <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure><p>  æ•ˆæœå›¾:</p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191109230819.gif" style="zoom:50%;" /></li></ul><h4 id="åŠ¨æ€è·¯ç”±"><a href="#åŠ¨æ€è·¯ç”±" class="headerlink" title="åŠ¨æ€è·¯ç”±"></a>åŠ¨æ€è·¯ç”±</h4><p>æ‰€è°“åŠ¨æ€è·¯ç”±,å°±æ˜¯è¯´æˆ‘ä»¬å®šä¹‰è·¯ç”±çš„è·¯å¾„ä¸æ˜¯å›ºå®šçš„,å¯ä»¥æ ¹æ®ä¸åŒçš„æ¡ä»¶è¿›è¡ŒåŠ¨æ€æ”¹å˜ã€‚åŠ¨æ€è·¯ç”±çš„è·¯å¾„å‚æ•°ä»¥å†’å·å¼€å¤´ã€‚<br>è¿™é‡Œæ–°å»ºä¸€ä¸ª<code>User.vue</code>æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>User<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªuserç»„ä»¶<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>åœ¨App.vueä¸­æ·»åŠ è·¯å¾„å¯¼èˆª</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--æ–°å¢userç»„ä»¶å¯¼èˆª--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/user/mizhuo&quot;</span>&gt;</span>user:mizhuo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/user/milu&quot;</span>&gt;</span>user:milu<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#app</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>åœ¨index.jsä¸­æ·»åŠ åŠ¨æ€è·¯ç”±</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&quot;../Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> about <span class="keyword">from</span> <span class="string">&quot;../About.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&quot;../User.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦å‘Šè¯‰ vue ä½¿ç”¨ vueRouter</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>:<span class="string">&quot;/home&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: about</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, </span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span> </span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: user</span><br><span class="line">   &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> router =  <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°,è·¯å¾„æ ä¸­çš„è·¯å¾„<code>localhost:8080/#/user/mizhuo</code>å’Œ<code>localhost:8080/#/user/milu</code>éƒ½èƒ½å¤Ÿè·³è½¬åˆ°userçš„ç»„ä»¶ä¸­ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191110142748.gif" style="zoom:50%;" /><br>é‚£ä¹ˆé—®é¢˜å°±æ¥äº†,æˆ‘ä»¬è¦å¦‚ä½•è·å–æˆ‘ä»¬çš„åŠ¨æ€å‚æ•°å‘¢?<br>ä½¿ç”¨<code>this.$route.params.id</code>å°±å¯ä»¥è·å–åˆ°äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>User<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªuserç»„ä»¶,æˆ‘çš„usernameæ˜¯:&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">username</span>: <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯åœ¨åŠ¨æ€è·¯ç”±ä¸­,ç”±äºä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªç»„ä»¶,æ‰€ä»¥Vueä¸ä¼šåˆ›å»ºå’Œé”€æ¯è¿™ä¸€ä¸ªç»„ä»¶,è€Œæ˜¯å¤ç”¨è¿™ä¸€ä¸ªç»„ä»¶ã€‚å¯¼è‡´ä¸€ä¸ªé—®é¢˜å°±æ˜¯è¿™ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸéƒ½æ²¡ç”¨äº†ã€‚å¯ä»¥çœ‹ä¸‹å›¾ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191110145208.gif" style="zoom:50%;" /><br>åœ¨user:mizhuoå’Œuser:miluæ¥å›åˆ‡æ¢ï¼Œå…¶ä¸­çš„åŠ¨æ€å‚æ•°ä¸ä¼šæ”¹å˜äº†ã€‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨computedæ¥ç›‘å¬è¿™ä¸ªå‚æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>User<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªuserç»„ä»¶,æˆ‘çš„usernameæ˜¯:&#123;&#123; res &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">computed</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">res</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191110145540.gif" style="zoom:50%;" />å¦‚æœéœ€è¦åœ¨è¿™ä¸¤ä¸ªè§†å›¾åˆ‡æ¢çš„è¿‡ç¨‹ä¸­do something,å°±éœ€è¦ç”¨åˆ°watchæ¥å¯¹$routeè¿›è¡Œç›‘å¬äº†ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>User<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªuserç»„ä»¶,æˆ‘çš„usernameæ˜¯:&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">watch</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            $route (to,<span class="keyword">from</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">// toè¡¨ç¤ºçš„æ˜¯ä½ è¦å»çš„é‚£ä¸ªç»„ä»¶ï¼Œfrom è¡¨ç¤ºçš„æ˜¯ä½ ä»å“ªä¸ªç»„ä»¶è¿‡æ¥çš„ï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªå¯¹è±¡ï¼Œä½ å¯ä»¥æŠŠå®ƒæ‰“å°å‡ºæ¥ï¼Œå®ƒä»¬ä¹Ÿæœ‰ä¸€ä¸ªparam å±æ€§</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(to);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">from</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="variable language_">this</span>.<span class="property">username</span> = to.<span class="property">params</span>.<span class="property">id</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä»user:mizhuoè·³è½¬åˆ°user:milu,ä»consoleå¯ä»¥çœ‹å‡º,æ‰“å°å‡ºçš„toå°±æ˜¯æˆ‘ä»¬è¦å»çš„user:miluç»„ä»¶ã€‚fromæ˜¯æˆ‘ä»¬çš„user:mizhuoç»„ä»¶ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191110150345.gif" style="zoom:50%;" /></p><h4 id="åµŒå¥—è·¯ç”±"><a href="#åµŒå¥—è·¯ç”±" class="headerlink" title="åµŒå¥—è·¯ç”±"></a>åµŒå¥—è·¯ç”±</h4><p>åµŒå¥—è·¯ç”±ä¹Ÿå°±æ˜¯å¾ˆå¤šç»„ä»¶å±äºåŒä¸€ä¸ªçˆ¶ç»„ä»¶,ä¹Ÿå¯ä»¥ç†è§£ä¸ºçˆ¶å­å…³ç³»ã€‚æ¯”å¦‚æ°´æœä¸‹é¢æœ‰è‹¹æœã€é¦™è•‰ã€æ¢¨ç­‰ç­‰ã€‚æˆ‘ä»¬è¦å»è‹¹æœé¡µé¢,é¦–å…ˆè¦æ‰¾åˆ°æ°´æœ,ç„¶åå†æ‰¾åˆ°è‹¹æœã€‚</p><ul><li>æ–°å»º<code>Fruit.vue</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li>æ–°å»º<code>Apple.vue</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>apple<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        data () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">msg</span>: <span class="string">&quot;æˆ‘æ˜¯ä¸€ä¸ªå¤§è‹¹æœ&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li>æ–°å»º<code>Banana.vue</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>banana<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        data () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">msg</span>: <span class="string">&quot;æˆ‘æ˜¯ä¸€æ ¹å¤§é¦™è•‰&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li>æ–°å»º<code>Pear.vue</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>pear<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        data () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">msg</span>: <span class="string">&quot;æˆ‘æ˜¯ä¸€åªæ°´å«©å«©çš„æ¢¨&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li>ä¿®æ”¹index.js<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&quot;../Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> about <span class="keyword">from</span> <span class="string">&quot;../About.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&quot;../User.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> fruit <span class="keyword">from</span> <span class="string">&quot;../Fruit.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> apple <span class="keyword">from</span> <span class="string">&quot;../Apple.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> banana <span class="keyword">from</span> <span class="string">&quot;../Banana.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pear <span class="keyword">from</span> <span class="string">&quot;../Pear.vue&quot;</span>;</span><br><span class="line"><span class="comment">// è¦å‘Šè¯‰ vue ä½¿ç”¨ vueRouter</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>:<span class="string">&quot;/home&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: about</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, </span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;/fruit&#x27;</span> </span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: user</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/fruit&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: fruit,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;apple&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: apple</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;banana&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: banana</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;pear&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: pear</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: apple</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> router =  <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>è¿™æ ·å°±å¯ä»¥å®ç°åµŒå¥—è·¯ç”±äº†ã€‚<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191110161803.gif" style="zoom:50%;" /></li></ul><h4 id="å‘½åè·¯ç”±"><a href="#å‘½åè·¯ç”±" class="headerlink" title="å‘½åè·¯ç”±"></a>å‘½åè·¯ç”±</h4><p>å‘½åè·¯ç”±å°±æ˜¯ç»™è·¯ç”±èµ‹äºˆä¸€ä¸ªåå­—,ç„¶åæ ¹æ®è¿™ä¸ªåå­—æ¥æ‰¾åˆ°å®ƒã€‚</p><ul><li>ç»™path:user ä¸­æ·»åŠ nameå±æ€§<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&quot;../Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> about <span class="keyword">from</span> <span class="string">&quot;../About.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&quot;../User.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> fruit <span class="keyword">from</span> <span class="string">&quot;../Fruit.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> apple <span class="keyword">from</span> <span class="string">&quot;../Apple.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> banana <span class="keyword">from</span> <span class="string">&quot;../Banana.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pear <span class="keyword">from</span> <span class="string">&quot;../Pear.vue&quot;</span>;</span><br><span class="line"><span class="comment">// è¦å‘Šè¯‰ vue ä½¿ç”¨ vueRouter</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>:<span class="string">&quot;/home&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: about</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, </span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span> </span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: user</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/fruit&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: fruit,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;apple&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: apple</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;banana&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: banana</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;pear&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: pear</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: apple</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> router =  <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨nameè¿›è¡Œè·³è½¬<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--æ–°å¢userç»„ä»¶å¯¼èˆª--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/user/mizhuo&quot;</span>&gt;</span>user:mizhuo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/user/milu&quot;</span>&gt;</span>user:milu<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name: &#x27;user&#x27;,params:&#123;id: &#x27;mimi&#x27;&#125;&#125;&quot;</span>&gt;</span>user:mimi<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/fruit&quot;</span>&gt;</span>Fruit<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#app</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>è¿™æ ·ä¹Ÿå¯ä»¥å®ç°è·³è½¬<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191110163410.gif" style="zoom:50%;" /></li></ul><h4 id="ç¼–ç¨‹å¼å¯¼èˆª"><a href="#ç¼–ç¨‹å¼å¯¼èˆª" class="headerlink" title="ç¼–ç¨‹å¼å¯¼èˆª"></a>ç¼–ç¨‹å¼å¯¼èˆª</h4><p>è¿™ä¸ªåŠŸèƒ½ä¸€èˆ¬ç”¨äºäº‹ä»¶ä¸­,å®Œæˆsomethingåå°†é¡µé¢è¿›è¡Œè·³è½¬ã€‚å®ç°æ–¹æ³•:è°ƒç”¨<code>rourter.push()</code>æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--æ–°å¢userç»„ä»¶å¯¼èˆª--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/user/mizhuo&quot;</span>&gt;</span>user:mizhuo<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/user/milu&quot;</span>&gt;</span>user:milu<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name: &#x27;user&#x27;,params:&#123;id: &#x27;mimi&#x27;&#125;&#125;&quot;</span>&gt;</span>user:mimi<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/fruit&quot;</span>&gt;</span>Fruit<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toFruit&quot;</span>&gt;</span>æˆ‘è¦è·³è½¬åˆ°Fruité¡µé¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toHome&quot;</span>&gt;</span>æˆ‘è¦è·³è½¬åˆ°Homeé¡µé¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">toFruit</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/fruit&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">toHome</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-id">#app</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191110164108.gif" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå…¥é—¨ç³»åˆ—ã€äºŒã€‘</title>
      <link href="/Vue%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E3%80%90%E4%BA%8C%E3%80%91/"/>
      <url>/Vue%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E3%80%90%E4%BA%8C%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€æ–‡ç« ,å·²ç»è®²è§£äº†Vueçš„å®‰è£…åŠé¡¹ç›®çš„æ­å»º,æ¥ä¸‹æ¥å°±å¯ä»¥å¼€å§‹å­¦ä¹ Vueçš„è¯­æ³•åŠä½¿ç”¨äº†ã€‚</p><span id="more"></span><h4 id="å£°æ˜å¼æ¸²æŸ“"><a href="#å£°æ˜å¼æ¸²æŸ“" class="headerlink" title="å£°æ˜å¼æ¸²æŸ“"></a>å£°æ˜å¼æ¸²æŸ“</h4><p>Vueä¸­ä½¿ç”¨æ•°æ®æœ€å¤šçš„æ–¹å¼å°±æ˜¯ä½¿ç”¨åŒå¤§æ‹¬å·åŒ…è£¹æ•°æ®ï¼Œå¦‚<code>&#123;&#123; msg &#125;&#125;</code>,å°±ä¼šå°†jsä¸­çš„msgçš„å€¼æ˜¾ç¤ºå‡ºæ¥ã€‚è€Œä¸”Vueä¸­ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å“åº”å¼çš„,ä¿®æ”¹jsä¸­msgçš„å†…å®¹,é¡µé¢ä¸­çš„å€¼ä¹Ÿä¼šç›¸åº”çš„è¿›è¡Œæ›´æ–°ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191105221132.png" style="zoom:50%;" /><br>ä½¿ç”¨<code>v-bind</code>ç»‘å®š<code>msg</code>æ•°æ®åˆ°<code>span</code>çš„<code>title</code>å±æ€§ã€‚åŒç†ï¼Œä¹Ÿèƒ½ç»‘å®šå…¶ä»–æ ‡ç­¾çš„å±æ€§ã€‚å¦‚<code>input</code>æ ‡ç­¾çš„<code>value</code>å±æ€§ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191105222534.png" style="zoom:50%;" /></p><h4 id="æ¡ä»¶"><a href="#æ¡ä»¶" class="headerlink" title="æ¡ä»¶"></a>æ¡ä»¶</h4><p>ä½¿ç”¨<code>v-if=&lt;true/false&gt;</code>æ¥å†³å®šæ˜¯å¦éšè—å½“å‰æ ‡ç­¾ã€‚å¦‚å›¾ä¸­<code>display</code>çš„å€¼ä¸ºtrueæ—¶pæ ‡ç­¾çš„å†…å®¹æ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191106105138.gif" style="zoom:50%;" /></p><h4 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h4><p>ä½¿ç”¨<code>v-for=&#39;&lt;item&gt; in &lt;items&gt;&#39;</code>å¯ä»¥éå†<code>data</code>ä¸­çš„<code>&lt;items&gt;</code>æ•°ç»„ï¼Œç„¶åä½¿ç”¨<code>&#123;&#123;item.key&#125;&#125;</code>å¯ä»¥æ‰“å°æ•°ç»„ä¸­çš„å€¼ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191106101631.png" style="zoom:50%;" /></p><h4 id="ç»‘å®šäº‹ä»¶æ–¹æ³•"><a href="#ç»‘å®šäº‹ä»¶æ–¹æ³•" class="headerlink" title="ç»‘å®šäº‹ä»¶æ–¹æ³•"></a>ç»‘å®šäº‹ä»¶æ–¹æ³•</h4><p>ä½¿ç”¨<code>v-on:click=&#39;æ–¹æ³•å&#39;</code>æˆ–è€…<code>@click=&#39;æ–¹æ³•å&#39;</code>,å¯ä»¥æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œè°ƒç”¨vueä¸­çš„æ–¹æ³•ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191106104814.gif" style="zoom:50%;" /></p><h4 id="åŒå‘ç»‘å®š"><a href="#åŒå‘ç»‘å®š" class="headerlink" title="åŒå‘ç»‘å®š"></a>åŒå‘ç»‘å®š</h4><p>ä½¿ç”¨<code>v-model</code>æ¥å®ç°åŒå‘ç»‘å®šæ•°æ®ã€‚ä¿®æ”¹ä»»æ„ä¸€å¤„ï¼Œå¯ä»¥åŒæ­¥æ”¹å˜<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191106105527.gif" style="zoom:50%;" /></p><h4 id="è‡ªå®šä¹‰ç»„ä»¶"><a href="#è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="è‡ªå®šä¹‰ç»„ä»¶"></a>è‡ªå®šä¹‰ç»„ä»¶</h4><p>åœ¨ Vue ä¸­æ³¨å†Œç»„ä»¶:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;myComponent&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;li&gt;&#123;&#123; component.it &#125;&#125;&lt;/li&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;component&#x27;</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ³¨å†Œå®Œç»„ä»¶åå°±å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ç»„ä»¶äº†ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191106221852.gif" style="zoom:50%;" /></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå…¥é—¨ç³»åˆ—ã€ä¸€ã€‘</title>
      <link href="/Vue%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E3%80%90%E4%B8%80%E3%80%91/"/>
      <url>/Vue%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97%E3%80%90%E4%B8%80%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>Vue (è¯»éŸ³ &#x2F;vjuË&#x2F;ï¼Œç±»ä¼¼äº view) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼JavaScriptæ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œæ–¹ä¾¿ä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚</p><span id="more"></span><p>åœ¨è¿™ä¸ªå¤§æ•°æ®æ—¶ä»£ï¼Œå¯¹äºäº’è”ç½‘é¡¹ç›®æ€§èƒ½è¶Šæ¥è¶Šé«˜ï¼Œå‰åç«¯åˆ†ç¦»æ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œè™½è¯´å‰åç«¯åªéœ€è¦ä¸“æ”»è‡ªå·±çš„é¢†åŸŸï¼Œä½†æ˜¯ä½œä¸ºä¸€åç»éªŒä¸°å¯Œ(ç†Ÿç»ƒæŒæ¡CTRL+C&#x2F;CTRL+Vç­‰å¤æ‚æŠ€æœ¯)çš„è€ç¨‹åºçŒ¿ï¼Œé™¤äº†è¦å­¦ä¹ åç«¯æŠ€æœ¯çš„åŒæ—¶ï¼Œä¹Ÿè¦å¯¹å‰ç«¯æŠ€æœ¯è¿›è¡Œäº†è§£ã€‚è¿™æ ·æ‰ä¼šæœ‰ä¸€ä¸ªå……æ»¡å¸Œæœ›çš„æœªæ¥ï¼è€Œ<a href="https://cn.vuejs.org/">Vue.js</a>å¯ä»¥è¯´æ˜¯ç›®å‰å›½å†…æœ€æµè¡Œçš„å‰ç«¯æ¡†æ¶äº†ï¼Œå®ƒæ˜¯ä»¥æ•°æ®é©±åŠ¨å’Œç»„ä»¶åŒ–çš„æ€æƒ³æ„å»ºçš„ã€‚ç›¸æ¯”äº<a href="https://angularjs.org/">Angular.js</a>ï¼ŒVue.jsæä¾›äº†æ›´åŠ ç®€æ´ã€æ›´æ˜“äºç†è§£çš„APIï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿåœ°ä¸Šæ‰‹å¹¶ä½¿ç”¨Vue.jsã€‚</p><p><strong><span style='color:red;'>Vueçš„æ•™ç¨‹ååˆ†è¯¦ç»†ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ç§»æ­¥æŸ¥çœ‹å®˜ç½‘çš„æ•™ç¨‹ã€‚<a href="https://cn.vuejs.org/v2/guide/">å®˜ç½‘æ•™ç¨‹</a></span></strong></p><h4 id="å®‰è£…Vue-js"><a href="#å®‰è£…Vue-js" class="headerlink" title="å®‰è£…Vue.js"></a>å®‰è£…Vue.js</h4><p><span style='color:red;font-size:20px;'>æ³¨æ„ï¼šVue ä¸æ”¯æŒ IE8 åŠä»¥ä¸‹ç‰ˆæœ¬ã€‚</span></p><ul><li><p>ä½¿ç”¨NPMå®‰è£…,<code>npm install vue</code>,NPM èƒ½å¾ˆå¥½åœ°å’Œè¯¸å¦‚ webpack æˆ– Browserify æ¨¡å—æ‰“åŒ…å™¨é…åˆä½¿ç”¨ã€‚ä½¿ç”¨NPMæ¨èä½¿ç”¨<a href="https://npm.taobao.org/">å›½å†…é•œåƒ</a>,é€Ÿåº¦æ›´å¿«,é™¤äº†ä½¿ç”¨NPM.</p></li><li><p>ç›´æ¥å¼•å…¥<code>&lt;script&gt;</code>æ ‡ç­¾,<code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</code>,<code>Vue</code>ä¼šè¢«æ³¨å†Œä¸ºä¸€ä¸ªå…¨å±€å˜é‡ã€‚</p></li><li><p>ä½¿ç”¨å®˜æ–¹å‘½ä»¤è¡Œå·¥å…· (CLI),ä¸ºå•é¡µé¢åº”ç”¨ (SPA) å¿«é€Ÿæ­å»ºç¹æ‚çš„è„šæ‰‹æ¶ã€‚<br>æˆ‘è¿™é‡Œä½¿ç”¨npmè¿›è¡Œå®‰è£…:</p><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031104627.png" style="zoom:50%;" /></li><li><p>å…¨å±€å®‰è£…vue-cliå·¥å…·<br>  <code>cnpm install vue-cli -g</code></p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031164823.png" style="zoom:50%;" /></li></ul><h4 id="æ–°å»ºVueé¡¹ç›®"><a href="#æ–°å»ºVueé¡¹ç›®" class="headerlink" title="æ–°å»ºVueé¡¹ç›®"></a>æ–°å»ºVueé¡¹ç›®</h4><ul><li><code>vue init webpack (ä½ çš„é¡¹ç›®åç§°)</code><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031165821.png" style="zoom:50%;" /></li><li>å®‰è£…ä¸­ä¸ç”¨å…¨é€‰  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Project name my-project</span><br><span class="line">Project description A Vue.js project</span><br><span class="line">Author lzh &lt;****@qq.com&gt;</span><br><span class="line">Vue build (Use arrow keys)</span><br><span class="line">Vue build standalone</span><br><span class="line">Install vue-router? Yes</span><br><span class="line">Use ESLint to lint your code? No(é™¤è¿™ä¸‰ä¸ªå¤–ï¼Œå…¶ä»–çš„éƒ½å›è½¦)</span><br><span class="line">Set up unit tests No</span><br><span class="line">Setup e2e tests with Nightwatch? No</span><br></pre></td></tr></table></figure></li><li>å®‰è£…å®Œæˆåï¼Œå°±å¯ä»¥è¿è¡Œé¡¹ç›®äº†  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd my-project</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031170352.png" style="zoom:50%;" /></li><li>æ‰“å¼€æµè§ˆå™¨ï¼Œè¿›å…¥<a href="http://localhost:8080/%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E6%88%91%E4%BB%AC%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%BA%86">http://localhost:8080/å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„é¡¹ç›®äº†</a><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031170312.png" style="zoom:50%;" /></li></ul><p><strong>è‡³æ­¤ï¼Œå·²ç»æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªVueé¡¹ç›®ã€‚è¿˜æ˜¯å¾ˆç®€å•çš„,åŸºæœ¬éƒ½æ˜¯è·Ÿç€æ­¥éª¤èµ°å°±å¥½äº†ã€‚</strong></p><h4 id="ç›®å½•ä»‹ç»"><a href="#ç›®å½•ä»‹ç»" class="headerlink" title="ç›®å½•ä»‹ç»"></a>ç›®å½•ä»‹ç»</h4><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031170859.png" style="zoom:50%;" /><p>åˆ›å»ºå¥½çš„é¡¹ç›®ä¸­æœ‰å¾ˆå¤šæ–‡ä»¶å¤¹å’Œæ–‡ä»¶,è¿™é‡Œç¨å¾®ä»‹ç»ä¸€ä¸‹src</p><ul><li>åœ¨src&#x2F;assetsä¸­ç”¨äºæˆ‘ä»¬å­˜æ”¾ä¸€äº›cssã€imgã€jsæ–‡ä»¶</li><li>src&#x2F;componentsä¸­å­˜æ”¾è‡ªå·±çš„vueç»„ä»¶</li><li>src&#x2F;routerå­˜æ”¾è·¯ç”±é…ç½®ä¿¡æ¯</li><li>src&#x2F;libå­˜æ”¾æ¨¡æ‹Ÿçš„æ•°æ®</li><li>æ–°å»ºsrc&#x2F;storeå­˜æ”¾vuex</li><li>æ–°å»ºsrc&#x2F;viewså­˜æ”¾è·¯ç”±ç»„ä»¶</li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å…¬ä¼—å·å¼€å‘ã€ä¸‰ã€‘</title>
      <link href="/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E3%80%90%E4%B8%89%E3%80%91/"/>
      <url>/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E3%80%90%E4%B8%89%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>å‰é¢æ–‡ç« å·²ç»æˆåŠŸæ¥å…¥å¾®ä¿¡å…¬ä¼—å·äº†ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿæ¥å—åˆ°ç”¨æˆ·å‘é€çš„æ¶ˆæ¯äº†ã€‚æ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åå°±å¯ä»¥ç¼–å†™é€»è¾‘æ¥è¿›è¡Œå¤„ç†äº†ã€‚ç”¨æˆ·å‘å…¬ä¼—å·å‘é€æ¶ˆæ¯æ—¶ï¼Œæˆ‘ä»¬æ”¶åˆ°çš„æ¶ˆæ¯å‘é€è€…æ˜¯ä¸€ä¸ªOpenIDï¼Œæ˜¯ä½¿ç”¨ç”¨æˆ·å¾®ä¿¡å·åŠ å¯†åçš„ç»“æœï¼Œæ¯ä¸ªç”¨æˆ·å¯¹æ¯ä¸ªå…¬ä¼—å·æœ‰ä¸€ä¸ªå”¯ä¸€çš„OpenIDã€‚</p><span id="more"></span><h4 id="åˆ›å»ºMessageç±»"><a href="#åˆ›å»ºMessageç±»" class="headerlink" title="åˆ›å»ºMessageç±»"></a>åˆ›å»ºMessageç±»</h4><ul><li><code>BaseMessage</code>ï¼šæ¶ˆæ¯åŸºç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model.resp</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: BaseMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: æ¶ˆæ¯åŸºç±» </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-17 16:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseMessage</span> &#123;</span><br><span class="line">    <span class="comment">/* å‘é€æ–¹å¸å·ï¼ˆä¸€ä¸ªOpenIDï¼‰ */</span></span><br><span class="line">    <span class="keyword">private</span> String ToUserName;</span><br><span class="line">    <span class="comment">/* å¼€å‘è€…å¾®ä¿¡å· */</span></span><br><span class="line">    <span class="keyword">private</span> String FromUserName;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯åˆ›å»ºæ—¶é—´ ï¼ˆæ•´å‹ï¼‰ */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> CreateTime;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹ï¼Œæ–‡æœ¬ä¸ºtext */</span></span><br><span class="line">    <span class="keyword">private</span> String MsgType;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>TextMessage</code>:æ–‡æœ¬æ¶ˆæ¯ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model.resp</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: TextMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: æ–‡æœ¬æ¶ˆæ¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-17 16:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextMessage</span> <span class="keyword">extends</span> <span class="title class_">BaseMessage</span> &#123;</span><br><span class="line">    <span class="comment">/* æ–‡æœ¬æ¶ˆæ¯å†…å®¹ */</span></span><br><span class="line">    <span class="keyword">private</span> String Content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>PictureMessage</code>:å›¾ç‰‡æ¶ˆæ¯ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.req;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: PictureMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: å›¾ç‰‡æ¶ˆæ¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-15 19:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model.resp</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: ImageMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: å›¾ç‰‡æ¶ˆæ¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-17 22:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageMessage</span> <span class="keyword">extends</span> <span class="title class_">BaseMessage</span> &#123;</span><br><span class="line">    <span class="comment">/* é€šè¿‡ç´ æç®¡ç†ä¸­çš„æ¥å£ä¸Šä¼ å¤šåª’ä½“æ–‡ä»¶ï¼Œå¾—åˆ°çš„idã€‚ */</span></span><br><span class="line">    <span class="keyword">private</span> String MediaId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>VoiceMessage</code>:è¯­éŸ³æ¶ˆæ¯ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model.resp</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: VoiceMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: è¯­éŸ³æ¶ˆæ¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-17 22:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VoiceMessage</span> <span class="keyword">extends</span> <span class="title class_">BaseMessage</span> &#123;</span><br><span class="line">    <span class="comment">/* é€šè¿‡ç´ æç®¡ç†ä¸­çš„æ¥å£ä¸Šä¼ å¤šåª’ä½“æ–‡ä»¶ï¼Œå¾—åˆ°çš„id */</span></span><br><span class="line">    <span class="keyword">private</span> String MediaId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>VideoMessage</code>:è§†é¢‘æ¶ˆæ¯ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model.resp</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: VideoMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: è§†é¢‘æ¶ˆæ¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-17 22:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VideoMessage</span> <span class="keyword">extends</span> <span class="title class_">BaseMessage</span> &#123;</span><br><span class="line">    <span class="comment">/* é€šè¿‡ç´ æç®¡ç†ä¸­çš„æ¥å£ä¸Šä¼ å¤šåª’ä½“æ–‡ä»¶ï¼Œå¾—åˆ°çš„id */</span></span><br><span class="line">    <span class="keyword">private</span> String MediaId;</span><br><span class="line">    <span class="comment">/* è§†é¢‘æ¶ˆæ¯çš„æ ‡é¢˜ */</span></span><br><span class="line">    <span class="keyword">private</span> String Title;</span><br><span class="line">    <span class="comment">/* è§†é¢‘æ¶ˆæ¯çš„æè¿° */</span></span><br><span class="line">    <span class="keyword">private</span> String Description;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>LocationMessage</code>:åœ°ç†ä½ç½®æ¶ˆæ¯ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model.req</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: LocationMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: åœ°ç†ä½ç½®æ¶ˆæ¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-16 08:49</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LocationMessage</span> <span class="keyword">extends</span> <span class="title class_">BaseMessage</span> &#123;</span><br><span class="line">    <span class="comment">/* åœ°ç†ä½ç½®ç»´åº¦ */</span></span><br><span class="line">    <span class="keyword">private</span> String Location_X;</span><br><span class="line">    <span class="comment">/* åœ°ç†ä½ç½®ç»åº¦ */</span></span><br><span class="line">    <span class="keyword">private</span> String Location_Y;</span><br><span class="line">    <span class="comment">/* åœ°å›¾ç¼©æ”¾å¤§å° */</span></span><br><span class="line">    <span class="keyword">private</span> String Scale;</span><br><span class="line">    <span class="comment">/* åœ°ç†ä½ç½®ä¿¡æ¯ */</span></span><br><span class="line">    <span class="keyword">private</span> String Label;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>LinkMessage</code>ï¼šé“¾æ¥æ¶ˆæ¯ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model.req</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: LinkMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: é“¾æ¥æ¶ˆæ¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-16 08:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkMessage</span> <span class="keyword">extends</span> <span class="title class_">BaseMessage</span> &#123;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯æ ‡é¢˜ */</span></span><br><span class="line">    <span class="keyword">private</span> String Title;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯æè¿° */</span></span><br><span class="line">    <span class="keyword">private</span> String Description;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯é“¾æ¥ */</span></span><br><span class="line">    <span class="keyword">private</span> String Url;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>Article</code>ï¼šå›¾æ–‡æ¶ˆæ¯ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model.resp</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: ArticleMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: å›¾æ–‡æ¶ˆæ¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-17 16:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Article</span> &#123;</span><br><span class="line">    <span class="comment">/* å›¾æ–‡æ¶ˆæ¯æ ‡é¢˜ */</span></span><br><span class="line">    <span class="keyword">private</span> String Title;</span><br><span class="line">    <span class="comment">/* å›¾æ–‡æ¶ˆæ¯æè¿° */</span></span><br><span class="line">    <span class="keyword">private</span> String Description;</span><br><span class="line">    <span class="comment">/* å›¾ç‰‡é“¾æ¥ï¼Œæ”¯æŒJPGã€PNGæ ¼å¼ï¼Œè¾ƒå¥½çš„æ•ˆæœä¸ºå¤§å›¾360*200ï¼Œå°å›¾200*200 */</span></span><br><span class="line">    <span class="keyword">private</span> String PicUrl;</span><br><span class="line">    <span class="comment">/* ç‚¹å‡»å›¾æ–‡æ¶ˆæ¯è·³è½¬é“¾æ¥ */</span></span><br><span class="line">    <span class="keyword">private</span> String Url;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>ArticlesMessage</code>ï¼šå¤šå›¾æ–‡æ¶ˆæ¯ç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.model.message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.model.resp</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: ArticlesMessage</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: å¤šå›¾æ–‡æ¶ˆæ¯ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-17 22:50</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArticlesMessage</span> <span class="keyword">extends</span> <span class="title class_">BaseMessage</span> &#123;</span><br><span class="line">    <span class="comment">/* å›¾æ–‡æ¶ˆæ¯ä¿¡æ¯ï¼Œæ³¨æ„ï¼Œå¦‚æœå›¾æ–‡æ•°è¶…è¿‡é™åˆ¶ï¼Œåˆ™å°†åªå‘é™åˆ¶å†…çš„æ¡æ•° */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Article&gt; Articles;</span><br><span class="line">    <span class="comment">/* å›¾æ–‡æ¶ˆæ¯ä¸ªæ•°ï¼›å½“ç”¨æˆ·å‘é€æ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ã€å›¾æ–‡ã€åœ°ç†ä½ç½®è¿™äº”ç§æ¶ˆæ¯æ—¶ï¼Œå¼€å‘è€…åªèƒ½å›å¤1æ¡å›¾æ–‡æ¶ˆæ¯ï¼›å…¶ä½™åœºæ™¯æœ€å¤šå¯å›å¤8æ¡å›¾æ–‡æ¶ˆæ¯ */</span></span><br><span class="line">    <span class="type">int</span> ArticleCount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ·»åŠ mavenä¾èµ–"><a href="#æ·»åŠ mavenä¾èµ–" class="headerlink" title="æ·»åŠ mavenä¾èµ–"></a>æ·»åŠ mavenä¾èµ–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;dom4j&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;dom4j&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;xstream&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.4</span><span class="number">.9</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;json-lib&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.4</span>&lt;/version&gt;</span><br><span class="line">    &lt;classifier&gt;jdk15&lt;/classifier&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºè§£ææ¶ˆæ¯å·¥å…·ç±»"><a href="#åˆ›å»ºè§£ææ¶ˆæ¯å·¥å…·ç±»" class="headerlink" title="åˆ›å»ºè§£ææ¶ˆæ¯å·¥å…·ç±»"></a>åˆ›å»ºè§£ææ¶ˆæ¯å·¥å…·ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.XStream;</span><br><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.core.util.QuickWriter;</span><br><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.io.HierarchicalStreamWriter;</span><br><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.io.xml.PrettyPrintWriter;</span><br><span class="line"><span class="keyword">import</span> com.thoughtworks.xstream.io.xml.Xpp3Driver;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.message.Article;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.message.ArticlesMessage;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.message.TextMessage;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.DocumentException;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.io.SAXReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.Writer;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: MessageUtil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: æ¶ˆæ¯å¤„ç†å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-16 16:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageUtil</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£æå¾®ä¿¡å‘é€æ¥çš„è¯·æ±‚æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String,String&gt; <span class="title function_">parseXml</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            in = request.getInputStream();</span><br><span class="line">            <span class="comment">//è¯»å–è¾“å…¥æµ</span></span><br><span class="line">            <span class="type">SAXReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SAXReader</span>();</span><br><span class="line">            <span class="type">Document</span> <span class="variable">doc</span> <span class="operator">=</span> reader.read(in);</span><br><span class="line">            <span class="comment">//å¾—åˆ°æ ¹å…ƒç´ </span></span><br><span class="line">            <span class="type">Element</span> <span class="variable">root</span> <span class="operator">=</span> doc.getRootElement();</span><br><span class="line">            <span class="comment">//å¾—åˆ°æ ¹å…ƒç´ æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line">            List&lt;Element&gt; list = root.elements();</span><br><span class="line">            <span class="comment">//éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¹¶å°†æ•°æ®ä¿å­˜åˆ°Mapä¸­ã€‚</span></span><br><span class="line">            <span class="keyword">for</span> (Element element : list) &#123;</span><br><span class="line">                map.put(element.getName(), element.getText());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//é‡Šæ”¾èµ„æº</span></span><br><span class="line">                in.close();</span><br><span class="line">                in = <span class="literal">null</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†æ–‡æœ¬æ¶ˆæ¯å°è£…æˆå¯¹åº”çš„xmlæ ¼å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">textMessageToXml</span><span class="params">(TextMessage message)</span> &#123;</span><br><span class="line">        xStream.alias(<span class="string">&quot;xml&quot;</span>, message.getClass());</span><br><span class="line">        <span class="keyword">return</span> xStream.toXML(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†å›¾æ–‡æ¶ˆæ¯å°è£…æˆå¯¹åº”çš„xmlæ ¼å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">ArticleMessageToXml</span><span class="params">(ArticlesMessage message)</span> &#123;</span><br><span class="line">        xStream.alias(<span class="string">&quot;xml&quot;</span>, message.getClass());</span><br><span class="line">        xStream.alias(<span class="string">&quot;item&quot;</span>, <span class="keyword">new</span> <span class="title class_">Article</span>().getClass());</span><br><span class="line">        <span class="keyword">return</span> xStream.toXML(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰©å±•XStreamï¼Œä½¿å…¶æ”¯æŒCDATAå—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">XStream</span> <span class="variable">xStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XStream</span>(<span class="keyword">new</span> <span class="title class_">Xpp3Driver</span>()&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> HierarchicalStreamWriter <span class="title function_">createWriter</span><span class="params">(Writer out)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PrettyPrintWriter</span>(out)&#123;</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">cdata</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startNode</span><span class="params">(String name, Class clazz)</span> &#123;</span><br><span class="line">                    <span class="built_in">super</span>.startNode(name, clazz);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">writeText</span><span class="params">(QuickWriter writer, String text)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span>(cdata)&#123;</span><br><span class="line">                        writer.write(<span class="string">&quot;&lt;![CDATA[&quot;</span>);</span><br><span class="line">                        writer.write(text);</span><br><span class="line">                        writer.write(<span class="string">&quot;]]&gt;&quot;</span>);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        writer.write(text);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å®šä¹‰å¸¸é‡ç±»"><a href="#å®šä¹‰å¸¸é‡ç±»" class="headerlink" title="å®šä¹‰å¸¸é‡ç±»"></a>å®šä¹‰å¸¸é‡ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.util;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: Constant</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: å¸¸é‡ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-21 22:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Constant</span> &#123;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹: æ–‡æœ¬ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGE_TYPE_TEXT</span> <span class="operator">=</span> <span class="string">&quot;text&quot;</span>;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹: éŸ³ä¹ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGE_TYPE_MUSIC</span> <span class="operator">=</span> <span class="string">&quot;music&quot;</span>;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹: å›¾æ–‡ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGE_TYPE_NEWS</span> <span class="operator">=</span> <span class="string">&quot;news&quot;</span>;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹: å›¾ç‰‡ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGE_TYPE_IMAGE</span> <span class="operator">=</span> <span class="string">&quot;image&quot;</span>;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹: é“¾æ¥ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGE_TYPE_LINK</span> <span class="operator">=</span> <span class="string">&quot;link&quot;</span>;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹: è¯­éŸ³ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGE_TYPE_VOICE</span> <span class="operator">=</span> <span class="string">&quot;voice&quot;</span>;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹: è§†é¢‘ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGE_TYPE_VIDEO</span> <span class="operator">=</span> <span class="string">&quot;video&quot;</span>;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹: åœ°ç†ä½ç½® */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGE_TYPE_LOCATION</span> <span class="operator">=</span> <span class="string">&quot;location&quot;</span>;</span><br><span class="line">    <span class="comment">/* æ¶ˆæ¯ç±»å‹: æ¨é€ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MESSAGE_TYPE_EVENT</span> <span class="operator">=</span> <span class="string">&quot;event&quot;</span>;</span><br><span class="line">    <span class="comment">/* äº‹ä»¶ç±»å‹ï¼šè®¢é˜… */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EVENT_TYPE_SUBSCRIBE</span> <span class="operator">=</span> <span class="string">&quot;subscribe&quot;</span>;</span><br><span class="line">    <span class="comment">/* äº‹ä»¶ç±»å‹ï¼šå–æ¶ˆè®¢é˜… */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EVENT_TYPE_UNSUBSCRIBE</span> <span class="operator">=</span> <span class="string">&quot;unsubscribe&quot;</span>;</span><br><span class="line">    <span class="comment">/* äº‹ä»¶ç±»å‹ï¼šæ‰«ç  */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EVENT_TYPE_SCAN</span> <span class="operator">=</span> <span class="string">&quot;SCAN&quot;</span>;</span><br><span class="line">    <span class="comment">/* äº‹ä»¶ç±»å‹ï¼šèœå•ç‚¹å‡»äº‹ä»¶ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EVENT_TYPE_CLICK</span> <span class="operator">=</span> <span class="string">&quot;CLICK&quot;</span>;</span><br><span class="line">    <span class="comment">/* äº‹ä»¶ç±»å‹ï¼šæ¨é€å®¢æœ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EVENT_TYPE_TRANSFER_CUSTOMER_SERVICE</span> <span class="operator">=</span> <span class="string">&quot;transfer_customer_service&quot;</span>;</span><br><span class="line">    <span class="comment">/* è·å–AccessTokençš„æ¥å£åœ°å€(GET) 200æ¬¡/å¤© */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ACCESS_TOKEN_URL</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=APPID&amp;secret=APPSECRET&quot;</span>;</span><br><span class="line">    <span class="comment">/* è·å–è‡ªå®šä¹‰èœå• */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MENU_GET_URL</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/cgi-bin/menu/get?access_token=ACCESS_TOKEN&quot;</span>;</span><br><span class="line">    <span class="comment">/* åˆ›å»ºè‡ªå®šä¹‰èœå• */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MENU_CREATE_URL</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/cgi-bin/menu/create?access_token=ACCESS_TOKEN&quot;</span>;</span><br><span class="line">    <span class="comment">/* åˆ é™¤è‡ªå®šä¹‰èœå• */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MENU_DELETE_URL</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/cgi-bin/menu/delete?access_token=ACCESS_TOKEN&quot;</span>;</span><br><span class="line">    <span class="comment">/* APIæ¥å£ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RESP_TYPE_API</span> <span class="operator">=</span> <span class="string">&quot;api&quot;</span>;</span><br><span class="line">    <span class="comment">/* ä¸éœ€è¦ä¼ é€’å‚æ•°çš„APIæ¥å£ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RESP_TYPE_NOPARAMAPI</span> <span class="operator">=</span> <span class="string">&quot;npapi&quot;</span>;</span><br><span class="line">    <span class="comment">/* è·å–å…³é”®è¯ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RESP_TYPE_KEYWORD</span> <span class="operator">=</span> <span class="string">&quot;keyword&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®šä¹‰è·å–AccessTokençš„çº¿ç¨‹ç±»"><a href="#å®šä¹‰è·å–AccessTokençš„çº¿ç¨‹ç±»" class="headerlink" title="å®šä¹‰è·å–AccessTokençš„çº¿ç¨‹ç±»"></a>å®šä¹‰è·å–AccessTokençš„çº¿ç¨‹ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.AccessToken;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.WeChatUtil;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Scheduled;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.thread</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: AccessTokenThread</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: è·å–AccessTokençº¿ç¨‹ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-18 16:42</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccessTokenThread</span> &#123;</span><br><span class="line">    <span class="comment">/* ç¬¬ä¸‰æ–¹ç”¨æˆ·å”¯ä¸€å‡­è¯ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String appid;</span><br><span class="line">    <span class="comment">/* ç¬¬ä¸‰æ–¹ç”¨æˆ·å”¯ä¸€å‡­è¯å¯†é’¥ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String appsecret;</span><br><span class="line">    <span class="comment">/* ç¬¬ä¸‰æ–¹ç”¨æˆ·å”¯ä¸€å‡­è¯ */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">AccessToken</span> <span class="variable">accessToken</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;weChat.AccountInfo.appid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAppid</span><span class="params">(String appid)</span> &#123;</span><br><span class="line">        AccessTokenThread.appid = appid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;weChat.AccountInfo.appsecret&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAppsecret</span><span class="params">(String appsecret)</span> &#123;</span><br><span class="line">        AccessTokenThread.appsecret = appsecret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¯7200ç§’è·å–ä¸€æ¬¡AccessToken</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Scheduled(fixedDelay = 2 * 3600 * 1000)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getToken</span><span class="params">()</span>&#123;</span><br><span class="line">        accessToken = WeChatUtil.getAccessToken(appid,appsecret);</span><br><span class="line">        <span class="keyword">if</span>(<span class="literal">null</span> != accessToken.getToken())&#123;</span><br><span class="line">            log.info(<span class="string">&quot;[&#123;&#125;],è·å–AccessTokenæˆåŠŸï¼ŒAccessToken:[&#123;&#125;]&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()),accessToken.getToken());</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            log.error(<span class="string">&quot;[&#123;&#125;],è·å–AccessTokenå¤±è´¥ï¼&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®šä¹‰WeChatå·¥å…·ç±»ç”¨äºå‘é€httpè¯·æ±‚å’Œè·å–AccessToken"><a href="#å®šä¹‰WeChatå·¥å…·ç±»ç”¨äºå‘é€httpè¯·æ±‚å’Œè·å–AccessToken" class="headerlink" title="å®šä¹‰WeChatå·¥å…·ç±»ç”¨äºå‘é€httpè¯·æ±‚å’Œè·å–AccessToken"></a>å®šä¹‰WeChatå·¥å…·ç±»ç”¨äºå‘é€httpè¯·æ±‚å’Œè·å–AccessToken</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.AccessToken;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> net.sf.json.JSONObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.SSLContext;</span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.SSLSocketFactory;</span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.TrustManager;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.security.SecureRandom;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: WeChatUtil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: è·å–AcessTokenå·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-18 16:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeChatUtil</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘èµ·Httpè¯·æ±‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> requestUrl è¯·æ±‚åœ°å€</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> requestMethod è¯·æ±‚æ–¹å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> outputStr æäº¤çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  JSONObject(é€šè¿‡JSONObject.get(key)è·å–jsonå¯¹è±¡çš„å€¼)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> JSONObject <span class="title function_">httpRequest</span><span class="params">(String requestUrl, String requestMethod, String outputStr)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;[&#123;&#125;]å‘èµ·Httpè¯·æ±‚ï¼&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()));</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//åˆ›å»ºSSLContextå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨æˆ‘ä»¬æŒ‡å®šçš„ä¿¡ä»»ç®¡ç†å™¨åˆå§‹åŒ–</span></span><br><span class="line">            TrustManager[] trustManagers = &#123;<span class="keyword">new</span> <span class="title class_">MyX509TrustManger</span>()&#125;;</span><br><span class="line">            <span class="type">SSLContext</span> <span class="variable">context</span> <span class="operator">=</span> SSLContext.getInstance(<span class="string">&quot;SSL&quot;</span>,<span class="string">&quot;SunJSSE&quot;</span>);</span><br><span class="line">            context.init(<span class="literal">null</span>,trustManagers,<span class="keyword">new</span> <span class="title class_">SecureRandom</span>());</span><br><span class="line">            <span class="comment">//ä»ä¸Šè¿°SSLContextå¯¹è±¡ä¸­è·å–SSLSocketFactoryå¯¹è±¡</span></span><br><span class="line">            <span class="type">SSLSocketFactory</span> <span class="variable">sslSocketFactory</span> <span class="operator">=</span> context.getSocketFactory();</span><br><span class="line">            <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(requestUrl);</span><br><span class="line">            <span class="type">HttpURLConnection</span> <span class="variable">httpURLConnection</span> <span class="operator">=</span> (HttpURLConnection)url.openConnection();</span><br><span class="line">            httpURLConnection.setDoInput(<span class="literal">true</span>);</span><br><span class="line">            httpURLConnection.setDoOutput(<span class="literal">true</span>);</span><br><span class="line">            httpURLConnection.setUseCaches(<span class="literal">false</span>);</span><br><span class="line">            <span class="comment">//è®¾ç½®è¯·æ±‚æ–¹å¼GET/POST</span></span><br><span class="line">            httpURLConnection.setRequestMethod(requestMethod);</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;GET&quot;</span>.equalsIgnoreCase(requestMethod))&#123;</span><br><span class="line">                httpURLConnection.connect();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å½“æœ‰æ•°æ®éœ€è¦æäº¤æ—¶</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="literal">null</span> != outputStr)&#123;</span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> httpURLConnection.getOutputStream();</span><br><span class="line">                outputStream.write(outputStr.getBytes(<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">                outputStream.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å°†è¿”å›çš„è¾“å…¥æµè½¬æ¢æˆå­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> httpURLConnection.getInputStream();</span><br><span class="line">            <span class="type">InputStreamReader</span> <span class="variable">inputStreamReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(inputStream,<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(inputStreamReader);</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span>((str = bufferedReader.readLine())!= <span class="literal">null</span>)&#123;</span><br><span class="line">                buffer.append(str);</span><br><span class="line">            &#125;</span><br><span class="line">            bufferedReader.close();</span><br><span class="line">            inputStreamReader.close();</span><br><span class="line">            inputStream.close();</span><br><span class="line">            httpURLConnection.disconnect();</span><br><span class="line">            jsonObject = JSONObject.fromObject(buffer.toString());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(<span class="string">&quot;Httpè¯·æ±‚å¤±è´¥:[&#123;&#125;]&quot;</span>,e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> jsonObject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  è·å–AccessToken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> appid å‡­è¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> appsecret å¯†é’¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AccessToken <span class="title function_">getAccessToken</span><span class="params">(String appid, String appsecret)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestUrl</span> <span class="operator">=</span> Constant.ACCESS_TOKEN_URL.replace(<span class="string">&quot;APPID&quot;</span>,appid).replace(<span class="string">&quot;APPSECRET&quot;</span>,appsecret);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> httpRequest(requestUrl,<span class="string">&quot;GET&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">        <span class="type">AccessToken</span> <span class="variable">acessToken</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AccessToken</span>();</span><br><span class="line">        Optional.ofNullable(jsonObject)</span><br><span class="line">                .filter(obj-&gt;obj.has(<span class="string">&quot;access_token&quot;</span>))</span><br><span class="line">                .filter(obj-&gt;obj.has(<span class="string">&quot;expires_in&quot;</span>))</span><br><span class="line">                .ifPresent(obj-&gt;&#123;</span><br><span class="line">                    acessToken.setToken(obj.getString(<span class="string">&quot;access_token&quot;</span>));</span><br><span class="line">                    acessToken.setExpireSeconds(obj.getInt(<span class="string">&quot;expires_in&quot;</span>));</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="keyword">return</span> acessToken;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¥æ”¶ç”¨æˆ·è¯·æ±‚-å¤„ç†é€»è¾‘-è¿”å›æ•°æ®"><a href="#æ¥æ”¶ç”¨æˆ·è¯·æ±‚-å¤„ç†é€»è¾‘-è¿”å›æ•°æ®" class="headerlink" title="æ¥æ”¶ç”¨æˆ·è¯·æ±‚,å¤„ç†é€»è¾‘,è¿”å›æ•°æ®"></a>æ¥æ”¶ç”¨æˆ·è¯·æ±‚,å¤„ç†é€»è¾‘,è¿”å›æ•°æ®</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.service.MessageService;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.service.UserReqHistoryService;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.AccessUtil;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.Constant;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.MessageUtil;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CoreController</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: æ ¸å¿ƒController ç”¨äºæ¥å…¥å¾®ä¿¡å…¬ä¼—å·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-15 14:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CoreController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MessageService messageService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserReqHistoryService historyService;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥å…¥å¾®ä¿¡å…¬ä¼—å·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> signature</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timestamp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nonce</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> echostr</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">checkSignature</span><span class="params">(<span class="meta">@RequestParam(value = &quot;signature&quot;,required = false)</span> String signature,</span></span><br><span class="line"><span class="params">                                 <span class="meta">@RequestParam(value = &quot;timestamp&quot;,required = false)</span> String timestamp,</span></span><br><span class="line"><span class="params">                                 <span class="meta">@RequestParam(value = &quot;nonce&quot;,required = false)</span> String nonce,</span></span><br><span class="line"><span class="params">                                 <span class="meta">@RequestParam(value = &quot;echostr&quot;,required = false)</span> String echostr)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (AccessUtil.checkSignature(signature, timestamp, nonce)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;[&#123;&#125;]æ¥å…¥å¾®ä¿¡å…¬ä¼—å·æˆåŠŸ&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()));</span><br><span class="line">            <span class="keyword">return</span> echostr;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">&quot;[&#123;&#125;]æ¥å…¥å¾®ä¿¡å…¬ä¼—å·å¤±è´¥&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">doPost</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        Map&lt;String,String&gt; data = MessageUtil.parseXml(request);</span><br><span class="line">        <span class="type">String</span> <span class="variable">msgType</span> <span class="operator">=</span> data.get(<span class="string">&quot;MsgType&quot;</span>);</span><br><span class="line">        <span class="comment">//å°†ç”¨æˆ·è¯·æ±‚æ•°æ®å°è£…åˆ°å†å²æ•°æ®è¡¨ä¸­</span></span><br><span class="line">        historyService.saveDataToHistoryTable(data);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">switch</span> (msgType)&#123;</span><br><span class="line">            <span class="keyword">case</span> Constant.MESSAGE_TYPE_EVENT:</span><br><span class="line">                result = messageService.processEvent(data);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                result = messageService.processMessage(data);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.mapper.ReplyContentMapper;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.table.ReplyContent;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.message.Article;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.message.ArticlesMessage;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.message.TextMessage;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.model.table.User;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.service.MessageService;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.Constant;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.MessageUtil;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.WeChatUtil;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> net.sf.json.JSONArray;</span><br><span class="line"><span class="keyword">import</span> net.sf.json.JSONObject;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.service.impl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CoreServiceImpl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: å¤„ç†ç”¨æˆ·è¯·æ±‚Serviceå®ç°ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-16 20:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">MessageService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ReplyContentMapper contentMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†å¾®ä¿¡æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">processMessage</span><span class="params">(Map&lt;String,String&gt; data)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msgType</span> <span class="operator">=</span> data.get(<span class="string">&quot;MsgType&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">switch</span> (msgType)&#123;</span><br><span class="line">            <span class="comment">/* å¤„ç†æ–‡æœ¬æ¶ˆæ¯ */</span></span><br><span class="line">            <span class="keyword">case</span> Constant.MESSAGE_TYPE_TEXT:</span><br><span class="line">                result = processTextMessage(data);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†æ–‡æœ¬æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">processTextMessage</span><span class="params">(Map&lt;String, String&gt; data)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;-------å¼€å§‹å¤„ç†æ–‡æœ¬æ¶ˆæ¯-------&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">resContent</span> <span class="operator">=</span> data.get(<span class="string">&quot;Content&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">fromUserName</span> <span class="operator">=</span> data.get(<span class="string">&quot;FromUserName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">toUserName</span> <span class="operator">=</span> data.get(<span class="string">&quot;ToUserName&quot;</span>);</span><br><span class="line">        <span class="comment">/*-----------------å°è£…æ–‡æœ¬æ¶ˆæ¯ç±»å‹-----------------------*/</span></span><br><span class="line">        <span class="type">TextMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TextMessage</span>();</span><br><span class="line">        message.setFromUserName(toUserName);</span><br><span class="line">        message.setToUserName(fromUserName);</span><br><span class="line">        message.setCreateTime(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()).getTime());</span><br><span class="line">        <span class="comment">/*-------------------å°è£…å›¾æ–‡æ¶ˆæ¯ç±»å‹----------------------*/</span></span><br><span class="line">        <span class="type">ArticlesMessage</span> <span class="variable">articlesMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArticlesMessage</span>();</span><br><span class="line">        articlesMessage.setFromUserName(toUserName);</span><br><span class="line">        articlesMessage.setToUserName(fromUserName);</span><br><span class="line">        articlesMessage.setCreateTime(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()).getTime());</span><br><span class="line">        List&lt;Article&gt; articleList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//å…³é”®è¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">_keyword</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//å…³é”®è¯åé¢çš„å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">_param</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//jsonå¯¹è±¡</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (resContent.indexOf(<span class="string">&quot;:&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">                String[] params = resContent.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">                _keyword = params[<span class="number">0</span>];</span><br><span class="line">                _param = params[<span class="number">1</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (resContent.indexOf(<span class="string">&quot;ï¼š&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">                String[] params = resContent.split(<span class="string">&quot;ï¼š&quot;</span>);</span><br><span class="line">                _keyword = params[<span class="number">0</span>];</span><br><span class="line">                _param = params[<span class="number">1</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                _keyword = resContent;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ ¹æ®å…³é”®è¯æŸ¥æ‰¾åº”ç­”æ“ä½œ</span></span><br><span class="line">            <span class="type">ReplyContent</span> <span class="variable">replyContent</span> <span class="operator">=</span> contentMapper.queryAllByKeyWord(_keyword);</span><br><span class="line">            <span class="keyword">if</span> (replyContent == <span class="literal">null</span>) &#123;</span><br><span class="line">                resContent = <span class="string">&quot;æš‚æ—¶ä¸æ”¯æŒè¿™ä¸ªå…³é”®è¯å“¦!æ‚¨å¯ä»¥å›å¤&lt;å…³é”®è¯&gt;æ¥è·å–æ‰€æœ‰æ”¯æŒçš„å…³é”®è¯ã€‚&quot;</span>;</span><br><span class="line">                message.setMsgType(<span class="string">&quot;text&quot;</span>);</span><br><span class="line">                message.setContent(resContent);</span><br><span class="line">                result = MessageUtil.textMessageToXml(message);</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è·å–è¿™æ¡å…³é”®è¯çš„åº”ç­”æ“ä½œçš„ç±»å‹</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">_msgty</span> <span class="operator">=</span> replyContent.getMsgty();</span><br><span class="line">            <span class="keyword">switch</span> (_msgty) &#123;</span><br><span class="line">                <span class="keyword">case</span> Constant.RESP_TYPE_KEYWORD:&#123;</span><br><span class="line">                    <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">                    sb.append(<span class="string">&quot;æ‚¨å¯ä»¥æœç´¢ä»¥ä¸‹å…³é”®è¯æ¥è·å–ä¿¡æ¯:&quot;</span>);</span><br><span class="line">                    List&lt;ReplyContent&gt; replyContents = contentMapper.queryAllKeyword();</span><br><span class="line">                    replyContents.forEach(content-&gt;&#123;</span><br><span class="line">                        sb.append(<span class="string">&quot;\n&quot;</span>).append(content.getId()).append(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">                        sb.append(content.getKeyword());</span><br><span class="line">                    &#125;);</span><br><span class="line">                    resContent = sb.toString();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> Constant.RESP_TYPE_API: &#123;</span><br><span class="line">                    <span class="keyword">if</span> (StringUtils.isNotEmpty(_param)) &#123;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">_api_url</span> <span class="operator">=</span> replyContent.getContent().replace(<span class="string">&quot;[param]&quot;</span>, URLEncoder.encode(_param,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">                        jsonObject = WeChatUtil.httpRequest(_api_url, <span class="string">&quot;GET&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">                        <span class="keyword">if</span>(jsonObject == <span class="literal">null</span>)&#123;</span><br><span class="line">                            resContent = <span class="string">&quot;æŠ±æ­‰ï¼Œæ•°æ®å‘ç”Ÿäº†é”™è¯¯ï¼è¯·ç¨åé‡è¯•ï¼&quot;</span>;</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">                            jsonObject = (JSONObject) jsonObject.get(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">                            <span class="type">JSONObject</span> <span class="variable">object</span> <span class="operator">=</span> (JSONObject) jsonObject.get(<span class="string">&quot;yesterday&quot;</span>);</span><br><span class="line">                            sb.append(_param).append(<span class="string">&quot;å¤©æ°”:\n&quot;</span>).append(object.get(<span class="string">&quot;date&quot;</span>)).append(<span class="string">&quot;:&quot;</span>).append(object.get(<span class="string">&quot;type&quot;</span>))</span><br><span class="line">                                    .append(<span class="string">&quot;|&quot;</span>).append(object.get(<span class="string">&quot;high&quot;</span>)).append(<span class="string">&quot;|&quot;</span>).append(object.get(<span class="string">&quot;low&quot;</span>))</span><br><span class="line">                                    .append(<span class="string">&quot;|&quot;</span>).append(object.get(<span class="string">&quot;fx&quot;</span>));</span><br><span class="line">                            <span class="type">JSONArray</span> <span class="variable">array</span> <span class="operator">=</span> jsonObject.getJSONArray(<span class="string">&quot;forecast&quot;</span>);</span><br><span class="line">                            <span class="keyword">for</span> (Object o : array) &#123;</span><br><span class="line">                                <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> (Map) o;</span><br><span class="line">                                sb.append(<span class="string">&quot;\n&quot;</span>).append(map.get(<span class="string">&quot;date&quot;</span>)).append(<span class="string">&quot;:&quot;</span>).append(map.get(<span class="string">&quot;type&quot;</span>))</span><br><span class="line">                                        .append(<span class="string">&quot;|&quot;</span>).append(map.get(<span class="string">&quot;high&quot;</span>)).append(<span class="string">&quot;|&quot;</span>).append(map.get(<span class="string">&quot;low&quot;</span>))</span><br><span class="line">                                        .append(<span class="string">&quot;|&quot;</span>).append(map.get(<span class="string">&quot;fengxiang&quot;</span>));</span><br><span class="line">                            &#125;</span><br><span class="line">                            resContent = sb.toString();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        resContent = replyContent.getDescription();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> Constant.RESP_TYPE_NOPARAMAPI: &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">_api_url</span> <span class="operator">=</span> replyContent.getContent();</span><br><span class="line">                    jsonObject = WeChatUtil.httpRequest(_api_url, <span class="string">&quot;GET&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> Constant.MESSAGE_TYPE_TEXT: &#123;</span><br><span class="line">                    resContent = replyContent.getContent();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è·å–åº”å°è£…çš„æ¶ˆæ¯ç±»å‹</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">_resMsgty</span> <span class="operator">=</span> replyContent.getResty();</span><br><span class="line">            <span class="keyword">switch</span> (_resMsgty) &#123;</span><br><span class="line">                <span class="keyword">case</span> Constant.MESSAGE_TYPE_TEXT: &#123;</span><br><span class="line">                    message.setMsgType(_resMsgty);</span><br><span class="line">                    message.setContent(resContent);</span><br><span class="line">                    result = MessageUtil.textMessageToXml(message);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> Constant.MESSAGE_TYPE_NEWS: &#123;</span><br><span class="line">                    <span class="type">JSONArray</span> <span class="variable">array</span> <span class="operator">=</span> jsonObject.getJSONArray(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">                    <span class="type">Article</span> <span class="variable">article</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Article</span>();</span><br><span class="line">                    <span class="keyword">for</span> (Object o : array) &#123;</span><br><span class="line">                        <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> (Map) o;</span><br><span class="line">                        article.setTitle((String) map.get(<span class="string">&quot;title&quot;</span>));</span><br><span class="line">                        article.setPicUrl((String) map.get(<span class="string">&quot;image&quot;</span>));</span><br><span class="line">                        article.setUrl((String) map.get(<span class="string">&quot;path&quot;</span>));</span><br><span class="line">                        articleList.add(article);</span><br><span class="line">                        article = <span class="keyword">new</span> <span class="title class_">Article</span>();</span><br><span class="line">                    &#125;</span><br><span class="line">                    articlesMessage.setMsgType(_resMsgty);</span><br><span class="line">                    articlesMessage.setArticles(articleList);</span><br><span class="line">                    articlesMessage.setArticleCount(articleList.size());</span><br><span class="line">                    result = MessageUtil.ArticleMessageToXml(articlesMessage);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            log.error(e.getMessage());</span><br><span class="line">            resContent = <span class="string">&quot;æŠ±æ­‰ï¼Œæ•°æ®å‘ç”Ÿäº†é”™è¯¯ï¼è¯·ç¨åé‡è¯•ï¼&quot;</span>;</span><br><span class="line">            message.setMsgType(Constant.MESSAGE_TYPE_TEXT);</span><br><span class="line">            message.setContent(resContent);</span><br><span class="line">            result = MessageUtil.textMessageToXml(message);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†äº‹ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">processEvent</span><span class="params">(Map&lt;String, String&gt; data)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">event</span> <span class="operator">=</span> data.get(<span class="string">&quot;Event&quot;</span>);</span><br><span class="line">        <span class="keyword">switch</span> (event) &#123;</span><br><span class="line">            <span class="keyword">case</span> Constant.EVENT_TYPE_SUBSCRIBE:</span><br><span class="line">                result = ProcessSubscribeEvent(data);</span><br><span class="line">                log.info(<span class="string">&quot;[&#123;&#125;]ç”¨æˆ·æ·»åŠ äº†å…³æ³¨ï¼&quot;</span>,data.get(<span class="string">&quot;FromUserName&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Constant.EVENT_TYPE_UNSUBSCRIBE:</span><br><span class="line">                result = ProcessUnSubscribeEvent(data);</span><br><span class="line">                log.info(<span class="string">&quot;[&#123;&#125;]ç”¨æˆ·å–æ¶ˆäº†å…³æ³¨ï¼&quot;</span>,data.get(<span class="string">&quot;FromUserName&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Constant.EVENT_TYPE_CLICK:</span><br><span class="line">                result = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Constant.EVENT_TYPE_TRANSFER_CUSTOMER_SERVICE:</span><br><span class="line">                result = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†å…³æ³¨äº‹ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">ProcessSubscribeEvent</span><span class="params">(Map&lt;String, String&gt; data)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fromUserName</span> <span class="operator">=</span> data.get(<span class="string">&quot;FromUserName&quot;</span>);</span><br><span class="line">        TextMessage textMessage=<span class="keyword">new</span> <span class="title class_">TextMessage</span>();</span><br><span class="line">        textMessage.setToUserName(data.get(<span class="string">&quot;FromUserName&quot;</span>));</span><br><span class="line">        textMessage.setFromUserName(data.get(<span class="string">&quot;ToUserName&quot;</span>));</span><br><span class="line">        textMessage.setCreateTime(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()).getTime());</span><br><span class="line">        textMessage.setMsgType(Constant.MESSAGE_TYPE_TEXT);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.queryUserByUserName(fromUserName);</span><br><span class="line">        <span class="keyword">if</span>(user == <span class="literal">null</span>) &#123;</span><br><span class="line">            user = <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">            user.setUserid(UUID.randomUUID().toString());</span><br><span class="line">            user.setUsername(fromUserName);</span><br><span class="line">            user.setUserphase(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">            user.setCreatetime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">            userMapper.insert(user);</span><br><span class="line">            textMessage.setContent(<span class="string">&quot;æˆ‘æ˜¯è¿·æµŠ,æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼æˆ‘çš„åšå®¢:http://www.mizhuo.site,æœ‰ä»€ä¹ˆæ„è§å¯ä»¥ç»™æˆ‘ç•™è¨€å“¦ï¼&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            user.setUserphase(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">            user.setUpdatetime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">            userMapper.updateByPrimaryKey(user);</span><br><span class="line">            textMessage.setContent(<span class="string">&quot;æ¬¢è¿å›æ¥,æˆ‘çš„è€æœ‹å‹,æˆ‘æ˜¯è¿·æµŠ,åšå®¢:http://www.mizhuo.site,æœ‰ä»€ä¹ˆæ„è§å¯ä»¥ç»™æˆ‘ç•™è¨€å“¦ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> MessageUtil.textMessageToXml(textMessage);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†å–æ¶ˆå…³æ³¨äº‹ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">ProcessUnSubscribeEvent</span><span class="params">(Map&lt;String, String&gt; data)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fromUserName</span> <span class="operator">=</span> data.get(<span class="string">&quot;FromUserName&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.queryUserByUserName(fromUserName);</span><br><span class="line">        user.setUserphase(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        user.setUpdatetime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        userMapper.updateByPrimaryKey(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è‡³æ­¤,å¾®ä¿¡å…¬ä¼—å·éƒ¨åˆ†å°åŠŸèƒ½å·²å®Œæˆã€‚å…³æ³¨è‡ªå·±çš„å…¬ä¼—å·ï¼Œè¿›è¡ŒåŠŸèƒ½æµ‹è¯•ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨æµ‹è¯•å·è¿›è¡Œæµ‹è¯•ï¼Œåç»­å¯ä»¥ç»§ç»­æ·»åŠ è‡ªå·±çš„åŠŸèƒ½å®ç°ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å…¬ä¼—å· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å…¬ä¼—å·å¼€å‘ã€äºŒã€‘</title>
      <link href="/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E3%80%90%E4%BA%8C%E3%80%91/"/>
      <url>/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E3%80%90%E4%BA%8C%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¸€èŠ‚æˆ‘ä»¬å·²ç»å°†ç¯å¢ƒæ­å»ºå¥½äº†,ç°åœ¨å¯ä»¥å¼€å§‹æ¥å…¥å¾®ä¿¡å…¬ä¼—å·äº†ã€‚</p><span id="more"></span><h4 id="å¾®ä¿¡å…¬ä¼—å·æ¥å…¥"><a href="#å¾®ä¿¡å…¬ä¼—å·æ¥å…¥" class="headerlink" title="å¾®ä¿¡å…¬ä¼—å·æ¥å…¥"></a>å¾®ä¿¡å…¬ä¼—å·æ¥å…¥</h4><blockquote><p>æ ¹æ®<a href="https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Access_Overview.html">å¾®ä¿¡å®˜æ–¹æ–‡æ¡£</a>ï¼Œæ¥å…¥å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘ï¼Œå¼€å‘è€…éœ€è¦æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤å®Œæˆï¼š</p></blockquote><ul><li><p>å¡«å†™æœåŠ¡å™¨é…ç½®<br>  ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°ï¼Œèœå•æ æ‰¾åˆ° <strong><span style='color:red;'>â€œå¼€å‘â€-&gt;â€åŸºæœ¬é…ç½®â€-&gt;â€æœåŠ¡å™¨é…ç½®â€</span></strong></p>  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031110118.png" style="zoom:50%;" />        <p>  <code>URL</code>:å°±æ˜¯æœåŠ¡å™¨åœ°å€å³å…¬ä¼—å·åå°é€»è¾‘å¤„ç†çš„å…¥å£åœ°å€ï¼Œç›®å‰åªæ”¯æŒ80ç«¯å£ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„æ“ä½œè¯·æ±‚ã€é€»è¾‘å¤„ç†éƒ½è¦ä»è¿™ä¸ªåœ°å€è¿›å…¥ã€‚åŒ…æ‹¬æ¥ä¸‹æ¥çš„æœåŠ¡å™¨éªŒè¯éƒ½è¦ä»è¿™ä¸ªåœ°å€è¿›å…¥ã€‚ä½†æ˜¯éªŒè¯æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯GETè¯·æ±‚ï¼Œå…¶å®ƒé€»è¾‘å¤„ç†ä½¿ç”¨çš„æ˜¯POSTè¯·æ±‚ã€‚</p><p>   <code>Token</code>:å¯ç”±å¼€å‘è€…å¯ä»¥ä»»æ„å¡«å†™ï¼Œç”¨ä½œç”Ÿæˆç­¾åï¼ˆè¯¥Tokenä¼šå’Œæ¥å£URLä¸­åŒ…å«çš„Tokenè¿›è¡Œæ¯”å¯¹ï¼Œä»è€ŒéªŒè¯å®‰å…¨æ€§ï¼‰ã€‚</p><p>  <code>EncodingAESKey</code>:ç”±å¼€å‘è€…æ‰‹åŠ¨å¡«å†™æˆ–éšæœºç”Ÿæˆï¼Œå°†ç”¨ä½œæ¶ˆæ¯ä½“åŠ è§£å¯†å¯†é’¥ã€‚</p></li><li><p>éªŒè¯æœåŠ¡å™¨<br>  å¡«å†™å¥½æœåŠ¡å™¨ä¿¡æ¯åå°±å¯ä»¥å¼€å§‹éªŒè¯äº†ã€‚ç‚¹å‡»æäº¤åï¼Œå¾®ä¿¡æœåŠ¡å™¨å°†å‘é€GETè¯·æ±‚åˆ°å¡«å†™çš„æœåŠ¡å™¨åœ°å€URLä¸Šï¼Œè¿™ä¸ªGETè¯·æ±‚ä¼šæºå¸¦å››ä¸ªå‚æ•°ã€‚</p><table><thead><tr><th align="center">å‚æ•°</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">signature</td><td align="center">å¾®ä¿¡åŠ å¯†ç­¾åï¼Œsignatureç»“åˆäº†å¼€å‘è€…å¡«å†™çš„tokenå‚æ•°å’Œè¯·æ±‚ä¸­çš„timestampå‚æ•°ã€nonceå‚æ•°ã€‚</td></tr><tr><td align="center">timestamp</td><td align="center">æ—¶é—´æˆ³</td></tr><tr><td align="center">nonce</td><td align="center">éšæœºæ•°</td></tr><tr><td align="center">echostr</td><td align="center">éšæœºå­—ç¬¦ä¸²</td></tr></tbody></table><p>  æˆ‘ä»¬éœ€è¦æ¥æ”¶è¿™ä¸ªGETè¯·æ±‚ï¼Œå¹¶é€šè¿‡signatureæ¥å¯¹è¯·æ±‚è¿›è¡Œæ ¡éªŒã€‚ç¡®è®¤æ­¤æ¬¡GETè¯·æ±‚æ¥è‡ªå¾®ä¿¡æœåŠ¡å™¨ï¼Œç„¶ååŸæ ·è¿”å›echostrã€‚åŠ å¯†&#x2F;æ ¡éªŒæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>å°†tokenã€timestampã€nonceä¸‰ä¸ªå‚æ•°è¿›è¡Œå­—å…¸åºæ’åºã€‚</li><li>å°†ä¸‰ä¸ªå‚æ•°å­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œsha1åŠ å¯†ã€‚</li><li>å¼€å‘è€…è·å¾—åŠ å¯†åçš„å­—ç¬¦ä¸²å¯ä¸signatureå¯¹æ¯”ï¼Œæ ‡è¯†è¯¥è¯·æ±‚æ¥æºäºå¾®ä¿¡ã€‚</li></ul></li></ul><h4 id="åˆ›å»ºjavaé¡¹ç›®"><a href="#åˆ›å»ºjavaé¡¹ç›®" class="headerlink" title="åˆ›å»ºjavaé¡¹ç›®"></a>åˆ›å»ºjavaé¡¹ç›®</h4><p>æˆ‘è¿™é‡Œä½¿ç”¨äº†Ideaåˆ›å»ºäº†ä¸€ä¸ªSpring-booté¡¹ç›®ã€‚<br><img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031110134.png" style="zoom: 25%;" /></p><ul><li>åˆ›å»ºä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨æ¥éªŒè¯ç­¾åã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: AccessUtil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: å¾®ä¿¡å…¬ä¼—å·éªŒè¯æœåŠ¡å™¨çš„å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-15 10:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccessUtil</span> &#123;</span><br><span class="line">    <span class="comment">/* å®šä¹‰Tokenï¼Œè¦ä¸é…ç½®ä¿¡æ¯ä¸­å¡«å†™çš„Tokenä¸€è‡´ã€‚ */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String token;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;weChat.AccountInfo.token&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setToken</span><span class="params">(String token)</span> &#123;</span><br><span class="line">        AccessUtil.token = token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éªŒè¯ç­¾å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> signatureï¼šå¾®ä¿¡åŠ å¯†ç­¾åï¼Œsignatureç»“åˆäº†å¼€å‘è€…å¡«å†™çš„tokenå‚æ•°å’Œè¯·æ±‚ä¸­çš„timestampå‚æ•°ã€nonceå‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timestampï¼šæ—¶é—´æˆ³</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nonceï¼šéšæœºæ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkSignature</span><span class="params">(String signature,String timestamp,String nonce)</span>&#123;</span><br><span class="line">        <span class="comment">//1):å°†tokenã€timestampã€nonceä¸‰ä¸ªå‚æ•°è¿›è¡Œå­—å…¸åºæ’åº</span></span><br><span class="line">        String[] arr = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;token,timestamp,nonce&#125;;</span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        <span class="comment">//2):å°†ä¸‰ä¸ªå‚æ•°å­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œsha1åŠ å¯†</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (String s : arr) &#123;</span><br><span class="line">            sb.append(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">MessageDigest</span> <span class="variable">md</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">tempStr</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            md = MessageDigest.getInstance(<span class="string">&quot;SHA-1&quot;</span>);</span><br><span class="line">            <span class="type">byte</span>[] bytes = md.digest(sb.toString().getBytes());</span><br><span class="line">            tempStr = byteToStr(bytes);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        sb = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//3):è·å¾—åŠ å¯†åçš„å­—ç¬¦ä¸²å¯ä¸signatureå¯¹æ¯”ï¼Œæ ‡è¯†è¯¥è¯·æ±‚æ¥æºäºå¾®ä¿¡</span></span><br><span class="line">        <span class="type">return</span> <span class="variable">tempStr</span> <span class="operator">=</span>= <span class="literal">null</span> ? <span class="literal">false</span> : tempStr.equals(signature);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†åŠ å¯†åçš„å­—ç¬¦æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bytes</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">byteToStr</span><span class="params">(<span class="type">byte</span>[] bytes)</span> &#123;</span><br><span class="line">        <span class="type">char</span>[] HEX_DIGITS = &#123;<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> bytes.length;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">buf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(len * <span class="number">2</span>);</span><br><span class="line">        <span class="comment">// æŠŠå¯†æ–‡è½¬æ¢æˆåå…­è¿›åˆ¶çš„å­—ç¬¦ä¸²å½¢å¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; len; j++) &#123;</span><br><span class="line">            buf.append(HEX_DIGITS[(bytes[j] &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0x0f</span>]);</span><br><span class="line">            buf.append(HEX_DIGITS[bytes[j] &amp; <span class="number">0x0f</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> buf.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>åˆ›å»ºControllerç±»<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> fun.mizhuo.wechat.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.service.MessageService;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.service.UserReqHistoryService;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.AccessUtil;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.Constant;</span><br><span class="line"><span class="keyword">import</span> fun.mizhuo.wechat.util.MessageUtil;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@PackageName</span>: fun.mizhuo.wechat.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CoreController</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Decription</span>: æ ¸å¿ƒController ç”¨äºæ¥å…¥å¾®ä¿¡å…¬ä¼—å·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MiZhuo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2019-10-15 14:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CoreController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MessageService messageService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserReqHistoryService historyService;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥å…¥å¾®ä¿¡å…¬ä¼—å·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> signature</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timestamp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nonce</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> echostr</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">checkSignature</span><span class="params">(<span class="meta">@RequestParam(value = &quot;signature&quot;,required = false)</span> String signature,</span></span><br><span class="line"><span class="params">                                 <span class="meta">@RequestParam(value = &quot;timestamp&quot;,required = false)</span> String timestamp,</span></span><br><span class="line"><span class="params">                                 <span class="meta">@RequestParam(value = &quot;nonce&quot;,required = false)</span> String nonce,</span></span><br><span class="line"><span class="params">                                 <span class="meta">@RequestParam(value = &quot;echostr&quot;,required = false)</span> String echostr)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (AccessUtil.checkSignature(signature, timestamp, nonce)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;[&#123;&#125;]æ¥å…¥å¾®ä¿¡å…¬ä¼—å·æˆåŠŸ&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()));</span><br><span class="line">            <span class="keyword">return</span> echostr;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">&quot;[&#123;&#125;]æ¥å…¥å¾®ä¿¡å…¬ä¼—å·å¤±è´¥&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis()));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li>ä¿®æ”¹æœ¬åœ°é¡¹ç›®å¯åŠ¨ç«¯å£ä¸º80,è°ƒè¯•çš„æ—¶å€™,å¼€å¯NATAPPã€‚<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031110146.png" style="zoom:50%;" />ç„¶åå°±å¯ä»¥æäº¤äº†ã€‚æäº¤æˆåŠŸåå°±å¯ä»¥å¯åŠ¨æœåŠ¡å™¨é…ç½®ï¼Œå¼€å§‹æˆ‘ä»¬çš„å¾®ä¿¡å…¬ä¼—å·çš„å¼€å‘äº†ã€‚<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031110154.png" style="zoom:50%;" /></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å…¬ä¼—å· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å…¬ä¼—å·å¼€å‘ã€ä¸€ã€‘</title>
      <link href="/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E3%80%90%E4%B8%80%E3%80%91/"/>
      <url>/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E3%80%90%E4%B8%80%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>å¾®ä¿¡å…¬ä¼—å·å¤§å®¶éƒ½å¾ˆäº†è§£,å¹³å¸¸ç”¨çš„éƒ½å¾ˆå¤š,ä¸€äº›æ™®é€šçš„åŠŸèƒ½è®¾ç½®å¾ˆç®€å•,ä½†æ˜¯æœ‰äº›å¤æ‚çš„åŠŸèƒ½æ˜¯æ— æ³•é€šè¿‡ç®€å•çš„è®¾ç½®å®ç°çš„,éœ€è¦è¿›è¡ŒåŠŸèƒ½å¼€å‘ã€‚</p><span id="more"></span><h4 id="æ³¨å†Œå¾®ä¿¡å…¬ä¼—å·"><a href="#æ³¨å†Œå¾®ä¿¡å…¬ä¼—å·" class="headerlink" title="æ³¨å†Œå¾®ä¿¡å…¬ä¼—å·"></a>æ³¨å†Œå¾®ä¿¡å…¬ä¼—å·</h4><ul><li>é¦–å…ˆï¼Œå’±è¦å¼€å‘å¾®ä¿¡å…¬ä¼—å·ï¼Œæ€»å¾—æœ‰ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·è´¦å·å§ã€‚<a href="https://mp.weixin.qq.com/">è·³è½¬æ³¨å†Œ</a>ã€‚ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ç«‹å³æ³¨å†Œï¼Œè¿›å…¥æ³¨å†Œç•Œé¢,é€‰æ‹©æ³¨å†Œçš„è´¦å·ç±»å‹ï¼Œä¸ªäººçš„è¯é€‰æ‹©è®¢é˜…å·ï¼Œå®Œå–„åŸºæœ¬ä¿¡æ¯å°±å¯ä»¥æ³¨å†ŒæˆåŠŸäº†ã€‚<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105648.png" style="zoom:50%;" /></li><li>æ³¨å†ŒæˆåŠŸåå°±å¯ä»¥ç™»é™†è¿›å…¥å¾®ä¿¡å…¬ä¼—å¹³å°çš„åå°äº†ã€‚<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105705.png" style="zoom:50%;" /></li><li>æ¥ä¸‹æ¥å¯ä»¥åœ¨å·¦ä¸‹è§’çš„å…¬ä¼—å·è®¾ç½®ä¿®æ”¹å…¬ä¼—å·çš„ä¿¡æ¯ã€‚ä½†æ˜¯<span style='color:red;font-size:18px;'>ä¿®æ”¹ä¿¡æ¯æ˜¯æœ‰æ¬¡æ•°é™åˆ¶çš„</span>,å¤§å®¶æ…é‡è¡Œäº‹ï¼<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105717.png" style="zoom:50%;" /></li></ul><h4 id="æ­å»ºå¾®ä¿¡å…¬ä¼—å·æœ¬åœ°æµ‹è¯•ç¯å¢ƒ"><a href="#æ­å»ºå¾®ä¿¡å…¬ä¼—å·æœ¬åœ°æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æ­å»ºå¾®ä¿¡å…¬ä¼—å·æœ¬åœ°æµ‹è¯•ç¯å¢ƒ"></a>æ­å»ºå¾®ä¿¡å…¬ä¼—å·æœ¬åœ°æµ‹è¯•ç¯å¢ƒ</h4><blockquote><p>å› ä¸ºæ­£å¸¸æƒ…å†µï¼Œå¾ˆå¤šæ¥å£éœ€è¦åœ¨æœåŠ¡å™¨ä¸ŠéªŒè¯ï¼Œæ¯æ¬¡ä¿®æ”¹ä¸€ç‚¹ä»£ç å°±éœ€è¦é‡æ–°éƒ¨ç½²ä¸€æ¬¡å¤ªè¿‡äºéº»çƒ¦ï¼Œä¸¥é‡å½±å“å¼€å‘æ•ˆç‡ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ­å»ºå¾®ä¿¡å…¬ä¼—å·æœ¬åœ°æµ‹è¯•ç¯å¢ƒã€‚</p></blockquote><ul><li>å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£æµ‹è¯•å¸å·ç”³è¯·<br>  <a href="http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login">è·³è½¬ç”³è¯·</a>ç‚¹è¿›å»æ‰«ä¸€æ‰«å°±å¯ä»¥å…æ³¨å†Œç™»é™†æµ‹è¯•è´¦å·äº†ã€‚ä¼šå¾—åˆ°ä¸¤ä¸ªå‚æ•°ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„å‚æ•°ã€‚  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105728.png" style="zoom:50%;" /></li><li>å¼€å¯å†…ç½‘ç©¿é€<br>å› ä¸ºå…¬ä¼—å·å¼€å‘æ¶‰åŠåˆ°å¾®ä¿¡çš„å›è°ƒï¼Œæ‰€ä»¥ä½ æœ¬åœ°æ­å»ºçš„æœåŠ¡å™¨éœ€è¦å¤–ç½‘èƒ½å¤Ÿè®¿é—®ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŠŠè¿è¡Œåœ¨å†…ç½‘çš„æœåŠ¡å™¨æ˜ å°„åˆ°å¤–ç½‘å»ç»™å¾®ä¿¡è®¿é—®ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬å¼€å¯å†…ç½‘ç©¿é€äº†ã€‚è¿™é‡Œæ¨èä½¿ç”¨<a href="https://natapp.cn/">NATAPP</a>,ä½“ç§¯å°å·§ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚<br>è¿›å…¥<a href="https://natapp.cn/">NATAPP</a>ä¸»é¡µï¼Œæ ¹æ®è‡ªå·±ç”µè„‘ç‰ˆæœ¬ä¸‹è½½è½¯ä»¶ã€‚<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105744.png" style="zoom:50%;" />ä¸‹è½½å®Œæˆåï¼Œè§£å‹å‹ç¼©åŒ…ï¼Œå®‰è£…Natapp,è¿™ä¸ªæ—¶å€™ä½ ä¼šå‘ç°å®‰è£…ä¸æˆåŠŸã€‚ä¼šå¼¹å‡ºä¸‹é¢è¿™ä¸ªçª—å£ï¼Œæç¤ºè®¤è¯é”™è¯¯ã€‚<img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105755.png" style="zoom:50%;" />è¿™ä¸ªæ—¶å€™åˆéœ€è¦æˆ‘ä»¬è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œäº†ã€‚<ul><li>ä¸ºNATAPPé…ç½®ç¯å¢ƒå˜é‡  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105807.png" style="zoom:50%;" /></li><li>è·å¾—authtoken<br>  è¿›å…¥<a href="https://natapp.cn/">NATAPP</a>ä¸»é¡µå…è´¹æ³¨å†Œï¼Œéœ€è¦ç™»å½•æ”¯ä»˜å®è¿›è¡Œå®åè®¤è¯ã€‚è®¤è¯ç»“æŸåï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åˆ›å»ºéš§é“äº†ã€‚æœ‰å…è´¹çš„å’Œä»˜è´¹çš„ï¼Œå¯ä»¥è‡ªè¡Œé€‰æ‹©ã€‚  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105822.png" style="zoom:50%;" /></li><li>å¡«å¥½éš§é“åç§°å’Œç«¯å£å°±å¯ä»¥åˆ›å»ºä¸€æ¡éš§é“äº†ã€‚  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105833.png" style="zoom:50%;" /></li><li>ç„¶åè¿›å…¥æˆ‘çš„éš§é“å°±èƒ½çœ‹è§åˆšåˆšåˆ›å»ºå¥½çš„éš§é“ä¿¡æ¯äº†ã€‚  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105843.png" style="zoom:50%;" /></li><li>å¤åˆ¶å¥½ä½ çš„authtokenï¼Œcmdæ‰§è¡Œnatapp -authtoken ä½ å¤åˆ¶çš„token å›è½¦ï¼Œå‡ºç°ä¸‹å›¾è¯´æ˜å·²ç»æˆåŠŸäº†ã€‚  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105854.png" style="zoom:50%;" /></li><li>æµè§ˆå™¨è¾“å…¥å›¾ä¸­çš„Forwarding ä¸­çš„å¤–ç½‘åœ°å€å°±å¯ä»¥è®¿é—®æˆ‘ä»¬çš„å†…ç½‘äº†ã€‚å¦‚æœå‡ºç°ä¸‹å›¾æƒ…å†µä¸è¦æ…Œå¼ ï¼Œè¿™æ˜¯æ­£å¸¸æƒ…å†µã€‚  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105903.png" style="zoom:50%;" />  è¿™ä»£è¡¨natappå®¢æˆ·ç«¯å·²ç»è¿æ¥æˆåŠŸ,ä½ æœ¬åœ°ç«¯å£çš„WebæœåŠ¡(nginx,iisç­‰)æ²¡æœ‰å¼€å¯æˆ–è€…ç«¯å£ä¸æ­£ç¡®.æ¯”å¦‚ Tomatçš„é»˜è®¤ç«¯å£æ˜¯ 8080.åˆ™éœ€è¦åœ¨éš§é“é…ç½®å¤„,å°†æœ¬åœ°æ”¹ä¸º8080,ä¿å­˜åé‡å¯å®¢æˆ·ç«¯.ç”¨æµè§ˆå™¨æ‰“å¼€ http://127.0.0.1 æ¥ç¡®è®¤å·²å¼€å¯webæœåŠ¡ (ä¸è¾“å…¥ç«¯å£ä»£è¡¨80)  <img src="https://mizhuo-1259163026.cos.ap-chengdu.myqcloud.com/20191031105920.png" style="zoom:50%;" /></li></ul></li></ul><p><strong>åˆ°è¿™é‡Œæˆ‘ä»¬çš„è°ƒè¯•ç¯å¢ƒå°±å·²ç»OKäº†ï¼Œä¸‹ä¸€æ­¥å°±å¯ä»¥å¼€å§‹æ¥å…¥å’±ä»¬çš„å¾®ä¿¡å…¬ä¼—å·äº†ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> å¾®ä¿¡å…¬ä¼—å· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2ç³»åˆ—ã€ä¸‰ã€‘</title>
      <link href="/DB2%E7%B3%BB%E5%88%97%E3%80%90%E4%B8%89%E3%80%91/"/>
      <url>/DB2%E7%B3%BB%E5%88%97%E3%80%90%E4%B8%89%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>æ—¥å¸¸ä½¿ç”¨DB2æ—¶ï¼Œæ€»ä¼šå‡ºç°å„ç§å„æ ·çš„é”™è¯¯ï¼Œè€Œæ•°æ®åº“åªä¼šæç¤ºä¸€ä¸ªé”™è¯¯ç æˆ–é”™è¯¯çŠ¶æ€ï¼Œå¾ˆéš¾ç›´è§‚çš„çŸ¥é“é”™è¯¯çš„åŸå› ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹é”™è¯¯ç å¯¹åº”çš„åŸå› ,æ–¹ä¾¿æŸ¥è¯¢é—®é¢˜ã€‚</p><span id="more"></span><table><thead><tr><th align="center">SQLCODE(é”™è¯¯ç )</th><th align="center">SQLSTATE(é”™è¯¯çŠ¶æ€)</th><th align="center">Description(è¯´æ˜)</th></tr></thead><tbody><tr><td align="center">000</td><td align="center">00000</td><td align="center">SQLè¯­å¥æˆåŠŸå®Œæˆ</td></tr><tr><td align="center">01xxx</td><td align="center"></td><td align="center">SQLè¯­å¥æˆåŠŸå®Œæˆ,ä½†æ˜¯æœ‰è­¦å‘Š</td></tr><tr><td align="center">+012</td><td align="center">01545</td><td align="center">æœªé™å®šçš„åˆ—åè¢«è§£é‡Šä¸ºä¸€ä¸ªæœ‰ç›¸äº’å…³ç³»çš„å¼•ç”¨</td></tr><tr><td align="center">+098</td><td align="center">01568</td><td align="center">åŠ¨æ€SQLè¯­å¥ç”¨åˆ†å·ç»“æŸ</td></tr><tr><td align="center">+100</td><td align="center">02000</td><td align="center">æ²¡æœ‰æ‰¾åˆ°æ»¡è¶³SQLè¯­å¥çš„è¡Œ</td></tr><tr><td align="center">+110</td><td align="center">01561</td><td align="center">ç”¨DATACAPTUREå®šä¹‰çš„è¡¨çš„æ›´æ–°æ“ä½œä¸èƒ½å‘é€åˆ°åŸæ¥çš„å­ç³»ç»Ÿ</td></tr><tr><td align="center">+111</td><td align="center">01590</td><td align="center">ä¸º2å‹ç´¢å¼•è®¾ç½®äº†SUBPAGESè¯­å¥</td></tr><tr><td align="center">+117</td><td align="center">01525</td><td align="center">è¦æ’å…¥çš„å€¼çš„ä¸ªæ•°ä¸ç­‰äºè¢«æ’å…¥è¡¨çš„åˆ—æ•°</td></tr><tr><td align="center">+162</td><td align="center">01514</td><td align="center">æŒ‡å®šçš„è¡¨ç©ºé—´è¢«ç½®ä¸ºæ£€æŸ¥æŒ‚èµ·çŠ¶æ€</td></tr><tr><td align="center">+203</td><td align="center">01552</td><td align="center">ä½¿ç”¨éå”¯ä¸€çš„åå­—æ¥è§£å†³å‘½åçš„é™å®šåˆ—</td></tr><tr><td align="center">+204</td><td align="center">01532</td><td align="center">å‘½åçš„å¯¹è±¡æœªåœ¨DB2ä¸­å®šä¹‰</td></tr><tr><td align="center">+206</td><td align="center">01533</td><td align="center">å‘½åçš„åˆ—ä¸åœ¨SQLè¯­å¥ä¸­æŒ‡å®šçš„ä»»ä½•è¡¨ä¸­å­˜åœ¨</td></tr><tr><td align="center">+218</td><td align="center">01537</td><td align="center">å› ä¸ºSQLè¯­å¥å¼•ç”¨ä¸€ä¸ªè¿œç¨‹å¯¹è±¡,ä¸èƒ½ä¸ºè¯¥SQLè¯­å¥æ‰§è¡ŒEXPLAIN</td></tr><tr><td align="center">+219</td><td align="center">01532</td><td align="center">å‘½åçš„PLANTABLEä¸å­˜åœ¨</td></tr><tr><td align="center">+220</td><td align="center">01546</td><td align="center">ä¸æ­£ç¡®å®šä¹‰PLANTABLE,æ£€æŸ¥å‘½ååˆ—çš„å®šä¹‰</td></tr><tr><td align="center">+236</td><td align="center">01005</td><td align="center">SQLDAä¸­çš„SQLNçš„å€¼è‡³å°‘åº”äºæ‰€æè¿°çš„åˆ—çš„ä¸ªæ•°ä¸€æ ·å¤§</td></tr><tr><td align="center">+237</td><td align="center">01594</td><td align="center">è‡³å°‘æœ‰ä¸€ä¸ªè¢«æè¿°çš„åˆ—åº”è¯¥æ˜¯å•å€¼ç±»å‹,å› æ­¤æ‰©å±•çš„SQLVARæ¡ç›®éœ€è¦å¦å¤–çš„ç©ºé—´</td></tr><tr><td align="center">+238</td><td align="center">01005</td><td align="center">è‡³å°‘åº”æœ‰ä¸€ä¸ªè¢«æè¿°çš„åˆ—æ˜¯ä¸€ä¸ªLOB,å› æ­¤æ‰©å±•çš„SQLVARæ¡ç›®éœ€è¦å¦å¤–çš„ç©ºé—´</td></tr><tr><td align="center">+239</td><td align="center">01005</td><td align="center">è‡³å°‘åº”æœ‰ä¸€ä¸ªè¢«æè¿°çš„åˆ—åº”æ˜¯å•å€¼ç±»å‹,å› æ­¤æ‰©å±•çš„SQLVARæ¡ç›®éœ€è¦å¦å¤–çš„ç©ºé—´</td></tr><tr><td align="center">+304</td><td align="center">01515</td><td align="center">è¯¥å€¼ä¸èƒ½è¢«åˆ†é…ç»™å®¿ä¸»å˜é‡,å› ä¸ºè¯¥å€¼ä¸å†æ•°æ®ç±»å‹çš„èŒƒå›´ä¹‹å†…</td></tr><tr><td align="center">+331</td><td align="center">01520</td><td align="center">ä¸èƒ½è¢«ç¿»è¯‘çš„å­—ç¬¦ä¸²,å› æ­¤è¢«è®¾ç½®ä¸ºNULL</td></tr><tr><td align="center">+339</td><td align="center">01569</td><td align="center">ç”±äºä¸DB22.2ç‰ˆæœ¬çš„å­ç³»ç»Ÿè¿æ¥,æ‰€ä»¥å¯èƒ½å­˜åœ¨å­—ç¬¦è½¬æ¢é—®é¢˜</td></tr><tr><td align="center">+394</td><td align="center">01629</td><td align="center">ä½¿ç”¨ä¼˜åŒ–æç¤ºæ¥é€‰æ‹©è®¿é—®è·¯å¾„</td></tr><tr><td align="center">+395</td><td align="center">01628</td><td align="center">è®¾ç½®äº†æ— æ•ˆçš„ä¼˜åŒ–æç¤º,åŸå› ä»£ç æŒ‡å®šäº†ä¸ºä»€ä¹ˆ,å¿½ç•¥ä¼˜åŒ–æç¤º</td></tr><tr><td align="center">+402</td><td align="center">01521</td><td align="center">æœªçŸ¥çš„ä½ç½®</td></tr><tr><td align="center">+403</td><td align="center">01522</td><td align="center">æœ¬åœ°ä¸å­˜åœ¨CREATALIASå¯¹è±¡</td></tr><tr><td align="center">+434</td><td align="center">01608</td><td align="center">åœ¨DB2æœªæ¥å‘å¸ƒçš„ç‰ˆæœ¬ä¸­å°†ä¸æ”¯æŒæŒ‡å®šçš„ç‰¹æ€§,IBMå»ºè®®ä½ åœæ­¢ä½¿ç”¨è¿™äº›ç‰¹æ€§</td></tr><tr><td align="center">+445</td><td align="center">01004</td><td align="center">å€¼è¢«CASTå‡½æ•°æˆªå–</td></tr><tr><td align="center">+462</td><td align="center">01Hxx</td><td align="center">ç”±ç”¨æˆ·å®šä¹‰çš„å‡½æ•°æˆ–å­˜å‚¨è¿‡ç¨‹å‘å‡ºçš„è­¦å‘Š</td></tr><tr><td align="center">+464</td><td align="center">01609</td><td align="center">å‘½åçš„å­˜å‚¨è¿‡ç¨‹è¶…å‡ºäº†å®ƒå¯èƒ½è¿”å›çš„æŸ¥è¯¢ç»“æœé›†çš„ä¸ªæ•°é™åˆ¶</td></tr><tr><td align="center">+466</td><td align="center">01610</td><td align="center">æŒ‡å®šç”±å‘½åçš„å­˜å‚¨è¿‡ç¨‹è¿”å›çš„æŸ¥è¯¢ç»“æœé›†çš„ä¸ªæ•°.æˆåŠŸå®Œæˆ</td></tr><tr><td align="center">+494</td><td align="center">01614</td><td align="center">ç”±å­˜å‚¨è¿‡ç¨‹è¿”å›çš„ç»“æœé›†çš„ä¸ªæ•°è¶…è¿‡äº†ç”±ASSOCIATELOCATORSè¯­å¥æŒ‡å®šçš„ç»“æœé›†å®šä½å™¨çš„ä¸ªæ•°</td></tr><tr><td align="center">+495</td><td align="center">01616</td><td align="center">å› ä¸ºå€’å°SQLçš„æˆæœ¬ä¼°ç®—è¶…å‡ºäº†åœ¨ELSTä¸­æŒ‡å®šçš„è­¦å‘Šé˜€å€¼,æ‰€ä»¥å‘å‡ºè­¦å‘Š</td></tr><tr><td align="center">+535</td><td align="center">01591</td><td align="center">è¯·æ±‚ä¸€ä¸ªä¸»å¥çš„å®šä½æ›´æ–°,æˆ–è¯·æ±‚ä¸€ä¸ªä½¿ç”¨è‡ªæˆ‘å¼•å‡ºçº¦æŸçš„è¡¨çš„åˆ é™¤æ“ä½œ</td></tr><tr><td align="center">+541</td><td align="center">01543</td><td align="center">å‘½åå¤–å¥æ˜¯ä¸€ä¸ªé‡å¤çš„å¼•ç”¨çº¦æŸ</td></tr><tr><td align="center">+551</td><td align="center">01548</td><td align="center">å‘½åçš„æˆæƒIDç¼ºå°‘åœ¨å‘½åçš„DB2å¯¹è±¡ä¸Šæ‰§è¡Œå‘½åæ“ä½œçš„æƒé™</td></tr><tr><td align="center">+552</td><td align="center">01542</td><td align="center">å‘½åçš„æˆæƒIDç¼ºå°‘æ‰§è¡Œå‘½åæ“ä½œçš„æƒé™</td></tr><tr><td align="center">+558</td><td align="center">01516</td><td align="center">å·²ç»è¢«æˆæƒè¯¥PUBLIC,å› æ­¤WITHGRANTOPTIONä¸å¯ç”¨</td></tr><tr><td align="center">+561</td><td align="center">01523</td><td align="center">å¯¹ALTERREFERENCESINDEXå’ŒTRIGGERç‰¹æƒ,PUBLICATALLLOCATIONæ— æ•ˆ</td></tr><tr><td align="center">+562</td><td align="center">01560</td><td align="center">å› ä¸ºGRANTEEå·²ç»æ‹¥æœ‰è¿™äº›ç‰¹æƒ,æ‰€ä»¥ä¸€ä¸ªæˆ–æ›´å¤šçš„ç‰¹æƒè¢«å¿½ç•¥</td></tr><tr><td align="center">+585</td><td align="center">01625</td><td align="center">æ¨¡å¼åæŒ‡å®šäº†ä¸æ­¢ä¸€æ¬¡</td></tr><tr><td align="center">+599</td><td align="center">01596</td><td align="center">æ²¡æœ‰ä¸ºé•¿å­—ç¬¦æ•°æ®ç±»å‹(BLOB,CLOBå’ŒDBCLOB)å»ºç«‹æ¯”è¾ƒå‡½æ•°</td></tr><tr><td align="center">+610</td><td align="center">01566</td><td align="center">ç”±äºå»ºç«‹äº†ä¸€ä¸ªæŒ‡å®šä¸ºDEFERYESçš„ç´¢å¼•,æŒ‡å®šçš„å¯¹è±¡å¤„äºPENDINGçŠ¶æ€,æˆ–è€…å› ä¸ºä½¿ç”¨äº†ALTERINDEXæ”¹å˜å…³é”®å€¼çš„èŒƒå›´,æ‰€ä»¥æŒ‡å®šçš„å¯¹è±¡å¤„äºPENDINGçŠ¶æ€</td></tr><tr><td align="center">+625</td><td align="center">01518</td><td align="center">å› ä¸ºåˆ é™¤äº†ä¸»å¥ç´¢å¼•,æ‰€ä»¥è¡¨å®šä¹‰è¢«æ ‡æ³¨ä¸ºä¸å®Œæ•´</td></tr><tr><td align="center">+626</td><td align="center">01529</td><td align="center">åˆ é™¤äº†åŠ å¼ºUNIQUEçº¦æŸçš„ç´¢å¼•,å”¯ä¸€æ€§ä¸åœ¨è¢«åŠ å¼º</td></tr><tr><td align="center">+645</td><td align="center">01528</td><td align="center">å› ä¸ºå»ºç«‹çš„ç´¢å¼•ä¸­æ²¡æœ‰åŒ…å«NULL,æ‰€ä»¥WHERENOTNULLè¢«å¿½ç•¥</td></tr><tr><td align="center">+650</td><td align="center">01538</td><td align="center">ä¸èƒ½æ›´æ”¹æˆ–è€…å»ºç«‹å·²å‘½åçš„è¡¨ä¸ºä»å±è¡¨</td></tr><tr><td align="center">+653</td><td align="center">01551</td><td align="center">åœ¨å·²æŒ‡å®šçš„åˆ†åŒºè¡¨ç©ºé—´ä¸­å°šæ²¡æœ‰å»ºç«‹æŒ‡å®šçš„åˆ†åŒºç´¢å¼•,æ‰€ä»¥åˆ†åŒºç´¢å¼•ä¸å¯å¾—</td></tr><tr><td align="center">+655</td><td align="center">01597</td><td align="center">ä¸ºCREATEæˆ–ALTERSTOGROUPè¯­å¥æŒ‡å®šç‰¹å®šæˆ–è€…éç‰¹å®šçš„å·ID,åœ¨DB2è¾ƒæ–°å‘å¸ƒçš„ç‰ˆæœ¬ä¸­(ç‰ˆæœ¬6ä»¥å)å°†ä¸å†æ”¯æŒä»–ä»¬</td></tr><tr><td align="center">+658</td><td align="center">01600</td><td align="center">å½“å»ºç«‹ç›®å½•ç´¢å¼•æ—¶,ä¸èƒ½æŒ‡å®šSUBPAGESè¯­å¥,SUBPAGESå°†è¢«å¿½ç•¥,å¹¶ç¼ºçœä¸º1</td></tr><tr><td align="center">+664</td><td align="center">01540</td><td align="center">åˆ†åŒºç´¢å¼•çš„é™åˆ¶å…³é”®å­—è¶…å‡ºäº†æœ€å¤§å€¼</td></tr><tr><td align="center">+738</td><td align="center">01530</td><td align="center">å·²å‘½åçš„å¯¹è±¡çš„æ›´æ”¹å¯èƒ½åƒåªè¯»ç³»ç»Ÿä¸­å¯¹è±¡çš„æ”¹å˜è¦æ±‚ä¸€æ ·</td></tr><tr><td align="center">+799</td><td align="center">0157</td><td align="center">SETè¯­å¥ä¸­å¼•ç”¨çš„ç‰¹å®šå¯„å­˜å™¨ä¸å­˜åœ¨,å°†å¿½ç•¥SETè¯·æ±‚</td></tr><tr><td align="center">+802</td><td align="center">01519</td><td align="center">æ•°æ®æº¢å‡ºæˆ–è€…å› é™¤æ³•å¼‚å¸¸è€Œå¼•èµ·çš„æ•°æ®å¼‚å¸¸é”™è¯¯</td></tr><tr><td align="center">+806</td><td align="center">01553</td><td align="center">ISOLATION(RR)ä¸LOCKSIZEPAGEå†²çª</td></tr><tr><td align="center">+807</td><td align="center">01554</td><td align="center">ç”±äºåè¿›åˆ¶ä¹˜æ³•å¯¼è‡´æº¢å‡º</td></tr><tr><td align="center">+863</td><td align="center">01539</td><td align="center">è¿æ¥æˆåŠŸ,ä½†æ˜¯åªæ”¯æŒSBCS</td></tr><tr><td align="center">+2000</td><td align="center">56094</td><td align="center">SUBPAGESä¸ç­‰äº1çš„1å‹ç´¢å¼•ä¸èƒ½æˆä¸ºæ•°æ®å…±äº«ç¯å¢ƒä¸­çš„ç¼“å†²æ± ç»„ä¾èµ–è€…</td></tr><tr><td align="center">+2002</td><td align="center">01624</td><td align="center">å› ä¸ºæŒ‡å®šçš„ç¼“å†²æ± ä¸å…è®¸è¶…é«˜é€Ÿç¼“å­˜,GNPCACHEæŒ‡å®šè¢«å¿½ç•¥</td></tr><tr><td align="center">+2007</td><td align="center">01602</td><td align="center">å› ä¸ºDB2å­ç³»ç»Ÿçš„å‚æ•°ç¦ç”¨â€œæç¤º(hiats)â€æ‰€ä»¥ä¸èƒ½æŒ‡å®šä¼˜åŒ–æç¤º</td></tr><tr><td align="center">+30100</td><td align="center">01558</td><td align="center">åˆ†å¸ƒå¼åè®®é”™è¯¯è¢«æ£€æµ‹åˆ°,æä¾›åŸæ¥çš„SQLCODEå’ŒSQLSTATE</td></tr><tr><td align="center">-007</td><td align="center">42601</td><td align="center">SQLè¯­å¥ä¸­ç”±éæ³•å­—ç¬¦</td></tr><tr><td align="center">-010</td><td align="center">42603</td><td align="center">å­—ç¬¦ä¸²å¸¸é‡éæ­£å¸¸ç»ˆæ­¢;æ£€æŸ¥åˆ°æœ‰é—æ¼çš„å¼•å·æ ‡å¿—</td></tr><tr><td align="center">-029</td><td align="center">42601</td><td align="center">éœ€è¦INTOè¯­å¥</td></tr><tr><td align="center">-060</td><td align="center">42815</td><td align="center">æŸç‰¹å®šæ•°æ®ç±»å‹çš„é•¿åº¦æˆ–è€…æ ‡é‡è§„èŒƒæ— æ•ˆ</td></tr><tr><td align="center">-084</td><td align="center">42612</td><td align="center">ä¸èƒ½æ‰§è¡ŒSQLè¯­å¥,å› ä¸ºè¯¥è¯­å¥å¯¹åŠ¨æ€SQLæ— æ•ˆæˆ–è€…å¯¹OS&#x2F;390çš„DB2æ— æ•ˆ</td></tr><tr><td align="center">-097</td><td align="center">42601</td><td align="center">åœ¨å•ä½ç±»å‹ã€ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°ä»¥åŠè¿‡ç¨‹ä¸­ä¸èƒ½ä½¿ç”¨å¸¦æœ‰CASTçš„LONGVARCHARæˆ–LONGVARGRAPHIC</td></tr><tr><td align="center">-101</td><td align="center">54001</td><td align="center">SQLè¯­å¥è¶…å‡ºäº†å·²ç¡®å®šçš„DB2é™åˆ¶:ä¾‹å¦‚,è¡¨çš„æ•°ç›®å¤ªå¤š,è¯­å¥ä¸­çš„å­—èŠ‚å¤ªå¤š</td></tr><tr><td align="center">-102</td><td align="center">54002</td><td align="center">å­—ç¬¦ä¸²å¸¸é‡å¤ªé•¿</td></tr><tr><td align="center">-103</td><td align="center">42604</td><td align="center">æ— æ•ˆæ•°å­¦æ–‡å­—</td></tr><tr><td align="center">-104</td><td align="center">42601</td><td align="center">SQLè¯­å¥ä¸­é‡åˆ°éæ³•ç¬¦å·</td></tr><tr><td align="center">-105</td><td align="center">42604</td><td align="center">æ— æ•ˆçš„å­—ç¬¦ä¸²æ ¼å¼;é€šå¸¸å¼•ç”¨ä¸€ä¸ªæ ¼å¼ä¸æ­£ç¡®çš„å›¾å½¢å­—ç¬¦ä¸²</td></tr><tr><td align="center">-107</td><td align="center">42622</td><td align="center">å¯¹è±¡åå¤ªé•¿</td></tr><tr><td align="center">-108</td><td align="center">42601</td><td align="center">RENAMEè¯­å¥ä¸­æŒ‡å®šçš„åå­—æœ‰é”™è¯¯,ä¸èƒ½ä½¿ç”¨é™å®šè¯</td></tr><tr><td align="center">-109</td><td align="center">42601</td><td align="center">æŒ‡å®šäº†æ— æ•ˆè¯­å¥;ä¾‹å¦‚CREATEVIEWä¸èƒ½åŒ…å«ORDERBYè¯­å¥</td></tr><tr><td align="center">-110</td><td align="center">42606</td><td align="center">é‡åˆ°äº†æ— æ•ˆçš„åå…­è¿›åˆ¶çš„æ–‡å­—</td></tr><tr><td align="center">-111</td><td align="center">42901</td><td align="center">æŒ‡å®šçš„åˆ—å‡½æ•°æ²¡æœ‰ç»™å‡ºåˆ—å</td></tr><tr><td align="center">-112</td><td align="center">42607</td><td align="center">æ— æ•ˆçš„åˆ—å‡½æ•°è¯­æ³•;åˆ—å‡½æ•°ä¸èƒ½è¿è¡Œä¸å…¶ä»–çš„åˆ—å‡½æ•°ä¹‹ä¸Š</td></tr><tr><td align="center">-113</td><td align="center">42602</td><td align="center">é‡åˆ°æ— æ•ˆå­—ç¬¦</td></tr><tr><td align="center">-114</td><td align="center">42961</td><td align="center">è¯¥è¯­å¥çš„ä½ç½®åç§°å¿…é¡»ä¸å½“å‰æœåŠ¡å™¨åŒ¹é…,ä½†æ˜¯å´æ²¡æœ‰åŒ¹é…</td></tr><tr><td align="center">-115</td><td align="center">42601</td><td align="center">å› ä¸ºæ¯”è¾ƒè¿ç®—ç¬¦æ²¡æœ‰ä¼´ç€ä¸€ä¸ªè¡¨è¾¾å¼æˆ–è€…åˆ—è¡¨,é‡åˆ°äº†æ— æ•ˆè°“è¯</td></tr><tr><td align="center">-117</td><td align="center">42802</td><td align="center">å¾…æ’å…¥çš„æ•°å€¼çš„ä¸ªæ•°äºè¢«æ’å…¥çš„è¡Œä¸­çš„åˆ—æ•°ä¸ç›¸ç­‰</td></tr><tr><td align="center">-118</td><td align="center">42902</td><td align="center">æ•°æ®ä¿®æ”¹è¯­å¥(UPDATEæˆ–DELETE)å’ŒFROMè¯­å¥ä¸­çš„è¡¨å’Œè§†å›¾å‘½åä¸åˆæ³•</td></tr><tr><td align="center">-119</td><td align="center">42803</td><td align="center">HAVINGè¯­å¥ä¸­çš„åˆ—çš„åˆ—è¡¨ä¸GROUPBYè¯­å¥ä¸­çš„åˆ—åˆ—è¡¨ä¸åŒ¹é…</td></tr><tr><td align="center">-120</td><td align="center">42903</td><td align="center">ä¸å…è®¸WHEREè¯­å¥ã€SETè¯­å¥ã€VALUESè¯­å¥æˆ–è€…SETASSIGNMENTè¯­å¥å¼•ç”¨åˆ—å‡½æ•°</td></tr><tr><td align="center">-121</td><td align="center">42701</td><td align="center">åœ¨INSERTæˆ–UPDATEè¯­å¥ä¸­,æŸä¸€åˆ—è¢«éæ³•å¼•ç”¨äº†ä¸¤æ¬¡</td></tr><tr><td align="center">-122</td><td align="center">42803</td><td align="center">éæ³•ä½¿ç”¨äº†åˆ—å‡½æ•°.å› ä¸ºæ²¡æœ‰ç”¨äºä¸€ä¸ªåˆ—å‡½æ•°çš„æ‰€æœ‰åˆ—ä¸å†GROUPBYè¯­å¥ä¸­</td></tr><tr><td align="center">-123</td><td align="center">42601</td><td align="center">ç‰¹å®šä½ç½®çš„å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸æ•°æˆ–è€…ä¸€ä¸ªå…³é”®è¯</td></tr><tr><td align="center">-125</td><td align="center">42805</td><td align="center">ORDERBYè¯­å¥ä¸­æŒ‡å®šäº†æ— æ•ˆæ•°å­—,è¯¥æ•°å­—è¦ä¹ˆå°äº1è¦ä¹ˆå¤§äºé€‰å®šçš„åˆ—æ•°</td></tr><tr><td align="center">-126</td><td align="center">42829</td><td align="center">ä¸èƒ½ä¸ºä¸€ä¸ªUPDATEè¯­å¥æŒ‡å®šORDERBYè¯­å¥</td></tr><tr><td align="center">-127</td><td align="center">42905</td><td align="center">åœ¨å­é€‰æ‹©ä¸­DISTINCTåªèƒ½æŒ‡å®šä¸€æ¬¡</td></tr><tr><td align="center">-128</td><td align="center">42601</td><td align="center">SQLè°“è¯ä¸­NULLä½¿ç”¨ä¸å½“</td></tr><tr><td align="center">-129</td><td align="center">54004</td><td align="center">SQLè¯­å¥ä¸­åŒ…å«çš„è¡¨å¤šäº15ä¸ª</td></tr><tr><td align="center">-130</td><td align="center">22019</td><td align="center">ESCAPEè¯­å¥å¿…é¡»ä¸ºä¸€ä¸ªå­—ç¬¦</td></tr><tr><td align="center">22025</td><td align="center"></td><td align="center">æ— æ•ˆçš„ESCAPEæ¨¡å¼</td></tr><tr><td align="center">-131</td><td align="center">42818</td><td align="center">LIKEè°“è¯åªèƒ½ç”¨äºå­—ç¬¦æ•°æ®</td></tr><tr><td align="center">-132</td><td align="center">42824</td><td align="center">LIKEè¯­å¥ã€ESCAPEè¯­å¥ã€LOCATEå‡½æ•°æˆ–POSSTRå‡½æ•°ä¸­æœ‰æ— æ•ˆè¿ç®—å¯¹è±¡</td></tr><tr><td align="center">-133</td><td align="center">42906</td><td align="center">æ— æ•ˆç›¸å…³å­æŸ¥è¯¢å¼•ç”¨</td></tr><tr><td align="center">-134</td><td align="center">42907</td><td align="center">å¤§äº255å­—èŠ‚çš„åˆ—è¢«ä¸æ­£ç¡®ä½¿ç”¨</td></tr><tr><td align="center">-136</td><td align="center">54005</td><td align="center">æ’åºå…³é”®å­—çš„é•¿åº¦å¤§äº4000å­—èŠ‚</td></tr><tr><td align="center">-137</td><td align="center">54006</td><td align="center">è¢«è¿æ¥çš„å­—ç¬¦ä¸²å¤ªå¤§;å­—ç¬¦çš„æœ€å¤§å€¼ä¸º32767;å›¾å½¢çš„æœ€å¤§å€¼ä¸º16382</td></tr><tr><td align="center">-138</td><td align="center">22011</td><td align="center">SUBSTRåˆ—å‡½æ•°çš„ç¬¬äºŒä¸ªæˆ–ç¬¬ä¸‰ä¸ªæ“ä½œç¬¦æ— æ•ˆ</td></tr><tr><td align="center">-142</td><td align="center">42612</td><td align="center">ä¸æ”¯æŒçš„SQLè¯­å¥.è¯¥è¯­å¥å¯èƒ½åœ¨å¦å¤–çš„RDBMSä¸Šæœ‰æ•ˆ,ä¹Ÿæœ‰å¯èƒ½åœ¨å…¶ä»–çš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆ(ä¾‹å¦‚,VALUESåªèƒ½åœ¨è§¦å‘å™¨ä¸­å‡ºç°)</td></tr><tr><td align="center">-144</td><td align="center">58003</td><td align="center">æŒ‡å®šçš„æ®µå·æ— æ•ˆ</td></tr><tr><td align="center">-147</td><td align="center">42809</td><td align="center">æŸä¸€æºå‡½æ•°ä¸èƒ½æ›´æ”¹.è¦æ”¹å˜æºå‡½æ•°,å¿…é¡»åˆ é™¤è¯¥æºå‡½æ•°å¹¶é‡æ–°å»ºç«‹ä»–</td></tr><tr><td align="center">-148</td><td align="center">42809</td><td align="center">RENAMEå’ŒALTERæ— æ³•æ‰§è¡Œ.RENAMEä¸èƒ½å¯¹è§†å›¾æˆ–è€…æ´»åŠ¨RI.STè¡¨é‡æ–°å‘½å.ALTERä¸èƒ½ç”¨äºæ”¹å˜åˆ—çš„é•¿åº¦,å› ä¸ºè¯¥åˆ—å‚ä¸äº†RIã€ä¸€ä¸ªç”¨æˆ·é€€å‡ºç¨‹åºã€å…¨å±€çš„ä¸´æ—¶è¡¨æˆ–æ‰“å¼€DATACAPTURECHANGESè¡¨çš„åˆ—</td></tr><tr><td align="center">-150</td><td align="center">42807</td><td align="center">è§¦å‘æ´»åŠ¨çš„INSERT,UPDATEæˆ–DELETEè¯­å¥ä¸­æŒ‡å®šäº†æ— æ•ˆçš„è§†å›¾æ›´æ–°æˆ–ä¸€ä¸ªæ— æ•ˆçš„è½¬æ¢è¡¨</td></tr><tr><td align="center">-151</td><td align="center">42808</td><td align="center">è¯•å›¾æ›´æ–°ä¸€ä¸ªä¸å¯æ›´æ–°çš„è§†å›¾çš„åˆ—ã€ä¸€ä¸ªDB2CATALOGè¡¨çš„åˆ—æˆ–è€…ä¸€ä¸ªROWIDåˆ—</td></tr><tr><td align="center">-152</td><td align="center">42809</td><td align="center">DROPCHECKè¯•å›¾åˆ é™¤ä¸€ä¸ªå‚ç…§çº¦æŸ,æˆ–è€…DROPFOREIGNè¯•å›¾åˆ é™¤ä¸€ä¸ªæ£€æŸ¥çº¦æŸ</td></tr><tr><td align="center">-153</td><td align="center">42908</td><td align="center">æ— æ•ˆçš„è§†å›¾å»ºç«‹è¯·æ±‚,å¿…é¡»ä¸ºæ—‹è½¬åˆ—è¡¨ä¸­åˆ—å‡ºçš„åˆ—å‡ºçš„æœªå‘½åçš„åˆ—æˆ–è€…é‡å¤çš„åˆ—æä¾›ä¸€ä¸ªåå­—</td></tr><tr><td align="center">-154</td><td align="center">42909</td><td align="center">ä¸èƒ½ç”¨UNIONã€UNIONALLæˆ–è€…ä¸€ä¸ªè¿œç¨‹è¡¨å»ºç«‹è§†å›¾</td></tr><tr><td align="center">-156</td><td align="center">42809</td><td align="center">åœ¨è§†å›¾ä¸Šå»ºç«‹ç´¢å¼•æ˜¯éæ³•çš„,æˆ–è€…åœ¨ALTERTABLE,CREATETRIGGER,DROPTABLEæˆ–LOCKTABLEè¯­å¥ä¸ŠæŒ‡å®šä¸€ä¸ªä¸æ˜¯è¡¨çš„å…¶ä»–å¯¹è±¡è¿™æ˜¯æ— æ•ˆçš„</td></tr><tr><td align="center">-157</td><td align="center">42810</td><td align="center">å¿…é¡»åœ¨FOREIGNKEYè¯­å¥ä¸­æŒ‡å®šä¸€ä¸ªè¡¨å</td></tr><tr><td align="center">-158</td><td align="center">42811</td><td align="center">è§†å›¾çš„åˆ—å’Œé€‰æ‹©åˆ—è¡¨ä¸­çš„åˆ—ä¸ç›¸åŒ¹é…</td></tr><tr><td align="center">-159</td><td align="center">42089</td><td align="center">æ— æ•ˆDROPæˆ–COMMENTONè¯­å¥</td></tr><tr><td align="center">-160</td><td align="center">42813</td><td align="center">å¯¹è¯¥è§†å›¾çš„WITHCHECKOPTIONæ— æ•ˆ</td></tr><tr><td align="center">-161</td><td align="center">44000</td><td align="center">æ­£è¢«æ›´æ–°çš„è§†å›¾WITHCHECKOPTIONè¯­å¥ä½¿å¾—è¿™è¡Œä¸èƒ½è¢«æ’å…¥æˆ–æ›´æ–°</td></tr><tr><td align="center">-164</td><td align="center">42502</td><td align="center">ç”¨æˆ·æ²¡æœ‰å»ºç«‹è¿™ä¸ªè§†å›¾çš„æƒé™</td></tr><tr><td align="center">-170</td><td align="center">42605</td><td align="center">æ ‡é‡å‡½æ•°æŒ‡å®šäº†æ— æ•ˆçš„å‚æ•°ä¸ªæ•°</td></tr><tr><td align="center">-171</td><td align="center">42815</td><td align="center">æ ‡é‡å‡½æ•°æŒ‡å®šäº†æ— æ•ˆçš„æ•°æ®ç±»å‹é•¿åº¦æˆ–è€…æ— æ•ˆæ•°å€¼</td></tr><tr><td align="center">-173</td><td align="center">42801</td><td align="center">åœ¨éåªè¯»å‹çš„æ¸¸æ ‡ä¸Šä¸èƒ½æŒ‡å®šéš”ç¦»çº§åˆ«UR</td></tr><tr><td align="center">-180</td><td align="center">22007</td><td align="center">DATEã€TIMEã€TIMESTAMPå€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ³•çš„è¯­æ³•ä¸å¯¹</td></tr><tr><td align="center">-181</td><td align="center">22001</td><td align="center">ä¸æ˜¯æœ‰æ•ˆçš„DATEã€TIMEã€TIMESTAMPå€¼</td></tr><tr><td align="center">-182</td><td align="center">42816</td><td align="center">åœ¨ç®—æœ¯è¡¨è¾¾å¼ä¸­çš„æ—¥æœŸ&#x2F;æ—¶é—´å€¼æ— æ•ˆ</td></tr><tr><td align="center">-183</td><td align="center">22008</td><td align="center">åœ¨ç®—æœ¯è¡¨è¾¾å¼ä¸­è¿”å›çš„æ—¥æœŸ&#x2F;æ—¶é—´å€¼çš„ç»“æœä¸åœ¨æœ‰æ•ˆå€¼çš„èŒƒå›´å†…</td></tr><tr><td align="center">-184</td><td align="center">42610</td><td align="center">æ²¡æœ‰æ­£ç¡®ä½¿ç”¨æ—¥æœŸ&#x2F;æ—¶é—´å€¼çš„å‚æ•°æ ‡è®°</td></tr><tr><td align="center">-185</td><td align="center">57008</td><td align="center">æ²¡æœ‰å®šä¹‰æœ¬å®šçš„æ—¥æœŸ&#x2F;æ—¶é—´å‡ºå£</td></tr><tr><td align="center">-186</td><td align="center">22505</td><td align="center">æ”¹å˜æœ¬å®šçš„æ—¥æœŸ&#x2F;æ—¶é—´å‡ºå£å¼•å‘è¿™ä¸ªç¨‹åºçš„é•¿åº¦æ— æ•ˆ</td></tr><tr><td align="center">-187</td><td align="center">22506</td><td align="center">MVSè¿”å›æ— æ•ˆçš„å½“å‰æ—¥æœŸ&#x2F;æ—¶é—´</td></tr><tr><td align="center">-188</td><td align="center">22503</td><td align="center">å­—ç¬¦ä¸²è¡¨ç¤ºæ— æ•ˆ</td></tr><tr><td align="center">-189</td><td align="center">22522</td><td align="center">æŒ‡å®šçš„ç¼–ç å­—ç¬¦é›†çš„IDæ— æ•ˆæˆ–æ²¡æœ‰å®šä¹‰</td></tr><tr><td align="center">-190</td><td align="center">42837</td><td align="center">ä¸èƒ½è±¡æ‰€è®¾å®šçš„é‚£æ ·æ”¹å˜(ALTER)åˆ—.åªèƒ½æ”¹å˜(ALTER)VARCHARåˆ—çš„é•¿åº¦</td></tr><tr><td align="center">-191</td><td align="center">22504</td><td align="center">å­—ç¬¦ä¸²ä¸­åŒ…å«äº†æ— æ•ˆçš„æ··åˆæ•°æ®</td></tr><tr><td align="center">-197</td><td align="center">42877</td><td align="center">å½“ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨è¢«è”åˆåœ¨ä¸€èµ·æ’åºæ—¶,é™å®šçš„åˆ—åä¸èƒ½åœ¨ORDERBYè¯­å¥ä¸­ä½¿ç”¨</td></tr><tr><td align="center">-198</td><td align="center">42617</td><td align="center">è¯•å›¾å¯¹ç©ºçš„å­—ç¬¦ä¸²å‘å¸ƒä¸€ä¸ªPREPAREæˆ–EXECUTEIMMEDIATEè¯­å¥</td></tr><tr><td align="center">-199</td><td align="center">42601</td><td align="center">SQLè¯­å¥ä¸­ä½¿ç”¨äº†éæ³•å…³é”®è¯</td></tr><tr><td align="center">-203</td><td align="center">42702</td><td align="center">æ¨¡ç³Šåˆ—å¼•ç”¨</td></tr><tr><td align="center">-204</td><td align="center">42704</td><td align="center">æ²¡æœ‰å®šä¹‰çš„å¯¹è±¡å</td></tr><tr><td align="center">-205</td><td align="center">42703</td><td align="center">æŒ‡å®šçš„è¡¨çš„åˆ—åæ— æ•ˆ</td></tr><tr><td align="center">-206</td><td align="center">42703</td><td align="center">åˆ—åæ²¡æœ‰åœ¨FROMè¯­å¥æ‰€å¼•ç”¨çš„ä»»ä½•è¡¨ä¸­,æˆ–è€…æ²¡æœ‰åœ¨å®šä¹‰è§¦å‘å™¨æ‰€åœ¨çš„è¡¨ä¸­</td></tr><tr><td align="center">-208</td><td align="center">42707</td><td align="center">ä¸èƒ½ORDERBYæŒ‡å®šåˆ—,åº”ä¸ºè¯¥åˆ—ä¸åœ¨é€‰æ‹©åˆ—è¡¨ä¸­</td></tr><tr><td align="center">-212</td><td align="center">42712</td><td align="center">æŒ‡å®šçš„è¡¨ååœ¨è§¦å‘å™¨ä¸­ä¸å…è®¸å¤šæ¬¡ä½¿ç”¨,åªèƒ½ä½¿ç”¨ä¸€æ¬¡</td></tr><tr><td align="center">-214</td><td align="center">42822</td><td align="center">DISTINCTã€ORDERBYå¼•èµ·çš„æ— æ•ˆè¡¨è¾¾å¼</td></tr><tr><td align="center">-219</td><td align="center">42704</td><td align="center">å› ä¸ºPLAN_TABLEä¸å­˜åœ¨,EXPLAINæ— æ³•æ‰§è¡Œ</td></tr><tr><td align="center">-220</td><td align="center">55002</td><td align="center">é‡åˆ°æ— æ•ˆçš„PLAN_TABLEåˆ—</td></tr><tr><td align="center">-221</td><td align="center">55002</td><td align="center">å¦‚æœä¸ºPLAN_TABLEå®šä¹‰äº†å¯ä¾›é€‰æ‹©çš„åˆ—,é‚£ä¹ˆ,å¿…é¡»å®šä¹‰æ‰€æœ‰çš„åˆ—</td></tr><tr><td align="center">-229</td><td align="center">42708</td><td align="center">æŒ‡å®šçš„ç°åœºæ‰¾ä¸åˆ°</td></tr><tr><td align="center">-240</td><td align="center">428B4</td><td align="center">LOCKTABLEè¯­å¥çš„PARTå­å¥æ— æ•ˆ</td></tr><tr><td align="center">-250</td><td align="center">42718</td><td align="center">æ²¡æœ‰å®šä¹‰æœ¬åœ°ä½ç½®å</td></tr><tr><td align="center">-251</td><td align="center">42602</td><td align="center">è®°å·æ— æ•ˆ</td></tr><tr><td align="center">-300</td><td align="center">22024</td><td align="center">å®¿ä¸»å˜é‡æˆ–å‚æ•°ä¸­çš„å­—ç¬¦ä¸²ä¸æ˜¯ä»¥NULLä¸ºç»ˆæ­¢</td></tr><tr><td align="center">-301</td><td align="center">42895</td><td align="center">æ— æ•ˆçš„å®¿ä¸»å˜é‡æ•°æ®ç±»å‹</td></tr><tr><td align="center">-302</td><td align="center">22001</td><td align="center">è¾“å…¥çš„å˜é‡å€¼å¯¹æŒ‡å®šçš„åˆ—æ— æ•ˆ</td></tr><tr><td align="center">22003</td><td align="center"></td><td align="center">è¾“å…¥çš„å˜é‡å€¼å¯¹æŒ‡å®šçš„åˆ—è€Œè¨€å¤ªå¤§</td></tr><tr><td align="center">-303</td><td align="center">42806</td><td align="center">å› ä¸ºæ•°æ®ç±»å‹ä¸å…¼å®¹,ä¸èƒ½åˆ†é…æ•°å€¼</td></tr><tr><td align="center">-304</td><td align="center">22003</td><td align="center">å› ä¸ºæ•°æ®è¶…å‡ºäº†èŒƒå›´,ä¸èƒ½åˆ†é…æ•°å€¼</td></tr><tr><td align="center">-305</td><td align="center">22002</td><td align="center">æ²¡æœ‰NULLæŒ‡ç¤ºç¬¦å˜é‡</td></tr><tr><td align="center">-309</td><td align="center">22512</td><td align="center">å› ä¸ºå¼•ç”¨çš„å®¿ä¸»å˜é‡è¢«è®¾ç½®æˆNULL,æ‰€ä»¥è°“è¯æ— æ•ˆ</td></tr><tr><td align="center">-310</td><td align="center">22501</td><td align="center">åè¿›åˆ¶çš„å®¿ä¸»å˜é‡æˆ–å‚æ•°åŒ…å«éåè¿›åˆ¶æ•°æ®</td></tr><tr><td align="center">-311</td><td align="center">22501</td><td align="center">è¾“å…¥çš„å®¿ä¸»å˜é‡é•¿åº¦æ— æ•ˆ,æˆ–è€…æ—¶è´Ÿå€¼æˆ–è€…å¤ªå¤§</td></tr><tr><td align="center">-312</td><td align="center">42618</td><td align="center">æ²¡æœ‰å®šä¹‰å®¿ä¸»å˜é‡æˆ–è€…å®¿ä¸»å˜é‡ä¸å¯ç”¨</td></tr><tr><td align="center">-313</td><td align="center">07001</td><td align="center">å®¿ä¸»å˜é‡çš„ä¸ªæ•°ä¸ç­‰äºå‚æ•°æ ‡è¯†çš„ä¸ªæ•°</td></tr><tr><td align="center">-314</td><td align="center">42714</td><td align="center">æ¨¡ç³Šçš„å®¿ä¸»å˜é‡å¼•ç”¨</td></tr><tr><td align="center">-327</td><td align="center">22525</td><td align="center">åœ¨æœ€ååˆ†åŒºçš„å…³é”®å­—èŒƒå›´å†…,ä¸èƒ½æ’å…¥è¡Œ</td></tr><tr><td align="center">-330</td><td align="center">22021</td><td align="center">ä¸èƒ½æˆåŠŸçš„ç¿»è¯‘å­—ç¬¦ä¸²</td></tr><tr><td align="center">-331</td><td align="center">22021</td><td align="center">å­—ç¬¦ä¸²ä¸èƒ½åˆ†é…åˆ°å®¿ä¸»å˜é‡,å› ä¸ºå…¶ä¸èƒ½æˆåŠŸçš„è¢«ç¿»è¯‘</td></tr><tr><td align="center">-332</td><td align="center">57017</td><td align="center">ä¸èƒ½ä¸ºä¸¤ä¸ªå‘½åçš„ç¼–ç å­—ç¬¦é›†çš„IDå®šä¹‰ç¿»è¯‘è§„åˆ™</td></tr><tr><td align="center">-333</td><td align="center">56010</td><td align="center">å­ç±»å‹æ— æ•ˆå¯¼è‡´ç¿»è¯‘å¤±è´¥</td></tr><tr><td align="center">-338</td><td align="center">42972</td><td align="center">ONè¯­å¥æ— æ•ˆ,å¿…é¡»å¼•ç”¨è¿æ¥çš„åˆ—</td></tr><tr><td align="center">-339</td><td align="center">56082</td><td align="center">è®¿é—®DB22.2ç‰ˆæœ¬çš„å­ç³»ç»Ÿè¢«æ‹’ç»,åŸå› æ—¶ASCIIåˆ°EBCDICç¿»è¯‘ä¸èƒ½è¿›è¡Œ</td></tr><tr><td align="center">-350</td><td align="center">42962</td><td align="center">æ— æ•ˆçš„å¤§å¯¹è±¡è§„èŒƒ</td></tr><tr><td align="center">-351</td><td align="center">56084</td><td align="center">SELECTåˆ—è¡¨ä¸­æœ‰ä¸æ”¯æŒçš„æ•°æ®ç±»å‹</td></tr><tr><td align="center">-352</td><td align="center">56084</td><td align="center">è¾“å…¥åˆ—è¡¨ä¸­æœ‰ä¸æ”¯æŒçš„æ•°æ®ç±»å‹</td></tr><tr><td align="center">-355</td><td align="center">42993</td><td align="center">LOBåˆ—å¤ªå¤§,ä»¥è‡³ä¸èƒ½è¢«è®°å½•åœ¨æ—¥å¿—ä¸­</td></tr><tr><td align="center">-372</td><td align="center">428C1</td><td align="center">æ¯ä¸ªè¡¨åªå…è®¸æœ‰ä¸€ä¸ªROWIDåˆ—</td></tr><tr><td align="center">-390</td><td align="center">42887</td><td align="center">åœ¨ä¸Šä¸‹æ–‡ä¸­æŒ‡å®šçš„å‡½æ•°æ— æ•ˆ</td></tr><tr><td align="center">-392</td><td align="center">42855</td><td align="center">è‡ªä»å‰ä¸€æ¬¡FETCHä»¥æ¥,æŒ‡å®šæ¸¸æ ‡çš„SQLDAå·²è¢«ä¸æ°å½“çš„æ”¹å˜</td></tr><tr><td align="center">-396</td><td align="center">38505</td><td align="center">åœ¨æœ€åçš„è®¿é—®è¿‡ç¨‹ä¸­,è§†å›¾æ‰§è¡ŒSQLè¯­å¥</td></tr><tr><td align="center">-397</td><td align="center">428D3</td><td align="center">åœ¨æŸä¸€åˆ—ä¸Šä¸æ°å½“çš„æŒ‡å®šäº†GENERATEDå› ä¸ºè¯¥åˆ—ä¸æ˜¯ROWIDæ•°æ®ç±»å‹</td></tr><tr><td align="center">-398</td><td align="center">428D2</td><td align="center">ä¸ºæŸä¸€ä¸ªå®¿ä¸»å˜é‡è¯·æ±‚LOCATOR,ä½†æ˜¯è¯¥å®¿ä¸»å˜é‡ä¸æ˜¯ä¸€ä¸ªLOB</td></tr><tr><td align="center">-399</td><td align="center">22511</td><td align="center">åœ¨INSERTè¯­å¥ä¸­ä¸ºROWIDåˆ—æŒ‡å®šçš„å€¼æ— æ•ˆ</td></tr><tr><td align="center">-400</td><td align="center">54027</td><td align="center">åœ¨DB2ç¼–ç›®ä¸­å®šä¹‰çš„ç”¨æˆ·è‡ªå®šä¹‰ç´¢å¼•ä¸èƒ½è¶…è¿‡100ä¸ª</td></tr><tr><td align="center">-401</td><td align="center">42818</td><td align="center">ç®—æœ¯æ“ä½œç¬¦æˆ–æ¯”è¾ƒæ“ä½œç¬¦çš„æ“ä½œå¯¹è±¡ä¸æ˜¯å…¼å®¹çš„</td></tr><tr><td align="center">-402</td><td align="center">42819</td><td align="center">ç®—æœ¯å‡½æ•°ä¸èƒ½ç”¨äºå­—ç¬¦æˆ–æ—¥æœŸæ—¶é—´æ•°æ®</td></tr><tr><td align="center">-404</td><td align="center">22001</td><td align="center">SQLè¯­å¥æŒ‡å®šçš„å­—ç¬¦ä¸²å¤ªé•¿</td></tr><tr><td align="center">-405</td><td align="center">42820</td><td align="center">æ•°å€¼æ–‡å­—è¶…å‡ºäº†èŒƒå›´</td></tr><tr><td align="center">-406</td><td align="center">22003</td><td align="center">è®¡ç®—å‡ºçš„æˆ–è€…å€’å‡ºçš„æ•°å€¼è¶…å‡ºäº†èŒƒå›´</td></tr><tr><td align="center">-407</td><td align="center">23502</td><td align="center">ä¸èƒ½æŠŠNULLå€¼æ’åˆ°å®šä¹‰ä¸ºNOTNULLçš„åˆ—ä¸­</td></tr><tr><td align="center">-408</td><td align="center">42821</td><td align="center">æ•°å€¼ä¸èƒ½è¢«æ›´æ–°æˆ–æ’å…¥,å› ä¸ºä»–ä¸åˆ—çš„æ•°æ®ç±»å‹ä¸å…¼å®¹</td></tr><tr><td align="center">-409</td><td align="center">42607</td><td align="center">COUNTå‡½æ•°æŒ‡å®šçš„è¿ç®—å¯¹è±¡æ— æ•ˆ</td></tr><tr><td align="center">-410</td><td align="center">42820</td><td align="center">æµ®ç‚¹æ–‡å­—ç¬”30ä¸ªå­—ç¬¦çš„æœ€å¤§å…è®¸é•¿åº¦é•¿</td></tr><tr><td align="center">-411</td><td align="center">56040</td><td align="center">CURRENTSQLIDä½¿ç”¨æ— æ•ˆ</td></tr><tr><td align="center">-412</td><td align="center">42823</td><td align="center">åœ¨å­æŸ¥è¯¢çš„é€‰æ‹©åˆ—è¡¨ä¸­é‡åˆ°äº†å¤šä¸ªåˆ—</td></tr><tr><td align="center">-413</td><td align="center">22003</td><td align="center">å½“è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—å‹æ•°æ®ç±»å‹æ—¶,æ•°æ®æº¢å‡º</td></tr><tr><td align="center">-414</td><td align="center">42824</td><td align="center">LIKEè°“è¯ä¸èƒ½è¿è¡Œäºç”¨æ•°å­—æˆ–æ—¥æœŸæ—¶é—´ç±»å‹å®šä¹‰çš„åˆ—</td></tr><tr><td align="center">-415</td><td align="center">42825</td><td align="center">ä¸ºUNIONæ“ä½œæŒ‡å®šçš„é€‰æ‹©åˆ—è¡¨ä¸æ˜¯è”åˆå…¼å®¹çš„</td></tr><tr><td align="center">-416</td><td align="center">42907</td><td align="center">åŒ…å«UNIONæ“ä½œç¬¦çš„SQLè¯­å¥ä¸å…è®¸æœ‰é•¿çš„å­—ç¬¦ä¸²åˆ—</td></tr><tr><td align="center">-417</td><td align="center">42609</td><td align="center">ä¸¤å‚æ•°æ ‡è¯†ç¬¦ä½œä¸ºè¿ç®—å¯¹è±¡è¢«æŒ‡å®šåœ¨åŒä¸€è°“è¯çš„ä¸¤è¾¹</td></tr><tr><td align="center">-418</td><td align="center">42610</td><td align="center">å‚æ•°æ ‡è¯†ç¬¦ä½¿ç”¨æ— æ•ˆ</td></tr><tr><td align="center">-419</td><td align="center">42911</td><td align="center">åè¿›åˆ¶é™¤æ³•æ— æ•ˆ</td></tr><tr><td align="center">-420</td><td align="center">22018</td><td align="center">å­—ç¬¦ä¸²è‡ªå˜é‡å€¼ä¸ç¬¦åˆå‡½æ•°çš„è¦æ±‚</td></tr><tr><td align="center">-421</td><td align="center">42826</td><td align="center">UNIONæ“ä½œçš„é€‰æ‹©åˆ—è¡¨ä¸­æ²¡æœ‰æä¾›ç›¸åŒæ•°ç›®çš„åˆ—</td></tr><tr><td align="center">-423</td><td align="center">0F001</td><td align="center">ä¸ºLOBæˆ–ç»“æœé›†å®šä½å™¨æŒ‡å®šçš„å€¼æ— æ•ˆ</td></tr><tr><td align="center">-426</td><td align="center">2D528</td><td align="center">åœ¨ä¸å…è®¸æ›´æ–°çš„åº”ç”¨æœåŠ¡å™¨ä¸å…è®¸æ‰§è¡ŒCOMMITè¯­å¥</td></tr><tr><td align="center">-427</td><td align="center">2D529</td><td align="center">åœ¨ä¸å…è®¸æ›´æ–°çš„åº”ç”¨æœåŠ¡å™¨ä¸å…è®¸æ‰§è¡ŒROLLBACKè¯­å¥</td></tr><tr><td align="center">-430</td><td align="center">38503</td><td align="center">åœ¨ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°æˆ–å­˜å‚¨è¿‡ç¨‹ä¸­é‡åˆ°äº†é”™è¯¯</td></tr><tr><td align="center">-433</td><td align="center">22001</td><td align="center">æŒ‡å®šçš„å€¼å¤ªé•¿</td></tr><tr><td align="center">-435</td><td align="center">428B3</td><td align="center">æ— æ•ˆçš„åº”ç”¨å®šä¹‰çš„SQLSTATE</td></tr><tr><td align="center">-438</td><td align="center">xxxxx</td><td align="center">ä½¿ç”¨äº†RAISE_ERRORå‡½æ•°çš„åº”ç”¨å‘å‡ºäº†ä¸€ä¸ªé”™è¯¯</td></tr><tr><td align="center">-440</td><td align="center">42884</td><td align="center">å­˜å‚¨è¿‡ç¨‹æˆ–ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°çš„å‚æ•°åˆ—è¡¨å‚æ•°ä¸ªæ•°äºé¢„æœŸçš„ä¸ªæ•°ä¸åŒ¹é…</td></tr><tr><td align="center">-441</td><td align="center">42601</td><td align="center">ä¸æ ‡é‡å‡½æ•°ä¸€èµ·ä½¿ç”¨DISTINCTæˆ–ALLæ˜¯ä¸æ­£ç¡®çš„ç”¨æ³•</td></tr><tr><td align="center">-443</td><td align="center">42601</td><td align="center">æŒ‡å®šçš„å¤–éƒ¨å‡½æ•°è¿”å›é”™è¯¯çš„SQLSTATE</td></tr><tr><td align="center">-444</td><td align="center">42724</td><td align="center">ä¸è¢«ç§°ä¸ºå­˜å‚¨è¿‡ç¨‹æˆ–ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°æœ‰å…³çš„ç¨‹åºä¸èƒ½æ‰¾åˆ°</td></tr><tr><td align="center">-449</td><td align="center">42878</td><td align="center">å¯¹å­˜å‚¨è¿‡ç¨‹æˆ–ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°,CREATEæˆ–ALTERè¯­å¥ä¸æ­£ç¡®(ç¼ºå¤±#214#</td></tr><tr><td align="center">-450</td><td align="center">39501</td><td align="center">å­˜å‚¨è¿‡ç¨‹æˆ–ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°å†™å…¥å­˜å‚¨å™¨çš„å€¼è¶…è¿‡äº†å‚æ•°å£°æ˜çš„é•¿åº¦</td></tr><tr><td align="center">-451</td><td align="center">42815</td><td align="center">CREATEFUNCTIONä¸­æŒ‡å®šäº†ä¸æ­£ç¡®çš„æ•°æ®ç±»å‹</td></tr><tr><td align="center">-453</td><td align="center">42880</td><td align="center">ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ä¸­çš„RETURNSè¯­å¥æ— æ•ˆ</td></tr><tr><td align="center">-454</td><td align="center">42723</td><td align="center">æŒ‡å®šçš„å‡½æ•°è¯†åˆ«æ ‡è®°ä¸å·²å­˜åœ¨çš„å¦ä¸€å‡½æ•°çš„è¯†åˆ«æ ‡è®°å†²çª</td></tr><tr><td align="center">-455</td><td align="center">42882</td><td align="center">æ¨¡å¼åä¸æ¯”é…</td></tr><tr><td align="center">-456</td><td align="center">42710</td><td align="center">ä¸ºç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°æŒ‡å®šçš„å‡½æ•°åå·²ç»å­˜åœ¨</td></tr><tr><td align="center">-457</td><td align="center">42939</td><td align="center">ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°æˆ–ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹æ­£è¯•å›¾ä½¿ç”¨ç³»ç»Ÿä¸­å®šä¹‰çš„å‡½æ•°æˆ–è€…ç±»å‹æ‰€ç”¨çš„åç§°</td></tr><tr><td align="center">-458</td><td align="center">42883</td><td align="center">æ²¡æœ‰æ‰¾åˆ°å‡½æ•°</td></tr><tr><td align="center">-463</td><td align="center">39001</td><td align="center">ç‰¹å®šçš„å¤–éƒ¨ä¾‹ç¨‹è¿”å›æ— æ•ˆçš„SQLSTATE</td></tr><tr><td align="center">-469</td><td align="center">42886</td><td align="center">å‚æ•°å®šä¹‰ä¸ºOUTæˆ–INOUTçš„CALLè¯­å¥å¿…é¡»æä¾›å®¿ä¸»å˜é‡</td></tr><tr><td align="center">-470</td><td align="center">39002</td><td align="center">æŒ‡å®šäº†NULLå‚æ•°,ä½†æ˜¯è¯¥ä¾‹ç¨‹å´ä¸æ”¯æŒNULL</td></tr><tr><td align="center">-471</td><td align="center">55023</td><td align="center">å­˜å‚¨è¿‡ç¨‹æˆ–ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°å¤±è´¥:æä¾›åŸå› ä»£ç </td></tr><tr><td align="center">-472</td><td align="center">24517</td><td align="center">å¤–éƒ¨çš„å‡½æ•°ç¨‹åºä½¿æ¸¸æ ‡å¤„äºæ‰“å¼€çŠ¶æ€</td></tr><tr><td align="center">-473</td><td align="center">42918</td><td align="center">ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®ç±»å‹å‘½åä¸èƒ½å’Œç³»ç»Ÿå®šä¹‰çš„æ•°æ®ç±»å‹ä¸€æ ·</td></tr><tr><td align="center">-475</td><td align="center">42866</td><td align="center">ç»“æœç±»å‹ä¸èƒ½è¢«è½¬æ¢æˆRETURNSç±»å‹</td></tr><tr><td align="center">-476</td><td align="center">42725</td><td align="center">åœ¨å…¶æ¨¡å¼ä¸­è¯¥å‡½æ•°ä¸æ˜¯ç‹¬ä¸€æ— äºŒçš„</td></tr><tr><td align="center">-478</td><td align="center">42893</td><td align="center">ä¸èƒ½DROPæˆ–REVOKEç‰¹å®šçš„å¯¹è±¡,å› ä¸ºå…¶ä»–å¯¹è±¡ä¾èµ–äºè¯¥å¯¹è±¡</td></tr><tr><td align="center">-480</td><td align="center">51030</td><td align="center">ç›´åˆ°å­˜å‚¨è¿‡ç¨‹å·²ç»è¢«CALLå,DESCRIBEPROCEDUREå’ŒASSOCIATELOCATORSæ‰èƒ½è¢«å‘å¸ƒ</td></tr><tr><td align="center">-482</td><td align="center">51030</td><td align="center">å­˜å‚¨è¿‡ç¨‹ä¸è¿”å›åˆ°ä»»ä½•ä¸€ä¸ªå®šä½å™¨</td></tr><tr><td align="center">-483</td><td align="center">42885</td><td align="center">CREATEFUNCTIONè¯­å¥ä¸­çš„å‚æ•°ä¸ªæ•°ä¸æºå‡½æ•°ä¸­çš„å‚æ•°ä¸ªæ•°ä¸åŒ¹é…</td></tr><tr><td align="center">-487</td><td align="center">38001</td><td align="center">é€‰æ‹©äº†NOSQLé€‰é¡¹å»ºç«‹æŒ‡å®šçš„å­˜å‚¨è¿‡ç¨‹æˆ–ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°,ä½†å´è§†å›¾å‘å¸ƒSQLè¯­å¥</td></tr><tr><td align="center">-491</td><td align="center">42601</td><td align="center">CREATEFUNCTIONè¯­å¥æ— æ•ˆ,å› ä¸ºè¯¥è¯­å¥æ²¡æœ‰RETURNSè¯­å¥æˆ–è€…å› ä¸ºè¯¥è¯­å¥æ²¡æœ‰æŒ‡å®šæœ‰æ•ˆçš„SOURCEæˆ–è€…EXTERNALè¯­å¥</td></tr><tr><td align="center">-492</td><td align="center">42879</td><td align="center">æŒ‡å®šå‡½æ•°çš„æŒ‡å®šå‚æ•°çš„ä¸ªæ•°æœ‰é”™è¯¯</td></tr><tr><td align="center">-495</td><td align="center">57051</td><td align="center">è¯­å¥çš„ä¼°è®¡å¤„ç†å™¨æˆæœ¬è¶…å‡ºäº†èµ„æºé™åˆ¶</td></tr><tr><td align="center">-496</td><td align="center">51033</td><td align="center">è¯­å¥æ— æ³•æ‰§è¡Œ,å› ä¸ºå½“å‰æœåŠ¡å™¨ä¸è°ƒç”¨å­˜å‚¨è¿‡ç¨‹çš„æœåŠ¡å™¨ä¸åŒ</td></tr><tr><td align="center">-497</td><td align="center">54041</td><td align="center">æŒ‡å®šçš„æ•°æ®åº“è¶…è¿‡äº†32767OBIDçš„ä¸Šé™,æˆ–è€…CREATEDATABASEè¯­å¥ä½¿ä¹‹è¾¾åˆ°äº†32511DBIDçš„ä¸Šé™</td></tr><tr><td align="center">-499</td><td align="center">24516</td><td align="center">æŒ‡å®šçš„æ¸¸æ ‡å·²è¢«åˆ†é…åˆ°ç»“æœé›†,è¯¥ç»“æœé›†æ¥è‡ªå·²ç»æŒ‡å®šçš„å­˜å‚¨è¿‡ç¨‹</td></tr><tr><td align="center">-500</td><td align="center">24501</td><td align="center">å› ä¸ºè¿æ¥è¢«ç ´å,WITHHOLDæ¸¸æ ‡è¢«å…³é—­</td></tr><tr><td align="center">-501</td><td align="center">24501</td><td align="center">åœ¨è¯•å›¾è·å–æ•°æ®æˆ–å…³é—­ä¸€ä¸ªæ¸¸æ ‡å‰å¿…é¡»æ‰“å¼€ä¸€ä¸ªæ¸¸æ ‡</td></tr><tr><td align="center">-502</td><td align="center">24502</td><td align="center">åœ¨æ²¡æœ‰å…³é—­æ¸¸æ ‡å‰ä¸èƒ½å†æ¬¡æ‰“å¼€æ¸¸æ ‡</td></tr><tr><td align="center">-503</td><td align="center">42912</td><td align="center">å› ä¸ºåˆ—åœ¨æ¸¸æ ‡çš„FORUPDATEOFè¯­å¥ä¸­æ²¡æœ‰è¢«æŒ‡å®š,è¯¥æ¸¸æ ‡ç”¨äºè·å–è¯¥åˆ—,æ‰€ä»¥ä¸èƒ½æ›´æ–°è¯¥åˆ—</td></tr><tr><td align="center">-504</td><td align="center">34000</td><td align="center">ä¸èƒ½å¼•ç”¨ä¸€ä¸ªæ¸¸æ ‡,å› ä¸ºä»–ä¸æ˜¯å®šä¹‰åˆ°ç¨‹åºé‡Œçš„</td></tr><tr><td align="center">-507</td><td align="center">24501</td><td align="center">åœ¨è¯•å›¾æ›´æ–°æˆ–è€…åˆ é™¤WHERECURRENTOFå‰,å¿…é¡»æ‰“å¼€æ¸¸æ ‡</td></tr><tr><td align="center">-508</td><td align="center">24504</td><td align="center">å› ä¸ºè¢«å¼•ç”¨çš„æ¸¸æ ‡å½“å‰ä¸æ˜¯å¤„äºæ•°æ®è¡Œä¸Š,æ‰€ä»¥ä¸èƒ½è¢«æ›´æ–°æˆ–åˆ é™¤</td></tr><tr><td align="center">-509</td><td align="center">42827</td><td align="center">é™¤äº†åœ¨æ¸¸æ ‡ä¸ŠæŒ‡å®šçš„é‚£ä¸ªè¡¨(è¯¥è¡¨ç”±WHERECURRENTOFè¯­å¥å¼•ç”¨çš„)ä»¥å¤–,å†ä¹Ÿä¸èƒ½ä»åˆ«çš„è¡¨ä¸Šæ›´æ–°æ•°æ®</td></tr><tr><td align="center">-510</td><td align="center">42828</td><td align="center">è¡¨æˆ–è§†å›¾ä¸èƒ½è¢«ä¿®æ”¹</td></tr><tr><td align="center">-511</td><td align="center">42829</td><td align="center">å¯¹ä¸å¯ä¿®æ”¹çš„è¡¨æˆ–è§†å›¾,FORUPDATEOFè¯­å¥æ— æ•ˆ</td></tr><tr><td align="center">-512</td><td align="center">56023</td><td align="center">å¯¹è¿œç¨‹å¯¹è±¡çš„æ— æ•ˆå¼•ç”¨</td></tr><tr><td align="center">-513</td><td align="center">42924</td><td align="center">ä¸€ä¸ªåˆ«åä¸èƒ½å†è¢«å®šä¹‰æˆå¦å¤–çš„åˆ«å</td></tr><tr><td align="center">-514</td><td align="center">26501</td><td align="center">æ¸¸æ ‡å°šæ²¡æœ‰è¢«å‡†å¤‡</td></tr><tr><td align="center">-516</td><td align="center">26501</td><td align="center">è¯•å›¾æè¿°æœªå‡†å¤‡å¥½çš„SQLè¯­å¥</td></tr><tr><td align="center">-517</td><td align="center">07005</td><td align="center">å› ä¸ºSQLè¯­å¥å°šæ²¡æœ‰å‡†å¤‡å¥½,æ¸¸æ ‡æ— æ•ˆ</td></tr><tr><td align="center">-518</td><td align="center">07003</td><td align="center">è¯•å›¾æ‰§è¡Œå°šæ²¡æœ‰å‡†å¤‡å¥½çš„SQLè¯­å¥</td></tr><tr><td align="center">-519</td><td align="center">24506</td><td align="center">å½“ä¸ºæ¸¸æ ‡çš„SQLè¯­å¥å‘å¸ƒä¸€ä¸ªå‡†å¤‡è¯­å¥æ˜¯,æ¸¸æ ‡ä¸èƒ½æ˜¯æ‰“å¼€çš„</td></tr><tr><td align="center">-525</td><td align="center">51015</td><td align="center">ä¸èƒ½åœ¨å·²æŒ‡å®šçš„ç¨‹åºåŒ…ä¸­æ‰§è¡ŒSQLè¯­å¥,å› ä¸ºåœ¨ç»‘å®šæ—¶é—´å†…è¯¥ç¨‹åºåŒ…æ— æ•ˆ</td></tr><tr><td align="center">-526</td><td align="center">42995</td><td align="center">åœ¨ç»™å®šçš„ä¸Šä¸‹æ–‡ä¸­,ä¸èƒ½ä½¿ç”¨å…¨å±€çš„ä¸´æ—¶è¡¨</td></tr><tr><td align="center">-530</td><td align="center">23503</td><td align="center">å¯¹ç‰¹å®šçš„çº¦æŸåæŒ‡å®šäº†æ— æ•ˆçš„å¤–å¥å€¼</td></tr><tr><td align="center">-531</td><td align="center">23504</td><td align="center">ä»ç‰ˆæœ¬5å¼€å§‹,çˆ¶å…³é”®å­—çš„å¤šè¡Œæ›´æ–°å°†è¯•å›¾åˆ é™¤ä¸€ä¸ªå¤–å…³é”®å­—ä¾èµ–çš„çˆ¶å…³é”®å­—å€¼,åœ¨ç‰ˆæœ¬5ä»¥å‰,å½“å¼•ç”¨ä¸»å…³é”®å€¼å¤–å¥å€¼å½“å‰å­˜åœ¨æ—¶,è¯•å›¾æ›´æ–°è¯¥ä¸»å¥å€¼</td></tr><tr><td align="center">-532</td><td align="center">23504</td><td align="center">åˆ é™¤æ“ä½œè¿åäº†å·²æŒ‡å®šçš„å‚ç…§çº¦æŸ</td></tr><tr><td align="center">-533</td><td align="center">21501</td><td align="center">å¤šè¡Œæ’å…¥æ— æ•ˆ,è¯•å›¾å°†å¤šè¡Œæ’åˆ°è‡ªæˆ‘å¼•ç”¨çš„è¡¨ä¸­</td></tr><tr><td align="center">-534</td><td align="center">21502</td><td align="center">å¯æ”¹å˜ä¸»å¥åˆ—å€¼çš„æ›´æ–°è¯­å¥ä¸èƒ½åœ¨åŒä¸€æ—¶åˆ»ç”¨äºæ›´æ–°å¤šè¡Œ</td></tr><tr><td align="center">-535</td><td align="center">21502</td><td align="center">å½“ä»è‡ªæˆ‘å¼•ç”¨è¡¨ä¸­åˆ é™¤æ•°æ®æˆ–è€…æ›´æ–°ä¸»å¥åˆ—æ—¶,ä¸èƒ½æŒ‡å®šWHERECURRENTOF.ä¸æ˜¯ç‰ˆæœ¬5çš„å­ç³»ç»Ÿæ‰è°ƒç”¨è¯¥ä»£ç </td></tr><tr><td align="center">-536</td><td align="center">42914</td><td align="center">å› ä¸ºæŸä¸€ç‰¹å®šè¡¨çš„å‚ç…§çº¦æŸå­˜åœ¨,æ‰€ä»¥åˆ é™¤è¯­å¥æ— æ•ˆ</td></tr><tr><td align="center">-537</td><td align="center">42709</td><td align="center">åœ¨å¤–å¥è¯­å¥æˆ–ä¸»å¥è¯­å¥çš„è§„èŒƒä¸­,æ¯ä¸ªåˆ—çš„å‡ºç°ä¸èƒ½å¤šäºä¸€æ¬¡</td></tr><tr><td align="center">-538</td><td align="center">42830</td><td align="center">æ— æ•ˆçš„å¤–å¥;ä¸ç¬¦åˆå¼•ç”¨çš„è¡¨æ²¡æœ‰ä¸»å¥</td></tr><tr><td align="center">-539</td><td align="center">42888</td><td align="center">ä¸èƒ½å®šä¹‰å¤–å¥,å› ä¸ºè¢«å¼•ç”¨çš„è¡¨æ²¡æœ‰ä¸»å¥</td></tr><tr><td align="center">-540</td><td align="center">57001</td><td align="center">è¡¨å®šä¹‰ä¸å®Œæ•´,ç›´åˆ°ä¸ºä¸»å¥å»ºç«‹äº†å”¯ä¸€ç´¢å¼•æˆ–UNIQUEè¯­å¥ã€æˆ–è€…åŒ…å«GENERATEDBYDEFAULTå±æ€§çš„ROWIDåˆ—</td></tr><tr><td align="center">-542</td><td align="center">42831</td><td align="center">å¯ä»¥ä¸ºç©ºçš„åˆ—ä¸å…è®¸ä½œä¸ºä¸»å¥çš„ä¸€éƒ¨åˆ†åŒ…å«åœ¨å†…</td></tr><tr><td align="center">-543</td><td align="center">23511</td><td align="center">å› ä¸ºè¯¥è¡¨æ˜¯æŒ‡å®šäº†SETNULLåˆ é™¤è§„åˆ™çš„å‚ç…§çº¦æŸçš„çˆ¶è¡¨è€Œä¸”æ£€æŸ¥çº¦æŸä¸å…è®¸NULL,æ‰€ä»¥DELETEä¸èƒ½å‘ç”Ÿ</td></tr><tr><td align="center">-544</td><td align="center">23512</td><td align="center">ä¸èƒ½ç”¨ALTERæ·»åŠ æ£€æŸ¥çº¦æŸ,å› ä¸ºå·²å­˜åœ¨çš„æŸè¡Œä¸è¯¥æ£€æŸ¥çº¦æŸå†²çª</td></tr><tr><td align="center">-545</td><td align="center">23513</td><td align="center">INSERTæˆ–è€…UPDATEå¯¼è‡´æ£€æŸ¥çº¦æŸå†²çª</td></tr><tr><td align="center">-546</td><td align="center">42621</td><td align="center">åœ¨CREATEæˆ–ALTERTABLEä¸­æŒ‡å®šçš„æ£€æŸ¥çº¦æŸæ— æ•ˆ</td></tr><tr><td align="center">-548</td><td align="center">42621</td><td align="center">å› ä¸ºæŒ‡å®šçš„åˆ—è€Œå¼•èµ·çš„æ£€æŸ¥çº¦æŸæ— æ•ˆ</td></tr><tr><td align="center">-549</td><td align="center">42509</td><td align="center">DYNAMICRULES(BIND)è®¡åˆ’æˆ–ç¨‹åºåŒ…çš„æ— æ•ˆSQLè¯­å¥</td></tr><tr><td align="center">-551</td><td align="center">42501</td><td align="center">ç”¨æˆ·è¯•å›¾å¯¹ä¸æ‹¥æœ‰æƒé™çš„ç‰¹å®šçš„å¯¹è±¡è¿›è¡Œæ“ä½œ,æˆ–è€…è¡¨ä¸å­˜åœ¨</td></tr><tr><td align="center">-552</td><td align="center">42502</td><td align="center">ç”¨æˆ·è¯•å›¾æ‰§è¡Œæœªè¢«æˆæƒçš„æ“ä½œ</td></tr><tr><td align="center">-553</td><td align="center">42503</td><td align="center">ä¸èƒ½æŒ‡å®šCURRENTSQLID,å› ä¸ºç”¨æˆ·å°šæ²¡æœ‰è¢«å…è®¸æ”¹å˜é‚£ä¸ªID</td></tr><tr><td align="center">-554</td><td align="center">42502</td><td align="center">ä¸èƒ½å¯¹ä½ æœ¬èº«èµ‹äºˆä¸€ä¸ªæƒé™</td></tr><tr><td align="center">-555</td><td align="center">42502</td><td align="center">ä¸èƒ½å¯¹ä½ æœ¬èº«æ’¤é”€ä¸€ä¸ªæƒé™</td></tr><tr><td align="center">-556</td><td align="center">42504</td><td align="center">ä¸èƒ½æ’¤é”€ç”¨æˆ·æ²¡æœ‰æ‹¥æœ‰çš„æƒé™</td></tr><tr><td align="center">-557</td><td align="center">42852</td><td align="center">æŒ‡å®šäº†ä¸ä¸€è‡´çš„æˆäºˆæˆ–æ’¤é”€å…³é”®è¯</td></tr><tr><td align="center">-558</td><td align="center">56025</td><td align="center">ä¸ºæˆäºˆæˆ–æ’¤é”€è¯­å¥æŒ‡å®šäº†æ— æ•ˆçš„è¯­å¥(ä¸€ä¸ªæˆ–ä¸€ç»„)</td></tr><tr><td align="center">-559</td><td align="center">57002</td><td align="center">DB2æƒé™æœºåˆ¶å·²ç»ç¦ç”¨,æˆäºˆæˆ–è€…æ’¤é”€ä¸èƒ½è¢«å‘å¸ƒ</td></tr><tr><td align="center">-567</td><td align="center">42501</td><td align="center">æŒ‡å®šçš„æƒé™IDç¼ºå°‘å¯¹æŒ‡å®šçš„ç¨‹åºåŒ…çš„ç»‘å®šæƒé™</td></tr><tr><td align="center">-571</td><td align="center">25000</td><td align="center">ä¸å…è®¸å¤šç‚¹æ›´æ–°</td></tr><tr><td align="center">-573</td><td align="center">42890</td><td align="center">ä¸èƒ½å®šä¹‰å‚ç…§çº¦æŸ,å› ä¸ºå·²æŒ‡å®šçš„çˆ¶è¡¨ä¸­åœ¨æŒ‡å®šçš„åˆ—ä¸Šæ²¡æœ‰å”¯ä¸€å¥</td></tr><tr><td align="center">-574</td><td align="center">42864</td><td align="center">æŒ‡å®šçš„ç¼ºçœä¸åˆ—å®šä¹‰å†²çª</td></tr><tr><td align="center">-577</td><td align="center">38002</td><td align="center">è¯•å›¾ä¿®æ”¹ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ä¸­çš„æ•°æ®æˆ–è€…å­˜å‚¨è¿‡ç¨‹ä¸­çš„æ•°æ®,ä½†è¿™äº›å¯¹è±¡çš„å»ºç«‹æ²¡æœ‰é€‰æ‹©MODIFIESSQLDATAé€‰é¡¹</td></tr><tr><td align="center">-579</td><td align="center">38004</td><td align="center">è¯•å›¾ä¿®æ”¹ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ä¸­çš„æ•°æ®æˆ–è€…å­˜å‚¨è¿‡ç¨‹ä¸­çš„æ•°æ®,ä½†è¿™äº›å¯¹è±¡çš„å»ºç«‹æ²¡æœ‰é€‰æ‹©READSQLDATAé€‰é¡¹,ä¹Ÿæ²¡æœ‰é€‰æ‹©#293#</td></tr><tr><td align="center">-580</td><td align="center">42625</td><td align="center">CASEè¡¨è¾¾å¼ä¸­çš„ç»“æœè¡¨è¾¾å¼ä¸èƒ½éƒ½æ˜¯ç©ºçš„</td></tr><tr><td align="center">-581</td><td align="center">42804</td><td align="center">CASEè¡¨è¾¾å¼ä¸­çš„ç»“æœè¡¨è¾¾å¼ä¸ºä¸å…¼å®¹çš„æ•°æ®ç±»å‹</td></tr><tr><td align="center">-582</td><td align="center">42625</td><td align="center">SEARCHEDï¼WHENï¼CLAUSEä¸­çš„æŸ¥æ‰¾æ¡ä»¶æŒ‡å®šäº†ä¸€ä¸ªé™å®šçš„ã€INæˆ–EXISTSè°“è¯</td></tr><tr><td align="center">-583</td><td align="center">42845</td><td align="center">æŒ‡å®šçš„å‡½æ•°å¤±è´¥,å› ä¸ºä»–ä¸æ˜¯å†³å®šæ€§çš„,æˆ–è€…å¯èƒ½æœ‰å¤–éƒ¨åŠ¨ä½œ</td></tr><tr><td align="center">-585</td><td align="center">42732</td><td align="center">åœ¨å½“å‰è·¯å¾„ä¸­æ¨¡å¼åä¸æ­¢ä¸€æ¬¡å‡ºç°</td></tr><tr><td align="center">-586</td><td align="center">42907</td><td align="center">CURRENTPATHä¸“ç”¨å¯„å­˜å™¨åœ¨é•¿åº¦ä¸Šä¸èƒ½è¶…è¿‡254å­—ç¬¦</td></tr><tr><td align="center">-587</td><td align="center">428C6</td><td align="center">é¡¹ç›®å¼•ç”¨çš„åˆ—è¡¨å¿…é¡»æ˜¯åŒä¸€ä¸ªå®¶æ—</td></tr><tr><td align="center">-590</td><td align="center">42734</td><td align="center">åœ¨å‘½åçš„å­˜å‚¨è¿‡ç¨‹æˆ–ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°ä¸­çš„å‚æ•°å¿…é¡»æ˜¯ç‹¬ä¸€æ— äºŒçš„</td></tr><tr><td align="center">-592</td><td align="center">42510</td><td align="center">æ²¡æœ‰æˆæƒæƒé™,è®©ä½ åœ¨WLMç¯å¢ƒä¸­å»ºç«‹çš„å­˜å‚¨è¿‡ç¨‹æˆ–è€…ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°</td></tr><tr><td align="center">-601</td><td align="center">42710</td><td align="center">è¯•å›¾åˆ›å»º(æˆ–é‡å‘½å)å·²ç»å­˜åœ¨çš„å¯¹è±¡</td></tr><tr><td align="center">-602</td><td align="center">54008</td><td align="center">CREATEINDEXè¯­å¥ä¸­æŒ‡å®šçš„åˆ—å¤ªå¤š</td></tr><tr><td align="center">-603</td><td align="center">23515</td><td align="center">å› ä¸ºå‘ç°æœ‰é‡å¤å€¼,æ‰€ä»¥ä¸èƒ½å»ºç«‹å”¯ä¸€çš„ç´¢å¼•</td></tr><tr><td align="center">-604</td><td align="center">42611</td><td align="center">åœ¨CREATEæˆ–ALTERTABLEè¯­å¥ä¸­çš„ä¸ºæ•°æ®ç±»å‹æŒ‡å®šçš„é•¿åº¦ã€ç²¾åº¦ä»¥åŠæ ‡åº¦æ— æ•ˆ</td></tr><tr><td align="center">-607</td><td align="center">42832</td><td align="center">æŒ‡å®šçš„INSERTã€UPDATEæˆ–DELETEè¯­å¥ä¸èƒ½è¢«å‘å¸ƒ,åº”ä¸ºè¿™äº›è¯­å¥å¯¹DB2CATLOGè¡¨æ‰§è¡Œå†™æ“ä½œ</td></tr><tr><td align="center">-611</td><td align="center">53088</td><td align="center">å½“LOCKSIZEæ˜¯TABLEæˆ–è€…TABLESPACEæ—¶,LOCKMAXå¿…é¡»ä¸º0</td></tr><tr><td align="center">-612</td><td align="center">42711</td><td align="center">åœ¨åŒä¸€ä¸ªè¡¨ã€ç´¢å¼•æˆ–è¯•å›¾ä¸­ä¸å…è®¸æœ‰é‡å¤åˆ—å</td></tr><tr><td align="center">-613</td><td align="center">54008</td><td align="center">ä¸»å¥æˆ–UNIQUEçº¦æŸå¤ªé•¿æˆ–è€…åŒ…å«äº†å¤ªå¤šçš„åˆ—</td></tr><tr><td align="center">-614</td><td align="center">54008</td><td align="center">å·²ç»è¶…è¿‡äº†ç´¢å¼•çš„å†…éƒ¨å¥é•¿åº¦çš„æœ€å¤§é•¿åº¦(255)é™åˆ¶</td></tr><tr><td align="center">-615</td><td align="center">55006</td><td align="center">ä¸èƒ½åˆ é™¤è¿™ä¸ªç¨‹åºåŒ…,å› ä¸ºè¯¥ç¨‹åºåŒ…ç›®å‰æ­£åœ¨æ‰§è¡Œ</td></tr><tr><td align="center">-616</td><td align="center">42893</td><td align="center">æŒ‡å®šçš„å¯¹è±¡ä¸èƒ½è¢«åˆ é™¤,å› ä¸ºå…¶ä»–å¯¹è±¡ä¾èµ–äºè¯¥å¯¹è±¡</td></tr><tr><td align="center">-617</td><td align="center">56089</td><td align="center">å¯¹äºDB2ç‰ˆæœ¬6,1å‹ç´¢å¼•æ— æ•ˆ.å¯¹äºä»¥å‰çš„ç‰ˆæœ¬,1å‹ç´¢å¼•ä¸èƒ½ç”¨LOCKSIZEROWæˆ–LARGEè¡¨ç©ºé—´å®šä¹‰</td></tr><tr><td align="center">-618</td><td align="center">42832</td><td align="center">å¯¹DB2CATALOGè¡¨çš„è¯·æ±‚æ“ä½œæ—¶ä¸å…è®¸çš„</td></tr><tr><td align="center">-619</td><td align="center">55011</td><td align="center">DSNDB07ä¸èƒ½ä¿®æ”¹,é™¤éä»–å…ˆè¢«åœæ­¢äº†</td></tr><tr><td align="center">-620</td><td align="center">53001</td><td align="center">å¯¹åœ¨DSNDB07ä¸­çš„è¡¨ç©ºé—´ä¸å…è®¸æŒ‡å®šè¯¥å…³é”®è¯</td></tr><tr><td align="center">-621</td><td align="center">58001</td><td align="center">é‡åˆ°äº†é‡å¤çš„DBID,é‡åˆ°äº†ç³»ç»Ÿé—®é¢˜</td></tr><tr><td align="center">-622</td><td align="center">56031</td><td align="center">ä¸èƒ½æŒ‡å®šFORMIXEDDATAå› ä¸ºæ²¡æœ‰å®‰è£…æ··åˆæ•°æ®é€‰é¡¹</td></tr><tr><td align="center">-623</td><td align="center">55012</td><td align="center">ä¸èƒ½ä¸ºå•ä¸€çš„è¡¨å®šä¹‰å¤šä¸ªæ—ç´¢å¼•</td></tr><tr><td align="center">-624</td><td align="center">42889</td><td align="center">ä¸èƒ½ä¸ºå•ä¸€çš„è¡¨å®šä¹‰å¤šä¸ªä¸»å¥</td></tr><tr><td align="center">-625</td><td align="center">55014</td><td align="center">ç”¨ä¸»å¥å®šä¹‰çš„è¡¨è¦æ±‚å”¯ä¸€ç´¢å¼•</td></tr><tr><td align="center">-626</td><td align="center">55015</td><td align="center">ä¸èƒ½å‘å¸ƒALTERè¯­å¥æ¥æ”¹å˜PRIQTYSECQTYæˆ–ERASE,é™¤éå…ˆåœæ­¢äº†è¡¨ç©ºé—´</td></tr><tr><td align="center">-627</td><td align="center">55016</td><td align="center">ä¸èƒ½å‘å¸ƒALTERè¯­å¥æ¥æ”¹å˜PRIQTYSECQTYæˆ–ERASE,é™¤éå…ˆæŠŠè¡¨ç©ºé—´å®šä¹‰ä¸ºä½¿ç”¨å­˜å‚¨å™¨ç»„çš„è¡¨ç©ºé—´</td></tr><tr><td align="center">-628</td><td align="center">42613</td><td align="center">æŒ‡å®šè¯­å¥æ—¶ç›¸äº’æ’æ–¥çš„(ä¾‹å¦‚,ä¸èƒ½åˆ†åŒºä¸€ä¸ªåˆ†æ®µçš„è¡¨ç©ºé—´)</td></tr><tr><td align="center">-629</td><td align="center">42834</td><td align="center">å› ä¸ºè¯¥å¤–å¥ä¸èƒ½åŒ…å«ç©ºå€¼,æ‰€ä»¥SETNULLæ— æ•ˆ</td></tr><tr><td align="center">-630</td><td align="center">56089</td><td align="center">ä¸èƒ½ä¸º1å‹ç´¢å¼•æŒ‡å®šWHERENOTNULL</td></tr><tr><td align="center">-631</td><td align="center">54008</td><td align="center">æ— æ•ˆçš„å¤–å¥;è¦ä¹ˆæ˜¯æ¯”254ä¸ªå­—èŠ‚é•¿,è¦ä¹ˆåŒ…å«çš„åˆ—æ•°å¤šäº40</td></tr><tr><td align="center">-632</td><td align="center">42915</td><td align="center">æŒ‡å®šçš„åˆ é™¤è§„åˆ™ç¦æ­¢æŠŠè¿™ä¸ªè¡¨å®šä¹‰ä¸ºå·²åˆ¶å®šè¡¨çš„ä»å±è¡¨</td></tr><tr><td align="center">-633</td><td align="center">42915</td><td align="center">æ— æ•ˆåˆ é™¤è§„åˆ™;å¿…é¡»ä½¿ç”¨ç‰¹å®šçš„å¼ºåˆ¶åˆ é™¤è§„åˆ™</td></tr><tr><td align="center">-634</td><td align="center">42915</td><td align="center">åœ¨è¿™ç§æƒ…å†µä¸‹,DELETECASCADEä¸å…è®¸</td></tr><tr><td align="center">-635</td><td align="center">42915</td><td align="center">åˆ é™¤è§„åˆ™ä¸èƒ½æœ‰å·®å¼‚æˆ–è€…ä¸èƒ½ä¸ºSETNULL</td></tr><tr><td align="center">-636</td><td align="center">56016</td><td align="center">åœ¨åˆ†åŒºç´¢å¼•å¥çš„å‡åºæˆ–é™åºè§„èŒƒä¸­,åˆ†åŒºæ‰€ä»¥å¿…é¡»ä¸è¯¥è§„èŒƒä¸€è‡´</td></tr><tr><td align="center">-637</td><td align="center">42614</td><td align="center">é‡åˆ°é‡å¤çš„å…³é”®è¯</td></tr><tr><td align="center">-638</td><td align="center">42601</td><td align="center">åœ¨CREATETABLEè¯­å¥ä¸­ç¼ºå°‘åˆ—å®šä¹‰</td></tr><tr><td align="center">-639</td><td align="center">56027</td><td align="center">å¸¦æœ‰SETNULLçš„åˆ é™¤è§„åˆ™çš„å¤–å¥çš„å¯ç©ºåˆ—ä¸èƒ½æ˜¯åˆ†åŒºç´¢å¼•çš„åˆ—</td></tr><tr><td align="center">-640</td><td align="center">56089</td><td align="center">ä¸èƒ½ä¸ºè¿™ä¸ªè¡¨ç©ºé—´æŒ‡å®šLOCKSIZEROW,å› ä¸ºåœ¨è¯¥è¡¨ç©ºé—´ä¸­çš„è¡¨ä¸Šå®šä¹‰äº†1å‹ç´¢å¼•</td></tr><tr><td align="center">-642</td><td align="center">54021</td><td align="center">å”¯ä¸€çº¦æŸåŒ…å«å¤ªå¤šçš„åˆ—</td></tr><tr><td align="center">-643</td><td align="center">54024</td><td align="center">æ£€æŸ¥çº¦æŸè¶…å‡ºäº†3800ä¸ªå­—ç¬¦çš„æœ€å¤§é•¿åº¦</td></tr><tr><td align="center">-644</td><td align="center">42615</td><td align="center">åœ¨SQLè¯­å¥ä¸­ä¸ºå…³é”®è¯æŒ‡å®šçš„å€¼æ— æ•ˆ</td></tr><tr><td align="center">-646</td><td align="center">55017</td><td align="center">åœ¨æŒ‡å®šçš„åˆ†åŒºè¡¨ç©ºé—´æˆ–è€…ç¼ºçœè¡¨ç©ºé—´ä¸­ä¸èƒ½åˆ›å»ºè¡¨,å› ä¸ºæŒ‡å®šçš„è¡¨ç©ºé—´å·²ç»åŒ…å«äº†ä¸€ä¸ªè¡¨</td></tr><tr><td align="center">-647</td><td align="center">57003</td><td align="center">æŒ‡å®šçš„ç¼“å†²æ± æ— æ•ˆ,å› ä¸ºä»–æ²¡æœ‰è¢«æ¿€æ´»</td></tr><tr><td align="center">-650</td><td align="center">56090</td><td align="center">ALTERINDEXä¸èƒ½è¢«æ‰§è¡Œ;æä¾›äº†åŸå› ä»£ç </td></tr><tr><td align="center">-651</td><td align="center">54025</td><td align="center">å¦‚æœCREAREæˆ–ALTERTABLEè¢«å…è®¸,è¡¨å¯¹è±¡çš„æè¿°è¯(objectdescriptor,OBD)å°†è¶…è¿‡æœ€å¤§å€¼(32KB)</td></tr><tr><td align="center">-652</td><td align="center">23506</td><td align="center">é‡åˆ°äº†EDITRPROCæˆ–VALIDPROCå†²çª</td></tr><tr><td align="center">-653</td><td align="center">57004</td><td align="center">åœ¨åˆ†åŒºè¡¨ç©ºé—´ä¸­çš„è¡¨ä¸å¯ç”¨,å› ä¸ºåˆ†åŒºç´¢å¼•å°šæœªè¢«åˆ›å»º</td></tr><tr><td align="center">-655</td><td align="center">56036</td><td align="center">åœ¨å·çš„åˆ—è¡¨ä¸­,STOGROUPä¸èƒ½æŒ‡å®šä¸ºç‰¹å®šçš„æˆ–ä¸ç‰¹å®š(â€œ*â€)çš„å·</td></tr><tr><td align="center">-658</td><td align="center">42917</td><td align="center">å½“è¯•å›¾åˆ é™¤æŒ‡å®šçš„å¯¹è±¡æ—¶,æ— æ³•åˆ é™¤è¯¥å¯¹è±¡,è¯¥å¯¹è±¡çš„åˆ é™¤å¿…é¡»é€šè¿‡åˆ é™¤ä¸ä¹‹ç›¸å…³è”çš„å¯¹è±¡å®Œæˆ</td></tr><tr><td align="center">-660</td><td align="center">53035</td><td align="center">ä¸æ­£ç¡®çš„åˆ†åŒºç´¢å¼•è§„èŒƒ,å¿…é¡»ä¸ºæ—ç´¢å¼•å®šä¹‰æœ‰é™åˆ¶çš„å…³é”®å­—</td></tr><tr><td align="center">-661</td><td align="center">53036</td><td align="center">åˆ†åŒºç´¢å¼•æ²¡æœ‰æŒ‡å®šæ°å½“çš„åˆ†åŒºæ•°ç›®</td></tr><tr><td align="center">-662</td><td align="center">53037</td><td align="center">è¯•å›¾åœ¨æœªåˆ†åŒºçš„è¡¨ç©ºé—´(åˆ†æ®µçš„æˆ–ç®€å•çš„)ä¸Šå»ºç«‹åˆ†åŒºç´¢å¼•</td></tr><tr><td align="center">-663</td><td align="center">53038</td><td align="center">ä¸ºåˆ†åŒºç´¢å¼•æŒ‡å®šçš„å…³é”®å­—é™åˆ¶å€¼æ˜¯ä¸€ä¸ªæ— æ•ˆæ•°å­—</td></tr><tr><td align="center">-665</td><td align="center">53039</td><td align="center">ä¸ºALTERTABLESOACEè¯­å¥æŒ‡å®šäº†æ— æ•ˆçš„PARTè¯­å¥</td></tr><tr><td align="center">-666</td><td align="center">57005</td><td align="center">SQLè¯­å¥ä¸èƒ½è¢«å¤„ç†,å› ä¸ºæŒ‡å®šçš„å‡½æ•°å½“å‰æ­£å¤„äºè¿›è¡Œè¿‡ç¨‹ä¸­</td></tr><tr><td align="center">-667</td><td align="center">42917</td><td align="center">ä¸èƒ½æ˜ç¡®çš„åˆ é™¤åˆ†åŒºè¡¨ç©ºé—´çš„æ—ç´¢å¼•,å¿…é¡»é™¤å»åˆ†åŒºè¡¨ç©ºé—´æ¥å»æ‰åˆ†åŒºç´¢å¼•</td></tr><tr><td align="center">-668</td><td align="center">56018</td><td align="center">ä¸èƒ½å‘ç”¨EDITPROCå®šä¹‰çš„è¡¨ä¸­æ·»åŠ åˆ—</td></tr><tr><td align="center">-669</td><td align="center">42917</td><td align="center">ä¸èƒ½æ˜¾å¼çš„åˆ é™¤åˆ†åŒºè¡¨ç©ºé—´ä¸­çš„è¡¨,å¿…é¡»åˆ é™¤åˆ†åŒºè¡¨ç©ºé—´æ¥åˆ é™¤è¡¨</td></tr><tr><td align="center">-670</td><td align="center">54010</td><td align="center">è¡¨çš„è®°å½•é•¿åº¦è¶…è¿‡äº†é¡µé¢çš„å¤§å°</td></tr><tr><td align="center">-671</td><td align="center">53040</td><td align="center">ä¸èƒ½æ›´æ”¹æŒ‡å®šçš„è¡¨ç©ºé—´çš„ç¼“å†²æ± ,å› ä¸ºè¿™å°†æ”¹å˜è¡¨ç©ºé—´çš„é¡µé¢å¤§å°</td></tr><tr><td align="center">-672</td><td align="center">55035</td><td align="center">åœ¨å‘½åçš„è¡¨ä¸Šä¸å…è®¸DROP</td></tr><tr><td align="center">-676</td><td align="center">53041</td><td align="center">åªæœ‰4KBçš„ç¼“å†²æ± å¯è¢«ç”¨äºä¸€ä¸ªç´¢å¼•</td></tr><tr><td align="center">-677</td><td align="center">57011</td><td align="center">ç¼“å†²æ± æ‰©å±•å¤±è´¥,ç”±äºå¯ç”¨çš„è™šæ‹Ÿå†…å­˜çš„å¤§å°ä¸è¶³</td></tr><tr><td align="center">-678</td><td align="center">53045</td><td align="center">ä¸ºæ‰åˆ†åŒºç´¢å¼•ä¸­æŒ‡å®šçš„é™åˆ¶å¥æä¾›çš„å€¼ä¸æ•°æ®ç±»å‹ä¸ç¬¦</td></tr><tr><td align="center">-679</td><td align="center">57006</td><td align="center">ä¸èƒ½åˆ›å»ºæŸä¸€ä¸ªç‰¹å®šå¯¹è±¡,å› ä¸ºè¯¥å¯¹è±¡çš„ä¸€ä¸ªdropç›®å‰æ­£åœ¨æŒ‚èµ·</td></tr><tr><td align="center">-680</td><td align="center">54011</td><td align="center">å¯¹DB2è¡¨ä¸èƒ½è¶…è¿‡750åˆ—</td></tr><tr><td align="center">-681</td><td align="center">23507</td><td align="center">åˆ—è¿åäº†æŒ‡å®šçš„FIELDPROC</td></tr><tr><td align="center">-682</td><td align="center">57010</td><td align="center">ä¸èƒ½è½½å…¥FIELDPROC</td></tr><tr><td align="center">-683</td><td align="center">42842</td><td align="center">åˆ—ã€å•å€¼ç±»å‹ã€å‡½æ•°æˆ–è€…è¿‡ç¨‹æ— æ•ˆ,å› ä¸ºä¸å…¼å®¹è¯­å¥.ä¾‹å¦‚,æŒ‡å®šçš„INTEGERå…·æœ‰FORBITDATAé€‰é¡¹</td></tr><tr><td align="center">-684</td><td align="center">54012</td><td align="center">æŒ‡å®šçš„æ–‡å­—åˆ—è¡¨ä¸èƒ½è¶…è¿‡254ä¸ªå­—èŠ‚</td></tr><tr><td align="center">-685</td><td align="center">58002</td><td align="center">FIELDPROCè¿”å›ä¸€ä¸ªæ— æ•ˆçš„åŸŸæè¿°</td></tr><tr><td align="center">-686</td><td align="center">53043</td><td align="center">ç”¨FIELDPROCå®šä¹‰çš„ä¸€ä¸ªåˆ—ä¸èƒ½ä¸ä¸€ä¸ªä½¿ç”¨ä¸åŒçš„FIELDPROCå®šä¹‰çš„åˆ—ä½œæ¯”è¾ƒ</td></tr><tr><td align="center">-687</td><td align="center">53044</td><td align="center">åˆ—ä¸èƒ½ä¸ä¸€ä¸ªéå…¼å®¹å­—æ®µç±»å‹çš„åˆ—æ¯”è¾ƒ</td></tr><tr><td align="center">-688</td><td align="center">58002</td><td align="center">è¿”å›ä¸æ­£ç¡®çš„æ•°æ®</td></tr><tr><td align="center">-689</td><td align="center">54011</td><td align="center">ä»å±è¡¨å®šä¹‰äº†å¤ªå¤šçš„åˆ—</td></tr><tr><td align="center">-690</td><td align="center">23508</td><td align="center">æ•°æ®å®šä¹‰çš„æ§åˆ¶æ”¯æŒæ‹’ç»è¿™ä¸ªè¯­å¥</td></tr><tr><td align="center">-691</td><td align="center">57018</td><td align="center">å‘½åçš„æ³¨å†Œè¡¨ä¸å­˜åœ¨</td></tr><tr><td align="center">-692</td><td align="center">57018</td><td align="center">å‘½åçš„ç´¢å¼•ä¸å­˜åœ¨,ä½†å‘½åçš„æ³¨å†Œè¡¨éœ€è¦è¯¥ç´¢å¼•</td></tr><tr><td align="center">-693</td><td align="center">55003</td><td align="center">å‘½åçš„æ³¨å†Œè¡¨&#x2F;ç´¢å¼•çš„å‘½ååˆ—æ— æ•ˆ</td></tr><tr><td align="center">-694</td><td align="center">57023</td><td align="center">DROPæ­£åœ¨å‘½åçš„æ³¨å†Œè¡¨ä¸ŠæŒ‚èµ·</td></tr><tr><td align="center">-696</td><td align="center">42898</td><td align="center">ç”±äºç›¸å…³çš„åå­—æˆ–è€…è½¬æ¢è¡¨çš„åå­—ä½¿ç”¨ä¸æ­£ç¡®,æŒ‡å®šçš„è§¦å‘å™¨æ— æ•ˆ</td></tr><tr><td align="center">-697</td><td align="center">42899</td><td align="center">FOREACHè¯­å¥è¢«æŒ‡å®š,å› æ­¤ä¸OLDåˆNEWç›¸å…³çš„åå­—æ˜¯ä¸å…è®¸çš„,æˆ–è€…ä¸èƒ½ä¸ºä¸€ä¸ªBEFOREè§¦å‘å™¨æŒ‡å®šOLD_TABLEå’ŒNEW_TABLE</td></tr><tr><td align="center">-713</td><td align="center">42815</td><td align="center">æŒ‡å®šçš„ä¸“ç”¨å¯„å­˜å™¨æ˜¯æ— æ•ˆçš„</td></tr><tr><td align="center">-715</td><td align="center">56064</td><td align="center">å‘½åçš„ç¨‹åºä¸èƒ½è¢«è¿è¡Œ,å› ä¸ºä»–ä¾èµ–ä¸ä½ æ‰€å®‰è£…çš„DB2ç‰ˆæœ¬çš„éƒ¨ä»¶,ä½†æ˜¯ä½ çš„æ•°æ®ä¸­å¿ƒæ²¡æœ‰å®‰è£…è¿™ä¸ªéƒ¨ä»¶</td></tr><tr><td align="center">-716</td><td align="center">56065</td><td align="center">å‘½åçš„ç¨‹åºä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬çš„ä¸æ­£ç¡®çš„å‘è¡Œç‰ˆæœ¬åšäº†é¢„ç¼–è¯‘</td></tr><tr><td align="center">-717</td><td align="center">56066</td><td align="center">BINDå¤±è´¥,å› ä¸ºä»–ä¾èµ–ä¸ä½ æ‰€å®‰è£…çš„DB2ç‰ˆæœ¬çš„éƒ¨ä»¶,ä½†æ˜¯ä½ çš„æ•°æ®ä¸­å¿ƒæ²¡æœ‰å®‰è£…è¿™ä¸ªéƒ¨ä»¶</td></tr><tr><td align="center">-718</td><td align="center">56067</td><td align="center">REBINDå¤±è´¥,å› ä¸ºIBMREQDåˆ—æ— æ•ˆ</td></tr><tr><td align="center">-719</td><td align="center">42710</td><td align="center">ä¸èƒ½BINDADDä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç¨‹åºåŒ…</td></tr><tr><td align="center">-720</td><td align="center">42710</td><td align="center">ä¸èƒ½BINDREPLACEä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç¨‹åºåŒ…ç‰ˆæœ¬</td></tr><tr><td align="center">-721</td><td align="center">42710</td><td align="center">ç¨‹åºåŒ…çš„ä¸€è‡´æ€§è®°å·å¿…é¡»æ˜¯ç‹¬ä¸€æ— äºŒçš„</td></tr><tr><td align="center">-722</td><td align="center">42704</td><td align="center">ç»‘å®šé”™è¯¯,å› ä¸ºæŒ‡å®šçš„ç¨‹åºåŒ…ä¸å­˜åœ¨</td></tr><tr><td align="center">-723</td><td align="center">09000</td><td align="center">ä¸€ä¸ªè§¦å‘çš„SQLè¯­å¥æ¥å—åˆ°ä¸€ä¸ªé”™è¯¯</td></tr><tr><td align="center">-724</td><td align="center">54038</td><td align="center">è¾¾åˆ°äº†(16)çº§è”é—´æ¥çš„SQLè¯­å¥çš„æœ€å¤§é¡¹ç›®</td></tr><tr><td align="center">-725</td><td align="center">42721</td><td align="center">å¯¹ä¸“é—¨æŒ‡å®šçš„å¯„å­˜å™¨æä¾›äº†ä¸€ä¸ªæ— æ•ˆå€¼</td></tr><tr><td align="center">-726</td><td align="center">55030</td><td align="center">å› ä¸ºSYSPKSYSTEMæ¡ç›®,ä¸èƒ½ç»‘å®šè¿™ä¸ªç¨‹åºåŒ…</td></tr><tr><td align="center">-728</td><td align="center">56080</td><td align="center">æŒ‡å®šçš„æ•°æ®ç±»å‹ä¸èƒ½ä¸ç§æœ‰åè®®å‘å¸ƒä¸€èµ·ä½¿ç”¨</td></tr><tr><td align="center">-729</td><td align="center">429B1</td><td align="center">ç”¨COMMITONRETURNå®šä¹‰çš„å­˜å‚¨è¿‡ç¨‹ä¸èƒ½ç”¨ä½œåµŒå¥—çš„CALLè¿‡ç¨‹çš„ç›®æ ‡</td></tr><tr><td align="center">-730</td><td align="center">56053</td><td align="center">åœ¨åªè¯»çš„å…±äº«æ•°æ®åº“ä¸­ä¸ºè¡¨å®šä¹‰çš„å‚ç…§å®Œæ•´æ€§æ— æ•ˆ</td></tr><tr><td align="center">-731</td><td align="center">56054</td><td align="center">VSAMæ•°æ®é›†å¿…é¡»ç”¨SHAREOPTION(1.3)å®šä¹‰</td></tr><tr><td align="center">-732</td><td align="center">56055</td><td align="center">è¢«å®šä¹‰ä¸ºåªè¯»å‹æ•°æ®åº“å´æ‹¥æœ‰æ²¡æœ‰å®šä¹‰ç©ºé—´æˆ–è€…ç´¢å¼•ç©ºé—´çš„DB2å­ç³»ç»Ÿ</td></tr><tr><td align="center">-733</td><td align="center">56056</td><td align="center">åªè¯»å…±äº«æ•°æ®åº“çš„å®šä¹‰ä¸ä¸€è‡´</td></tr><tr><td align="center">-734</td><td align="center">56057</td><td align="center">ä¸€æ—¦ä¸€ä¸ªæ•°æ®åº“è¢«å®šä¹‰ä¸ºROSHAREREAD,ä»–å°†ä¸èƒ½è¢«æ›´æ”¹ä¸ºå…¶ä»–ä¸åŒçš„ROSHAREçŠ¶æ€</td></tr><tr><td align="center">-735</td><td align="center">55004</td><td align="center">ç”¨DBIDåç§°æ ‡è¯†çš„æ•°æ®åº“ä¸å†æ˜¯ä¸€ä¸ªåªè¯»å…±äº«æ•°æ®åº“</td></tr><tr><td align="center">-736</td><td align="center">53014</td><td align="center">å‘½åçš„DBIDæ— æ•ˆ</td></tr><tr><td align="center">-737</td><td align="center">53056</td><td align="center">åœ¨è¿™ç§çŠ¶å†µä¸‹,ä¸èƒ½å»ºç«‹ä¸€ä¸ªéšå«çš„è¡¨ç©ºé—´</td></tr><tr><td align="center">-739</td><td align="center">56088</td><td align="center">å› ä¸ºåŒæ—¶æŒ‡å®šäº†ALLOWPARALLELå’ŒMODIELESSQLDATAè¿™ä¸¤ä¸ªè¯­å¥,å› æ­¤å·²è®¾å®šçš„å‡½æ•°å°†ä¸èƒ½å†è¢«æ›´æ”¹</td></tr><tr><td align="center">-740</td><td align="center">51034</td><td align="center">åœ¨è¿™ç§æ–¹å¼ä¸‹ä¸èƒ½ç”¨MODIELESSQLDATAå®šä¹‰æŒ‡å®šçš„å‡½æ•°</td></tr><tr><td align="center">-741</td><td align="center">55030</td><td align="center">å·²ç»ä¸ºå‘½åçš„å…±äº«ç»„æˆå‘˜çš„æ•°æ®å®šä¹‰äº†å·¥ä½œæ–‡ä»¶æ•°æ®åº“</td></tr><tr><td align="center">-742</td><td align="center">53004</td><td align="center">DSNDB07æ˜¯éšå«çš„å·¥ä½œæ–‡ä»¶æ•°æ®åº“</td></tr><tr><td align="center">-746</td><td align="center">57053</td><td align="center">åœ¨ç‰¹å®šçš„è§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°ä¸­çš„SQLè¯­å¥è¿ååµŒå¥—SQLé™åˆ¶</td></tr><tr><td align="center">-747</td><td align="center">57054</td><td align="center">æŒ‡å®šçš„è¡¨æ˜¯ä¸å¯ç”¨çš„é™¤éä¸ºLOBæ•°æ®åˆ—å»ºç«‹èµ·å¿…é¡»çš„è¾…åŠ©è¡¨</td></tr><tr><td align="center">-748</td><td align="center">54042</td><td align="center">åœ¨æŒ‡å®šçš„è¾…åŠ©è¡¨ä¸Šå·²ç»æœ‰ä¸€ä¸ªç´¢å¼•</td></tr><tr><td align="center">-750</td><td align="center">42986</td><td align="center">ä¸èƒ½å¯¹å·²æŒ‡å®šçš„è¡¨é‡æ–°å‘½å,å› ä¸ºä»–è‡³å°‘åœ¨ä¸€ä¸ªç°å­˜çš„è§†å›¾æˆ–è§¦å‘å™¨ä¸­è¢«å¼•ç”¨</td></tr><tr><td align="center">-751</td><td align="center">42987</td><td align="center">å­˜å‚¨è¿‡ç¨‹æˆ–ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°è¯•å›¾æ‰§è¡Œä¸€ä¸ªä¸å…è®¸æ‰§è¡Œçš„SQLè¯­å¥.DB2çš„çº¿ç¨‹è¢«ç½®äºMUST_ROLLBACKçŠ¶æ€</td></tr><tr><td align="center">-752</td><td align="center">0A001</td><td align="center">æ— æ•ˆCONNECTè¯­å¥</td></tr><tr><td align="center">-763</td><td align="center">560A1</td><td align="center">æ— æ•ˆçš„è¡¨ç©ºé—´å</td></tr><tr><td align="center">-764</td><td align="center">560A2</td><td align="center">LOBè¡¨ç©ºé—´å¿…é¡»ä¸å…¶ç›¸å…³çš„åŸºè¡¨ç©ºé—´åŒåœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­</td></tr><tr><td align="center">-765</td><td align="center">560A3</td><td align="center">è¡¨å’Œæ•°æ®åº“ä¸å…¼å®¹</td></tr><tr><td align="center">-766</td><td align="center">560A4</td><td align="center">ä¸èƒ½å¯¹è¾…åŠ©è¡¨è¿›è¡Œè¯·æ±‚çš„æ“ä½œ</td></tr><tr><td align="center">-767</td><td align="center">42626</td><td align="center">CREATEINDEXå¤±è´¥,å› ä¸ºåœ¨è¾…åŠ©è¡¨ä¸­ä¸ºç´¢å¼•æŒ‡å®šäº†åˆ—,æˆ–è€…å› ä¸ºæ²¡æœ‰ä¸ºéè¾…åŠ©è¡¨çš„ç´¢å¼•æŒ‡å®šåˆ—</td></tr><tr><td align="center">-768</td><td align="center">560A50</td><td align="center">ä¸èƒ½ä¸ºæŒ‡å®šçš„åˆ—æˆ–è€…æŒ‡å®šçš„åˆ†åŒºå»ºç«‹è¾…åŠ©è¡¨,å› ä¸ºå…¶è¾…åŠ©è¡¨å·²ç»å­˜åœ¨</td></tr><tr><td align="center">-769</td><td align="center">53096</td><td align="center">CREATEAUXTABLEçš„è§„æ ¼ä¸åŸºè¡¨ä¸åŒ¹é…</td></tr><tr><td align="center">-770</td><td align="center">530A6</td><td align="center">æŒ‡å®šçš„è¡¨å¿…é¡»æœ‰ä¸€ä¸ªROWIDåˆ—,é‚£ä¹ˆè¯¥è¡¨æ‰å¯ä»¥åŒ…å«ä¸€ä¸ªLOBåˆ—</td></tr><tr><td align="center">-771</td><td align="center">428C7</td><td align="center">æ— æ•ˆçš„ROWIDåˆ—è§„èŒƒ</td></tr><tr><td align="center">-797</td><td align="center">42987</td><td align="center">CREATETRIGGERåŒ…å«ä¸è¢«æ”¯æŒçš„è¯­æ³•</td></tr><tr><td align="center">-798</td><td align="center">428C9</td><td align="center">ä¸èƒ½æŠŠä¸€ä¸ªå€¼æ’å…¥åˆ°ç”¨GENERATEDALWAYSå®šä¹‰çš„ROWIDåˆ—</td></tr><tr><td align="center">-802</td><td align="center">22012</td><td align="center">æŸä¸€ç‰¹å®šæ“ä½œå‘ç”Ÿäº†å¼‚å¸¸é”™è¯¯.è¢«é›¶é™¤</td></tr><tr><td align="center">22003</td><td align="center"></td><td align="center">æŸä¸€ç‰¹å®šæ“ä½œå‘ç”Ÿäº†å¼‚å¸¸é”™è¯¯.ä½†ä¸æ˜¯è¢«é›¶é™¤</td></tr><tr><td align="center">-803</td><td align="center">23505</td><td align="center">ä¸èƒ½æ’å…¥è¡Œ,å› ä¸ºè¿™å°†è¿åå”¯ä¸€ç´¢å¼•çš„çº¦æŸ</td></tr><tr><td align="center">-804</td><td align="center">07002</td><td align="center">SQLDAçš„è°ƒç”¨å‚æ•°åˆ—è¡¨æœ‰è¯¯</td></tr><tr><td align="center">-805</td><td align="center">51002</td><td align="center">åœ¨è®¡åˆ’ä¸­æ²¡æœ‰å‘ç°DBRMæˆ–ç¨‹åºåŒ…å</td></tr><tr><td align="center">-807</td><td align="center">23509</td><td align="center">å¯¹å·²æŒ‡å®šçš„ç¯å¢ƒå’Œè¿æ¥,è¯¥ç¨‹åºåŒ…ä¸å¯ç”¨</td></tr><tr><td align="center">-808</td><td align="center">08001</td><td align="center">CONECTè¯­å¥ä¸ç¨‹åºä¸­çš„ç¬¬ä¸€ä¸ªCONNECTè¯­å¥ä¸ä¸€è‡´</td></tr><tr><td align="center">-811</td><td align="center">21000</td><td align="center">å½“å¤šè¡Œä½œä¸ºä¸€å†…åµŒçš„é€‰æ‹©è¯­å¥çš„è¿”å›ç»“æœæ˜¯,å¿…é¡»ä½¿ç”¨æ¸¸æ ‡</td></tr><tr><td align="center">-812</td><td align="center">22508</td><td align="center">åœ¨CURRENTPACKAGESETä¸­çš„IDé›†åˆæ˜¯ç©ºç™½çš„,è¯­å¥ä¸èƒ½è¢«æ‰§è¡Œ</td></tr><tr><td align="center">-815</td><td align="center">42920</td><td align="center">åœ¨ä¸€ä¸ªå†…ç½®é€‰æ‹©è¯­å¥æˆ–è€…ä¸€ä¸ªåŸºæœ¬è°“è¯çš„å­æŸ¥è¯¢ä¸­,æ˜¾å¼çš„æˆ–éšå«çš„æŒ‡å®šäº†GROUPBYæˆ–HAVINGè¯­å¥</td></tr><tr><td align="center">-817</td><td align="center">25000</td><td align="center">æ‰§è¡ŒSQLè¯­å¥å°†å¯èƒ½å¯¼è‡´ç¦æ­¢æ›´æ–°ç”¨æˆ·æ•°æ®æˆ–DB2ç¼–ç›®</td></tr><tr><td align="center">-818</td><td align="center">5103</td><td align="center">è®¡åˆ’&lt;ï¼&gt;è½½å…¥ç»„ä»¶çš„æ—¶é—´æˆ³ä¸åŒ¹é…,åœ¨æ‰§è¡Œè®¡åˆ’ä¸­æ²¡æœ‰ä»åŒä¸€ä¸ªé¢„ç¼–è¯‘ä¸­å»ºç«‹DBRM,è¯¥é¢„ç¼–è¯‘æ˜¯ä½œä¸ºç»„ä»¶è½½å…¥çš„</td></tr><tr><td align="center">-819</td><td align="center">58004</td><td align="center">è§†å›¾ä¸èƒ½é‡å»º,å› ä¸ºåœ¨DB2ç¼–ç›®ä¸­å­˜å‚¨çš„åˆ†ææ ‘é•¿åº¦ä¸º0</td></tr><tr><td align="center">-820</td><td align="center">58004</td><td align="center">åœ¨è¿™ä¸ªDB2ç‰ˆæœ¬çš„DB2ç¼–ç›®ä¸­é‡åˆ°äº†æ— æ•ˆå€¼</td></tr><tr><td align="center">-822</td><td align="center">51004</td><td align="center">åœ¨SQLDAä¸­é‡åˆ°äº†æ— æ•ˆåœ°å€</td></tr><tr><td align="center">-840</td><td align="center">54004</td><td align="center">åœ¨é€‰æ‹©åˆ—è¡¨æˆ–æ’å…¥åˆ—è¡¨ä¸­è¿”å›çš„é¡¹ç›®å¤ªå¤š</td></tr><tr><td align="center">-842</td><td align="center">08002</td><td align="center">åˆ°æŒ‡å®šä½ç½®çš„è¿æ¥å·²ç»å­˜åœ¨</td></tr><tr><td align="center">-843</td><td align="center">08003</td><td align="center">SETCONNECTIONæˆ–RELEASEè¯­å¥æ— æ³•æ‰§è¡Œ,å› ä¸ºè¿æ¥ä¸å­˜åœ¨</td></tr><tr><td align="center">-870</td><td align="center">58026</td><td align="center">å®¿ä¸»å˜é‡æè¿°ç¬¦çš„ä¸ªæ•°ä¸ç­‰äºè¯­å¥ä¸­å®¿ä¸»å˜é‡çš„ä¸ªæ•°</td></tr><tr><td align="center">-872</td><td align="center">51302</td><td align="center">è¿™ä¸ªå­ç³»ç»Ÿå·²æŒ‡å®šäº†æœ‰æ•ˆçš„CCSID</td></tr><tr><td align="center">-873</td><td align="center">53090</td><td align="center">åŒä¸€SQLè¯­å¥ä¸­,ä¸èƒ½åŒæ—¶å¼•ç”¨EBCDICè¡¨ä¸­çš„å®šä¹‰çš„åˆ—å’ŒASCIIè¡¨ä¸­å®šä¹‰çš„åˆ—</td></tr><tr><td align="center">-874</td><td align="center">53901</td><td align="center">æŒ‡å®šå¯¹è±¡çš„ç¼–ç æ–¹æ¡ˆä¸å…¶è¡¨ç©ºé—´çš„ç¼–ç æ–¹æ¡ˆä¸åŒ¹é…</td></tr><tr><td align="center">-875</td><td align="center">42988</td><td align="center">æŒ‡å®šçš„æ“ä½œç¬¦ä¸èƒ½ç”¨äºASCIIæ•°æ®</td></tr><tr><td align="center">-876</td><td align="center">53092</td><td align="center">ä¸èƒ½ä¸ºæŒ‡å®šçš„åŸå› åˆ›å»ºå¯¹è±¡:æä¾›äº†åŸå› ä»£ç </td></tr><tr><td align="center">-877</td><td align="center">53093</td><td align="center">æ•°æ®åº“æˆ–è¡¨ç©ºé—´ä¸å…è®¸ç”¨ASCII,å¿…é¡»ä½¿ç”¨EBCDIC</td></tr><tr><td align="center">-878</td><td align="center">53094</td><td align="center">è¯¥PLANâ€”â€”TABLEä¸èƒ½æ˜¯ASCII,å¿…é¡»ä½¿ç”¨EBCDIC</td></tr><tr><td align="center">-879</td><td align="center">53095</td><td align="center">æŒ‡å®šå¯¹è±¡çš„CREATEæˆ–ALTERè¯­å¥ä¸èƒ½å°†åˆ—ã€å•å€¼ç±»å‹,æŸä¸ªå­˜å‚¨è¿‡ç¨‹æˆ–ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°çš„å‚æ•°å®šä¹‰ä¸ºä»¥ä¸‹ç±»å‹:MAXEDDATA,GRAPHIC,VARGRAPHIC,LONGVARGRAPHIC,å› ä¸ºç³»ç»Ÿæ²¡æœ‰ä¸ºæŒ‡å®šçš„ç¼–ç æ–¹æ¡ˆå®šä¹‰ç›¸åº”çš„CCSID</td></tr><tr><td align="center">-900</td><td align="center">08003</td><td align="center">åº”ç”¨å¤„ç†æ²¡æœ‰è¿æ¥åˆ°åº”ç”¨æœåŠ¡å™¨,è¯­å¥ä¸èƒ½è¢«æ‰§è¡Œ</td></tr><tr><td align="center">-901</td><td align="center">58004</td><td align="center">é‡åˆ°æ—¶æ–­æ—¶ç»­çš„ç³»ç»Ÿé”™è¯¯,è¯¥é”™è¯¯ä¸èƒ½æŠ‘åˆ¶åç»§çš„SQLè¯­å¥çš„æ‰§è¡Œ</td></tr><tr><td align="center">-902</td><td align="center">58005</td><td align="center">å†…éƒ¨æ§åˆ¶å—çš„æŒ‡é’ˆé”™è¯¯,è¦æ±‚é‡æ–°ç»‘å®š</td></tr><tr><td align="center">-904</td><td align="center">57011</td><td align="center">æŒ‡å®šçš„èµ„æºä¸å¯ç”¨</td></tr><tr><td align="center">-905</td><td align="center">57014</td><td align="center">è¶…å‡ºäº†èµ„æºä¸Šé™</td></tr><tr><td align="center">-906</td><td align="center">51005</td><td align="center">å› ä¸ºé‡å¤§é”™è¯¯,SQLè¯­å¥æ— æ³•æ‰§è¡Œ</td></tr><tr><td align="center">-908</td><td align="center">23510</td><td align="center">å½“å‰èµ„æºé™åˆ¶è®¾æ–½çš„è§„èŒƒæˆ–è€…è‡ªåŠ¨é‡ç»‘å®šçš„ç³»ç»Ÿå‚æ•°ä¸å…è®¸BIND,REBIND,AUTOREBIND</td></tr><tr><td align="center">-909</td><td align="center">57007</td><td align="center">å¯¹è±¡å·²è¢«åˆ é™¤</td></tr><tr><td align="center">-910</td><td align="center">57007</td><td align="center">å› ä¸ºåœ¨è¯¥å¯¹è±¡ä¸ŠæŒ‚èµ·DROP,æ‰€ä»¥ä¸èƒ½è®¿é—®è¯¥å¯¹è±¡</td></tr><tr><td align="center">-911</td><td align="center">40001</td><td align="center">å½“å‰å·¥ä½œå•å…ƒå·²è¢«å›æ»š</td></tr><tr><td align="center">-913</td><td align="center">57033</td><td align="center">å› ä¸ºæ­»é”æˆ–è¶…æ—¶å¯¼è‡´ä¸æˆåŠŸæ‰§è¡Œ</td></tr><tr><td align="center">-917</td><td align="center">42969</td><td align="center">ç»‘å®šç¨‹åºåŒ…å·²ç»å¤±è´¥</td></tr><tr><td align="center">-918</td><td align="center">51021</td><td align="center">SQLè¯­å¥ä¸èƒ½è¢«æ‰§è¡Œ,å› ä¸ºè¿æ¥ä¸¢å¤±</td></tr><tr><td align="center">-919</td><td align="center">56045</td><td align="center">éœ€è¦ä¸€ä¸ªROLLBACK</td></tr><tr><td align="center">-922</td><td align="center">42505</td><td align="center">è¿æ¥æƒé™å¤±è´¥.è¯•å›¾ä»TSOã€CICSæˆ–IMSè®¿é—®DB2,åŒæ—¶ç›¸åº”çš„è¿æ¥è®¾æ–½å¤„äºéæ´»åŠ¨çš„çŠ¶æ€</td></tr><tr><td align="center">-923</td><td align="center">57015</td><td align="center">å› ä¸ºDB2ä¸å¯ç”¨,æ‰€ä»¥ä¸èƒ½å»ºç«‹è¿æ¥</td></tr><tr><td align="center">-924</td><td align="center">58006</td><td align="center">é‡åˆ°äº†DB2å†…éƒ¨çš„è¿æ¥é”™è¯¯:æä¾›äº†åŸå› ä»£ç </td></tr><tr><td align="center">-925</td><td align="center">2D521</td><td align="center">SQLçš„COMMITè¯­å¥ä¸èƒ½ä»CICSæˆ–IMS&#x2F;TMå‘å¸ƒ</td></tr><tr><td align="center">-926</td><td align="center">2D521</td><td align="center">SQLçš„ROLLBACKè¯­å¥ä¸èƒ½ä»CICSæˆ–IMS&#x2F;TMå‘å¸ƒ</td></tr><tr><td align="center">-927</td><td align="center">51006</td><td align="center">å½“æ­£åœ¨è¿æ¥çš„ç¯å¢ƒæ²¡æœ‰å»ºç«‹æ—¶,è¯­è¨€æ¥å£è¢«è°ƒç”¨.åˆ©ç”¨DSNå‘½ä»¤æ¿€å‘è¯¥ç¨‹åº</td></tr><tr><td align="center">-929</td><td align="center">58002</td><td align="center">æ•°æ®è·å–é€€å‡ºå·²ç»å¤±è´¥(DPROP)</td></tr><tr><td align="center">-939</td><td align="center">51021</td><td align="center">ç”±äºè¿œç¨‹æœåŠ¡å™¨çš„æœªè¯·æ±‚çš„å›æ»š,è¦æ±‚ä¸€ä¸ªå›æ»š</td></tr><tr><td align="center">-947</td><td align="center">56038</td><td align="center">SQLè¯­å¥å¤±è´¥,å› ä¸ºæ›´æ–°ä¸èƒ½è¢«ä¼ æ’­(DPROP)</td></tr><tr><td align="center">-948</td><td align="center">56062</td><td align="center">DDFæ²¡æœ‰å¯åŠ¨,åˆ†å¸ƒå¼æ“ä½œæ— æ•ˆ</td></tr><tr><td align="center">-950</td><td align="center">42705</td><td align="center">åœ¨SQLè¯­å¥ä¸­æŒ‡å®šçš„ä½ç½®åœ¨SYSIBM.LOCATIONSä¸­æ²¡æœ‰å®šä¹‰</td></tr><tr><td align="center">-965</td><td align="center">51021</td><td align="center">å­˜å‚¨è¿‡ç¨‹éæ­£å¸¸ç»ˆæ­¢(åœ¨DB26ä¹‹å‰çš„ç‰ˆæœ¬)</td></tr><tr><td align="center">-981</td><td align="center">57015</td><td align="center">å½“å‰ä¸æ˜¯å¤„äºå…è®¸SQLçš„çŠ¶æ€æ—¶,è¯•å›¾åœ¨RRSAFä¸­æ‰§è¡ŒSQL</td></tr><tr><td align="center">-991</td><td align="center">57015</td><td align="center">è°ƒç”¨è¿æ¥ä¸èƒ½å»ºç«‹ä¸€ä¸ªåˆ°DB2çš„éšå«æˆ–å¼€æ”¾è¿æ¥</td></tr><tr><td align="center">-2001</td><td align="center">53089</td><td align="center">ä¸ºå‚¨å­˜è¿‡ç¨‹æŒ‡å®šçš„å®¿ä¸»å˜é‡å‚æ•°çš„ä¸ªæ•°ä¸ç­‰äºé¢„æœŸçš„å‚æ•°ä¸ªæ•°</td></tr><tr><td align="center">-20003</td><td align="center">560A7</td><td align="center">ä¸èƒ½ä¸ºGRECPä¸­çš„è¡¨ç©ºé—´æˆ–ç´¢å¼•æŒ‡å®šGBPCACHENONE</td></tr><tr><td align="center">-20004</td><td align="center">560A8</td><td align="center">å¯¹äºWORKFILEå¯¹è±¡.8KBæˆ–16Kbçš„ç¼“å†²æ± é¡µé¢å¤§å°æ— æ•ˆ</td></tr><tr><td align="center">-20005</td><td align="center">54035</td><td align="center">æŒ‡å®šçš„å¯¹è±¡ç±»å‹è¶…å‡ºäº†å†…éƒ¨çš„IDæé™</td></tr><tr><td align="center">-20006</td><td align="center">53097</td><td align="center">å½“æ²¡æœ‰æŒ‡å®šWLMç¯å¢ƒæ—¶,LOBä¸èƒ½è¢«æŒ‡å®šä¸ºå‚æ•°</td></tr><tr><td align="center">-20070</td><td align="center">53098</td><td align="center">ä¸èƒ½éLOBåˆ—å»ºç«‹ä¸€ä¸ªè¾…åŠ©è¡¨</td></tr><tr><td align="center">-20071</td><td align="center">53099</td><td align="center">å¿…é¡»æŒ‡å®šWLMç¯å¢ƒå</td></tr><tr><td align="center">-20072</td><td align="center">56052</td><td align="center">æŒ‡å®šçš„æƒé™IDä¸æ‹¥æœ‰åœ¨è§¦å‘å™¨ç¨‹åºåŒ…ä¸Šæ‰§è¡ŒBINDæ‰€éœ€çš„æƒé™</td></tr><tr><td align="center">-20073</td><td align="center">42927</td><td align="center">ä¸èƒ½æŒ‰ç…§æŒ‡å®šçš„è¦æ±‚æ›´æ”¹å‘½åçš„å‡½æ•°,å› ä¸ºåœ¨ç°å­˜çš„è§†å›¾å®šä¹‰ä¸­å¼•ç”¨äº†è¯¥å‡½æ•°</td></tr><tr><td align="center">-20074</td><td align="center">42939</td><td align="center">ä¸èƒ½å»ºç«‹æŒ‡å®šçš„å¯¹è±¡,å› ä¸ºâ€œSYSâ€æ˜¯ä¸€ä¸ªä¿ç•™çš„å‰ç¼€</td></tr><tr><td align="center">-20100</td><td align="center">56059</td><td align="center">åœ¨è¢«è§¦å‘çš„SQLè¯­å¥ä¸­æœ‰BINDé”™è¯¯,æŒ‡å®šäº†é”™è¯¯çš„SQLCODEå’ŒSQLSTATE</td></tr><tr><td align="center">-20101</td><td align="center">56059</td><td align="center">ç”±äºæŒ‡å®šçš„åŸå› ä»£ç ,è¯¥å‡½æ•°å¤±è´¥</td></tr><tr><td align="center">-20102</td><td align="center">42849</td><td align="center">åœ¨CREATEæˆ–ALTERFUNCTIONè¯­å¥ä¸­ä¸èƒ½ä½¿ç”¨æŒ‡å®šçš„é€‰é¡¹</td></tr><tr><td align="center">-20104</td><td align="center">42856</td><td align="center">æ›´æ”¹ä¸€ä¸ªCCSIDå¤±è´¥</td></tr><tr><td align="center">-20106</td><td align="center">42945</td><td align="center">ä¸èƒ½æ”¹å˜è¡¨ç©ºé—´æˆ–æ•°æ®åº“çš„CCSID,å› ä¸ºç°å­˜çš„è¯•å›¾å¼•ç”¨</td></tr><tr><td align="center">-30000</td><td align="center">58008</td><td align="center">DRDAåˆ†å¸ƒåè®®é”™è¯¯;å¤„ç†å¯ä»¥ç»§ç»­</td></tr><tr><td align="center">-30002</td><td align="center">57057</td><td align="center">ä½¿ç”¨DRDAçš„åˆ†å¸ƒå¼å®¢æˆ·æŠŠOPENè¯­å¥è¿æ¥åˆ°PREPARE,ä½†PREPAREæ¥å—åˆ°ä¸€ä¸ªSQLCODEä¸ºï¼‹495çš„è­¦å‘Š</td></tr><tr><td align="center">-30020</td><td align="center">58009</td><td align="center">DRDAåˆ†å¸ƒåè®®é”™è¯¯;å¯¹è¯è¢«è§£é™¤</td></tr><tr><td align="center">-30021</td><td align="center">58010</td><td align="center">DRDAåˆ†å¸ƒåè®®é”™è¯¯;å¤„ç†ä¸èƒ½ç»§ç»­</td></tr><tr><td align="center">-30030</td><td align="center">58013</td><td align="center">è¿ååˆ†å¸ƒåè®®:COMMITä¸æˆåŠŸ,å¯¹è¯è¢«è§£é™¤(AS)</td></tr><tr><td align="center">-30040</td><td align="center">57012</td><td align="center">å› ä¸ºä¸èƒ½å¾—åˆ°èµ„æº,æ‰§è¡Œå¤±è´¥,å¤„ç†å¯ä»¥ç»§ç»­(AS)</td></tr><tr><td align="center">-30041</td><td align="center">57013</td><td align="center">å› ä¸ºä¸èƒ½å¾—åˆ°èµ„æº,æ‰§è¡Œå¤±è´¥,å¤„ç†ä¸èƒ½æˆåŠŸçš„ç»§ç»­(AS)</td></tr><tr><td align="center">-30050</td><td align="center">58011</td><td align="center">æ‰§è¡Œä¸æˆåŠŸ,åœ¨BINDè¿‡ç¨‹ä¸­ä¸èƒ½æ‰§è¡Œè¯­å¥</td></tr><tr><td align="center">-30051</td><td align="center">58012</td><td align="center">ç‰¹å®šçš„BINDè¿‡ç¨‹ä¸æ˜¯å¤„äºæ´»åŠ¨çŠ¶æ€(è¿œç¨‹BIND),ä»è€Œå¯¼è‡´å¤±è´¥</td></tr><tr><td align="center">-30052</td><td align="center">42932</td><td align="center">ç¨‹åºå‡†å¤‡çš„å‡è®¾é”™è¯¯</td></tr><tr><td align="center">-30053</td><td align="center">42506</td><td align="center">ç¨‹åºåŒ…çš„æ‹¥æœ‰è€…é­é‡æˆæƒå¤±è´¥</td></tr><tr><td align="center">-30060</td><td align="center">08004</td><td align="center">RBDé­é‡æˆæƒå¤±è´¥</td></tr><tr><td align="center">-30061</td><td align="center">08004</td><td align="center">æŒ‡å®šäº†æ— æ•ˆæˆ–è€…æ²¡æœ‰å­˜åœ¨çš„RDB</td></tr><tr><td align="center">-30070</td><td align="center">58014</td><td align="center">ç›®æ ‡å­ç³»ç»Ÿä¸æ”¯æŒè¿™ä¸ªå‘½ä»¤</td></tr><tr><td align="center">-30071</td><td align="center">58015</td><td align="center">ç›®æ ‡å­ç³»ç»Ÿä¸æ”¯æŒè¿™ä¸ªå¯¹è±¡</td></tr><tr><td align="center">-30072</td><td align="center">58016</td><td align="center">ç›®æ ‡å­ç³»ç»Ÿä¸æ”¯æŒè¿™ä¸ªå‚æ•°</td></tr><tr><td align="center">-30073</td><td align="center">58017</td><td align="center">ç›®æ ‡å­ç³»ç»Ÿä¸æ”¯æŒè¿™ä¸ªå‚æ•°å€¼</td></tr><tr><td align="center">-30074</td><td align="center">58018</td><td align="center">åº”ç­”ä¿¡æ¯ä¸è¢«æ”¯æŒ</td></tr><tr><td align="center">-30080</td><td align="center">08001</td><td align="center">SNAé€šä¿¡é”™è¯¯</td></tr><tr><td align="center">-30081</td><td align="center">58019</td><td align="center">TCP&#x2F;IPé€šä¿¡é”™è¯¯</td></tr><tr><td align="center">-30082</td><td align="center">08001</td><td align="center">ç”±äºå®‰å…¨å†²çªã€é€šä¿¡å¤±è´¥:æä¾›äº†åŸå› ä»£ç </td></tr><tr><td align="center">-30090</td><td align="center">25000</td><td align="center">æŒ‡å®šçš„æ“ä½œå¯¹è¿œç¨‹æ‰§è¡Œå¤±è´¥</td></tr><tr><td align="center">-30104</td><td align="center">56095</td><td align="center">åœ¨ç»‘å®šé€‰é¡¹ä¸ç»‘å®šå€¼ä¸­æœ‰é”™è¯¯</td></tr><tr><td align="center">-30105</td><td align="center">56096</td><td align="center">æŒ‡å®šçš„ç»‘å®šé€‰é¡¹ä¸å…¼å®¹</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2ç³»åˆ—ã€äºŒã€‘</title>
      <link href="/DB2%E7%B3%BB%E5%88%97%E3%80%90%E4%BA%8C%E3%80%91/"/>
      <url>/DB2%E7%B3%BB%E5%88%97%E3%80%90%E4%BA%8C%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šç¯‡æ–‡ç« è®°å½•äº†Linuxä¸‹DB2çš„å®‰è£…,ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†,ç°åœ¨è®°å½•ä¸€ä¸‹DB2çš„ä¸€äº›å¸¸ç”¨å‘½ä»¤ã€‚</p><span id="more"></span><h4 id="è¿æ¥DB2æ•°æ®åº“"><a href="#è¿æ¥DB2æ•°æ®åº“" class="headerlink" title="è¿æ¥DB2æ•°æ®åº“"></a>è¿æ¥DB2æ•°æ®åº“</h4><ul><li>è¿æ¥æœ¬åœ°æ•°æ®åº“ï¼š<code>db2 connect to &lt;DB2åº“å&gt;</code></li><li>è¿æ¥è¿œç¨‹æ•°æ®åº“ï¼š<code>db2 connect to &lt;DB2åº“å&gt; user &lt;ç”¨æˆ·å&gt; using &lt;å¯†ç &gt;</code></li><li>æŸ¥çœ‹æ‰€æœ‰è¿æ¥ï¼š<code>db2 list application</code></li><li>å¼ºè¿«æ‰€æœ‰åº”ç”¨æ–­å¼€æ•°æ®åº“è¿æ¥(å¼‚æ­¥çš„)ï¼š<code>db2 force application all</code></li><li>æ–­å¼€æ•°æ®åº“è¿æ¥ï¼š<code>db2 connect reset</code>æˆ– <code>db2 terminate</code></li></ul><h4 id="æ˜¾ç¤ºDB2é”™è¯¯ä¿¡æ¯"><a href="#æ˜¾ç¤ºDB2é”™è¯¯ä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºDB2é”™è¯¯ä¿¡æ¯"></a>æ˜¾ç¤ºDB2é”™è¯¯ä¿¡æ¯</h4><ul><li>DB2è§£é‡Šä¿¡æ¯ï¼š<code>db2 ? &lt;SQLSTATE&gt;</code></li><li>SQLCODEè§£é‡Šä¿¡æ¯ï¼š<code>db2 ? &lt;SQLCODE&gt;</code><div class="note red icon-padding flat"><i class="note-icon fa fa-triangle-exclamation"></i><p>ç¼ºç‚¹æ˜¯åªèƒ½çœ‹è‹±æ–‡ä¿¡æ¯ï¼Œä¸å¤ªç›´è§‚ï¼Œè‹±æ–‡ä¸å¥½çš„å¯ä»¥<a href="https://www.mizhuo.site/2019/09/24/DB2-SqlCode-%E9%94%99%E8%AF%AF%E7%A0%81%E5%A4%A7%E5%85%A8">ç‚¹å‡»è¿™é‡Œ</a>æŸ¥çœ‹ä¸­æ–‡è¯¦ç»†é”™è¯¯ä¿¡æ¯</p></div></li></ul><h4 id="å¯åŠ¨å…³é—­æ•°æ®åº“"><a href="#å¯åŠ¨å…³é—­æ•°æ®åº“" class="headerlink" title="å¯åŠ¨å…³é—­æ•°æ®åº“"></a>å¯åŠ¨å…³é—­æ•°æ®åº“</h4><ul><li>å¯åŠ¨æ•°æ®åº“ï¼š<code>db2start</code></li><li>åœæ­¢æ•°æ®åº“ï¼š<code>db2stop</code>æˆ–<code>db2stop force</code></li></ul><h4 id="å¤‡ä»½è¿˜åŸå¯¼å…¥å¯¼å‡º"><a href="#å¤‡ä»½è¿˜åŸå¯¼å…¥å¯¼å‡º" class="headerlink" title="å¤‡ä»½è¿˜åŸå¯¼å…¥å¯¼å‡º"></a>å¤‡ä»½è¿˜åŸå¯¼å…¥å¯¼å‡º</h4><ul><li>å¤‡ä»½æ•´ä¸ªæ•°æ®åº“æ•°æ®ï¼š<code>db2 backup db db2name&lt;æ•°æ®åº“åç§°&gt;</code></li><li>è¿˜åŸæ•°æ®åº“ï¼š<code>db2 restore db &lt;db2name&gt;</code><br>  ä¾‹ï¼š<code>db2 restore database &lt;åº“å&gt; from &lt;è·¯å¾„&gt; taken at 20150304215844</code><br>  å¯¼å‡ºæ•°æ®ï¼š  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db2 &quot;export to &lt;è·¯å¾„&gt;/&lt;åç§°&gt;.del of del select * from &lt;è¡¨å&gt;&quot;</span><br><span class="line">db2 &quot;export to &lt;è·¯å¾„&gt;/&lt;åç§°&gt;.ixf of ixf select * from &lt;è¡¨å&gt;&quot;</span><br><span class="line">db2 &quot;export to &lt;è·¯å¾„&gt;/&lt;åç§°&gt;.txt of del select * from &lt;è¡¨å&gt;&quot;</span><br></pre></td></tr></table></figure>  å¯¼å…¥æ•°æ®ï¼š  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db2 import <span class="keyword">from</span> <span class="operator">&lt;</span>è·¯å¾„<span class="operator">&gt;</span><span class="operator">/</span><span class="operator">&lt;</span>åç§°<span class="operator">&gt;</span>.ixf <span class="keyword">of</span> ixf <span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span></span><br><span class="line">db2 load <span class="keyword">from</span> <span class="operator">&lt;</span>è·¯å¾„<span class="operator">&gt;</span><span class="operator">/</span><span class="operator">&lt;</span>åç§°<span class="operator">&gt;</span>.ixf <span class="keyword">of</span> ixf <span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span></span><br><span class="line">db2 load <span class="keyword">from</span> <span class="operator">&lt;</span>è·¯å¾„<span class="operator">&gt;</span><span class="operator">/</span><span class="operator">&lt;</span>åç§°<span class="operator">&gt;</span>.ixf <span class="keyword">of</span> ixf replace <span class="keyword">into</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="operator">/</span><span class="operator">/</span> è£…å…¥æ•°æ®å‰ï¼Œå…ˆåˆ é™¤å·²å­˜åœ¨è®°å½•</span><br><span class="line">db2 load <span class="keyword">from</span> <span class="operator">&lt;</span>è·¯å¾„<span class="operator">&gt;</span><span class="operator">/</span><span class="operator">&lt;</span>åç§°<span class="operator">&gt;</span>.ixf <span class="keyword">of</span> ixf restart <span class="keyword">into</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="operator">/</span><span class="operator">/</span> å½“è£…å…¥å¤±è´¥æ—¶ï¼Œé‡æ–°æ‰§è¡Œï¼Œå¹¶è®°å½•å¯¼å‡ºç»“æœå’Œé”™è¯¯ä¿¡æ¯</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ•°æ®åº“çš„åˆ›å»ºå’Œåˆ é™¤"><a href="#æ•°æ®åº“çš„åˆ›å»ºå’Œåˆ é™¤" class="headerlink" title="æ•°æ®åº“çš„åˆ›å»ºå’Œåˆ é™¤"></a>æ•°æ®åº“çš„åˆ›å»ºå’Œåˆ é™¤</h4><ul><li>åˆ›å»ºæ•°æ®åº“ï¼š<code>db2 create database &lt;åº“å&gt; using UFT-8 territory CN</code><br>  è‹¥å‡ºç°ä»¥ä¸‹é”™è¯¯:  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[db2inst1@VM_0_5_centos server_dec]$ db2 create database Test using UFT-8 territory CN</span><br><span class="line">SQL0104N  An unexpected token &quot;UFT-8&quot; was found following &quot;USING&quot;.  Expected </span><br></pre></td></tr></table></figure>  æ˜¯å› ä¸ºä½¿ç”¨äº†â€œsu usernameâ€è€Œéâ€œsu -usernameâ€åœ¨ç»ˆç«¯åˆ‡æ¢ç”¨æˆ·ï¼Œå‰è€…ç›¸å½“äºç®€å•åœ°åŒæ—¶ç™»å½•æœ‰ç”¨æˆ·ï¼Œè€Œåè€…ç›¸å½“äºæ³¨é”€åé‡æ–°ç™»å½•æ–°ç”¨æˆ·ï¼Œæ‰€ä»¥ä¸ä¼šç»´æŒä¹‹å‰ç”¨æˆ·çš„ENVè®¾ç½®ã€‚<br>  åˆ‡æ¢ä¸ºsu - db2inst1 å°±å¯ä»¥åˆ›å»ºæˆåŠŸäº†  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[db2inst1@VM_0_5_centos ~]$ db2 create database Test  using codeset UTF-8 territory CN</span><br><span class="line">The CREATE DATABASE command completed successfully.</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ï¼š<code>db2 list db directory</code></li><li>åˆ é™¤æ•°æ®åº“ï¼š<code>db2 drop database Test</code>, å¦‚æœæ‰§è¡Œå¤±è´¥å¯èƒ½æ˜¯æœ‰æ•°æ®åº“è¿æ¥å­˜åœ¨ã€‚æ‰§è¡Œ<code>db2stop force</code>æˆ–è€…<code>db2 force application all</code>ã€‚å†å¯åŠ¨ <code>db2start</code>ã€‚åˆ é™¤æ•°æ®åº“æ—¶ï¼Œæ•°æ®åº“æ‰€æœ‰è¡¨ç©ºé—´ä¼šè‡ªåŠ¨åˆ é™¤ã€‚</li></ul><h4 id="Schemaçš„åˆ›å»ºå’Œåˆ é™¤"><a href="#Schemaçš„åˆ›å»ºå’Œåˆ é™¤" class="headerlink" title="Schemaçš„åˆ›å»ºå’Œåˆ é™¤"></a>Schemaçš„åˆ›å»ºå’Œåˆ é™¤</h4><ul><li>åˆ›å»ºSchemaï¼š<code>db2 list schemas</code></li><li>æŸ¥è¯¢Schemaï¼š<code>db2 select schemaname from syscat.schemata  </code></li><li>åˆ é™¤Schemaï¼š<code>db2 DROP SCHEMA &lt;name&gt; RESTRICT</code>  ï¼ˆåªèƒ½åˆ é™¤ç©ºSchemaï¼‰</li><li>åˆ‡æ¢å½“å‰Schemaï¼š <code>db2 SET CURRENT SCHEMA = &#39;PAYROLL&#39;</code></li><li>æŸ¥çœ‹å½“å‰Schemaï¼š<code>db2 select current schema from sysibm.sysdummy1</code> æˆ– <code>db2 select current schema from sysibm.dual</code></li></ul><h4 id="è¡¨çš„åˆ›å»ºåŠä¿®æ”¹"><a href="#è¡¨çš„åˆ›å»ºåŠä¿®æ”¹" class="headerlink" title="è¡¨çš„åˆ›å»ºåŠä¿®æ”¹"></a>è¡¨çš„åˆ›å»ºåŠä¿®æ”¹</h4><ul><li>åˆ›å»ºè¡¨:<code>db2 create table TTBB &quot;( T_ID int not null,T_TYPE CHAR(1))&quot;</code></li></ul><h4 id="è¡¨ç´¢å¼•"><a href="#è¡¨ç´¢å¼•" class="headerlink" title="è¡¨ç´¢å¼•"></a>è¡¨ç´¢å¼•</h4><ul><li>æŸ¥çœ‹è¡¨çš„ç´¢å¼•æƒ…å†µ:<code>db2look -d &lt;æ•°æ®åº“å&gt; -z &lt;Schema&gt; -t &quot;&lt;è¡¨å&gt;&quot; -a -e -c</code></li><li>ç®€å•æŸ¥çœ‹ç´¢å¼•:<code>db2 describe indexes for table &lt;Schema.tabName&gt;</code></li><li>ä»ç³»ç»Ÿè¡¨ä¸­æŸ¥è¯¢ç´¢å¼•:&#96;select * from sysibm.sysindexes where tbName &#x3D; &lt;è¡¨å&gt;â€<br><span style = 'color:red;'>æ¨èä½¿ç”¨ç¬¬ä¸€ç§ï¼Œæ¯”è¾ƒè¯¦ç»†ã€‚</span></li><li>å»ºç«‹è¡¨ç´¢å¼•:<code>create index ç´¢å¼•å on è¡¨å(åˆ—åï¼Œåˆ—å);</code></li><li>åˆ é™¤è¡¨ç´¢å¼•:<code>drop index ç´¢å¼•å on è¡¨å;</code></li></ul><h4 id="è§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹"><a href="#è§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="è§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹"></a>è§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹</h4><ul><li>æŸ¥çœ‹æŸå¼ è¡¨çš„è§¦å‘å™¨:<code>select * from syscat.triggers where tabname = &lt;è¡¨å&gt;</code></li><li>æŸ¥çœ‹è§¦å‘å™¨çš„ä»£ç :<code>select text from syscat.triggers where tabname = &lt;è¡¨å&gt;</code></li><li>åˆ›å»ºè§¦å‘å™¨:  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> <span class="operator">&lt;</span>schema<span class="operator">&gt;</span>.<span class="operator">&lt;</span>è§¦å‘å™¨åç§°<span class="operator">&gt;</span> after <span class="operator">&lt;</span><span class="keyword">insert</span><span class="operator">/</span><span class="keyword">update</span><span class="operator">/</span><span class="keyword">delete</span><span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">on</span> <span class="operator">&lt;</span>Schema.tabname<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">referencing</span> <span class="operator">&lt;</span><span class="keyword">new</span> <span class="keyword">as</span> n<span class="operator">&gt;</span><span class="operator">/</span><span class="operator">&lt;</span><span class="keyword">new</span> <span class="keyword">as</span> n <span class="keyword">old</span> <span class="keyword">as</span> o<span class="operator">&gt;</span><span class="operator">/</span><span class="operator">&lt;</span><span class="keyword">old</span> <span class="keyword">as</span> o<span class="operator">&gt;</span> <span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span> mode db2 <span class="keyword">sql</span></span><br><span class="line"><span class="keyword">begin</span> <span class="keyword">atomic</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> XXX (XXX) <span class="keyword">VALUES</span> (n.XXX);</span><br><span class="line"><span class="keyword">update</span> XXX <span class="keyword">set</span> o.XXX <span class="operator">=</span> n.XXX <span class="keyword">where</span> o.XXX <span class="operator">=</span> n.XXX;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> XXX <span class="keyword">where</span> XXX <span class="operator">=</span> o.XXX;</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></li><li>åˆ é™¤è§¦å‘å™¨:<code>DROP TRIGGER &lt;è§¦å‘å™¨åç§°&gt;</code></li><li>æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹:<code>select * from syscat.procedures</code></li><li>æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹ä»£ç :<code>select text from syscat.procedures where procname = &lt;å­˜å‚¨è¿‡ç¨‹åç§°&gt;</code></li></ul><h4 id="å…¶å®ƒå‘½ä»¤è¡Œ"><a href="#å…¶å®ƒå‘½ä»¤è¡Œ" class="headerlink" title="å…¶å®ƒå‘½ä»¤è¡Œ"></a>å…¶å®ƒå‘½ä»¤è¡Œ</h4><ul><li>æŸ¥çœ‹ç‰ˆæœ¬:<code>db2level</code></li><li>æ˜¾ç¤ºå½“å‰æ•°æ®åº“ç®¡ç†å®ä¾‹:<code>db2 get instance</code></li><li>åˆ—å‡ºæ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨:<code>db2 list tables</code></li><li>æ‰§è¡ŒSQLè„šæœ¬:<code>db2 -svtf test.sql</code></li><li>æŸ¥çœ‹db2å¯¹sqlè„šæœ¬çš„å»ºè®®:<code>db2advis -d &lt;æ•°æ®åº“å&gt; -i &lt;sqlæ–‡ä»¶ä½ç½®&gt;</code></li><li>æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’:<code>db2expln -d &lt;æ•°æ®åº“å&gt; -i -g -q &lt;sqlè¯­å¥&gt; -t</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2ç³»åˆ—ã€ä¸€ã€‘</title>
      <link href="/DB2%E7%B3%BB%E5%88%97%E3%80%90%E4%B8%80%E3%80%91/"/>
      <url>/DB2%E7%B3%BB%E5%88%97%E3%80%90%E4%B8%80%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>ä½œä¸ºä¸€åªåœ¨é“¶è¡Œå·¥ä½œçš„ç¨‹åºçŒ¿ï¼Œå·¥ä½œéœ€è¦ä½¿ç”¨DB2æ•°æ®åº“æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸‹åœ¨Linuxä¸‹å®‰è£…DB2çš„æ–¹æ³•ã€‚</p><span id="more"></span><h4 id="ä¸‹è½½DB2-Linuxå®‰è£…åŒ…"><a href="#ä¸‹è½½DB2-Linuxå®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½DB2 Linuxå®‰è£…åŒ…"></a>ä¸‹è½½DB2 Linuxå®‰è£…åŒ…</h4><p>è¿›å…¥IBMå®˜ç½‘ä¸‹è½½DB2å®‰è£…åŒ…ã€‚<a href="https://www-01.ibm.com/marketing/iwm/iwm/web/download.do?S_PKG=ov59318&source=mrs-db2devcdbsrv&transactionid=455968724&pageType=urx">ç‚¹å‡»ä¸‹è½½</a></p><h4 id="é€šè¿‡FTPä¸Šä¼ è‡³æœåŠ¡å™¨å¹¶è§£å‹taråŒ…"><a href="#é€šè¿‡FTPä¸Šä¼ è‡³æœåŠ¡å™¨å¹¶è§£å‹taråŒ…" class="headerlink" title="é€šè¿‡FTPä¸Šä¼ è‡³æœåŠ¡å™¨å¹¶è§£å‹taråŒ…"></a>é€šè¿‡FTPä¸Šä¼ è‡³æœåŠ¡å™¨å¹¶è§£å‹taråŒ…</h4><p><code>tar -zxvf &lt;taråŒ…&gt;</code><br>å¾—åˆ°ä¸€ä¸ªserver_decæ–‡ä»¶å¤¹,æ‰§è¡Œserver_decä¸‹çš„db2_installå¼€å§‹å®‰è£…<br>åˆ†åˆ«é”®å…¥YES YES å’ŒSERVERèµ°æµç¨‹å®‰è£…DB2</p><h4 id="åˆ›å»ºDB2ç”¨æˆ·åŠç»„"><a href="#åˆ›å»ºDB2ç”¨æˆ·åŠç»„" class="headerlink" title="åˆ›å»ºDB2ç”¨æˆ·åŠç»„"></a>åˆ›å»ºDB2ç”¨æˆ·åŠç»„</h4><p><code>useradd db2adm1</code><br><code>useradd db2inst1</code></p><h4 id="åˆ›å»ºdb2ç®¡ç†æœåŠ¡å™¨å®ä¾‹"><a href="#åˆ›å»ºdb2ç®¡ç†æœåŠ¡å™¨å®ä¾‹" class="headerlink" title="åˆ›å»ºdb2ç®¡ç†æœåŠ¡å™¨å®ä¾‹"></a>åˆ›å»ºdb2ç®¡ç†æœåŠ¡å™¨å®ä¾‹</h4><ul><li>rootç”¨æˆ·è¿›å…¥ <code>/home/db2adm1</code></li><li>æ‰§è¡Œ <code>/opt/ibm/db2/V11.5/instance/dascrt -u db2adm1</code></li></ul><h4 id="åˆ›å»ºDB2æ•°æ®åº“å®ä¾‹"><a href="#åˆ›å»ºDB2æ•°æ®åº“å®ä¾‹" class="headerlink" title="åˆ›å»ºDB2æ•°æ®åº“å®ä¾‹"></a>åˆ›å»ºDB2æ•°æ®åº“å®ä¾‹</h4><ul><li>rootç”¨æˆ·è¿›å…¥ <code>cd /home/db2inst1</code></li><li>æ‰§è¡Œ <code>/opt/IBM/db2/V8.1/instance/db2icrt -u db2inst1 db2inst1</code></li></ul><h4 id="æ£€æŸ¥db2æœåŠ¡ç«¯å£-æ²¡æœ‰åˆ™æ·»åŠ -ä¸€èˆ¬å®‰è£…ç¨‹åºå·²ç»è‡ªåŠ¨æ·»åŠ "><a href="#æ£€æŸ¥db2æœåŠ¡ç«¯å£-æ²¡æœ‰åˆ™æ·»åŠ -ä¸€èˆ¬å®‰è£…ç¨‹åºå·²ç»è‡ªåŠ¨æ·»åŠ " class="headerlink" title="æ£€æŸ¥db2æœåŠ¡ç«¯å£,æ²¡æœ‰åˆ™æ·»åŠ (ä¸€èˆ¬å®‰è£…ç¨‹åºå·²ç»è‡ªåŠ¨æ·»åŠ ):"></a>æ£€æŸ¥db2æœåŠ¡ç«¯å£,æ²¡æœ‰åˆ™æ·»åŠ (ä¸€èˆ¬å®‰è£…ç¨‹åºå·²ç»è‡ªåŠ¨æ·»åŠ ):</h4><p><code>vi /etc/services</code></p><h4 id="è®¾ç½®db2å®ä¾‹è¿è¡Œç¯å¢ƒå˜é‡"><a href="#è®¾ç½®db2å®ä¾‹è¿è¡Œç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®db2å®ä¾‹è¿è¡Œç¯å¢ƒå˜é‡"></a>è®¾ç½®db2å®ä¾‹è¿è¡Œç¯å¢ƒå˜é‡</h4><ul><li>è¿›å…¥db2inst1ç”¨æˆ·: <code>su - db2inst1</code></li><li>å¯åŠ¨æ•°æ®åº“: <code>db2start</code><br><span style="color:red;">å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯:</span><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[db2inst1@VM_0_5_centos ~]$ db2start</span><br><span class="line">db2start: error while loading shared libraries: libnuma.so.1: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure></li><li>åˆ‡æ¢rootç”¨æˆ·,å®‰è£…ç¼ºå°‘ç»„ä»¶ã€‚<code>yum install numactl</code></li><li>è®¾ç½®å…è®¸db2é€šè¿‡tcpipæ–¹å¼è®¿é—®: <code>db2set DB2COMM=tcpip </code></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
